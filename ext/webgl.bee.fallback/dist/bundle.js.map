{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///(webpack)/buildin/global.js","webpack:///(webpack)/buildin/harmony-module.js","webpack:///./src/browser-main.ts","webpack:///./src/gl/buffer.ts","webpack:///./src/gl/communicator.ts","webpack:///./src/gl/material.ts","webpack:///./src/gl/mesh.ts","webpack:///./src/gl/model.ts","webpack:///./src/gl/shader.ts","webpack:///./src/gl/texture.ts","webpack:///./src/gl/vertexAttrs.ts","webpack:///./src/object/modelObject.ts","webpack:///./src/renderer/events.ts","webpack:///./src/renderer/renderer.ts","webpack:///./src/scene/object.ts","webpack:///./src/scene/scene.ts","webpack:///./src/scene/technique.ts","webpack:///./src/scene/viewport.ts","webpack:///./src/techniques/lighting.ts","webpack:///./src/techniques/offscreen.ts","webpack:///./src/techniques/shadow.ts","webpack:///./src/util/assets.ts","webpack:///./src/util/glm.js","webpack:///./src/util/ulist.ts","webpack:///./src/util/xhr.ts"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/browser-main.ts\");\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","module.exports = function(originalModule) {\n\tif (!originalModule.webpackPolyfill) {\n\t\tvar module = Object.create(originalModule);\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"exports\", {\n\t\t\tenumerable: true\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","import { glm } from \"./util/glm\"\r\nimport { gl, Renderer } from \"./renderer/renderer\"\r\nimport Scene from \"./scene/scene\"\r\nimport { PerspectiveViewport } from \"./scene/viewport\"\r\nimport Model from \"./gl/model\"\r\nimport ModelObj from \"./object/modelObject\"\r\nimport { PointLight } from \"./techniques/lighting\";\r\nimport { ShadowTechnique } from \"./techniques/shadow\";\r\n\r\nlet renderer = new Renderer(document.body, true);\r\n\r\nlet scene = new Scene();\r\n\r\nlet camera = scene.createViewport<PerspectiveViewport>(new PerspectiveViewport()).get();\r\ncamera.position = glm.vec3(1, -0.5, 1.2);\r\ncamera.target = glm.vec3(-1, 0.5, -0.8);\r\n\r\nlet light = scene.createCommunicator<PointLight>(new PointLight()).get();\r\nlight.set(\"position\", glm.vec3(0, 0, 2));\r\nlight.set(\"diffuseIntensity\", 5);\r\nlight.set(\"ambientIntensity\", 0.7);\r\n\r\nlet shadow = scene.createTechnique<ShadowTechnique>(new ShadowTechnique());\r\n\r\ngl.clearColor(0, 0, 0, 0);\r\ngl.clearDepth(1);\r\n\r\nlet model = scene.createObject<ModelObj>(new ModelObj(\r\n\t\tModel.create(\"black-bishop.json\"))).get();\r\nmodel.scale(0.01);\r\n\r\ngl.enable(gl.DEPTH_TEST);\r\n\r\nrenderer.dispatch(\"render\", () => {\r\n\tscene.render();\r\n})\r\n\r\nrenderer.start();\r\n","import { gl } from \"../renderer/renderer\"\r\n\r\nclass BufferBase {\r\n\tconstructor(public readonly handle: any)\r\n\t{\r\n\t}\r\n}\r\n\r\nclass VBO extends BufferBase {\r\n\tconstructor() {\r\n\t\tsuper(gl.createBuffer());\r\n\t}\r\n\tbind() {\r\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.handle);\r\n\t}\r\n\tunbind() {\r\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, null);\r\n\t}\r\n\tdata(data: any[]) {\r\n\t\tgl.bufferData(gl.ARRAY_BUFFER, new Float32Array(data), gl.STATIC_DRAW);\r\n\t}\r\n}\r\n\r\nclass EBO extends BufferBase {\r\n\tconstructor() {\r\n\t\tsuper(gl.createBuffer());\r\n\t}\r\n\tbind() {\r\n\t\tgl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.handle);\r\n\t}\r\n\tunbind() {\r\n\t\tgl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\r\n\t}\r\n\tdata(data: any[]) {\r\n\t\tgl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(data), gl.STATIC_DRAW);\r\n\t}\r\n}\r\n\r\nclass FBO extends BufferBase {\r\n\tconstructor() {\r\n\t\tsuper(gl.createFramebuffer());\r\n\t}\r\n\tbind() {\r\n\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, this.handle);\r\n\t}\r\n\tunbind() {\r\n\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, null);\r\n\t}\r\n\tsetRenderBuffer(rbo: RBO, channel: number) {\r\n\t\tgl.framebufferRenderbuffer(gl.FRAMEBUFFER, channel, gl.RENDERBUFFER, rbo);\r\n\t}\r\n\tvalidate() {\r\n\t\tswitch (gl.checkFramebufferStatus(gl.FRAMEBUFFER)) {\r\n\t\t\tcase gl.FRAMEBUFFER_COMPLETE: break;\r\n\t\t\tcase gl.FRAMEBUFFER_INCOMPLETE_ATTACHMENT: \r\n\t\t\t\tthrow \"framebuffer incomplete attachment.\";\r\n\t\t\tcase gl.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:\r\n\t\t\t\tthrow \"framebuffer incomplete missing attachment.\";\r\n\t\t\tcase gl.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:\r\n\t\t\t\tthrow \"framebuffer incomplete dimensions.\";\r\n\t\t\tcase gl.FRAMEBUFFER_UNSUPPORTED:\r\n\t\t\t\tthrow \"framebuffer unsupported.\";\r\n\t\t\tdefault: \r\n\t\t\t\tthrow \"unknown framebuffer error.\";\r\n\t\t}\r\n\t}\r\n}\r\n\r\nclass RBO extends BufferBase {\r\n\tconstructor() {\r\n\t\tsuper(gl.createRenderbuffer());\r\n\t}\r\n\tbind() {\r\n\t\tgl.bindRenderbuffer(gl.RENDERBUFFER, this.handle);\r\n\t}\r\n\tunbind() {\r\n\t\tgl.bindRenderbuffer(gl.RENDERBUFFER, null);\r\n\t}\r\n}\r\n\r\nexport {\r\n\tVBO,\r\n\tEBO,\r\n\tFBO,\r\n\tRBO\r\n}\r\n","import { ulist, ulist_elem } from \"../util/ulist\";\r\nimport { Shader, Uniform, UniformType } from \"./shader\";\r\n\r\nclass Communicator {\r\n\tpublic static counters: { [key: string]: Uniform } = {};\r\n\r\n\tprotected data: { [key: string]: { data: any, uniform: Uniform } } = {};\r\n\r\n\tconstructor(public readonly type: string, private array: boolean = true) {\r\n\t\tif (array) {\r\n\t\t\tif (!(type in Communicator.counters)) {\r\n\t\t\t\tCommunicator.counters[type] = Shader.uniform(\"int\", \"g\" + type + \"_count\");\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tinvoke(index: number): boolean {\r\n\t\tif (this.array) {\r\n\t\t\tfor (let key in this.data) {\r\n\t\t\t\t// console.log(key, this.data[key].data);\r\n\t\t\t\tthis.data[key].uniform.subscribe(index).set(this.data[key].data);\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\tfor (let key in this.data) {\r\n\t\t\t\t// console.log(key, this.data[key].data);\r\n\t\t\t\tthis.data[key].uniform.set(this.data[key].data);\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\tset(key: string, value: any) {\r\n\t\tif (key in this.data) {\r\n\t\t\tthis.data[key].data = value;\r\n\t\t} else {\r\n\t\t\tthrow \"communicator key does not match any: \" + key;\r\n\t\t}\r\n\t}\r\n\tprotected init(uniforms: { [name: string]: { type: UniformType, init: any } }) {\r\n\t\tif (this.array) {\r\n\t\t\tfor (let name in uniforms) {\r\n\t\t\t\tthis.data[name] = {\r\n\t\t\t\t\tdata: uniforms[name].init, \r\n\t\t\t\t\tuniform: Shader.uniform(uniforms[name].type, \"g\" + this.type + \"_\" + name + \"[]\")\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tfor (let name in uniforms) {\r\n\t\t\t\tthis.data[name] = {\r\n\t\t\t\t\tdata: uniforms[name].init, \r\n\t\t\t\t\tuniform: Shader.uniform(uniforms[name].type, \"g\" + this.type)\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nclass Communicators {\r\n\tstatic communicators: Communicators[] = [];\r\n\tprivate data = new ulist<Communicator>();\r\n\r\n\tinvoke() {\r\n\t\tlet map: { [key: string]: number } = {};\r\n\t\tthis.data.visit((e: ulist_elem<Communicator>) => {\r\n\t\t\tlet communicator = e.get();\r\n\t\t\tif (!(communicator.type in map)) {\r\n\t\t\t\tmap[communicator.type] = 0;\r\n\t\t\t}\r\n\t\t\tif (communicator.invoke(map[communicator.type])) {\r\n\t\t\t\tmap[communicator.type]++;\r\n\t\t\t}\r\n\t\t});\r\n\t\tfor (let type in map) {\r\n\t\t\tCommunicator.counters[type].set(map[type]);\r\n\t\t}\r\n\t}\r\n\tadd(communicator: Communicator): ulist_elem<Communicator> {\r\n\t\treturn this.data.push(communicator);\r\n\t}\r\n\tuse() {\r\n\t\tCommunicators.communicators.push(this);\r\n\t}\r\n\tunuse() {\r\n\t\tif (Communicators.communicators.length) {\r\n\t\t\tCommunicators.communicators.pop();\r\n\t\t}\r\n\t}\r\n\tstatic get current(): Communicators {\r\n\t\tif (Communicators.communicators.length > 0) {\r\n\t\t\treturn Communicators.communicators[Communicators.communicators.length - 1];\r\n\t\t} else {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport {\r\n\tCommunicator,\r\n\tCommunicators\r\n}\r\n","import { Texture2D } from \"./texture\";\r\nimport { Uniform, Shader } from \"./shader\";\r\n\r\ntype MaterialProperty = {\r\n\tindex: number;\r\n\tkey: string;\r\n\tsemantic: number;\r\n\ttype: number;\r\n\tvalue: any;\r\n}\r\n\r\nconst textureType = {\r\n\t0x1: \"Diffuse\",\r\n\t0x2: \"Specular\",\r\n\t0x3: \"Ambient\",\r\n\t0x4: \"Emissive\",\r\n\t0x5: \"Height\",\r\n\t0x6: \"Normals\",\r\n\t0x7: \"Shininess\",\r\n\t0x8: \"Opacity\",\r\n\t0x9: \"Displacement\",\r\n\t0xa: \"Lightmap\",\r\n\t0xb: \"Reflection\"\r\n}\r\n\r\nexport default class Material {\r\n\tstatic materialPath: string = \"./materials/\";\r\n\r\n\tstatic keymap: { \r\n\t\t[key: string]: { [key: string]: (self: Material, prop: MaterialProperty, path: string) => void }\r\n\t} = {\r\n\t\tmat: {\r\n\t\t\tshininess: (self: Material, prop: MaterialProperty) => {\r\n\t\t\t\tself.attributes.push({\r\n\t\t\t\t\tvalue: prop.value,\r\n\t\t\t\t\tuniform: Shader.uniform(\"float\", \"gSpecularPower\")\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tshinpercent: (self: Material, prop: MaterialProperty) => {\r\n\t\t\t\tself.attributes.push({\r\n\t\t\t\t\tvalue: prop.value,\r\n\t\t\t\t\tuniform: Shader.uniform(\"float\", \"gSpecularIntensity\")\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\ttex: {\r\n\t\t\tfile: (self: Material, prop: MaterialProperty, path: string) => {\r\n\t\t\t\tif (prop.semantic in textureType) {\r\n\t\t\t\t\tconsole.log(textureType[prop.semantic]);\r\n\t\t\t\t\tself.textures[prop.semantic] = {\r\n\t\t\t\t\t\ttexture: new Texture2D(path + <string>prop.value),\r\n\t\t\t\t\t\tuniform: Shader.uniform(\"int\", \"g\" + textureType[prop.semantic])\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tprivate textures: { [key: number]: { texture: Texture2D, uniform: Uniform } } = {};\r\n\tprivate attributes: { value: any, uniform: Uniform } [] = [];\r\n\r\n\tconstructor(data: any, path: string = Material.materialPath) {\r\n\t\tfor (let prop of data.properties) {\r\n\t\t\tlet [ key, attr ] = prop.key.substring(1).split('.');\r\n\t\t\tif (key in Material.keymap) {\r\n\t\t\t\tif (attr in Material.keymap[key]) {\r\n\t\t\t\t\tMaterial.keymap[key][attr](this, <MaterialProperty>prop, path);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tuse() {\r\n\t\tlet i = 0;\r\n\t\tfor (let loc in this.textures) {\r\n\t\t\tthis.textures[loc].texture.invoke(i);\r\n\t\t\tthis.textures[loc].uniform.set(i);\r\n\t\t\ti += 1;\r\n\t\t}\r\n\t\tfor (let attr of this.attributes) {\r\n\t\t\tattr.uniform.set(attr.value);\r\n\t\t}\r\n\t}\r\n}\r\n","import { VertexAttrs, VAO } from \"./vertexAttrs\";\r\n\r\nexport default class Mesh {\r\n\tprivate readonly vao: VAO;\r\n\r\n\tconstructor(vertices: any, indices: number[] = undefined) {\r\n\t\tif (indices != undefined) {\r\n\t\t\tthis.vao = new VAO(vertices, indices);\r\n\t\t} else {\r\n\t\t\tthis.vao = new VAO(vertices);\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tthis.vao.bind();\r\n\t\t\tthis.vao.draw();\r\n\t\tthis.vao.unbind();\r\n\t}\r\n}\r\n","import assets from \"../util/assets\";\r\nimport Material from \"./material\";\r\nimport Mesh from \"./mesh\";\r\nimport { VertexAttrs } from \"./vertexAttrs\";\r\n\r\nconst vertexAttrMap = {\r\n\tvertices: \"pos3\",\r\n\tcolors: \"color4\",\r\n\tnormals: \"norm3\",\r\n\ttangents: \"tg3\",\r\n\tbitangents: \"bitg3\",\r\n\ttexturecoords: \"tex2\"\r\n}\r\n\r\nexport default class Model {\r\n\tprivate static modelPath = \"./assets/\"\r\n\tprivate static models: { [key: string]: Model } = {};\r\n\r\n\tprivate mesh: { [key: number]: { material: Material, mesh: Mesh[] } } = {};\r\n\r\n\tconstructor(name: string) {\r\n\t\tname = Model.modelPath + name;\r\n\t\tlet scene = assets.import(name);\r\n\t\tfor (let m of scene.meshes) {\r\n\t\t\tif (!(m.materialindex in this.mesh)) {\r\n\t\t\t\tthis.mesh[m.materialindex] = {\r\n\t\t\t\t\tmaterial: new Material(scene.materials[m.materialindex], Model.modelPath),\r\n\t\t\t\t\tmesh: []\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tthis.mesh[m.materialindex].mesh.push(Model.createMesh(m));\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tfor (let i in this.mesh) {\r\n\t\t\tthis.mesh[i].material.use();\r\n\t\t\tfor (let m of this.mesh[i].mesh) {\r\n\t\t\t\tm.render();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic create(name: string) {\r\n\t\tif (!(name in Model.models)) {\r\n\t\t\tModel.models[name] = new Model(name);\r\n\t\t}\r\n\t\treturn Model.models[name];\r\n\t}\r\n\tstatic createMesh(mesh: any): Mesh {\r\n\t\tlet attrs: any[] = [];\r\n\t\tfor (let attr in mesh) {\r\n\t\t\tif (attr in vertexAttrMap) {\r\n\t\t\t\tattrs.push(vertexAttrMap[attr]);\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet vs = new VertexAttrs(attrs);\r\n\t\tfor (let attr in mesh) {\r\n\t\t\tif (attr in vertexAttrMap) {\r\n\t\t\t\tvs.set(vertexAttrMap[attr], attr == \"texturecoords\" ? \r\n\t\t\t\tmesh[attr][0] : mesh[attr]);\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet indices: number[] = [];\r\n\t\tfor (let x of mesh.faces) {\r\n\t\t\tindices = indices.concat(x);\r\n\t\t}\r\n\t\treturn new Mesh(vs, indices);\r\n\t}\r\n}\r\n","import xhr from \"../util/xhr\"\r\nimport { glm } from \"../util/glm\"\r\nimport { gl, gl2 } from \"../renderer/renderer\"\r\nimport { Communicators } from \"./communicator\";\r\n\r\ntype UniformType = \"int\" | \"float\" | \"ivec2\" | \"vec2\" | \"ivec3\" | \"vec3\" | \"ivec4\" | \"vec4\" |\r\n\t\"mat2\" | \"mat3\" | \"mat4\";\r\n\r\nclass Uniform {\r\n\tprivate setter: (loc: WebGLUniformLocation, value: any) => void;\r\n\r\n\tconstructor(private name: string, private valueType: UniformType, private isArray: boolean) {\r\n\t\t// console.log(new UniformMap());\r\n\t\tswitch (valueType) {\r\n\t\t\tcase \"int\": this.setter = (location: WebGLUniformLocation, value: any) => \r\n\t\t\t\tgl.uniform1iv(location, new Int32Array([value])); break;\r\n\t\t\tcase \"float\": this.setter = (location: WebGLUniformLocation, value: any) => \r\n\t\t\t\tgl.uniform1fv(location, new Float32Array([value])); break;\r\n\t\t\tcase \"ivec2\": this.setter = (location: WebGLUniformLocation, value: any) => \r\n\t\t\t\tgl.uniform2iv(location, value.array); break;\r\n\t\t\tcase \"vec2\": this.setter = (location: WebGLUniformLocation, value: any) => \r\n\t\t\t\tgl.uniform2fv(location, value.array); break;\r\n\t\t\tcase \"ivec3\": this.setter = (location: WebGLUniformLocation, value: any) => \r\n\t\t\t\tgl.uniform3iv(location, value.array); break;\r\n\t\t\tcase \"vec3\": this.setter = (location: WebGLUniformLocation, value: any) => \r\n\t\t\t\tgl.uniform3fv(location, value.array); break;\r\n\t\t\tcase \"ivec4\": this.setter = (location: WebGLUniformLocation, value: any) => \r\n\t\t\t\tgl.uniform4iv(location, value.array); break;\r\n\t\t\tcase \"vec4\": this.setter = (location: WebGLUniformLocation, value: any) => \r\n\t\t\t\tgl.uniform4fv(location, value.array); break;\r\n\t\t\tcase \"mat2\": this.setter = (location: WebGLUniformLocation, value: any) => \r\n\t\t\t\tgl.uniformMatrix2fv(location, false, value.array); break;\r\n\t\t\tcase \"mat3\": this.setter = (location: WebGLUniformLocation, value: any) => \r\n\t\t\t\tgl.uniformMatrix4fv(location, false, value.array); break;\r\n\t\t\tcase \"mat4\": this.setter = (location: WebGLUniformLocation, value: any) => \r\n\t\t\t\tgl.uniformMatrix4fv(location, false, value.array); break;\r\n\t\t\tdefault: throw \"undefined uniform type\";\r\n\t\t}\r\n\t}\r\n\tset(value: any) {\r\n\t\ttry {\r\n\t\t\tif (!this.isArray) {\r\n\t\t\t\tthis.setter(gl.getUniformLocation(Shader.current.handle, this.name), value);\r\n\t\t\t} else {\r\n\t\t\t\tthrow 1;\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tif (e == 1) {\r\n\t\t\t\tthrow \"cannot assign value to a uniform array.\";\r\n\t\t\t} else {\r\n\t\t\t\t// console.warn(\"uniform variable does not exist: \" + this.name);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tsubscribe(offset: number): Uniform {\r\n\t\tif (!this.isArray) {\r\n\t\t\tthrow \"cannot subscribe a non-array uniform\";\r\n\t\t} else {\r\n\t\t\treturn new Uniform(this.name + \"[\" + offset + \"]\", this.valueType, false);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nclass Shader {\r\n\tprivate static readonly shaderPath = \"./shaders/\";\r\n\tprivate static stack: Shader[] = [];\r\n\tprivate static shaders: { [key: string]: Shader } = {};\r\n\t\r\n\tpublic readonly handle = gl.createProgram();\r\n\r\n\tconstructor(vsfilename: string, fsfilename: string) {\r\n\t\tvsfilename = Shader.shaderPath + (gl2 ? \"gl2/\" : \"gl/\") + vsfilename;\r\n\t\tfsfilename = Shader.shaderPath + (gl2 ? \"gl2/\" : \"gl/\") + fsfilename;\r\n\t\t// console.log(vsfilename);\r\n\t\t// console.log(fsfilename);\r\n\t\tlet vs = Shader.compileShader(xhr.getSync(vsfilename), gl.VERTEX_SHADER);\r\n\t\tlet fs = Shader.compileShader(xhr.getSync(fsfilename), gl.FRAGMENT_SHADER);\r\n\t\tgl.bindAttribLocation(this.handle, 0, \"Position\");\r\n\t\tgl.bindAttribLocation(this.handle, 1, \"Color\");\r\n\t\tgl.bindAttribLocation(this.handle, 2, \"Normal\");\r\n\t\tgl.bindAttribLocation(this.handle, 3, \"Tangent\");\r\n\t\tgl.bindAttribLocation(this.handle, 4, \"Bitangent\");\r\n\t\tgl.bindAttribLocation(this.handle, 5, \"TexCoord\");\r\n\t\tgl.bindAttribLocation(this.handle, 6, \"BoneIndex\");\r\n\t\tgl.bindAttribLocation(this.handle, 7, \"BoneWeight\");\r\n\t\tgl.attachShader(this.handle, vs);\r\n\t\tgl.attachShader(this.handle, fs);\r\n\t\tgl.linkProgram(this.handle);\r\n\t\tif (!gl.getProgramParameter(this.handle, gl.LINK_STATUS)) {\r\n\t\t\tthrow gl.getProgramInfoLog(this.handle);\r\n\t\t}\r\n\t}\r\n\r\n\tuse() {\r\n\t\tShader.current = this;\r\n\t\tgl.useProgram(this.handle);\r\n\t\tif (Communicators.current) {\r\n\t\t\tCommunicators.current.invoke();\r\n\t\t}\r\n\t}\r\n\tunuse() {\r\n\t\tShader.current = null;\r\n\t\tif (Shader.current && Communicators.current) {\r\n\t\t\tCommunicators.current.invoke();\r\n\t\t}\r\n\t\tgl.useProgram(Shader.current);\r\n\t}\r\n\tstatic uniform(valueType: UniformType, name: string): Uniform {\r\n\t\tlet p = name.indexOf(\"[]\");\r\n\t\tif (p != -1) {\r\n\t\t\treturn new Uniform(name.substring(0, name.indexOf(\"[]\")), valueType, true);\r\n\t\t} else {\r\n\t\t\treturn new Uniform(name, valueType, false);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate static compileShader(source: string, type: number): WebGLShader {\r\n\t\tlet shader = gl.createShader(type);\r\n\t\tgl.shaderSource(shader, source);\r\n\t\tgl.compileShader(shader);\r\n\t\tif (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\r\n\t\t\tthrow gl.getShaderInfoLog(shader);\r\n\t\t}\r\n\t\treturn shader;\r\n\t}\r\n\tpublic static create(name: string): Shader {\r\n\t\tif (!(name in Shader.shaders)) {\r\n\t\t\tShader.shaders[name] = new Shader(name + \".vs\", name + \".fs\");\r\n\t\t}\r\n\t\treturn Shader.shaders[name];\r\n\t}\r\n\tstatic get current(): Shader {\r\n\t\treturn Shader.stack.length ? Shader.stack[Shader.stack.length - 1] : null;\r\n\t}\r\n\tstatic set current(value: Shader) {\r\n\t\tif (value != null) {\r\n\t\t\tShader.stack.push(value);\r\n\t\t} else {\r\n\t\t\tif (Shader.stack.length) {\r\n\t\t\t\tShader.stack.pop();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport {\r\n\tUniform,\r\n\tUniformType,\r\n\tShader\r\n}","import { gl, Renderer, gl2 } from \"../renderer/renderer\";\r\nimport { FBO } from \"./buffer\";\r\n\r\nabstract class Texture {\r\n\tpublic readonly handle: number;\r\n\r\n\tconstructor(public readonly type: number) {\r\n\t\tthis.handle = <number>gl.createTexture();\r\n\t}\r\n\tinvoke(channel: number) {\r\n\t\tgl.activeTexture(gl.TEXTURE0 + channel);\r\n\t\tthis.bind();\r\n\t}\r\n\tbind() {\r\n\t\tgl.bindTexture(this.type, this.handle);\r\n\t}\r\n\tunbind() {\r\n\t\tgl.bindTexture(this.type, null);\r\n\t}\r\n}\r\n\r\nclass Texture2D extends Texture {\r\n\tprivate w: number;\r\n\tprivate h: number;\r\n\r\n\tconstructor(component: number);\r\n\tconstructor(component: number, width: number, height: number);\r\n\tconstructor(filename: string);\r\n\tconstructor(filename: string, usemipmap: boolean);\r\n\tconstructor(first?: any, second?: any, third?: any) {\r\n\t\tsuper(gl.TEXTURE_2D);\r\n\t\tif (typeof first == \"string\") {\r\n\t\t\tlet filename: string = first;\r\n\t\t\tlet usemipmap: boolean = second == undefined ? true : second;\r\n\t\t\tthis.bind();\r\n\t\t\t\tgl.texImage2D(this.type, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, new Uint8Array([0, 0, 0, 0]));\r\n\t\t\tthis.unbind();\r\n\t\t\tlet img = new Image();\r\n\t\t\timg.onload = () => {\r\n\t\t\t\tthis.bind();\r\n\t\t\t\t\tgl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, true);\r\n\t\t\t\t\tgl.texImage2D(this.type, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, img);\r\n\t\t\t\t\t// gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\r\n\t\t\t\t\t// gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\r\n\t\t\t\t\tgl.texParameteri(this.type, gl.TEXTURE_WRAP_S, gl.REPEAT);\r\n\t\t\t\t\tgl.texParameteri(this.type, gl.TEXTURE_WRAP_T, gl.REPEAT);\r\n\t\t\t\t\tgl.texParameteri(this.type, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\r\n\t\t\t\t\tif (usemipmap) {\r\n\t\t\t\t\t\tgl.texParameteri(this.type, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_LINEAR);\r\n\t\t\t\t\t\tgl.generateMipmap(this.type);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tgl.texParameteri(this.type, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\r\n\t\t\t\t\t}\r\n\t\t\t\tthis.unbind();\r\n\t\t\t\tthis.w = img.width; this.h = img.height;\r\n\t\t\t}\r\n\t\t\timg.src = filename;\r\n\t\t} else {\r\n\t\t\tlet component: number = first;\r\n\t\t\tthis.w = second;\r\n\t\t\tthis.h = third;\r\n\t\t\tif (second == undefined) {\r\n\t\t\t\tthis.w = Renderer.instance.canvas.width;\r\n\t\t\t\tthis.h = Renderer.instance.canvas.height;\r\n\t\t\t}\r\n\t\t\tthis.bind();\r\n\t\t\t\tswitch (component) {\r\n\t\t\t\t\tcase gl.DEPTH_COMPONENT: {\r\n\t\t\t\t\t\tgl.texImage2D(this.type, 0, component, this.w, this.h, 0, component, gl.FLOAT, null);\r\n\t\t\t\t\t} break;\r\n\t\t\t\t\tdefault: {\r\n\t\t\t\t\t\tgl.texImage2D(this.type, 0, component, this.w, this.h, 0, component, gl.UNSIGNED_BYTE, null);\r\n\t\t\t\t\t} break;\r\n\t\t\t\t}\r\n\t\t\t\t// } else {\r\n\t\t\t\t// \tgl.texImage2D(this.type, 0, component, 1, 1, 0, component, gl.FLOAT, null);\r\n\t\t\t\t// }\r\n\t\t\t\tgl.texParameterf(this.type, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\r\n\t\t\t\tgl.texParameterf(this.type, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\r\n\t\t\t\tgl.texParameterf(this.type, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n\t\t\t\tgl.texParameterf(this.type, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n\t\t\tthis.unbind();\r\n\t\t}\r\n\t}\r\n\r\n\tget width() {\r\n\t\treturn this.w;\r\n\t}\r\n\tget height() {\r\n\t\treturn this.h;\r\n\t}\r\n}\r\n\r\nclass TextureCube extends Texture {\r\n\tconstructor(component: number);\r\n\tconstructor(component: number, width?: number, height?: number) {\r\n\t\tsuper(gl.TEXTURE_CUBE_MAP);\r\n\t\tif (width == undefined) {\r\n\t\t\twidth = height = Renderer.instance.canvas.height;\r\n\t\t}\r\n\t\tthis.bind();\r\n\t\t\tgl.texParameterf(this.type, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\r\n\t\t\tgl.texParameterf(this.type, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\r\n\t\t\tgl.texParameterf(this.type, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n\t\t\tgl.texParameterf(this.type, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n\t\t\tif (gl2) {\r\n\t\t\t\tgl.texParameterf(this.type, gl2.TEXTURE_WRAP_R, gl.CLAMP_TO_EDGE);\r\n\t\t\t}\r\n\r\n\t\t\tfor (let i = 0; i != 6; ++i) {\r\n\t\t\t\tgl.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, component, \r\n\t\t\t\t\t\twidth, height, 0, component, gl.UNSIGNED_BYTE, null);\r\n\t\t\t}\r\n\t\tthis.unbind();\r\n\t}\r\n}\r\n\r\nexport {\r\n\tTexture,\r\n\tTexture2D,\r\n\tTextureCube\r\n}\r\n","import { glm } from \"../util/glm\"\r\nimport { gl } from \"../renderer/renderer\";\r\nimport { VBO, EBO } from \"./buffer\";\r\n\r\nconst attrLocation = {\r\n\tpos: 0, color: 1, norm: 2, tg: 3, bitg: 4, tex: 5, ibone: 6, wbone: 7\r\n};\r\n\r\ntype PositionType = \"pos2\" | \"pos3\" | \"pos4\"\r\ntype ColorType = \"color3\" | \"color4\"\r\ntype NormalType = \"norm3\" | \"norm4\"\r\ntype TangentType = \"tg3\" | \"tg4\"\r\ntype BitangentType = \"bitg3\" | \"bitg4\"\r\ntype TexcoordType = \"tex2\" | \"tex3\" | \"tex4\"\r\ntype BoneIndexType = \"ibone3\" | \"ibone4\"\r\ntype BoneWeightType = \"wbone3\" | \"wbone4\"\r\n\r\ntype VertexAttrType = PositionType | ColorType | NormalType |\r\n\tTangentType | BitangentType | TexcoordType | BoneIndexType | BoneWeightType;\r\n\r\nclass TypeMap {\r\n\tpos2: glm.vec2;\r\n\tpos3: glm.vec3;\r\n\tpos4: glm.vec4;\r\n\tcolor3: glm.vec3;\r\n\tcolor4: glm.vec4;\r\n\tnorm3: glm.vec3;\r\n\tnorm4: glm.vec4;\r\n\ttg3: glm.vec3;\r\n\ttg4: glm.vec4;\r\n\tbitg3: glm.vec3;\r\n\tbitg4: glm.vec4;\r\n\ttex2: glm.vec2;\r\n\ttex3: glm.vec3;\r\n\ttex4: glm.vec4;\r\n\tibone3: glm.vec3;\r\n\tibone4: glm.vec4;\r\n\twbone3: glm.vec3;\r\n\twbone4: glm.vec4;\r\n}\r\n\r\ntype VertexAttr<T extends VertexAttrType> = {\r\n\t[P in T]: TypeMap[P];\r\n}\r\n\r\ntype AttrRecord = {\r\n\tindex: number;\r\n\ttype: number;\r\n\tsize: number;\r\n\toffset: number;\r\n}\r\n\r\nclass VAO {\r\n\tprivate attrs: AttrRecord[];\r\n\tprivate attrSize: number;\r\n\tprivate numVertices: number;\r\n\tprivate numIndices: number;\r\n\tprivate vbo = new VBO();\r\n\tprivate ebo: EBO;\r\n\r\n\tconstructor(attr: VertexAttrs, indices: number[] = undefined) {\r\n\t\tthis.attrs = attr.attrs;\r\n\t\tthis.attrSize = attr.attrSize;\r\n\t\tthis.numVertices = attr.vertices.length / attr.component;\r\n\t\tthis.vbo.bind();\r\n\t\t\tthis.vbo.data(attr.vertices);\r\n\t\tthis.vbo.unbind();\r\n\t\tif (indices != undefined) {\r\n\t\t\tthis.ebo = new EBO();\r\n\t\t\tthis.ebo.bind();\r\n\t\t\t\tthis.ebo.data(indices);\r\n\t\t\tthis.ebo.unbind();\r\n\t\t\tthis.numIndices = indices.length;\r\n\t\t}\r\n\t}\r\n\tbind() {\r\n\t\tthis.vbo.bind();\r\n\t\tif (this.ebo) {\r\n\t\t\tthis.ebo.bind();\r\n\t\t}\r\n\t\tfor (let x of this.attrs) {\r\n\t\t\tgl.enableVertexAttribArray(x.index);\r\n\t\t\t// console.log(x.index, x.size, x.type, false, this.attrSize, x.offset);\r\n\t\t\tgl.vertexAttribPointer(x.index, x.size, x.type, false, this.attrSize, x.offset);\r\n\t\t}\r\n\t}\r\n\tunbind() {\r\n\t\tfor (let x of this.attrs) {\r\n\t\t\tgl.disableVertexAttribArray(x.index);\r\n\t\t}\r\n\t\tif (this.ebo) {\r\n\t\t\tthis.ebo.unbind();\r\n\t\t}\r\n\t\tthis.vbo.unbind();\r\n\t}\r\n\tdraw();\r\n\tdraw(mode: number, first: number, count: number); \r\n\tdraw(mode: number = undefined, first: number = undefined, count: number = undefined) {\r\n\t\tif (this.ebo) {\r\n\t\t\tgl.drawElements(gl.TRIANGLES, this.numIndices, gl.UNSIGNED_SHORT, 0);\r\n\t\t} else {\r\n\t\t\tif (mode != undefined) {\r\n\t\t\t\tgl.drawArrays(mode, first, count);\r\n\t\t\t} else {\r\n\t\t\t\tgl.drawArrays(gl.TRIANGLES, 0, this.numVertices);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nclass VertexAttrs {\r\n\tpublic readonly attrs: AttrRecord[] = [];\r\n\tpublic readonly attrSize: number = 0;\r\n\tpublic vertices: number[] = [];\r\n\tpublic readonly component: number = 0;\r\n\tprivate readonly attrLookup: { [key: string]: AttrRecord } = {};\r\n\r\n\tconstructor(private attrNames: VertexAttrType[]) {\r\n\t\tlet offset = 0;\r\n\t\tfor (let x of attrNames) {\r\n\t\t\tlet attr = {\r\n\t\t\t\tindex: <number>null,\r\n\t\t\t\ttype: <number>null,\r\n\t\t\t\tsize: <number>null,\r\n\t\t\t\toffset: <number>null\r\n\t\t\t};\r\n\t\t\tattr.index = attrLocation[x.substr(0, x.length - 1)];\r\n\t\t\tif (x[0] == \"i\") {\r\n\t\t\t\tattr.type = gl.INT;\r\n\t\t\t} else {\r\n\t\t\t\tattr.type = gl.FLOAT;\r\n\t\t\t}\r\n\t\t\tattr.size = +x.substr(-1);\r\n\t\t\tattr.offset = offset;\r\n\t\t\toffset += attr.size * VertexAttrs.getSize(attr.type);\r\n\t\t\tthis.attrs.push(attr);\r\n\t\t\tthis.attrLookup[x] = attr;\r\n\t\t\tthis.component += attr.size;\r\n\t\t}\r\n\t\tthis.attrSize = offset;\r\n\t}\r\n\tpush<T extends VertexAttrType>(vertex: VertexAttr<T>) {\r\n\t\tfor (let x of this.attrNames) {\r\n\t\t\tif (x in vertex) {\r\n\t\t\t\tthis.vertices = this.vertices.concat(vertex[x]);\r\n\t\t\t} else {\r\n\t\t\t\tthrow \"lack of vertex attribute: \" + x;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tset(type: VertexAttrType, vs: number[]) {\r\n\t\tlet i = 0;\r\n\t\tfor (let x of this.attrNames) {\r\n\t\t\tif (x == type) break;\r\n\t\t\ti += this.attrLookup[x].size;\r\n\t\t}\r\n\t\tlet dt = this.attrLookup[type].size;\r\n\t\tfor (let j = 0; j < vs.length; j += dt) {\r\n\t\t\tfor (let k = 0; k != dt; ++k) {\r\n\t\t\t\tthis.vertices[i + k] = vs[j + k];\r\n\t\t\t}\r\n\t\t\ti += this.component;\r\n\t\t}\r\n\t}\r\n\r\n\tstatic getSize(type: number): number {\r\n\t\tswitch (type) {\r\n\t\t\tcase gl.FLOAT: return 4;\r\n\t\t\tcase gl.BYTE: case gl.UNSIGNED_BYTE: return 1;\r\n\t\t\tcase gl.SHORT: case gl.UNSIGNED_SHORT: return 2;\r\n\t\t\tcase gl.INT: case gl.UNSIGNED_INT: return 4;\r\n\t\t\tdefault: throw \"unknown type\";\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport {\r\n\tVertexAttr,\r\n\tVertexAttrs,\r\n\tVAO\r\n}\r\n","import Obj from \"../scene/object\"\r\nimport { Viewport } from \"../scene/viewport\";\r\nimport { Shader } from \"../gl/shader\";\r\nimport Model from \"../gl/model\";\r\n\r\nexport default class ModelObj extends Obj {\r\n\tconstructor(private model: Model) {\r\n\t\tsuper();\r\n\t}\r\n\r\n\trender(viewport: Viewport, shader: Shader) {\r\n\t\tshader.use();\r\n\t\t\tthis.setViewMatrices(viewport);\r\n\t\t\tthis.model.render();\r\n\t\tshader.unuse();\r\n\t}\r\n}\r\n","import { ulist_elem, ulist } from \"../util/ulist\"\r\n\r\nclass Event {\r\n\tconstructor(private event: any, private elem: ulist_elem<any>)\r\n\t{\r\n\t}\r\n\tcancel() {\r\n\t\tdocument.removeEventListener(this.event, this.elem.get());\r\n\t\tthis.elem.remove();\r\n\t}\r\n}\r\n\r\nclass EventList {\r\n\tprivate events = new ulist<any>();\r\n\r\n\taddEvent(event: any, callback: any): Event {\r\n\t\tdocument.addEventListener(event, callback);\r\n\t\treturn new Event(event, this.events.push(callback));\r\n\t}\r\n}\r\n\r\nexport {\r\n\tEvent,\r\n\tEventList\r\n}\r\n","import { ulist_elem, ulist } from \"../util/ulist\"\r\nimport { Event, EventList } from \"./events\"\r\n\r\nlet gl: WebGLRenderingContext\r\nlet gl2: WebGL2RenderingContext\r\n\r\ntype RendererEventType = \"render\" | DocumentEventMap\r\n\r\ninterface RendererEvent {\r\n\tcancel: () => void;\r\n}\r\n\r\nclass RenderEvent {\r\n\tconstructor(private elem: ulist_elem<any>)\r\n\t{\r\n\t}\r\n\tcancel() {\r\n\t\tthis.elem.remove();\r\n\t}\r\n}\r\n\r\nclass Renderer {\r\n\tprivate static context: Renderer = null;\r\n\tprivate static prevTime: number = 0;\r\n\r\n\tprivate fps: number = 0;\r\n\tprivate events = new EventList();\r\n\tprivate renderers = new ulist<() => void>();\r\n\tpublic readonly canvas: HTMLCanvasElement;\r\n\tprivate canvasWrapper: HTMLDivElement;\r\n\tprivate animationRequest: number;\r\n\r\n\tconstructor(container: HTMLElement, fallback: boolean = false) {\r\n\t\tif (Renderer.context != null) {\r\n\t\t\tthrow \"Multiple WebGL contexts not supported.\";\r\n\t\t} else {\r\n\t\t\tthis.canvasWrapper = document.createElement(\"div\");\r\n\t\t\tthis.canvas = document.createElement(\"canvas\");\r\n\t\t\tthis.canvasWrapper.style.width = \"100%\";\r\n\t\t\tthis.canvasWrapper.style.height = \"100%\";\r\n\t\t\tthis.canvas.width = container.clientWidth;\r\n\t\t\tthis.canvas.height = container.clientHeight;\r\n\t\t\tthis.canvasWrapper.appendChild(this.canvas);\r\n\t\t\tthis.canvasWrapper.style[\"text-align\"] = \"center\";\r\n\t\t\tthis.canvasWrapper.style[\"overflow\"] = \"hidden\";\r\n\t\t\tcontainer.appendChild(this.canvasWrapper);\r\n\t\t\ttry {\r\n\t\t\t\tif (!fallback) {\r\n\t\t\t\t\tgl2 = <WebGL2RenderingContext>this.canvas.getContext(\"webgl2\");// || canvas.getContext(\"experimental-webgl\");\r\n\t\t\t\t}\r\n\t\t\t\tif (!gl2) {\r\n\t\t\t\t\tgl = <WebGLRenderingContext>this.canvas.getContext(\"webgl\") \r\n\t\t\t\t\t\t|| this.canvas.getContext(\"experimental-webgl\");\r\n\t\t\t\t\tif (!gl) {\r\n\t\t\t\t\t\tthrow \"\";\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.warn(\"webgl 2.0 is not supported on your browser, fallback to webgl 1.0.\");\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tgl = gl2;\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.error(\"webgl is not supported on your browser. \" + e);\r\n\t\t\t\tthrow \"webgl is not supported on your browser. \" + e;\r\n\t\t\t}\r\n\t\t}\r\n\t\tRenderer.context = this;\r\n\t}\r\n\r\n\tstatic get instance(): Renderer {\r\n\t\tif (Renderer.context) {\r\n\t\t\treturn Renderer.context;\r\n\t\t} else {\r\n\t\t\tthrow \"no current renderer.\";\r\n\t\t}\r\n\t}\r\n\tdispatch(eventType: RendererEventType, callback: any): RendererEvent {\r\n\t\tif (eventType == \"render\") {\r\n\t\t\treturn new RenderEvent(this.renderers.push(callback));\r\n\t\t} else {\r\n\t\t\treturn this.events.addEvent(eventType, callback);\r\n\t\t}\r\n\t}\r\n\tstart() {\r\n\t\tthis.animationRequest = window.requestAnimationFrame(this.render.bind(this));\r\n\t}\r\n\tprivate render(time: number) {\r\n\t\tthis.renderers.visit((e: ulist_elem<() => void>) => {\r\n\t\t\ttry {\r\n\t\t\t\te.get()();\r\n\t\t\t} catch (err) {\r\n\t\t\t\tconsole.error(err);\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (Math.floor(time / 1000) > Renderer.prevTime) {\r\n\t\t\tconsole.log(\"fps:\", this.fps + 1);\r\n\t\t\tRenderer.prevTime = Math.floor(time / 1000);\r\n\t\t\tthis.fps = 0;\r\n\t\t}\r\n\t\tthis.fps += 1;\r\n\t\tthis.animationRequest = window.requestAnimationFrame(this.render.bind(this));\r\n\t}\r\n}\r\n\r\nexport {\r\n\tgl,\r\n\tgl2,\r\n\tRendererEvent,\r\n\tRenderer\r\n}\r\n","import { glm } from \"../util/glm\"\r\nimport { Viewport } from \"./viewport\";\r\nimport { Shader, Uniform } from \"../gl/shader\";\r\nimport { gl } from \"../renderer/renderer\";\r\n\r\nclass ObjBase {\r\n\tprivate P = glm.vec3(0, 0, 0);\r\n\tprivate S = glm.vec3(1, 1, 1);\r\n\tprivate R = glm.vec3(0, 0, 0);\r\n\t\r\n\tprivate translateModified = true;\r\n\tprivate scaleModified = true;\r\n\tprivate rotateModified = true;\r\n\t\r\n\tprivate translateTrans: glm.mat4;\r\n\tprivate scaleTrans: glm.mat4;\r\n\tprivate rotateTrans: glm.mat4;\r\n\r\n\tprivate trans: glm.mat4;\r\n\r\n\tscaleIdentity() {\r\n\t\tthis.S = glm.vec3(1, 1, 1); \r\n\t\tthis.scaleModified = true;\t\t\r\n\t}\r\n\tscale(factor: number);\r\n\tscale(factor: glm.vec3);\r\n\tscale(factor: any) {\r\n\t\tthis.S[\"*=\"](factor);\r\n\t\tthis.scaleModified = true;\r\n\t}\r\n\tset scaleFactor(factor: glm.vec3) {\r\n\t\tif (typeof factor == \"number\") {\r\n\t\t\tthis.S = glm.vec3(factor, factor, factor);\r\n\t\t} else {\r\n\t\t\tthis.S = factor;\r\n\t\t}\r\n\t\tthis.scaleModified = true;\r\n\t}\r\n\ttranslateIdentity() {\r\n\t\tthis.P = glm.vec3(0, 0, 0);\r\n\t\tthis.translateModified = true;\r\n\t}\r\n\ttranslate(diff: glm.vec3) {\r\n\t\tthis.P[\"+=\"](diff);\r\n\t\tthis.translateModified = true;\r\n\t}\r\n\tget position(): glm.vec3 {\r\n\t\treturn this.P;\r\n\t}\r\n\tset position(pos: glm.vec3) {\r\n\t\tthis.P = pos;\r\n\t\tthis.translateModified = true;\r\n\t}\r\n\trotateIdentity() {\r\n\t\tthis.R = glm.vec3(0, 0, 0);\r\n\t\tthis.rotateModified = true;\r\n\t}\r\n\trotate(angle: glm.vec3) {\r\n\t\tthis.R[\"+=\"](angle);\r\n\t\tthis.rotateModified = true;\r\n\t}\r\n\tgetTrans(): glm.mat4 {\r\n\t\tif (this.translateModified || this.scaleModified || this.rotateModified) {\r\n\t\t\tif (this.translateModified) {\r\n\t\t\t\tthis.translateModified = false;\r\n\t\t\t\tthis.translateTrans = glm.mat4(\r\n\t\t\t\t\t1, 0, 0, 0,\r\n\t\t\t\t\t0, 1, 0, 0,\r\n\t\t\t\t\t0, 0, 1, 0,\r\n\t\t\t\t\tthis.P.x, this.P.y, this.P.z, 1\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tif (this.rotateModified) {\r\n\t\t\t\tthis.rotateModified = false;\r\n\t\t\t\tlet sinx = Math.sin(this.R.x), \r\n\t\t\t\t\tsiny = Math.sin(this.R.y), \r\n\t\t\t\t\tsinz = Math.sin(this.R.z),\r\n\t\t\t\t\tcosx = Math.cos(this.R.x), \r\n\t\t\t\t\tcosy = Math.cos(this.R.y), \r\n\t\t\t\t\tcosz = Math.cos(this.R.z),\r\n\t\t\t\t\tsycz = siny * cosz, sysz = siny * sinz;\r\n\t\t\t\tthis.rotateTrans = glm.mat4(\r\n\t\t\t\t\tcosz * cosy         , sinz * cosy         , siny     , 0,\r\n\t\t\t\t\t-cosx*sinz-sinx*sycz, cosx*cosz-sinx*sysz , sinx*cosy, 0,\r\n\t\t\t\t\tsinx*sinz-cosx*sycz , -sinx*cosz-cosx*sysz, cosx*cosy, 0,\r\n\t\t\t\t\t0                   , 0                   , 0        , 1\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tif (this.scaleModified) {\r\n\t\t\t\tthis.scaleModified = false;\r\n\t\t\t\tthis.scaleTrans = glm.mat4(\r\n\t\t\t\t\tthis.S.x, 0, 0, 0,\r\n\t\t\t\t\t0, this.S.y, 0, 0,\r\n\t\t\t\t\t0, 0, this.S.z, 0,\r\n\t\t\t\t\t0, 0, 0, 1\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tthis.trans = this.translateTrans[\"*\"](this.rotateTrans[\"*\"](this.scaleTrans));\r\n\t\t}\r\n\t\treturn this.trans;\r\n\t} \r\n}\r\n\r\nexport default abstract class Obj extends ObjBase {\r\n\tstatic gWVP: Uniform = Shader.uniform(\"mat4\", \"gWVP\");\r\n\tstatic gWorld: Uniform = Shader.uniform(\"mat4\", \"gWorld\");\r\n\tstatic gVP: Uniform = Shader.uniform(\"mat4\", \"gVP\");\r\n\tstatic gCameraWorldPos: Uniform = Shader.uniform(\"vec3\", \"gCameraWorldPos\");\r\n\r\n\tsetViewMatrices(viewport: Viewport) {\r\n\t\tObj.gWVP.set(viewport.getTrans()[\"*\"](this.getTrans()));\r\n\t\tObj.gWorld.set(this.getTrans());\r\n\t\tObj.gVP.set(viewport.getTrans());\r\n\t\tObj.gCameraWorldPos.set(viewport.position);\r\n\t}\r\n\tabstract render(viewport: Viewport, shader: Shader);\r\n}\r\n","import { ulist_elem, ulist } from \"../util/ulist\"\r\nimport Obj from \"./object\"\r\nimport { Viewport } from \"./viewport\";\r\nimport { Shader } from \"../gl/shader\";\r\nimport { Communicator, Communicators } from \"../gl/communicator\";\r\nimport { gl, Renderer, gl2 } from \"../renderer/renderer\";\r\nimport { glm } from \"../util/glm\"\r\nimport { Technique } from \"./technique\";\r\n\r\nexport default class Scene {\r\n\tprivate objects = new ulist<Obj>();\r\n\tprivate viewports = new ulist<Viewport>();\r\n\tprivate techniques = new ulist<Technique>();\r\n\tprivate communicators = new Communicators();\r\n\r\n\tcreateObject<T>(object: Obj): ulist_elem<T> {\r\n\t\treturn this.objects.push(object).translate<T>();\r\n\t}\r\n\tcreateViewport<T>(viewport: Viewport): ulist_elem<T> {\r\n\t\treturn this.viewports.push(viewport).translate<T>();\r\n\t}\r\n\tcreateCommunicator<T>(communicator: Communicator): ulist_elem<T> {\r\n\t\treturn this.communicators.add(communicator).translate<T>();\r\n\t}\r\n\tcreateTechnique<T>(technique: Technique): ulist_elem<T> {\r\n\t\treturn this.techniques.push(technique).translate<T>();\r\n\t}\r\n\r\n\trender() {\r\n\t\tthis.techniques.visit((e: ulist_elem<Technique>) => {\r\n\t\t\te.get().render(this.objects, this.viewports, this.communicators);\r\n\t\t});\r\n\t\tgl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\r\n\t\tthis.techniques.visit((e: ulist_elem<Technique>) => {\r\n\t\t\te.get().mainImage(this.objects, this.viewports, this.communicators);\r\n\t\t});\r\n\t\tthis.communicators.use();\r\n\t\t\tthis.viewports.visit((v: ulist_elem<Viewport>) => {\r\n\t\t\t\tthis.objects.visit((e: ulist_elem<Obj>) => {\r\n\t\t\t\t\te.get().render(v.get(), this.shader);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\tthis.communicators.unuse();\r\n\t}\r\n\r\n\tprivate shader = Shader.create(\"test\");\r\n}\r\n","import Obj from \"./object\"\r\nimport { Viewport } from \"./viewport\";\r\nimport { ulist } from \"../util/ulist\"\r\nimport { Communicators } from \"../gl/communicator\";\r\n\r\nabstract class Technique {\r\n\tabstract render(objects: ulist<Obj>, viewports: ulist<Viewport>, communicators: Communicators);\r\n\tabstract mainImage(objects: ulist<Obj>, viewports: ulist<Viewport>, communicators: Communicators);\r\n}\r\n\r\nexport {\r\n\tTechnique\r\n}\r\n","import { glm } from \"../util/glm\"\r\nimport { gl, Renderer } from \"../renderer/renderer\"\r\n\r\nclass Viewport {\r\n\tprivate N = glm.vec3(0, 1, 0);\r\n\tprivate P = glm.vec3(0, 0, 0);\r\n\tprivate Up = glm.vec3(0, 0, 1);\r\n\t\r\n\tprivate rotateModified = true;\r\n\tprivate translateModified = true;\r\n\r\n\tprivate rotateTrans: glm.mat4;\r\n\tprivate translateTrans: glm.mat4;\r\n\r\n\tprivate trans: glm.mat4;\r\n\r\n\tconstructor();\r\n\tconstructor(left: number, top: number, width: number, height: number);\r\n\tconstructor(public readonly left?: number, public readonly top?: number,\r\n\t\tpublic readonly width?: number, public readonly height?: number)\r\n\t{\r\n\t\tif (left != undefined) {\r\n\t\t\tgl.viewport(left, top, width, height);\r\n\t\t} else {\r\n\t\t\tthis.left = 0; this.top = 0;\r\n\t\t\tthis.width = Renderer.instance.canvas.width;\r\n\t\t\tthis.height = Renderer.instance.canvas.height;\r\n\t\t}\r\n\t}\r\n\r\n\tset target(target: glm.vec3) {\r\n\t\tthis.N = glm.normalize(target);\r\n\t\tthis.rotateModified = true;\r\n\t}\r\n\tget target(): glm.vec3 {\r\n\t\treturn this.N;\r\n\t}\r\n\tset up(up: glm.vec3) {\r\n\t\tthis.Up = glm.normalize(up);\r\n\t\tthis.rotateModified = true;\r\n\t}\r\n\tget up(): glm.vec3 {\r\n\t\treturn this.Up;\r\n\t}\r\n\ttranslate(diff: glm.vec3) {\r\n\t\tthis.P[\"+=\"](diff);\r\n\t\tthis.translateModified = true;\r\n\t}\r\n\tset position(position: glm.vec3) {\r\n\t\tthis.P = position;\r\n\t\tthis.translateModified = true;\r\n\t}\r\n\tget position(): glm.vec3 {\r\n\t\treturn this.P;\r\n\t}\r\n\tgetTrans(): glm.mat4 {\r\n\t\tif (this.translateModified || this.rotateModified) {\r\n\t\t\tif (this.translateModified) {\r\n\t\t\t\tthis.translateModified = false;\r\n\t\t\t\tthis.translateTrans = glm.mat4(\r\n\t\t\t\t\t1, 0, 0, 0,\r\n\t\t\t\t\t0, 1, 0, 0,\r\n\t\t\t\t\t0, 0, 1, 0,\r\n\t\t\t\t\t-this.P.x, -this.P.y, -this.P.z, 1\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tif (this.rotateModified) {\r\n\t\t\t\tthis.rotateModified = false;\r\n\t\t\t\tlet U = glm.normalize(glm.cross(this.N, this.Up));\r\n\t\t\t\tlet V = glm.cross(U, this.N);\r\n\t\t\t\tthis.rotateTrans = glm.mat4(\r\n\t\t\t\t\tU.x, V.x, -this.N.x, 0, \r\n\t\t\t\t\tU.y, V.y, -this.N.y, 0,\r\n\t\t\t\t\tU.z, V.z, -this.N.z, 0,\r\n\t\t\t\t\t0, 0, 0, 1\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tthis.trans = this.rotateTrans[\"*\"](this.translateTrans);\r\n\t\t}\r\n\t\treturn this.trans;\r\n\t}\r\n\tprotected modified(): boolean {\r\n\t\treturn this.translateModified || this.rotateModified;\r\n\t}\r\n}\r\n\r\nclass PerspectiveViewport extends Viewport {\r\n\tprivate perspectiveTrans: glm.mat4;\r\n\tprivate viewportTrans: glm.mat4;\r\n\r\n\tprivate perspectiveModified = true;\r\n\r\n\tprivate ffov = glm.radians(60);\r\n\tprivate fzNear = 1e-3;\r\n\tprivate fzFar = 1e5;\r\n\r\n\tconstructor();\r\n\tconstructor(left: number, top: number, width: number, height: number);\r\n\tconstructor(left?: number, top?: number, width?: number, height?: number) {\r\n\t\tsuper(left, top, width, height);\r\n\t}\r\n\r\n\tgetTrans(): glm.mat4 {\r\n\t\tif (this.perspectiveModified || super.modified()) {\r\n\t\t\tif (this.perspectiveModified) {\r\n\t\t\t\tthis.perspectiveModified = false;\r\n\t\t\t\tthis.perspectiveTrans = glm.perspective(this.ffov, \r\n\t\t\t\t\t\tthis.width / this.height, this.fzNear, this.fzFar);\r\n\t\t\t}\r\n\t\t\tthis.viewportTrans = this.perspectiveTrans[\"*\"](super.getTrans());\r\n\t\t}\r\n\t\treturn this.viewportTrans;\r\n\t}\r\n\tset fov(angle: number) {\r\n\t\tthis.ffov = angle;\r\n\t\tthis.perspectiveModified = true;\r\n\t}\r\n\tget fov(): number {\r\n\t\treturn this.ffov;\r\n\t}\r\n\tset zNear(z: number) {\r\n\t\tthis.fzNear = z;\r\n\t\tthis.perspectiveModified = true;\r\n\t}\r\n\tget zNear(): number {\r\n\t\treturn this.fzNear;\r\n\t}\r\n\tset zFar(z: number) {\r\n\t\tthis.fzFar = z;\r\n\t\tthis.perspectiveModified = true;\r\n\t}\r\n\tget zFar(): number {\r\n\t\treturn this.fzFar;\r\n\t}\r\n}\r\n\r\nexport {\r\n\tViewport,\r\n\tPerspectiveViewport\r\n}\r\n","import { Communicator } from \"../gl/communicator\";\r\nimport { glm } from \"../util/glm\";\r\n\r\nclass LightBase extends Communicator {\r\n\tconstructor(type: string = undefined) {\r\n\t\tsuper(type ? type: \"LightBase\");\r\n\t\tthis.init({\r\n\t\t\tcolor: {\r\n\t\t\t\ttype: \"vec3\",\r\n\t\t\t\tinit: glm.vec3(1, 1, 1)\r\n\t\t\t}, \r\n\t\t\tambientIntensity: {\r\n\t\t\t\ttype: \"float\",\r\n\t\t\t\tinit: .5\r\n\t\t\t},\r\n\t\t\tdiffuseIntensity: {\r\n\t\t\t\ttype: \"float\",\r\n\t\t\t\tinit: 1\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nclass PointLight extends LightBase {\r\n\tconstructor(type: string = undefined) {\r\n\t\tsuper(type ? type : \"PointLight\");\r\n\t\tthis.init({\r\n\t\t\tattenConstant: {\r\n\t\t\t\ttype: \"float\",\r\n\t\t\t\tinit: 1\r\n\t\t\t},\r\n\t\t\tattenLinear: {\r\n\t\t\t\ttype: \"float\",\r\n\t\t\t\tinit: .5\r\n\t\t\t},\r\n\t\t\tattenExp: {\r\n\t\t\t\ttype: \"float\",\r\n\t\t\t\tinit: .5\r\n\t\t\t},\r\n\t\t\tposition: {\r\n\t\t\t\ttype: \"vec3\",\r\n\t\t\t\tinit: glm.vec3(0, 0, 1)\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport {\r\n\tPointLight\r\n}\r\n","import { RBO, FBO } from \"../gl/buffer\";\r\nimport { gl, Renderer } from \"../renderer/renderer\";\r\nimport { Texture2D, TextureCube, Texture } from \"../gl/texture\";\r\nimport { Viewport } from \"../scene/viewport\";\r\nimport { glm } from \"../util/glm\"\r\n\r\n// class SingleChannelFBRB {\r\n// \tprivate rbo = new RBO();\r\n// \tprivate dbo = new RBO();\r\n// \tprivate fbo = new FBO();\r\n\r\n// \tconstructor() {\r\n// \t\tthis.fbo.bind();\r\n// \t\t\tthis.rbo.bind();\r\n// \t\t\t\tif (gl2) {\r\n// \t\t\t\t\tgl.renderbufferStorage(gl.RENDERBUFFER, gl2.R32F, \r\n// \t\t\t\t\t\tRenderer.instance.canvas.width, Renderer.instance.canvas.height);\r\n// \t\t\t\t} else {\r\n// \t\t\t\t\tgl.renderbufferStorage(gl.RENDERBUFFER, gl2.RGB, \r\n// \t\t\t\t\t\tRenderer.instance.canvas.width, Renderer.instance.canvas.height);\r\n// \t\t\t\t}\r\n// \t\t\t\tthis.fbo.setRenderBuffer(this.rbo, gl.COLOR_ATTACHMENT0);\r\n// \t\t\tthis.rbo.unbind();\r\n// \t\t\tthis.dbo.bind();\r\n// \t\t\t\tgl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_COMPONENT,\r\n// \t\t\t\t\tRenderer.instance.canvas.width, Renderer.instance.canvas.height);\r\n// \t\t\t\tthis.fbo.setRenderBuffer(this.dbo, gl.DEPTH_ATTACHMENT);\r\n// \t\t\tthis.dbo.unbind();\r\n// \t\tthis.fbo.unbind();\r\n// \t}\r\n\r\n// \tbind() {\r\n// \t\tthis.fbo.bind();\r\n// \t}\r\n// \tunbind() {\r\n// \t\tthis.rbo.bind();\r\n// \t}\r\n// }\r\n\r\nclass RenderBuffer {\r\n\tpublic readonly type = \"renderbuffer\";\r\n\tpublic readonly rbo = new RBO();\r\n\r\n\tconstructor(component: number)\r\n\tconstructor(component: number, width: number, height: number)\r\n\tconstructor(component: number, width?: number, height?: number) {\r\n\t\tif (width == undefined) {\r\n\t\t\twidth = Renderer.instance.canvas.width;\r\n\t\t\theight = Renderer.instance.canvas.height;\r\n\t\t}\r\n\t\tthis.rbo.bind();\r\n\t\t\tgl.renderbufferStorage(gl.RENDERBUFFER, component, width, height);\r\n\t\tthis.rbo.unbind();\r\n\t}\r\n}\r\n\r\nclass Offscreen {\r\n\tprivate fbo = new FBO();\r\n\r\n\tset(channel: number, texture: TextureCube, face: number);\r\n\tset(channel: number, texture: Texture2D)\r\n\tset(channel: number, renderbuffer: RenderBuffer);\r\n\tset(channel: number, second: any, face?: number) {\r\n\t\tif (second.type == \"renderbuffer\") {\r\n\t\t\tlet renderbuffer: RenderBuffer = second;\r\n\t\t\tgl.framebufferRenderbuffer(gl.FRAMEBUFFER, channel, gl.RENDERBUFFER, renderbuffer.rbo.handle);\r\n\t\t} else {\r\n\t\t\tlet texture: Texture = second;\r\n\t\t\tswitch (texture.type) {\r\n\t\t\t\tcase gl.TEXTURE_2D: {\r\n\t\t\t\t\tgl.framebufferTexture2D(gl.FRAMEBUFFER, channel, gl.TEXTURE_2D, texture.handle, 0);\r\n\t\t\t\t} break;\r\n\t\t\t\tcase gl.TEXTURE_CUBE_MAP: {\r\n\t\t\t\t\tgl.framebufferTexture2D(gl.FRAMEBUFFER, channel, \r\n\t\t\t\t\t\tgl.TEXTURE_CUBE_MAP_POSITIVE_X + face, texture.handle, 0);\r\n\t\t\t\t} break;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tbind() {\r\n\t\tthis.fbo.bind();\r\n\t}\r\n\tvalidate() {\r\n\t\tthis.fbo.validate();\r\n\t}\r\n\tunbind() {\r\n\t\tthis.fbo.unbind();\r\n\t}\r\n}\r\n\r\nexport {\r\n\tRenderBuffer,\r\n\tOffscreen\r\n}\r\n","import Obj from \"../scene/object\"\r\nimport { Viewport } from \"../scene/viewport\";\r\nimport { Shader, Uniform } from \"../gl/shader\";\r\nimport { ulist_elem, ulist } from \"../util/ulist\"\r\nimport { Offscreen, RenderBuffer } from \"../techniques/offscreen\";\r\nimport { Communicator, Communicators } from \"../gl/communicator\";\r\nimport { gl, Renderer, gl2 } from \"../renderer/renderer\";\r\nimport { Texture2D, TextureCube } from \"../gl/texture\";\r\nimport { glm } from \"../util/glm\"\r\nimport { Technique } from \"../scene/technique\";\r\nimport { RBO } from \"../gl/buffer\";\r\n\r\nclass ShadowCommunicator extends Communicator {\r\n\tconstructor() {\r\n\t\tsuper(\"Shadow\");\r\n\t\tthis.init({\r\n\t\t\tShadowMap: {\r\n\t\t\t\ttype: \"int\",\r\n\t\t\t\tinit: 0\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nclass ShadowTechnique extends Technique {\r\n\tprivate offscreen = new Offscreen();\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.offscreen.bind();\r\n\t\t\tthis.offscreen.set(gl.DEPTH_ATTACHMENT, new RenderBuffer(\r\n\t\t\t\t\tgl.DEPTH_COMPONENT16, Renderer.instance.canvas.height,\r\n\t\t\t\t\tRenderer.instance.canvas.height));\r\n\t\tthis.offscreen.unbind();\r\n\t}\r\n\r\n\trender(objects: ulist<Obj>, viewports: ulist<Viewport>, communicators: Communicators) {\r\n\t\tgl.cullFace(gl.FRONT);\r\n\t\tgl.clearColor(1, 1, 1, 1);\r\n\t\tthis.offscreen.bind();\r\n\t\t\tcommunicators.use();\r\n\t\t\t\tfor (let i = 0; i != 6; ++i) {\r\n\t\t\t\t\tthis.offscreen.set(gl.COLOR_ATTACHMENT0, this.shadowTexture, i);\r\n\t\t\t\t\tthis.offscreen.validate();\r\n\r\n\t\t\t\t\tgl.clear(gl.DEPTH_BUFFER_BIT | gl.COLOR_BUFFER_BIT);\r\n\t\t\t\t\t[ this.lightCamera.target, this.lightCamera.up ] = ShadowTechnique.cameraPositions[i];\r\n\t\t\t\t\tobjects.visit((e: ulist_elem<Obj>) => {\r\n\t\t\t\t\t\te.get().render(this.lightCamera, this.shader);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\tcommunicators.unuse();\r\n\t\t\tthis.offscreen.unbind();\r\n\t\tgl.clearColor(0, 0, 0, 0);\r\n\t\tgl.cullFace(gl.BACK);\r\n\t}\r\n\tmainImage(objects: ulist<Obj>, viewports: ulist<Viewport>, communicators: Communicators) {\r\n\t\tif (this.communicator != null) {\r\n\t\t\tthis.communicator.remove();\r\n\t\t}\r\n\t\tthis.communicator = communicators.add(this.gShadowMap);\r\n\t}\r\n\r\n\tprivate shader = Shader.create(\"shadow\");\r\n\r\n\tprivate communicator: ulist_elem<Communicator> = null;\r\n\tprivate gShadowMap: ShadowCommunicator = new ShadowCommunicator();\r\n\tprivate shadowTexture: TextureCube = new TextureCube(gl.RGB);\r\n\r\n\tprivate lightCamera: Viewport = new Viewport();\r\n\r\n\tstatic cameraPositions = [\r\n\t\t[ glm.vec3(1, 0, 0), glm.vec3(0, -1, 0) ],\r\n\t\t[ glm.vec3(-1, 0, 0), glm.vec3(0, -1, 0) ],\r\n\t\t[ glm.vec3(0, 1, 0), glm.vec3(0, 0, 1) ],\r\n\t\t[ glm.vec3(0, -1, 0), glm.vec3(0, 0, -1) ],\r\n\t\t[ glm.vec3(0, 0, 1), glm.vec3(0, -1, 0) ],\r\n\t\t[ glm.vec3(0, 0, -1), glm.vec3(0, -1, 0) ]\r\n\t];\r\n}\r\n\r\nexport {\r\n\tShadowTechnique\r\n}\r\n","import xhr from \"../util/xhr\"\r\n\r\nexport default class assets {\r\n\tstatic importObj(filename: string): any {\r\n\r\n\t}\r\n\tstatic importJson(filename: string): any {\r\n\t\ttry {\r\n\t\t\tlet src = xhr.getSync(filename);\r\n\t\t\treturn JSON.parse(src);\r\n\t\t} catch (e) {\r\n\t\t\tthrow \"failed to import asset due to previous errors: \" + e;\r\n\t\t}\r\n\t}\r\n\tstatic import(filename: string): any {\r\n\t\tlet format = filename.substring(filename.lastIndexOf('.') + 1);\r\n\t\tformat = format.toLowerCase();\r\n\t\tswitch (format) {\r\n\t\t\tcase \"json\": return assets.importJson(filename);\r\n\t\t\tcase \"obj\": return assets.importObj(filename);\r\n\t\t\tdefault: throw \"unknown model format: \" + format;\r\n\t\t}\r\n\t}\r\n}\r\n","/*! glm-js built 2017-04-02 11:34:38-04:00 | (c) humbletim | http://humbletim.github.io/glm-js */\r\nlet glm = (function declare_glmjs_glmatrix(globals, $GLM_log, $GLM_console_log) { var GLM, GLMAT, GLMAT_VERSION, GLMJS_PREFIX, $GLM_console_factory, glm; ArrayBuffer.exists;\r\n\t/*\r\n\t\r\n\t --------------------------------------------------------------------------\r\n\t glm-js | (c) humbletim | http://humbletim.github.io/glm-js\r\n\t --------------------------------------------------------------------------\r\n\t\r\n\t The MIT License (MIT)\r\n\t\r\n\t Copyright (c) 2015-2016 humbletim\r\n\t\r\n\t Permission is hereby granted, free of charge, to any person obtaining a copy\r\n\t of this software and associated documentation files (the \"Software\"), to deal\r\n\t in the Software without restriction, including without limitation the rights\r\n\t to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n\t copies of the Software, and to permit persons to whom the Software is\r\n\t furnished to do so, subject to the following conditions:\r\n\t\r\n\t The above copyright notice and this permission notice shall be included in all\r\n\t copies or substantial portions of the Software.\r\n\t\r\n\t THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n\t IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n\t FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n\t AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n\t LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n\t OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\n\t SOFTWARE.\r\n\t\r\n\t --------------------------------------------------------------------------\r\n\t gl-matrix | (c) Brandon Jones, Colin MacKenzie IV | http://glmatrix.net/\r\n\t --------------------------------------------------------------------------\r\n\t\r\n\t Copyright (c) 2013 Brandon Jones, Colin MacKenzie IV\r\n\t\r\n\t This software is provided 'as-is', without any express or implied\r\n\t warranty. In no event will the authors be held liable for any damages\r\n\t arising from the use of this software.\r\n\t\r\n\t Permission is granted to anyone to use this software for any purpose,\r\n\t including commercial applications, and to alter it and redistribute it\r\n\t freely, subject to the following restrictions:\r\n\t\r\n\t  1. The origin of this software must not be misrepresented; you must not\r\n\t\t claim that you wrote the original software. If you use this software\r\n\t\t in a product, an acknowledgment in the product documentation would be\r\n\t\t appreciated but is not required.\r\n\t\r\n\t  2. Altered source versions must be plainly marked as such, and must not\r\n\t\t be misrepresented as being the original software.\r\n\t\r\n\t  3. This notice may not be removed or altered from any source distribution.\r\n\t*/\r\n\tGLMAT={};GLMAT_VERSION=\"2.2.2\";\r\n\t(function(a){a.VERSION=GLMAT_VERSION;if(!b)var b=1E-6;if(!c)var c=\"undefined\"!==typeof Float32Array?Float32Array:Array;if(!e)var e=Math.random;var d={setMatrixArrayType:function(y){c=y}};\"undefined\"!==typeof a&&(a.glMatrix=d);var h=Math.PI/180;d.toRadian=function(y){return y*h};d={create:function(){var y=new c(2);y[0]=0;y[1]=0;return y},clone:function(y){var a=new c(2);a[0]=y[0];a[1]=y[1];return a},fromValues:function(y,a){var v=new c(2);v[0]=y;v[1]=a;return v},copy:function(y,a){y[0]=a[0];y[1]=a[1];\r\n\treturn y},set:function(y,a,v){y[0]=a;y[1]=v;return y},add:function(y,a,v){y[0]=a[0]+v[0];y[1]=a[1]+v[1];return y},subtract:function(y,a,v){y[0]=a[0]-v[0];y[1]=a[1]-v[1];return y}};d.sub=d.subtract;d.multiply=function(y,a,v){y[0]=a[0]*v[0];y[1]=a[1]*v[1];return y};d.mul=d.multiply;d.divide=function(y,a,v){y[0]=a[0]/v[0];y[1]=a[1]/v[1];return y};d.div=d.divide;d.min=function(y,a,v){y[0]=Math.min(a[0],v[0]);y[1]=Math.min(a[1],v[1]);return y};d.max=function(y,a,v){y[0]=Math.max(a[0],v[0]);y[1]=Math.max(a[1],\r\n\tv[1]);return y};d.scale=function(y,a,v){y[0]=a[0]*v;y[1]=a[1]*v;return y};d.scaleAndAdd=function(y,a,v,b){y[0]=a[0]+v[0]*b;y[1]=a[1]+v[1]*b;return y};d.distance=function(a,f){var v=f[0]-a[0],b=f[1]-a[1];return Math.sqrt(v*v+b*b)};d.dist=d.distance;d.squaredDistance=function(a,f){var v=f[0]-a[0],b=f[1]-a[1];return v*v+b*b};d.sqrDist=d.squaredDistance;d.length=function(a){var f=a[0];a=a[1];return Math.sqrt(f*f+a*a)};d.len=d.length;d.squaredLength=function(a){var f=a[0];a=a[1];return f*f+a*a};d.sqrLen=\r\n\td.squaredLength;d.negate=function(a,f){a[0]=-f[0];a[1]=-f[1];return a};d.inverse=function(a,f){a[0]=1/f[0];a[1]=1/f[1];return a};d.normalize=function(a,f){var v=f[0],b=f[1],v=v*v+b*b;0<v&&(v=1/Math.sqrt(v),a[0]=f[0]*v,a[1]=f[1]*v);return a};d.dot=function(a,f){return a[0]*f[0]+a[1]*f[1]};d.cross=function(a,f,v){f=f[0]*v[1]-f[1]*v[0];a[0]=a[1]=0;a[2]=f;return a};d.lerp=function(a,f,v,b){var c=f[0];f=f[1];a[0]=c+b*(v[0]-c);a[1]=f+b*(v[1]-f);return a};d.random=function(a,f){f=f||1;var v=2*e()*Math.PI;\r\n\ta[0]=Math.cos(v)*f;a[1]=Math.sin(v)*f;return a};d.transformMat2=function(a,f,v){var b=f[0];f=f[1];a[0]=v[0]*b+v[2]*f;a[1]=v[1]*b+v[3]*f;return a};d.transformMat2d=function(a,f,v){var b=f[0];f=f[1];a[0]=v[0]*b+v[2]*f+v[4];a[1]=v[1]*b+v[3]*f+v[5];return a};d.transformMat3=function(a,f,b){var c=f[0];f=f[1];a[0]=b[0]*c+b[3]*f+b[6];a[1]=b[1]*c+b[4]*f+b[7];return a};d.transformMat4=function(a,f,b){var c=f[0];f=f[1];a[0]=b[0]*c+b[4]*f+b[12];a[1]=b[1]*c+b[5]*f+b[13];return a};var j=d.create();d.forEach=function(a,\r\n\tf,b,c,d,e){f||(f=2);b||(b=0);for(c=c?Math.min(c*f+b,a.length):a.length;b<c;b+=f)j[0]=a[b],j[1]=a[b+1],d(j,j,e),a[b]=j[0],a[b+1]=j[1];return a};d.str=function(a){return\"vec2(\"+a[0]+\", \"+a[1]+\")\"};\"undefined\"!==typeof a&&(a.vec2=d);var g={create:function(){var a=new c(3);a[0]=0;a[1]=0;a[2]=0;return a},clone:function(a){var f=new c(3);f[0]=a[0];f[1]=a[1];f[2]=a[2];return f},fromValues:function(a,f,b){var P=new c(3);P[0]=a;P[1]=f;P[2]=b;return P},copy:function(a,f){a[0]=f[0];a[1]=f[1];a[2]=f[2];return a},\r\n\tset:function(a,f,b,c){a[0]=f;a[1]=b;a[2]=c;return a},add:function(a,f,b){a[0]=f[0]+b[0];a[1]=f[1]+b[1];a[2]=f[2]+b[2];return a},subtract:function(a,f,b){a[0]=f[0]-b[0];a[1]=f[1]-b[1];a[2]=f[2]-b[2];return a}};g.sub=g.subtract;g.multiply=function(a,f,b){a[0]=f[0]*b[0];a[1]=f[1]*b[1];a[2]=f[2]*b[2];return a};g.mul=g.multiply;g.divide=function(a,f,b){a[0]=f[0]/b[0];a[1]=f[1]/b[1];a[2]=f[2]/b[2];return a};g.div=g.divide;g.min=function(a,f,b){a[0]=Math.min(f[0],b[0]);a[1]=Math.min(f[1],b[1]);a[2]=Math.min(f[2],\r\n\tb[2]);return a};g.max=function(a,f,b){a[0]=Math.max(f[0],b[0]);a[1]=Math.max(f[1],b[1]);a[2]=Math.max(f[2],b[2]);return a};g.scale=function(a,f,b){a[0]=f[0]*b;a[1]=f[1]*b;a[2]=f[2]*b;return a};g.scaleAndAdd=function(a,f,b,c){a[0]=f[0]+b[0]*c;a[1]=f[1]+b[1]*c;a[2]=f[2]+b[2]*c;return a};g.distance=function(a,f){var b=f[0]-a[0],c=f[1]-a[1],d=f[2]-a[2];return Math.sqrt(b*b+c*c+d*d)};g.dist=g.distance;g.squaredDistance=function(a,f){var b=f[0]-a[0],c=f[1]-a[1],d=f[2]-a[2];return b*b+c*c+d*d};g.sqrDist=\r\n\tg.squaredDistance;g.length=function(a){var f=a[0],b=a[1];a=a[2];return Math.sqrt(f*f+b*b+a*a)};g.len=g.length;g.squaredLength=function(a){var f=a[0],b=a[1];a=a[2];return f*f+b*b+a*a};g.sqrLen=g.squaredLength;g.negate=function(a,f){a[0]=-f[0];a[1]=-f[1];a[2]=-f[2];return a};g.inverse=function(a,f){a[0]=1/f[0];a[1]=1/f[1];a[2]=1/f[2];return a};g.normalize=function(a,f){var b=f[0],c=f[1],d=f[2],b=b*b+c*c+d*d;0<b&&(b=1/Math.sqrt(b),a[0]=f[0]*b,a[1]=f[1]*b,a[2]=f[2]*b);return a};g.dot=function(a,f){return a[0]*\r\n\tf[0]+a[1]*f[1]+a[2]*f[2]};g.cross=function(a,f,b){var c=f[0],d=f[1];f=f[2];var e=b[0],l=b[1];b=b[2];a[0]=d*b-f*l;a[1]=f*e-c*b;a[2]=c*l-d*e;return a};g.lerp=function(a,f,b,c){var d=f[0],e=f[1];f=f[2];a[0]=d+c*(b[0]-d);a[1]=e+c*(b[1]-e);a[2]=f+c*(b[2]-f);return a};g.random=function(a,f){f=f||1;var b=2*e()*Math.PI,c=2*e()-1,d=Math.sqrt(1-c*c)*f;a[0]=Math.cos(b)*d;a[1]=Math.sin(b)*d;a[2]=c*f;return a};g.transformMat4=function(a,f,b){var c=f[0],d=f[1];f=f[2];var e=b[3]*c+b[7]*d+b[11]*f+b[15],e=e||1;a[0]=\r\n\t(b[0]*c+b[4]*d+b[8]*f+b[12])/e;a[1]=(b[1]*c+b[5]*d+b[9]*f+b[13])/e;a[2]=(b[2]*c+b[6]*d+b[10]*f+b[14])/e;return a};g.transformMat3=function(a,f,b){var c=f[0],d=f[1];f=f[2];a[0]=c*b[0]+d*b[3]+f*b[6];a[1]=c*b[1]+d*b[4]+f*b[7];a[2]=c*b[2]+d*b[5]+f*b[8];return a};g.transformQuat=function(a,f,b){var c=f[0],d=f[1],e=f[2];f=b[0];var l=b[1],x=b[2];b=b[3];var u=b*c+l*e-x*d,J=b*d+x*c-f*e,g=b*e+f*d-l*c,c=-f*c-l*d-x*e;a[0]=u*b+c*-f+J*-x-g*-l;a[1]=J*b+c*-l+g*-f-u*-x;a[2]=g*b+c*-x+u*-l-J*-f;return a};g.rotateX=\r\n\tfunction(a,f,b,c){var d=[],e=[];d[0]=f[0]-b[0];d[1]=f[1]-b[1];d[2]=f[2]-b[2];e[0]=d[0];e[1]=d[1]*Math.cos(c)-d[2]*Math.sin(c);e[2]=d[1]*Math.sin(c)+d[2]*Math.cos(c);a[0]=e[0]+b[0];a[1]=e[1]+b[1];a[2]=e[2]+b[2];return a};g.rotateY=function(a,f,b,c){var d=[],e=[];d[0]=f[0]-b[0];d[1]=f[1]-b[1];d[2]=f[2]-b[2];e[0]=d[2]*Math.sin(c)+d[0]*Math.cos(c);e[1]=d[1];e[2]=d[2]*Math.cos(c)-d[0]*Math.sin(c);a[0]=e[0]+b[0];a[1]=e[1]+b[1];a[2]=e[2]+b[2];return a};g.rotateZ=function(a,f,b,c){var d=[],e=[];d[0]=f[0]-\r\n\tb[0];d[1]=f[1]-b[1];d[2]=f[2]-b[2];e[0]=d[0]*Math.cos(c)-d[1]*Math.sin(c);e[1]=d[0]*Math.sin(c)+d[1]*Math.cos(c);e[2]=d[2];a[0]=e[0]+b[0];a[1]=e[1]+b[1];a[2]=e[2]+b[2];return a};var k=g.create();g.forEach=function(a,f,b,c,d,e){f||(f=3);b||(b=0);for(c=c?Math.min(c*f+b,a.length):a.length;b<c;b+=f)k[0]=a[b],k[1]=a[b+1],k[2]=a[b+2],d(k,k,e),a[b]=k[0],a[b+1]=k[1],a[b+2]=k[2];return a};g.str=function(a){return\"vec3(\"+a[0]+\", \"+a[1]+\", \"+a[2]+\")\"};\"undefined\"!==typeof a&&(a.vec3=g);var i={create:function(){var a=\r\n\tnew c(4);a[0]=0;a[1]=0;a[2]=0;a[3]=0;return a},clone:function(a){var f=new c(4);f[0]=a[0];f[1]=a[1];f[2]=a[2];f[3]=a[3];return f},fromValues:function(a,f,b,d){var e=new c(4);e[0]=a;e[1]=f;e[2]=b;e[3]=d;return e},copy:function(a,f){a[0]=f[0];a[1]=f[1];a[2]=f[2];a[3]=f[3];return a},set:function(a,f,b,c,d){a[0]=f;a[1]=b;a[2]=c;a[3]=d;return a},add:function(a,f,b){a[0]=f[0]+b[0];a[1]=f[1]+b[1];a[2]=f[2]+b[2];a[3]=f[3]+b[3];return a},subtract:function(a,f,b){a[0]=f[0]-b[0];a[1]=f[1]-b[1];a[2]=f[2]-b[2];\r\n\ta[3]=f[3]-b[3];return a}};i.sub=i.subtract;i.multiply=function(a,f,b){a[0]=f[0]*b[0];a[1]=f[1]*b[1];a[2]=f[2]*b[2];a[3]=f[3]*b[3];return a};i.mul=i.multiply;i.divide=function(a,f,b){a[0]=f[0]/b[0];a[1]=f[1]/b[1];a[2]=f[2]/b[2];a[3]=f[3]/b[3];return a};i.div=i.divide;i.min=function(a,f,b){a[0]=Math.min(f[0],b[0]);a[1]=Math.min(f[1],b[1]);a[2]=Math.min(f[2],b[2]);a[3]=Math.min(f[3],b[3]);return a};i.max=function(a,f,b){a[0]=Math.max(f[0],b[0]);a[1]=Math.max(f[1],b[1]);a[2]=Math.max(f[2],b[2]);a[3]=\r\n\tMath.max(f[3],b[3]);return a};i.scale=function(a,f,b){a[0]=f[0]*b;a[1]=f[1]*b;a[2]=f[2]*b;a[3]=f[3]*b;return a};i.scaleAndAdd=function(a,f,b,c){a[0]=f[0]+b[0]*c;a[1]=f[1]+b[1]*c;a[2]=f[2]+b[2]*c;a[3]=f[3]+b[3]*c;return a};i.distance=function(a,f){var b=f[0]-a[0],c=f[1]-a[1],d=f[2]-a[2],e=f[3]-a[3];return Math.sqrt(b*b+c*c+d*d+e*e)};i.dist=i.distance;i.squaredDistance=function(a,f){var b=f[0]-a[0],c=f[1]-a[1],d=f[2]-a[2],e=f[3]-a[3];return b*b+c*c+d*d+e*e};i.sqrDist=i.squaredDistance;i.length=function(a){var f=\r\n\ta[0],b=a[1],c=a[2];a=a[3];return Math.sqrt(f*f+b*b+c*c+a*a)};i.len=i.length;i.squaredLength=function(a){var f=a[0],b=a[1],c=a[2];a=a[3];return f*f+b*b+c*c+a*a};i.sqrLen=i.squaredLength;i.negate=function(a,f){a[0]=-f[0];a[1]=-f[1];a[2]=-f[2];a[3]=-f[3];return a};i.inverse=function(a,f){a[0]=1/f[0];a[1]=1/f[1];a[2]=1/f[2];a[3]=1/f[3];return a};i.normalize=function(a,f){var b=f[0],c=f[1],d=f[2],e=f[3],b=b*b+c*c+d*d+e*e;0<b&&(b=1/Math.sqrt(b),a[0]=f[0]*b,a[1]=f[1]*b,a[2]=f[2]*b,a[3]=f[3]*b);return a};\r\n\ti.dot=function(a,f){return a[0]*f[0]+a[1]*f[1]+a[2]*f[2]+a[3]*f[3]};i.lerp=function(a,f,b,c){var d=f[0],e=f[1],l=f[2];f=f[3];a[0]=d+c*(b[0]-d);a[1]=e+c*(b[1]-e);a[2]=l+c*(b[2]-l);a[3]=f+c*(b[3]-f);return a};i.random=function(a,f){f=f||1;a[0]=e();a[1]=e();a[2]=e();a[3]=e();i.normalize(a,a);i.scale(a,a,f);return a};i.transformMat4=function(a,f,b){var c=f[0],d=f[1],e=f[2];f=f[3];a[0]=b[0]*c+b[4]*d+b[8]*e+b[12]*f;a[1]=b[1]*c+b[5]*d+b[9]*e+b[13]*f;a[2]=b[2]*c+b[6]*d+b[10]*e+b[14]*f;a[3]=b[3]*c+b[7]*d+\r\n\tb[11]*e+b[15]*f;return a};i.transformQuat=function(a,b,c){var d=b[0],e=b[1],n=b[2];b=c[0];var l=c[1],x=c[2];c=c[3];var u=c*d+l*n-x*e,J=c*e+x*d-b*n,g=c*n+b*e-l*d,d=-b*d-l*e-x*n;a[0]=u*c+d*-b+J*-x-g*-l;a[1]=J*c+d*-l+g*-b-u*-x;a[2]=g*c+d*-x+u*-l-J*-b;return a};var w=i.create();i.forEach=function(a,b,c,d,e,n){b||(b=4);c||(c=0);for(d=d?Math.min(d*b+c,a.length):a.length;c<d;c+=b)w[0]=a[c],w[1]=a[c+1],w[2]=a[c+2],w[3]=a[c+3],e(w,w,n),a[c]=w[0],a[c+1]=w[1],a[c+2]=w[2],a[c+3]=w[3];return a};i.str=function(a){return\"vec4(\"+\r\n\ta[0]+\", \"+a[1]+\", \"+a[2]+\", \"+a[3]+\")\"};\"undefined\"!==typeof a&&(a.vec4=i);d={create:function(){var a=new c(4);a[0]=1;a[1]=0;a[2]=0;a[3]=1;return a},clone:function(a){var b=new c(4);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;return a},transpose:function(a,b){if(a===b){var c=b[1];a[1]=b[2];a[2]=c}else a[0]=b[0],a[1]=b[2],a[2]=b[1],a[3]=b[3];return a},invert:function(a,b){var c=\r\n\tb[0],d=b[1],e=b[2],n=b[3],l=c*n-e*d;if(!l)return null;l=1/l;a[0]=n*l;a[1]=-d*l;a[2]=-e*l;a[3]=c*l;return a},adjoint:function(a,b){var c=b[0];a[0]=b[3];a[1]=-b[1];a[2]=-b[2];a[3]=c;return a},determinant:function(a){return a[0]*a[3]-a[2]*a[1]},multiply:function(a,b,c){var d=b[0],e=b[1],n=b[2];b=b[3];var l=c[0],x=c[1],u=c[2];c=c[3];a[0]=d*l+n*x;a[1]=e*l+b*x;a[2]=d*u+n*c;a[3]=e*u+b*c;return a}};d.mul=d.multiply;d.rotate=function(a,b,c){var d=b[0],e=b[1],n=b[2];b=b[3];var l=Math.sin(c);c=Math.cos(c);a[0]=\r\n\td*c+n*l;a[1]=e*c+b*l;a[2]=d*-l+n*c;a[3]=e*-l+b*c;return a};d.scale=function(a,b,c){var d=b[1],e=b[2],n=b[3],l=c[0];c=c[1];a[0]=b[0]*l;a[1]=d*l;a[2]=e*c;a[3]=n*c;return a};d.str=function(a){return\"mat2(\"+a[0]+\", \"+a[1]+\", \"+a[2]+\", \"+a[3]+\")\"};d.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2))};d.LDU=function(a,b,c,d){a[2]=d[2]/d[0];c[0]=d[0];c[1]=d[1];c[3]=d[3]-a[2]*c[1];return[a,b,c]};\"undefined\"!==typeof a&&(a.mat2=d);d={create:function(){var a=\r\n\tnew c(6);a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},clone:function(a){var b=new c(6);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];return b},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},invert:function(a,b){var c=b[0],d=b[1],e=b[2],n=b[3],l=b[4],x=b[5],u=c*n-d*e;if(!u)return null;u=1/u;a[0]=n*u;a[1]=-d*u;a[2]=-e*u;a[3]=c*u;a[4]=(e*x-n*l)*u;a[5]=(d*l-c*x)*u;return a},\r\n\tdeterminant:function(a){return a[0]*a[3]-a[1]*a[2]},multiply:function(a,b,c){var d=b[0],e=b[1],n=b[2],l=b[3],x=b[4];b=b[5];var u=c[0],g=c[1],h=c[2],K=c[3],j=c[4];c=c[5];a[0]=d*u+n*g;a[1]=e*u+l*g;a[2]=d*h+n*K;a[3]=e*h+l*K;a[4]=d*j+n*c+x;a[5]=e*j+l*c+b;return a}};d.mul=d.multiply;d.rotate=function(a,b,c){var d=b[0],e=b[1],n=b[2],l=b[3],x=b[4];b=b[5];var u=Math.sin(c);c=Math.cos(c);a[0]=d*c+n*u;a[1]=e*c+l*u;a[2]=d*-u+n*c;a[3]=e*-u+l*c;a[4]=x;a[5]=b;return a};d.scale=function(a,b,c){var d=b[1],e=b[2],\r\n\tn=b[3],l=b[4],x=b[5],u=c[0];c=c[1];a[0]=b[0]*u;a[1]=d*u;a[2]=e*c;a[3]=n*c;a[4]=l;a[5]=x;return a};d.translate=function(a,b,c){var d=b[0],e=b[1],n=b[2],l=b[3],x=b[4];b=b[5];var u=c[0];c=c[1];a[0]=d;a[1]=e;a[2]=n;a[3]=l;a[4]=d*u+n*c+x;a[5]=e*u+l*c+b;return a};d.str=function(a){return\"mat2d(\"+a[0]+\", \"+a[1]+\", \"+a[2]+\", \"+a[3]+\", \"+a[4]+\", \"+a[5]+\")\"};d.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)};\"undefined\"!==\r\n\ttypeof a&&(a.mat2d=d);d={create:function(){var a=new c(9);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},fromMat4:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[4];a[4]=b[5];a[5]=b[6];a[6]=b[8];a[7]=b[9];a[8]=b[10];return a},clone:function(a){var b=new c(9);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];return a},\r\n\tidentity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},transpose:function(a,b){if(a===b){var c=b[1],d=b[2],e=b[5];a[1]=b[3];a[2]=b[6];a[3]=c;a[5]=b[7];a[6]=d;a[7]=e}else a[0]=b[0],a[1]=b[3],a[2]=b[6],a[3]=b[1],a[4]=b[4],a[5]=b[7],a[6]=b[2],a[7]=b[5],a[8]=b[8];return a},invert:function(a,b){var c=b[0],d=b[1],e=b[2],n=b[3],l=b[4],x=b[5],u=b[6],g=b[7],h=b[8],K=h*l-x*g,j=-h*n+x*u,m=g*n-l*u,i=c*K+d*j+e*m;if(!i)return null;i=1/i;a[0]=K*i;a[1]=(-h*d+e*g)*i;a[2]=(x*\r\n\td-e*l)*i;a[3]=j*i;a[4]=(h*c-e*u)*i;a[5]=(-x*c+e*n)*i;a[6]=m*i;a[7]=(-g*c+d*u)*i;a[8]=(l*c-d*n)*i;return a},adjoint:function(a,b){var c=b[0],d=b[1],e=b[2],n=b[3],l=b[4],x=b[5],u=b[6],g=b[7],h=b[8];a[0]=l*h-x*g;a[1]=e*g-d*h;a[2]=d*x-e*l;a[3]=x*u-n*h;a[4]=c*h-e*u;a[5]=e*n-c*x;a[6]=n*g-l*u;a[7]=d*u-c*g;a[8]=c*l-d*n;return a},determinant:function(a){var b=a[3],c=a[4],d=a[5],e=a[6],n=a[7],l=a[8];return a[0]*(l*c-d*n)+a[1]*(-l*b+d*e)+a[2]*(n*b-c*e)},multiply:function(a,b,c){var d=b[0],e=b[1],n=b[2],l=b[3],\r\n\tx=b[4],u=b[5],g=b[6],h=b[7];b=b[8];var j=c[0],m=c[1],i=c[2],k=c[3],q=c[4],t=c[5],s=c[6],r=c[7];c=c[8];a[0]=j*d+m*l+i*g;a[1]=j*e+m*x+i*h;a[2]=j*n+m*u+i*b;a[3]=k*d+q*l+t*g;a[4]=k*e+q*x+t*h;a[5]=k*n+q*u+t*b;a[6]=s*d+r*l+c*g;a[7]=s*e+r*x+c*h;a[8]=s*n+r*u+c*b;return a}};d.mul=d.multiply;d.translate=function(a,b,c){var d=b[0],e=b[1],n=b[2],l=b[3],x=b[4],u=b[5],g=b[6],h=b[7];b=b[8];var j=c[0];c=c[1];a[0]=d;a[1]=e;a[2]=n;a[3]=l;a[4]=x;a[5]=u;a[6]=j*d+c*l+g;a[7]=j*e+c*x+h;a[8]=j*n+c*u+b;return a};d.rotate=\r\n\tfunction(a,b,c){var d=b[0],e=b[1],n=b[2],l=b[3],x=b[4],u=b[5],g=b[6],h=b[7];b=b[8];var j=Math.sin(c);c=Math.cos(c);a[0]=c*d+j*l;a[1]=c*e+j*x;a[2]=c*n+j*u;a[3]=c*l-j*d;a[4]=c*x-j*e;a[5]=c*u-j*n;a[6]=g;a[7]=h;a[8]=b;return a};d.scale=function(a,b,c){var d=c[0];c=c[1];a[0]=d*b[0];a[1]=d*b[1];a[2]=d*b[2];a[3]=c*b[3];a[4]=c*b[4];a[5]=c*b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];return a};d.fromMat2d=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=0;a[3]=b[2];a[4]=b[3];a[5]=0;a[6]=b[4];a[7]=b[5];a[8]=1;return a};d.fromQuat=\r\n\tfunction(a,b){var c=b[0],d=b[1],e=b[2],n=b[3],l=c+c,x=d+d,u=e+e,c=c*l,g=d*l,d=d*x,h=e*l,j=e*x,e=e*u,l=n*l,x=n*x,n=n*u;a[0]=1-d-e;a[3]=g-n;a[6]=h+x;a[1]=g+n;a[4]=1-c-e;a[7]=j-l;a[2]=h-x;a[5]=j+l;a[8]=1-c-d;return a};d.normalFromMat4=function(a,b){var c=b[0],d=b[1],e=b[2],n=b[3],l=b[4],x=b[5],u=b[6],g=b[7],h=b[8],j=b[9],m=b[10],i=b[11],k=b[12],q=b[13],t=b[14],s=b[15],r=c*x-d*l,z=c*u-e*l,w=c*g-n*l,A=d*u-e*x,E=d*g-n*x,F=e*g-n*u,G=h*q-j*k,H=h*t-m*k,h=h*s-i*k,I=j*t-m*q,j=j*s-i*q,m=m*s-i*t,i=r*m-z*j+w*I+\r\n\tA*h-E*H+F*G;if(!i)return null;i=1/i;a[0]=(x*m-u*j+g*I)*i;a[1]=(u*h-l*m-g*H)*i;a[2]=(l*j-x*h+g*G)*i;a[3]=(e*j-d*m-n*I)*i;a[4]=(c*m-e*h+n*H)*i;a[5]=(d*h-c*j-n*G)*i;a[6]=(q*F-t*E+s*A)*i;a[7]=(t*w-k*F-s*z)*i;a[8]=(k*E-q*w+s*r)*i;return a};d.str=function(a){return\"mat3(\"+a[0]+\", \"+a[1]+\", \"+a[2]+\", \"+a[3]+\", \"+a[4]+\", \"+a[5]+\", \"+a[6]+\", \"+a[7]+\", \"+a[8]+\")\"};d.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],\r\n\t2)+Math.pow(a[7],2)+Math.pow(a[8],2))};\"undefined\"!==typeof a&&(a.mat3=d);var r={create:function(){var a=new c(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},clone:function(a){var b=new c(16);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=\r\n\tb[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},transpose:function(a,b){if(a===b){var c=b[1],d=b[2],e=b[3],n=b[6],l=b[7],g=b[11];a[1]=b[4];a[2]=b[8];a[3]=b[12];a[4]=c;a[6]=b[9];a[7]=b[13];a[8]=d;a[9]=n;a[11]=b[14];a[12]=e;a[13]=l;a[14]=g}else a[0]=\r\n\tb[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a},invert:function(a,b){var c=b[0],d=b[1],e=b[2],n=b[3],l=b[4],g=b[5],u=b[6],h=b[7],j=b[8],m=b[9],i=b[10],k=b[11],q=b[12],t=b[13],s=b[14],r=b[15],z=c*g-d*l,w=c*u-e*l,B=c*h-n*l,A=d*u-e*g,E=d*h-n*g,F=e*h-n*u,G=j*t-m*q,H=j*s-i*q,I=j*r-k*q,L=m*s-i*t,M=m*r-k*t,O=i*r-k*s,D=z*O-w*M+B*L+A*I-E*H+F*G;if(!D)return null;D=1/D;a[0]=(g*O-u*\r\n\tM+h*L)*D;a[1]=(e*M-d*O-n*L)*D;a[2]=(t*F-s*E+r*A)*D;a[3]=(i*E-m*F-k*A)*D;a[4]=(u*I-l*O-h*H)*D;a[5]=(c*O-e*I+n*H)*D;a[6]=(s*B-q*F-r*w)*D;a[7]=(j*F-i*B+k*w)*D;a[8]=(l*M-g*I+h*G)*D;a[9]=(d*I-c*M-n*G)*D;a[10]=(q*E-t*B+r*z)*D;a[11]=(m*B-j*E-k*z)*D;a[12]=(g*H-l*L-u*G)*D;a[13]=(c*L-d*H+e*G)*D;a[14]=(t*w-q*A-s*z)*D;a[15]=(j*A-m*w+i*z)*D;return a},adjoint:function(a,b){var c=b[0],d=b[1],e=b[2],n=b[3],l=b[4],g=b[5],h=b[6],j=b[7],m=b[8],i=b[9],k=b[10],q=b[11],t=b[12],s=b[13],r=b[14],z=b[15];a[0]=g*(k*z-q*r)-\r\n\ti*(h*z-j*r)+s*(h*q-j*k);a[1]=-(d*(k*z-q*r)-i*(e*z-n*r)+s*(e*q-n*k));a[2]=d*(h*z-j*r)-g*(e*z-n*r)+s*(e*j-n*h);a[3]=-(d*(h*q-j*k)-g*(e*q-n*k)+i*(e*j-n*h));a[4]=-(l*(k*z-q*r)-m*(h*z-j*r)+t*(h*q-j*k));a[5]=c*(k*z-q*r)-m*(e*z-n*r)+t*(e*q-n*k);a[6]=-(c*(h*z-j*r)-l*(e*z-n*r)+t*(e*j-n*h));a[7]=c*(h*q-j*k)-l*(e*q-n*k)+m*(e*j-n*h);a[8]=l*(i*z-q*s)-m*(g*z-j*s)+t*(g*q-j*i);a[9]=-(c*(i*z-q*s)-m*(d*z-n*s)+t*(d*q-n*i));a[10]=c*(g*z-j*s)-l*(d*z-n*s)+t*(d*j-n*g);a[11]=-(c*(g*q-j*i)-l*(d*q-n*i)+m*(d*j-n*g));a[12]=\r\n\t-(l*(i*r-k*s)-m*(g*r-h*s)+t*(g*k-h*i));a[13]=c*(i*r-k*s)-m*(d*r-e*s)+t*(d*k-e*i);a[14]=-(c*(g*r-h*s)-l*(d*r-e*s)+t*(d*h-e*g));a[15]=c*(g*k-h*i)-l*(d*k-e*i)+m*(d*h-e*g);return a},determinant:function(a){var b=a[0],c=a[1],d=a[2],e=a[3],n=a[4],l=a[5],g=a[6],h=a[7],j=a[8],i=a[9],m=a[10],k=a[11],q=a[12],s=a[13],t=a[14];a=a[15];return(b*l-c*n)*(m*a-k*t)-(b*g-d*n)*(i*a-k*s)+(b*h-e*n)*(i*t-m*s)+(c*g-d*l)*(j*a-k*q)-(c*h-e*l)*(j*t-m*q)+(d*h-e*g)*(j*s-i*q)},multiply:function(a,b,c){var d=b[0],e=b[1],n=b[2],\r\n\tl=b[3],g=b[4],h=b[5],j=b[6],i=b[7],m=b[8],k=b[9],q=b[10],s=b[11],t=b[12],r=b[13],z=b[14];b=b[15];var w=c[0],C=c[1],B=c[2],A=c[3];a[0]=w*d+C*g+B*m+A*t;a[1]=w*e+C*h+B*k+A*r;a[2]=w*n+C*j+B*q+A*z;a[3]=w*l+C*i+B*s+A*b;w=c[4];C=c[5];B=c[6];A=c[7];a[4]=w*d+C*g+B*m+A*t;a[5]=w*e+C*h+B*k+A*r;a[6]=w*n+C*j+B*q+A*z;a[7]=w*l+C*i+B*s+A*b;w=c[8];C=c[9];B=c[10];A=c[11];a[8]=w*d+C*g+B*m+A*t;a[9]=w*e+C*h+B*k+A*r;a[10]=w*n+C*j+B*q+A*z;a[11]=w*l+C*i+B*s+A*b;w=c[12];C=c[13];B=c[14];A=c[15];a[12]=w*d+C*g+B*m+A*t;a[13]=\r\n\tw*e+C*h+B*k+A*r;a[14]=w*n+C*j+B*q+A*z;a[15]=w*l+C*i+B*s+A*b;return a}};r.mul=r.multiply;r.translate=function(a,b,c){var d=c[0],e=c[1];c=c[2];var n,l,g,h,j,i,m,k,q,s,t,r;b===a?(a[12]=b[0]*d+b[4]*e+b[8]*c+b[12],a[13]=b[1]*d+b[5]*e+b[9]*c+b[13],a[14]=b[2]*d+b[6]*e+b[10]*c+b[14],a[15]=b[3]*d+b[7]*e+b[11]*c+b[15]):(n=b[0],l=b[1],g=b[2],h=b[3],j=b[4],i=b[5],m=b[6],k=b[7],q=b[8],s=b[9],t=b[10],r=b[11],a[0]=n,a[1]=l,a[2]=g,a[3]=h,a[4]=j,a[5]=i,a[6]=m,a[7]=k,a[8]=q,a[9]=s,a[10]=t,a[11]=r,a[12]=n*d+j*e+q*c+\r\n\tb[12],a[13]=l*d+i*e+s*c+b[13],a[14]=g*d+m*e+t*c+b[14],a[15]=h*d+k*e+r*c+b[15]);return a};r.scale=function(a,b,c){var d=c[0],e=c[1];c=c[2];a[0]=b[0]*d;a[1]=b[1]*d;a[2]=b[2]*d;a[3]=b[3]*d;a[4]=b[4]*e;a[5]=b[5]*e;a[6]=b[6]*e;a[7]=b[7]*e;a[8]=b[8]*c;a[9]=b[9]*c;a[10]=b[10]*c;a[11]=b[11]*c;a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a};r.rotate=function(a,c,d,e){var g=e[0],n=e[1];e=e[2];var l=Math.sqrt(g*g+n*n+e*e),h,j,i,m,k,q,s,t,r,z,w,Q,C,B,A,E,F,G,H,I;if(Math.abs(l)<b)return null;l=1/l;g*=\r\n\tl;n*=l;e*=l;h=Math.sin(d);j=Math.cos(d);i=1-j;d=c[0];l=c[1];m=c[2];k=c[3];q=c[4];s=c[5];t=c[6];r=c[7];z=c[8];w=c[9];Q=c[10];C=c[11];B=g*g*i+j;A=n*g*i+e*h;E=e*g*i-n*h;F=g*n*i-e*h;G=n*n*i+j;H=e*n*i+g*h;I=g*e*i+n*h;g=n*e*i-g*h;n=e*e*i+j;a[0]=d*B+q*A+z*E;a[1]=l*B+s*A+w*E;a[2]=m*B+t*A+Q*E;a[3]=k*B+r*A+C*E;a[4]=d*F+q*G+z*H;a[5]=l*F+s*G+w*H;a[6]=m*F+t*G+Q*H;a[7]=k*F+r*G+C*H;a[8]=d*I+q*g+z*n;a[9]=l*I+s*g+w*n;a[10]=m*I+t*g+Q*n;a[11]=k*I+r*g+C*n;c!==a&&(a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);return a};\r\n\tr.rotateX=function(a,b,c){var d=Math.sin(c);c=Math.cos(c);var e=b[4],g=b[5],l=b[6],h=b[7],j=b[8],i=b[9],m=b[10],k=b[11];b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[4]=e*c+j*d;a[5]=g*c+i*d;a[6]=l*c+m*d;a[7]=h*c+k*d;a[8]=j*c-e*d;a[9]=i*c-g*d;a[10]=m*c-l*d;a[11]=k*c-h*d;return a};r.rotateY=function(a,b,c){var d=Math.sin(c);c=Math.cos(c);var e=b[0],g=b[1],l=b[2],h=b[3],j=b[8],i=b[9],m=b[10],k=b[11];b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],\r\n\ta[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=e*c-j*d;a[1]=g*c-i*d;a[2]=l*c-m*d;a[3]=h*c-k*d;a[8]=e*d+j*c;a[9]=g*d+i*c;a[10]=l*d+m*c;a[11]=h*d+k*c;return a};r.rotateZ=function(a,b,c){var d=Math.sin(c);c=Math.cos(c);var e=b[0],g=b[1],l=b[2],h=b[3],j=b[4],i=b[5],m=b[6],k=b[7];b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=e*c+j*d;a[1]=g*c+i*d;a[2]=l*c+m*d;a[3]=h*c+k*d;a[4]=j*c-e*d;a[5]=i*c-g*d;a[6]=m*c-l*d;a[7]=k*c-h*d;return a};r.fromRotationTranslation=\r\n\tfunction(a,b,c){var d=b[0],e=b[1],g=b[2],h=b[3],j=d+d,i=e+e,m=g+g;b=d*j;var k=d*i,d=d*m,q=e*i,e=e*m,g=g*m,j=h*j,i=h*i,h=h*m;a[0]=1-(q+g);a[1]=k+h;a[2]=d-i;a[3]=0;a[4]=k-h;a[5]=1-(b+g);a[6]=e+j;a[7]=0;a[8]=d+i;a[9]=e-j;a[10]=1-(b+q);a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a};r.fromQuat=function(a,b){var c=b[0],d=b[1],e=b[2],g=b[3],h=c+c,j=d+d,i=e+e,c=c*h,m=d*h,d=d*j,k=e*h,q=e*j,e=e*i,h=g*h,j=g*j,g=g*i;a[0]=1-d-e;a[1]=m+g;a[2]=k-j;a[3]=0;a[4]=m-g;a[5]=1-c-e;a[6]=q+h;a[7]=0;a[8]=k+j;\r\n\ta[9]=q-h;a[10]=1-c-d;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};r.frustum=function(a,b,c,d,e,g,h){var j=1/(c-b),i=1/(e-d),m=1/(g-h);a[0]=2*g*j;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*g*i;a[6]=0;a[7]=0;a[8]=(c+b)*j;a[9]=(e+d)*i;a[10]=(h+g)*m;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*(h*g)*m;a[15]=0;return a};r.perspective=function(a,b,c,d,e){b=1/Math.tan(b/2);var g=1/(d-e);a[0]=b/c;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(e+d)*g;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*e*d*g;a[15]=0;\r\n\treturn a};r.ortho=function(a,b,c,d,e,g,h){var j=1/(b-c),i=1/(d-e),m=1/(g-h);a[0]=-2*j;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*i;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*m;a[11]=0;a[12]=(b+c)*j;a[13]=(e+d)*i;a[14]=(h+g)*m;a[15]=1;return a};r.lookAt=function(a,c,d,e){var g,h,j,i,m,k,q,s,t=c[0],z=c[1];c=c[2];j=e[0];i=e[1];h=e[2];q=d[0];e=d[1];g=d[2];if(Math.abs(t-q)<b&&Math.abs(z-e)<b&&Math.abs(c-g)<b)return r.identity(a);d=t-q;e=z-e;q=c-g;s=1/Math.sqrt(d*d+e*e+q*q);d*=s;e*=s;q*=s;g=i*q-h*e;h=h*d-j*q;j=j*e-i*\r\n\td;(s=Math.sqrt(g*g+h*h+j*j))?(s=1/s,g*=s,h*=s,j*=s):j=h=g=0;i=e*j-q*h;m=q*g-d*j;k=d*h-e*g;(s=Math.sqrt(i*i+m*m+k*k))?(s=1/s,i*=s,m*=s,k*=s):k=m=i=0;a[0]=g;a[1]=i;a[2]=d;a[3]=0;a[4]=h;a[5]=m;a[6]=e;a[7]=0;a[8]=j;a[9]=k;a[10]=q;a[11]=0;a[12]=-(g*t+h*z+j*c);a[13]=-(i*t+m*z+k*c);a[14]=-(d*t+e*z+q*c);a[15]=1;return a};r.str=function(a){return\"mat4(\"+a[0]+\", \"+a[1]+\", \"+a[2]+\", \"+a[3]+\", \"+a[4]+\", \"+a[5]+\", \"+a[6]+\", \"+a[7]+\", \"+a[8]+\", \"+a[9]+\", \"+a[10]+\", \"+a[11]+\", \"+a[12]+\", \"+a[13]+\", \"+a[14]+\", \"+\r\n\ta[15]+\")\"};r.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))};\"undefined\"!==typeof a&&(a.mat4=r);var m={create:function(){var a=new c(4);a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a}},q=g.create(),s=g.fromValues(1,0,0),t=g.fromValues(0,1,0);m.rotationTo=\r\n\tfunction(a,b,c){var d=g.dot(b,c);if(-0.999999>d)return g.cross(q,s,b),1E-6>g.length(q)&&g.cross(q,t,b),g.normalize(q,q),m.setAxisAngle(a,q,Math.PI),a;if(0.999999<d)return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a;g.cross(q,b,c);a[0]=q[0];a[1]=q[1];a[2]=q[2];a[3]=1+d;return m.normalize(a,a)};var z=d.create();m.setAxes=function(a,b,c,d){z[0]=c[0];z[3]=c[1];z[6]=c[2];z[1]=d[0];z[4]=d[1];z[7]=d[2];z[2]=-b[0];z[5]=-b[1];z[8]=-b[2];return m.normalize(a,m.fromMat3(a,z))};m.clone=i.clone;m.fromValues=i.fromValues;m.copy=\r\n\ti.copy;m.set=i.set;m.identity=function(a){a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};m.setAxisAngle=function(a,b,c){c*=0.5;var d=Math.sin(c);a[0]=d*b[0];a[1]=d*b[1];a[2]=d*b[2];a[3]=Math.cos(c);return a};m.add=i.add;m.multiply=function(a,b,c){var d=b[0],e=b[1],g=b[2];b=b[3];var h=c[0],j=c[1],i=c[2];c=c[3];a[0]=d*c+b*h+e*i-g*j;a[1]=e*c+b*j+g*h-d*i;a[2]=g*c+b*i+d*j-e*h;a[3]=b*c-d*h-e*j-g*i;return a};m.mul=m.multiply;m.scale=i.scale;m.rotateX=function(a,b,c){c*=0.5;var d=b[0],e=b[1],g=b[2];b=b[3];var h=Math.sin(c);\r\n\tc=Math.cos(c);a[0]=d*c+b*h;a[1]=e*c+g*h;a[2]=g*c-e*h;a[3]=b*c-d*h;return a};m.rotateY=function(a,b,c){c*=0.5;var d=b[0],e=b[1],g=b[2];b=b[3];var h=Math.sin(c);c=Math.cos(c);a[0]=d*c-g*h;a[1]=e*c+b*h;a[2]=g*c+d*h;a[3]=b*c-e*h;return a};m.rotateZ=function(a,b,c){c*=0.5;var d=b[0],e=b[1],g=b[2];b=b[3];var h=Math.sin(c);c=Math.cos(c);a[0]=d*c+e*h;a[1]=e*c-d*h;a[2]=g*c+b*h;a[3]=b*c-g*h;return a};m.calculateW=function(a,b){var c=b[0],d=b[1],e=b[2];a[0]=c;a[1]=d;a[2]=e;a[3]=Math.sqrt(Math.abs(1-c*c-d*d-\r\n\te*e));return a};m.dot=i.dot;m.lerp=i.lerp;m.slerp=function(a,b,c,d){var e=b[0],g=b[1],h=b[2];b=b[3];var j=c[0],i=c[1],m=c[2];c=c[3];var k,q,s;q=e*j+g*i+h*m+b*c;0>q&&(q=-q,j=-j,i=-i,m=-m,c=-c);1E-6<1-q?(k=Math.acos(q),s=Math.sin(k),q=Math.sin((1-d)*k)/s,d=Math.sin(d*k)/s):q=1-d;a[0]=q*e+d*j;a[1]=q*g+d*i;a[2]=q*h+d*m;a[3]=q*b+d*c;return a};m.invert=function(a,b){var c=b[0],d=b[1],e=b[2],g=b[3],h=c*c+d*d+e*e+g*g,h=h?1/h:0;a[0]=-c*h;a[1]=-d*h;a[2]=-e*h;a[3]=g*h;return a};m.conjugate=function(a,b){a[0]=\r\n\t-b[0];a[1]=-b[1];a[2]=-b[2];a[3]=b[3];return a};m.length=i.length;m.len=m.length;m.squaredLength=i.squaredLength;m.sqrLen=m.squaredLength;m.normalize=i.normalize;m.fromMat3=function(a,b){var c=b[0]+b[4]+b[8];if(0<c)c=Math.sqrt(c+1),a[3]=0.5*c,c=0.5/c,a[0]=(b[5]-b[7])*c,a[1]=(b[6]-b[2])*c,a[2]=(b[1]-b[3])*c;else{var d=0;b[4]>b[0]&&(d=1);b[8]>b[3*d+d]&&(d=2);var e=(d+1)%3,g=(d+2)%3,c=Math.sqrt(b[3*d+d]-b[3*e+e]-b[3*g+g]+1);a[d]=0.5*c;c=0.5/c;a[3]=(b[3*e+g]-b[3*g+e])*c;a[e]=(b[3*e+d]+b[3*d+e])*c;a[g]=\r\n\t(b[3*g+d]+b[3*d+g])*c}return a};m.str=function(a){return\"quat(\"+a[0]+\", \"+a[1]+\", \"+a[2]+\", \"+a[3]+\")\"};\"undefined\"!==typeof a&&(a.quat=m)})(GLMAT);try{module.exports=GLMAT}catch(e$$10){}try{glm.exists&&alert(\"glm.common.js loaded over exist glm instance: \"+glm)}catch(e$$11){}glm=null;GLMJS_PREFIX=\"glm-js: \";\r\n\tGLM={$DEBUG:\"undefined\"!==typeof $GLM_DEBUG&&$GLM_DEBUG,version:\"0.0.6c\",GLM_VERSION:96,$outer:{polyfills:GLM_polyfills(),functions:{},intern:function(a,b){if(a)if(void 0===b&&\"object\"===typeof a)for(var c in a)GLM.$outer.intern(c,a[c]);else return GLM.$DEBUG&&GLM.$outer.console.debug(\"intern \"+a,b&&(b.name||typeof b)),GLM.$outer[a]=b},$import:function(a){GLM.$outer.$import=function(){throw Error(\"glm.$outer.$import already called...\");};GLM.$outer.intern(a.statics);GLM.$template.extend(GLM,GLM.$template[\"declare<T,V,number>\"](a[\"declare<T,V,number>\"]),\r\n\tGLM.$template[\"declare<T,V,...>\"](a[\"declare<T,V,...>\"]),GLM.$template[\"declare<T,...>\"](a[\"declare<T,...>\"]),GLM.$template[\"declare<T>\"](a[\"declare<T>\"]));GLM.$init(a)},console:$GLM_reset_logging(),quat_array_from_xyz:function(a){var b=glm.quat(),c=glm.mat3(1);b[\"*=\"](glm.angleAxis(a.x,c[0]));b[\"*=\"](glm.angleAxis(a.y,c[1]));b[\"*=\"](glm.angleAxis(a.z,c[2]));return b.elements},Array:Array,ArrayBuffer:ArrayBuffer,Float32Array:Float32Array,Float64Array:Float64Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array,\r\n\tUint32Array:Uint32Array,Int8Array:Int8Array,Int16Array:Int16Array,Int32Array:Int32Array,DataView:\"undefined\"!==typeof DataView&&DataView,$rebindTypedArrays:function(a){var b=Object.keys(GLM.$outer).filter(RegExp.prototype.test.bind(/.Array$|^ArrayBuffer$|^DataView$/)).map(function(b){var e=a.call(this,b,GLM.$outer[b]);e!==GLM.$outer[b]&&(GLM.$outer.console.warn(\"$rebindTypedArrays(\"+b+\")... replacing\"),GLM.$outer[b]=e);return e});GLM.$subarray=GLM.patch_subarray();return b}},$extern:$GLM_extern,$log:$GLM_log,\r\n\tGLMJSError:$GLM_GLMJSError(\"GLMJSError\"),_radians:function(a){return a*this.PI/180}.bind(Math),_degrees:function(a){return 180*a/this.PI}.bind(Math),normalize:$GLM_extern(\"normalize\"),inverse:$GLM_extern(\"inverse\"),distance:$GLM_extern(\"distance\"),length:$GLM_extern(\"length\"),length2:$GLM_extern(\"length2\"),transpose:$GLM_extern(\"transpose\"),slerp:$GLM_extern(\"slerp\"),mix:$GLM_extern(\"mix\"),clamp:$GLM_extern(\"clamp\"),angleAxis:$GLM_extern(\"angleAxis\"),rotate:$GLM_extern(\"rotate\"),scale:$GLM_extern(\"scale\"),\r\n\ttranslate:$GLM_extern(\"translate\"),lookAt:$GLM_extern(\"lookAt\"),cross:$GLM_extern(\"cross\"),dot:$GLM_extern(\"dot\"),perspective:function(a,b,c,e){return GLM.$outer.mat4_perspective(a,b,c,e)},ortho:function(a,b,c,e,d,h){return GLM.$outer.mat4_ortho(a,b,c,e,d,h)},_eulerAngles:function(a){return GLM.$outer.vec3_eulerAngles(a)},angle:function(a){return 2*Math.acos(a.w)},axis:function(a){var b=1-a.w*a.w;if(0>=b)return glm.vec3(0,0,1);b=1/Math.sqrt(b);return glm.vec3(a.x*b,a.y*b,a.z*b)},$from_ptr:function(a,\r\n\tb,c){if(this!==GLM)throw new GLM.GLMJSError(\"... use glm.make_<type>() (not new glm.make<type>())\");b=new GLM.$outer.Float32Array(b.buffer||b,c||0,a.componentLength);b=new GLM.$outer.Float32Array(b);return new a(b)},make_vec2:function(a,b){return GLM.$from_ptr.call(this,GLM.vec2,a,2===arguments.length?b:a.byteOffset)},make_vec3:function(a,b){return GLM.$from_ptr.call(this,GLM.vec3,a,2===arguments.length?b:a.byteOffset)},make_vec4:function(a,b){return GLM.$from_ptr.call(this,GLM.vec4,a,2===arguments.length?\r\n\tb:a.byteOffset)},make_quat:function(a,b){return GLM.$from_ptr.call(this,GLM.quat,a,2===arguments.length?b:a.byteOffset)},make_mat3:function(a,b){return GLM.$from_ptr.call(this,GLM.mat3,a,2===arguments.length?b:a.byteOffset)},make_mat4:function(a,b){return GLM.$from_ptr.call(this,GLM.mat4,a,2===arguments.length?b:a.byteOffset)},diagonal4x4:function(a){if(\"vec4\"!==GLM.$typeof(a))throw new GLM.GLMJSError(\"unsupported argtype to GLM.diagonal4x4: \"+[\"type:\"+GLM.$typeof(a)]);a=a.elements;return new GLM.mat4([a[0],\r\n\t0,0,0,0,a[1],0,0,0,0,a[2],0,0,0,0,a[3]])},diagonal3x3:function(a){if(\"vec3\"!==GLM.$typeof(a))throw new GLM.GLMJSError(\"unsupported argtype to GLM.diagonal3x3: \"+[\"type:\"+GLM.$typeof(a)]);a=a.elements;return new GLM.mat3([a[0],0,0,0,a[1],0,0,0,a[2]])},_toMat4:function(a){return new GLM.mat4(GLM.$outer.mat4_array_from_quat(a))},FAITHFUL:!0,to_string:function(a,b){try{var c=a.$type||typeof a;if(!GLM[c])throw new GLM.GLMJSError(\"unsupported argtype to GLM.to_string: \"+[\"type:\"+c,a]);return GLM.FAITHFUL?\r\n\tGLM.$to_string(a,b).replace(/[\\t\\n]/g,\"\"):GLM.$to_string(a,b)}catch(e){return GLM.$DEBUG&&GLM.$outer.console.error(\"to_string error: \",c,a+\"\",e),e+\"\"}},$sizeof:function(a){return a.BYTES_PER_ELEMENT},$types:[],$isGLMConstructor:function(a){return!!(a&&a.prototype instanceof GLM.$GLMBaseType)},$getGLMType:function(a){return a instanceof GLM.$GLMBaseType&&a.constructor||\"string\"===typeof a&&GLM[a]},$isGLMObject:function(a){return!!(a instanceof GLM.$GLMBaseType&&a.$type)},$typeof:function(a){return a instanceof\r\n\tGLM.$GLMBaseType?a.$type:\"undefined\"},$to_array:function(a){return[].slice.call(a.elements)},$to_json:function(a,b,c){this instanceof GLM.$GLMBaseType&&(c=b,b=a,a=this);return JSON.stringify(GLM.$to_object(a),b,c)},$inspect:function(a){this instanceof GLM.$GLMBaseType&&(a=this);return GLM.$to_json(a,null,2)},_clamp:function(a,b,c){return a<b?b:a>c?c:a},_abs:function(a){return Math.abs(a)},_equal:function(a,b){return a===b},_epsilonEqual:function(a,b,c){return Math.abs(a-b)<c},_fract:function(a){return a-\r\n\tMath.floor(a)},_frexp:function(){function a(b,c){var e=GLM.$outer.DataView||a._DataView;if(0==b)return c&&Array.isArray(c)?c[0]=c[1]=0:[0,0];e=new e(new GLM.$outer.ArrayBuffer(8));e.setFloat64(0,b);var d=e.getUint32(0)>>>20&2047;0===d&&(e.setFloat64(0,b*Math.pow(2,64)),d=(e.getUint32(0)>>>20&2047)-64);e=d-1022;d=GLM.ldexp(b,-e);return c&&Array.isArray(c)?(c[0]=e,c[1]=d):[d,e]}a._DataView=function(a){this.buffer=a;this.setFloat64=function(a,b){if(0!==a)throw Error(\"...this is a very limited DataView emulator\");\r\n\t(new Uint8Array(this.buffer)).set([].reverse.call(new Uint8Array((new Float64Array([b])).buffer)),a)};this.getUint32=function(a){if(0!==a)throw Error(\"...this is a very limited DataView emulator\");return(new Uint32Array((new Uint8Array([].slice.call(new Uint8Array(this.buffer)).reverse())).buffer))[1]}};return a}(),_ldexp:function(a,b){return 1023<b?a*Math.pow(2,1023)*Math.pow(2,b-1023):-1074>b?a*Math.pow(2,-1074)*Math.pow(2,b+1074):a*Math.pow(2,b)},_max:Math.max,_min:Math.min,sqrt:Math.sqrt,__sign:function(a){return 0<\r\n\ta?1:0>a?-1:+a},$constants:{epsilon:1E-6,euler:0.5772156649015329,e:Math.E,ln_ten:Math.LN10,ln_two:Math.LN2,pi:Math.PI,half_pi:Math.PI/2,quarter_pi:Math.PI/4,one_over_pi:1/Math.PI,two_over_pi:2/Math.PI,root_pi:Math.sqrt(Math.PI),root_two:Math.sqrt(2),root_three:Math.sqrt(3),two_over_root_pi:2/Math.sqrt(Math.PI),one_over_root_two:Math.SQRT1_2,root_two:Math.SQRT2},FIXEDPRECISION:6,$toFixedString:function(a,b,c,e){void 0===e&&(e=GLM.FIXEDPRECISION);if(!c||!c.map)throw Error(\"unsupported argtype to $toFixedString(..,..,props=\"+\r\n\ttypeof c+\")\");try{var d=\"\";c.map(function(c){c=b[d=c];if(!c.toFixed)throw Error(\"!toFixed in w\"+[c,a,JSON.stringify(b)]);return c.toFixed(0)})}catch(h){throw GLM.$DEBUG&&GLM.$outer.console.error(\"$toFixedString error\",a,typeof b,Object.prototype.toString.call(b),d),GLM.$DEBUG&&glm.$log(\"$toFixedString error\",a,typeof b,Object.prototype.toString.call(b),d),new GLM.GLMJSError(h);}c=c.map(function(a){return b[a].toFixed(e)});return a+\"(\"+c.join(\", \")+\")\"}};GLM._sign=Math.sign||GLM.__sign;\r\n\tfor(var p in GLM.$constants)(function(a,b){GLM[b]=function(){return a};GLM[b].valueOf=GLM[b]})(GLM.$constants[p],p);\r\n\tGLM.$GLMBaseType=function(){function a(a,c){var e=a.$||{};this.$type=c;this.$type_name=e.name||\"<\"+c+\">\";e.components&&(this.$components=e.components[0]);this.$len=this.components=a.componentLength;this.constructor=a;this.byteLength=a.BYTES_PER_ELEMENT;GLM.$types.push(c)}a.prototype={clone:function(){return new this.constructor(new this.elements.constructor(this.elements))},toString:function(){return GLM.$to_string(this)},inspect:function(){return GLM.$inspect(this)},toJSON:function(){return GLM.$to_object(this)}};\r\n\tObject.defineProperty(a.prototype,\"address\",{get:function(){var a=this.elements.byteOffset.toString(16);return\"0x00000000\".substr(0,10-a.length)+a}});return a}();\r\n\t(function(){function a(a,b,c){return a.subarray(b,c||a.length)}function b(a,b,c){var e=a.constructor;c=c||a.length;return new e(a.buffer,a.byteOffset+b*e.BYTES_PER_ELEMENT,c-b)}function c(){var a=new GLM.$outer.Float32Array([0,0]);a.subarray(1).subarray(0)[0]=1;var b=c.result=[a[1],(new GLM.$outer.Float32Array(16)).subarray(12,16).length];return!(a[1]!==b[0]||4!==b[1])}function e(a){var b=new GLM.$outer.Float32Array([0,0]);a(a(b,1),0)[0]=1;a=e.result=[b[1],a(new GLM.$outer.Float32Array(16),12,16).length];\r\n\treturn!(b[1]!==a[0]||4!==a[1])}Object.defineProperty(GLM,\"patch_subarray\",{configurable:!0,value:function(){var d=!c()?b:a;d.workaround_broken_spidermonkey_subarray=b;d.native_subarray=a;if(!e(d))throw Error(\"failed to resolve working TypedArray.subarray implementation... \"+e.result);return d}})})();GLM.$subarray=GLM.patch_subarray();\r\n\tvar GLM_template=GLM.$template={_genArgError:function(a,b,c,e){~e.indexOf(void 0)&&(e=e.slice(0,e.indexOf(void 0)));var d=RegExp.prototype.test.bind(/^[^$_]/);return new GLM.GLMJSError(\"unsupported argtype to \"+b+\" \"+a.$sig+\": [typ=\"+c+\"] :: got arg types: \"+e.map(GLM.$template.jstypes.get)+\" // supported types: \"+Object.keys(a).filter(d).join(\"||\"))},jstypes:{get:function(a){return null===a?\"null\":void 0===a?\"undefined\":a.$type||GLM.$template.jstypes[typeof a]||GLM.$template.jstypes[a+\"\"]||function(a){if(\"object\"===\r\n\ttypeof a){if(a instanceof GLM.$outer.Float32Array)return\"Float32Array\";if(a instanceof GLM.$outer.ArrayBuffer)return\"ArrayBuffer\";if(Array.isArray(a))return\"array\"}return\"<unknown \"+[typeof a,a]+\">\"}(a)},\"0\":\"float\",\"boolean\":\"bool\",number:\"float\",string:\"string\",\"[object Float32Array]\":\"Float32Array\",\"[object ArrayBuffer]\":\"ArrayBuffer\",\"function\":\"function\"},_add_overrides:function(a,b){for(var c in b)b[c]&&GLM[c].override(a,b[c])},_add_inline_override:function(a,b,c){this[b]=eval(GLM.$template._traceable(\"glm_\"+\r\n\ta+\"_\"+b,c))();return this},_inline_helpers:function(a,b){Object.defineProperty(a,\"GLM\",{value:GLM});return{$type:\"built-in\",$type_name:b,$template:a,F:a,dbg:b,override:this._add_inline_override.bind(a,b),link:function(c){var e=a[c];e||(e=a[[c,\"undefined\"]]);if(!e)throw new GLM.GLMJSError(\"error linking direct function for \"+b+\"<\"+c+\"> or \"+b+\"<\"+[c,void 0]+\">\");return/\\bthis[\\[.]/.test(e+\"\")?e.bind(a):e}}},\"template<T>\":function(a,b){a.$sig=\"template<T>\";var c=GLM.$template.jstypes,e=GLM.$template._genArgError,\r\n\td=GLM.$GLMBaseType;return this.slingshot(this._inline_helpers(a,b),eval(this._traceable(\"Tglm_\"+b,function(b){this instanceof d&&(b=this);var j=[b&&b.$type||c[typeof b]||c.get(b)||\"null\"];if(!a[j])throw e(a,arguments.callee.dbg,j,[b]);return a[j](b)}))())},\"template<T,...>\":function(a,b){a.$sig=\"template<T,...>\";var c=GLM.$template.jstypes,e=GLM.$template._genArgError,d=GLM.$GLMBaseType;return this.slingshot(this._inline_helpers(a,b),eval(this._traceable(\"Tdotglm_\"+b,function(b){for(var j=Array(arguments.length),\r\n\tg=0;g<j.length;g++)j[g]=arguments[g];this instanceof d&&j.unshift(b=this);g=[b&&b.$type||c[typeof b]||c.get(b)||\"null\"];if(!a[g])throw e(a,arguments.callee.dbg,g,j);return a[g].apply(a,j)}))())},\"template<T,V,number>\":function(a,b){a.$sig=\"template<T,V,number>\";var c=GLM.$template.jstypes,e=GLM.$template._genArgError,d=GLM.GLMJSError,h=GLM.$GLMBaseType;return this.slingshot(this._inline_helpers(a,b),eval(this._traceable(\"TVnglm_\"+b,function(){for(var b=Array(arguments.length),g=0;g<b.length;g++)b[g]=\r\n\targuments[g];this instanceof h&&b.unshift(this);var g=b[0],k=b[1],b=b[2],i=[g&&g.$type||c[typeof g]||c[g+\"\"]||\"<unknown \"+g+\">\",k&&k.$type||c[typeof k]||c[k+\"\"]||\"<unknown \"+k+\">\"];if(!a[i])throw e(a,arguments.callee.dbg,i,[g,k,b]);if(\"number\"!==typeof b)throw new d(arguments.callee.dbg+a.$sig+\": unsupported n type: \"+[typeof b,b]);return a[i](g,k,b)}))())},\"template<T,V,...>\":function(a,b){a.$sig=\"template<T,V,...>\";var c=GLM.$template.jstypes,e=GLM.$GLMBaseType,d=GLM.$template._genArgError,h=GLM.$outer.Array;\r\n\treturn this.slingshot(this._inline_helpers(a,b),eval(this._traceable(\"TVglm_\"+b,function(){for(var b=new h(arguments.length),g=0;g<b.length;g++)b[g]=arguments[g];this instanceof e&&b.unshift(this);var g=b[0],k=b[1],g=[g&&g.$type||c[typeof g],k&&k.$type||c[typeof k]||c[k+\"\"]||h.isArray(k)&&\"array\"+k.length+\"\"||\"\"+k+\"\"];if(!a[g])throw d(a,arguments.callee.dbg,g,b);return a[g].apply(a,b)}))())},override:function(a,b,c,e,d){function h(a,c){GLM.$outer.console.debug(\"glm.$template.override: \"+b+\" ... \"+\r\n\tObject.keys(a.$template).filter(function(a){return!~a.indexOf(\"$\")}).map(function(a){return!~c.indexOf(a)?\"*\"+a+\"*\":a}).join(\" | \"))}GLM.$DEBUG&&GLM.$outer.console.debug(\"glm.$template.override: \",a,b,c.$op?'$op: [\"'+c.$op+'\"]':\"\");if(!e)throw Error(\"unspecified target group \"+e+' (expected override(<TV>, \"p\", {TSP}, ret={GROUP}))');var j=e[b];if(j&&j.$op!==c.$op)throw Error('glm.$template.override: mismatch merging existing override: .$op \"'+[j.$op,\"!=\",c.$op].join(\" \")+'\"  p='+[b,j.$op,c.$op,\"||\"+\r\n\tObject.keys(j.$template).join(\"||\")]);var g=GLM.$template[a](GLM.$template.deNify(c,b),b);if(j&&j.F.$sig!==g.F.$sig)throw Error('glm.$template.override: mismatch merging existing override: .$sig \"'+[j&&j.F.$sig,\"!=\",g.F.$sig].join(\" \")+'\"  p='+[b,j&&j.F.$sig,g.F.$sig,\"||\"+Object.keys(j&&j.$template||{}).join(\"||\")]);g.$op=c.$op;if(j){for(var k in g.$template)\"$op\"===k||\"$sig\"===k||(a=k in j.$template,!a||!0===d?(GLM.$DEBUG&&GLM.$outer.console.debug(\"glm.$template.override: \"+b+\" ... \"+k+\" merged\"),\r\n\tj.$template[k]=g.$template[k]):a&&GLM.$DEBUG&&GLM.$outer.console.debug(\"glm.$template.override: \"+b+\" ... \"+k+\" skipped\"));if(GLM.$DEBUG){var i=[];Object.keys(j.$template).forEach(function(a){a in g.$template||(GLM.$DEBUG&&GLM.$outer.console.debug(\"glm.$template.override: \"+b+\" ... \"+a+\" carried-forward\"),i.push(a))});h(e[b],i)}}else e[b]=g,GLM.$DEBUG&&h(e[b],[]);return e},_override:function(a,b,c){for(var e in b){if(\"mat4_scale\"!==e&&\"object\"!==typeof b[e])throw new GLM.GLMJSError(\"expect object property overrides\"+\r\n\t[e,b[e],Object.keys(c)]);\"object\"===typeof b[e]?this.override(a,e,b[e],c,!0):ret_scale=5}return c},slingshot:function(){return this.extend.apply(this,[].reverse.call(arguments))},extend:function(a,b){[].slice.call(arguments,1).forEach(function(b){if(b)for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e])});return a},\"declare<T,V,...>\":function(a){return!a?{}:this._override(\"template<T,V,...>\",a,GLM.$outer.functions)},\"declare<T>\":function(a){return!a?{}:this._override(\"template<T>\",a,GLM.$outer.functions)},\r\n\t\"declare<T,...>\":function(a){return!a?{}:this._override(\"template<T,...>\",a,GLM.$outer.functions)},\"declare<T,V,number>\":function(a){return!a?{}:this._override(\"template<T,V,number>\",a,GLM.$outer.functions)},_tojsname:function(a){return(a||\"_\").replace(/[^$a-zA-Z0-9_]/g,\"_\")},_traceable:function(a,b){var c=b;if(\"function\"!==typeof c)throw new GLM.GLMJSError(\"_traceable expects tidy function as second arg \"+c);if(!a)throw new GLM.GLMJSError(\"_traceable expects hint or what's the point\"+[c,a]);a=this._tojsname(a||\r\n\t\"_traceable\");c=c.toString().replace(/^(\\s*var\\s*(\\w+)\\s*=\\s*)__VA_ARGS__;/mg,function(a,b,c){return b+\"new Array(arguments.length);for(var I=0;I<varname.length;I++)varname[I]=arguments[I];\".replace(/I/g,\"__VA_ARGS__I\").replace(/varname/g,c)}).replace(/\\barguments[.]callee\\b/g,a);if(/^function _traceable/.test(c))throw new GLM.GLMJSError(\"already wrapped in a _traceable: \"+[c,a]);c='function _traceable(){ \"use strict\"; SRC; return HINT; }'.replace(\"HINT\",a.replace(/[$]/g,\"$$$$\")).replace(\"SRC\",c.replace(/[$]/g,\r\n\t\"$$$$\").replace(/^function\\s*\\(/,\"function \"+a+\"(\"));c=\"1,\"+c;if(GLM.$DEBUG)try{eval(c)}catch(e){throw console.error(\"_traceable error\",a,c,b,e),e;}return c},deNify:function(a,b){var c={vec:[2,3,4],mat:[3,4]},e=this._tojsname.bind(this),d;for(d in a){var h=!1;d.replace(/([vV]ec|[mM]at)(?:\\w*)<N>/,function(j,g){h=!0;var k=a[d];delete a[d];c[g.toLowerCase()].forEach(function(c){var g=d.replace(/<N[*]N>/g,c*c).replace(/<N>/g,c);if(!(g in a)){var h=e(\"glm_\"+b+\"_\"+g);a[g]=eval(\"'use strict'; 1,\"+(k+\"\").replace(/^function\\s*\\(/,\r\n\t\"function \"+h+\"(\").replace(/N[*]N/g,c*c).replace(/N/g,c))}})}.bind(this));/^[$]/.test(d)?GLM.$DEBUG&&GLM.$outer.console.debug(\"@ NOT naming \"+d):!h&&(\"function\"===typeof a[d]&&!a[d].name)&&(GLM.$DEBUG&&GLM.$outer.console.debug(\"naming \"+e(b+\"_\"+d)),a[d]=eval(this._traceable(\"glm_\"+b+\"_\"+d,a[d]))())}return a},$_module_stamp:+new Date,_iso:\"/[*][^/*]*[*]/\",_get_argnames:function(a){return(a+\"\").replace(/\\s+/g,\"\").replace(RegExp(this._iso,\"g\"),\"\").split(\"){\",1)[0].replace(/^[^(]*[(]/,\"\").replace(/=[^,]+/g,\r\n\t\"\").split(\",\").filter(Boolean)},_fix_$_names:function(a,b){Object.keys(b).filter(function(a){return\"function\"===typeof b[a]&&!b[a].name}).map(function(c){var e=a+\"_\"+c;GLM.$DEBUG&&GLM.$outer.console.debug(\"naming $.\"+c+\" == \"+e,this._traceable(e,b[c]));b[c]=eval(this._traceable(\"glm_\"+e,b[c]))()}.bind(this));return b},_typedArrayMaker:function(a,b){return function(c){if(c.length===a)return new b(c);var e=new b(a);e.set(c);return e}},GLMType:function(a,b){var c=this._fix_$_names(a,b),e=c.identity.length,\r\n\td,h=Object,j=GLM.$template._get_argnames.bind(GLM.$template),g=GLM.GLMJSError,k={},i;for(i in c)\"function\"===typeof c[i]&&function(a){k[i]=function(b){return a.apply(c,b)}}(c[i]);d=function(b){var d=k[typeof b[0]+b.length];if(!d){var e=\"glm.\"+a;b=e+\"(\"+b.map(function(a){return typeof a})+\")\";d=h.keys(c).filter(function(a){return\"function\"===typeof c[a]&&/^\\w+\\d+$/.test(a)}).map(function(a){return e+\"(\"+j(c[a])+\")\"});throw new g(\"no constructor found for: \"+b+\"\\nsupported signatures:\\n\\t\"+d.join(\"\\n\\t\"));\r\n\t}return d};var w,r=GLM;GLM.$template._get_argnames.bind(GLM.$template);w=function(b,c){2<r.$DEBUG&&r.$outer.console.info(\"adopting elements...\",typeof b);if(b.length!=e){if(!1===c)return c;r.$outer.console.error(a+\" elements size mismatch: \"+[\"wanted:\"+e,\"handed:\"+b.length]);var d=r.$subarray(b,0,e);throw new r.GLMJSError(a+\" elements size mismatch: \"+[\"wanted:\"+e,\"handed:\"+b.length,\"theoreticaly-correctable?:\"+(d.length===e)]);}return b};var m=this._typedArrayMaker(e,GLM.$outer.Float32Array),q,s=\r\n\tGLM.$outer;q=function(a){return a instanceof s.Float32Array};var t=function(a,b,c,g,h,i,j,k){return eval(k(\"glm_\"+h+\"$class\",function(c){for(var f=new a(arguments.length),g=0;g<f.length;g++)f[g]=arguments[g];var h=d(f),g=t;if(this instanceof g)f=q(c)?w(c):m(h(f)),b.defineProperty(this,\"elements\",{enumerable:!1,configurable:!0,value:f});else return f=q(c)&&c.length===e?m(c):h(f),new g(f)}))()}(Array,Object,GLM,c,a,GLM.$template._get_argnames.bind(GLM.$template),GLM.GLMJSError,GLM.$template._traceable.bind(GLM.$template));\r\n\tc.components=c.components?c.components.map(function(a){return\"string\"===typeof a?a.split(\"\"):a}):[];t.$=c;t.componentLength=e;t.BYTES_PER_ELEMENT=e*GLM.$outer.Float32Array.BYTES_PER_ELEMENT;t.prototype=new GLM.$GLMBaseType(t,a);t.toJSON=function(){var b={glm$type:a,glm$class:t.prototype.$type_name,glm$eg:(new t).object},c;for(c in t)/function |^[$]/.test(c+t[c])||(b[c]=t[c]);return b};return t}};\r\n\tGLM.$template[\"declare<T,V,...>\"]({cross:{\"vec2,vec2\":function(a,b){return this.GLM.vec3(0,0,a.x*b.y-a.y*b.x)}},distance:{\"vec<N>,vec<N>\":function(a,b){return this.GLM.length(b.sub(a))}}});\r\n\tGLM.$template[\"declare<T,V,number>\"]({mix:{\"float,float\":function(a,b,c){return b*c+a*(1-c)},\"vec<N>,vec<N>\":function(a,b,c){var e=1-c,d=new this.GLM.vecN(new a.elements.constructor(N)),h=d.elements;a=a.elements;b=b.elements;for(var j=0;j<N;j++)h[j]=b[j]*c+a[j]*e;return d}},clamp:{\"float,float\":function(a,b,c){return GLM._clamp(a,b,c)},\"vec<N>,float\":function(a,b,c){return new GLM.vecN(GLM.$to_array(a).map(function(a){return GLM._clamp(a,b,c)}))}},epsilonEqual:{\"float,float\":GLM._epsilonEqual,\"vec<N>,vec<N>\":function(a,\r\n\tb,c){for(var e=this[\"float,float\"],d=glm.bvecN(),h=0;h<N;h++)d[h]=e(a[h],b[h],c);return d},\"ivec<N>,ivec<N>\":function(a,b,c){return this[\"vecN,vecN\"](a,b,c)},\"uvec<N>,uvec<N>\":function(a,b,c){return this[\"vecN,vecN\"](a,b,c)},\"quat,quat\":function(a,b,c){for(var e=this[\"float,float\"],d=glm.bvec4(),h=0;4>h;h++)d[h]=e(a[h],b[h],c);return d},\"mat<N>,mat<N>\":function(){throw new GLM.GLMJSError(\"error: 'epsilonEqual' only accept floating-point and integer scalar or vector inputs\");}}});\r\n\tGLM.$template.extend(GLM,GLM.$template[\"declare<T>\"]({degrees:{\"float\":function(a){return this.GLM._degrees(a)},\"vec<N>\":function(a){return new this.GLM.vecN(this.GLM.$to_array(a).map(this.GLM._degrees))}},radians:{\"float\":function(a){return this.GLM._radians(a)},\"vec<N>\":function(a){return new this.GLM.vecN(this.GLM.$to_array(a).map(this.GLM._radians))}},sign:{\"null\":function(){return 0},undefined:function(){return NaN},string:function(){return NaN},\"float\":function(a){return GLM._sign(a)},\"vec<N>\":function(a){return new GLM.vecN(GLM.$to_array(a).map(GLM._sign))},\r\n\t\"ivec<N>\":function(a){return new GLM.ivecN(GLM.$to_array(a).map(GLM._sign))}},abs:{\"float\":function(a){return GLM._abs(a)},\"vec<N>\":function(a){return new GLM.vecN(GLM.$to_array(a).map(GLM._abs))}},fract:{\"float\":function(a){return GLM._fract(a)},\"vec<N>\":function(a){return new GLM.vecN(GLM.$to_array(a).map(GLM._fract))}},all:{\"vec<N>\":function(a){return N===GLM.$to_array(a).filter(Boolean).length},\"bvec<N>\":function(a){return N===GLM.$to_array(a).filter(Boolean).length},\"ivec<N>\":function(a){return N===\r\n\tGLM.$to_array(a).filter(Boolean).length},\"uvec<N>\":function(a){return N===GLM.$to_array(a).filter(Boolean).length},quat:function(a){return 4===GLM.$to_array(a).filter(Boolean).length}},$to_object:{vec2:function(a){return{x:a.x,y:a.y}},vec3:function(a){return{x:a.x,y:a.y,z:a.z}},vec4:function(a){return{x:a.x,y:a.y,z:a.z,w:a.w}},uvec2:function(a){return{x:a.x,y:a.y}},uvec3:function(a){return{x:a.x,y:a.y,z:a.z}},uvec4:function(a){return{x:a.x,y:a.y,z:a.z,w:a.w}},ivec2:function(a){return{x:a.x,y:a.y}},\r\n\tivec3:function(a){return{x:a.x,y:a.y,z:a.z}},ivec4:function(a){return{x:a.x,y:a.y,z:a.z,w:a.w}},bvec2:function(a){return{x:!!a.x,y:!!a.y}},bvec3:function(a){return{x:!!a.x,y:!!a.y,z:!!a.z}},bvec4:function(a){return{x:!!a.x,y:!!a.y,z:!!a.z,w:!!a.w}},quat:function(a){return{w:a.w,x:a.x,y:a.y,z:a.z}},mat3:function(a){return{\"0\":this.vec3(a[0]),1:this.vec3(a[1]),2:this.vec3(a[2])}},mat4:function(a){return{\"0\":this.vec4(a[0]),1:this.vec4(a[1]),2:this.vec4(a[2]),3:this.vec4(a[3])}}},roll:{$atan2:Math.atan2,\r\n\tquat:function(a){return this.$atan2(2*(a.x*a.y+a.w*a.z),a.w*a.w+a.x*a.x-a.y*a.y-a.z*a.z)}},pitch:{$atan2:Math.atan2,quat:function(a){return this.$atan2(2*(a.y*a.z+a.w*a.x),a.w*a.w-a.x*a.x-a.y*a.y+a.z*a.z)}},yaw:{$asin:Math.asin,quat:function(a){return this.$asin(this.GLM.clamp(-2*(a.x*a.z-a.w*a.y),-1,1))}},eulerAngles:{quat:function(a){return this.GLM.vec3(this.GLM.pitch(a),this.GLM.yaw(a),this.GLM.roll(a))}}}),GLM.$template[\"declare<T,...>\"]({$from_glsl:{string:function(a,b){var c;a.replace(/^([$\\w]+)\\(([-.0-9ef, ]+)\\)$/,\r\n\tfunction(a,d,h){a=glm[d]||glm[\"$\"+d];if(!a)throw new GLM.GLMJSError(\"glsl decoding issue: unknown type '\"+d+\"'\");c=h.split(\",\").map(parseFloat);if(!b||b===a)c=a.apply(glm,c);else{if(!0===b||b===Array){for(;c.length<a.componentLength;)c.push(c[c.length-1]);return c}throw new GLM.GLMJSError(\"glsl decoding issue: second argument expected to be undefined|true|Array\");}});return c}},$to_glsl:{\"vec<N>\":function(a,b){var c=GLM.$to_array(a);b&&(\"object\"===typeof b&&\"precision\"in b)&&(c=c.map(function(a){return a.toFixed(b.precision)}));\r\n\tfor(;c.length&&c[c.length-2]===c[c.length-1];)c.pop();return a.$type+\"(\"+c+\")\"},\"uvec<N>\":function(a,b){return this.vecN(a,b)},\"ivec<N>\":function(a,b){return this.vecN(a,b)},\"bvec<N>\":function(a,b){return this.vecN(a,b)},quat:function(a,b){var c;b&&(\"object\"===typeof b&&\"precision\"in b)&&(c=b.precision);return 0===a.x+a.y+a.z?\"quat(\"+(void 0===c?a.w:a.w.toFixed(c))+\")\":this.vec4(a,b)},\"mat<N>\":function(a,b){var c;b&&(\"object\"===typeof b&&\"precision\"in b)&&(c=b.precision);var e=GLM.$to_array(a);void 0!==\r\n\tc&&(e=e.map(function(a){return a.toFixed(c)}));return e.reduce(function(a,b){return a+1*b},0)===e[0]*N?\"matN(\"+e[0]+\")\":\"matN(\"+e+\")\"}},frexp:{\"float\":function(a,b){return 1===arguments.length?this[\"float,undefined\"](a):this[\"float,array\"](a,b)},\"vec<N>\":function(a,b){if(2>arguments.length)throw new GLM.GLMJSError(\"frexp(vecN, ivecN) expected ivecN as second parameter\");return GLM.vecN(GLM.$to_array(a).map(function(a,e){var d=GLM._frexp(a);b[e]=d[1];return d[0]}))},\"float,undefined\":function(a){return GLM._frexp(a)},\r\n\t\"float,array\":function(a,b){return GLM._frexp(a,b)}},ldexp:{\"float\":GLM._ldexp,\"vec<N>\":function(a,b){return GLM.vecN(GLM.$to_array(a).map(function(a,e){return GLM._ldexp(a,b[e])}))}}}));\r\n\tGLM.$template[\"declare<T,V,...>\"]({rotate:{\"float,vec3\":function(a,b){return this.GLM.$outer.mat4_angleAxis(a,b)},\"mat4,float\":function(a,b,c){return a.mul(this.GLM.$outer.mat4_angleAxis(b,c))}},scale:{$outer:GLM.$outer,\"mat4,vec3\":function(a,b){return a.mul(this.$outer.mat4_scale(b))},\"vec3,undefined\":function(a){return this.$outer.mat4_scale(a)}},translate:{\"mat4,vec3\":function(a,b){return a.mul(this.GLM.$outer.mat4_translation(b))},\"vec3,undefined\":function(a){return this.GLM.$outer.mat4_translation(a)}},\r\n\tangleAxis:{\"float,vec3\":function(a,b){return this.GLM.$outer.quat_angleAxis(a,b)}},min:{\"float,float\":function(a,b){return this.GLM._min(a,b)},\"vec<N>,float\":function(a,b){return new this.GLM.vecN(this.GLM.$to_array(a).map(function(a){return this.GLM._min(a,b)}.bind(this)))}},max:{\"float,float\":function(a,b){return this.GLM._max(a,b)},\"vec<N>,float\":function(a,b){return new this.GLM.vecN(this.GLM.$to_array(a).map(function(a){return this.GLM._max(a,b)}.bind(this)))}},equal:{\"float,float\":GLM._equal,\r\n\t\"vec<N>,vec<N>\":function(a,b){for(var c=this[\"float,float\"],e=glm.bvecN(),d=0;d<N;d++)e[d]=c(a[d],b[d]);return e},\"bvec<N>,bvec<N>\":function(a,b){return this[\"vecN,vecN\"](a,b)},\"ivec<N>,ivec<N>\":function(a,b){return this[\"vecN,vecN\"](a,b)},\"uvec<N>,uvec<N>\":function(a,b){return this[\"vecN,vecN\"](a,b)},\"quat,quat\":function(a,b){for(var c=this[\"float,float\"],e=glm.bvec4(),d=0;4>d;d++)e[d]=c(a[d],b[d]);return e}},_slerp:{\"quat,quat\":function(a,b,c){var e=b,d=glm.dot(glm.vec4(a),glm.vec4(b));0>d&&(e=\r\n\tb.mul(-1),d=-d);if(d>1-glm.epsilon())return glm.quat(glm.mix(a.w,e.w,c),glm.mix(a.x,e.x,c),glm.mix(a.y,e.y,c),glm.mix(a.z,e.z,c));b=Math.acos(d);return(a.mul(Math.sin((1-c)*b))+e.mul(Math.sin(c*b)))/Math.sin(b)}},rotation:{\"vec3,vec3\":function(a,b){var c=this.$dot(a,b),e=new a.constructor(new a.elements.constructor(3));if(c>=1-this.$epsilon)return this.$quat();if(c<-1+this.$epsilon)return e=this.$cross(this.$m[2],a),this.$length2(e)<this.$epsilon&&(e=this.$cross(this.$m[0],a)),e=this.$normalize(e),\r\n\tthis.$angleAxis(this.$pi,e);var e=this.$cross(a,b),c=this.$sqrt(2*(1+c)),d=1/c;return this.$quat(0.5*c,e.x*d,e.y*d,e.z*d)}},project:{\"vec3,mat4\":function(a,b,c,e){a=glm.vec4(a,1);a=b[\"*\"](a);a=c[\"*\"](a);a[\"/=\"](a.w);a=a[\"*\"](0.5)[\"+\"](0.5);a[0]=a[0]*e[2]+e[0];a[1]=a[1]*e[3]+e[1];return glm.vec3(a)}},unProject:{\"vec3,mat4\":function(a,b,c,e){b=glm.inverse(c[\"*\"](b));a=glm.vec4(a,1);a.x=(a.x-e[0])/e[2];a.y=(a.y-e[1])/e[3];a=a[\"*\"](2)[\"-\"](glm.vec4(1));e=b[\"*\"](a);e[\"/=\"](e.w);return glm.vec3(e)}},orientedAngle:{\"vec3,vec3\":function(a,\r\n\tb,c){var e=Math.acos(glm.clamp(glm.dot(a,b),0,1));return glm.mix(e,-e,0>glm.dot(c,glm.cross(a,b))?1:0)}}});\r\n\tGLM.$to_string=GLM.$template[\"declare<T,...>\"]({$to_string:{\"function\":function(a){return\"[function \"+(a.name||\"anonymous\")+\"]\"},ArrayBuffer:function(a){return\"[object ArrayBuffer \"+JSON.stringify({byteLength:a.byteLength})+\"]\"},Float32Array:function(a){return\"[object Float32Array \"+JSON.stringify({length:a.length,byteOffset:a.byteOffset,byteLength:a.byteLength,BPE:a.BYTES_PER_ELEMENT})+\"]\"},\"float\":function(a,b){return GLM.$toFixedString(\"float\",{value:a},[\"value\"],b&&b.precision)},string:function(a){return a},\r\n\tbool:function(a){return\"bool(\"+a+\")\"},\"vec<N>\":function(a,b){return GLM.$toFixedString(a.$type_name,a,a.$components,b&&b.precision)},\"uvec<N>\":function(a,b){return GLM.$toFixedString(a.$type_name,a,a.$components,b&&\"object\"===typeof b&&b.precision||0)},\"ivec<N>\":function(a,b){return GLM.$toFixedString(a.$type_name,a,a.$components,b&&\"object\"===typeof b&&b.precision||0)},\"bvec<N>\":function(a){return a.$type_name+\"(\"+GLM.$to_array(a).map(Boolean).join(\", \")+\")\"},\"mat<N>\":function(a,b){var c=[0,1,2,\r\n\t3].slice(0,N).map(function(b){return a[b]}).map(function(a){return GLM.$toFixedString(\"\\t\",a,a.$components,b&&b.precision)});return a.$type_name+\"(\\n\"+c.join(\", \\n\")+\"\\n)\"},quat:function(a,b){a=GLM.degrees(GLM.eulerAngles(a));return GLM.$toFixedString(\"<quat>\"+a.$type_name,a,[\"x\",\"y\",\"z\"],b&&b.precision)}}}).$to_string;\r\n\tGLM.$template[\"declare<T,V,...>\"]({copy:{$op:\"=\",\"vec<N>,vec<N>\":function(a,b){a.elements.set(b.elements);return a},\"vec<N>,array<N>\":function(a,b){a.elements.set(b);return a},\"vec<N>,uvec<N>\":function(a,b){a.elements.set(b.elements);return a},\"vec<N>,ivec<N>\":function(a,b){a.elements.set(b.elements);return a},\"vec<N>,bvec<N>\":function(a,b){a.elements.set(b.elements);return a},\"uvec<N>,uvec<N>\":function(a,b){a.elements.set(b.elements);return a},\"uvec<N>,array<N>\":function(a,b){a.elements.set(b);return a},\r\n\t\"uvec<N>,vec<N>\":function(a,b){a.elements.set(b.elements);return a},\"uvec<N>,ivec<N>\":function(a,b){a.elements.set(b.elements);return a},\"uvec<N>,bvec<N>\":function(a,b){a.elements.set(b.elements);return a},\"ivec<N>,ivec<N>\":function(a,b){a.elements.set(b.elements);return a},\"ivec<N>,array<N>\":function(a,b){a.elements.set(b);return a},\"ivec<N>,vec<N>\":function(a,b){a.elements.set(b.elements);return a},\"ivec<N>,uvec<N>\":function(a,b){a.elements.set(b.elements);return a},\"ivec<N>,bvec<N>\":function(a,\r\n\tb){a.elements.set(b.elements);return a},\"bvec<N>,ivec<N>\":function(a,b){a.elements.set(b.elements);return a},\"bvec<N>,array<N>\":function(a,b){a.elements.set(b);return a},\"bvec<N>,vec<N>\":function(a,b){a.elements.set(b.elements);return a},\"bvec<N>,uvec<N>\":function(a,b){a.elements.set(b.elements);return a},\"bvec<N>,bvec<N>\":function(a,b){a.elements.set(b.elements);return a},\"quat,quat\":function(a,b){a.elements.set(b.elements);return a},\"mat<N>,mat<N>\":function(a,b){a.elements.set(b.elements);return a},\r\n\t\"mat<N>,array<N>\":function(a,b){b=b.reduce(function(a,b){if(!a.concat)throw new GLM.GLMJSError(\"matN,arrayN -- [[.length===4] x 4] expected\");return a.concat(b)});if(b===N)throw new GLM.GLMJSError(\"matN,arrayN -- [[N],[N],[N],[N]] expected\");return a[\"=\"](b)},\"mat<N>,array<N*N>\":function(a,b){a.elements.set(b);return a},\"mat4,array9\":function(a,b){a.elements.set((new GLM.mat4(b)).elements);return a}},sub:{$op:\"-\",_sub:function(a,b){return this.GLM.$to_array(a).map(function(a,e){return a-b[e]})},\"vec<N>,vec<N>\":function(a,\r\n\tb){return new this.GLM.vecN(this._sub(a,b))},\"vec<N>,uvec<N>\":function(a,b){return new this.GLM.vecN(this._sub(a,b))},\"uvec<N>,uvec<N>\":function(a,b){return new this.GLM.uvecN(this._sub(a,b))},\"uvec<N>,ivec<N>\":function(a,b){return new this.GLM.uvecN(this._sub(a,b))},\"vec<N>,ivec<N>\":function(a,b){return new this.GLM.vecN(this._sub(a,b))},\"ivec<N>,uvec<N>\":function(a,b){return new this.GLM.ivecN(this._sub(a,b))},\"ivec<N>,ivec<N>\":function(a,b){return new this.GLM.ivecN(this._sub(a,b))}},sub_eq:{$op:\"-=\",\r\n\t\"vec<N>,vec<N>\":function(a,b){for(var c=a.elements,e=b.elements,d=0;d<N;d++)c[d]-=e[d];return a},\"vec<N>,uvec<N>\":function(a,b){return this[\"vecN,vecN\"](a,b)},\"uvec<N>,uvec<N>\":function(a,b){return this[\"vecN,vecN\"](a,b)},\"uvec<N>,ivec<N>\":function(a,b){return this[\"vecN,vecN\"](a,b)},\"vec<N>,ivec<N>\":function(a,b){return this[\"vecN,vecN\"](a,b)},\"ivec<N>,ivec<N>\":function(a,b){return this[\"vecN,vecN\"](a,b)},\"ivec<N>,uvec<N>\":function(a,b){return this[\"vecN,vecN\"](a,b)}},add:{$op:\"+\",_add:function(a,\r\n\tb){return this.GLM.$to_array(a).map(function(a,e){return a+b[e]})},\"vec<N>,float\":function(a,b){return new this.GLM.vecN(this._add(a,[b,b,b,b]))},\"vec<N>,vec<N>\":function(a,b){return new this.GLM.vecN(this._add(a,b))},\"vec<N>,uvec<N>\":function(a,b){return new this.GLM.vecN(this._add(a,b))},\"uvec<N>,uvec<N>\":function(a,b){return new this.GLM.uvecN(this._add(a,b))},\"uvec<N>,ivec<N>\":function(a,b){return new this.GLM.uvecN(this._add(a,b))},\"vec<N>,ivec<N>\":function(a,b){return new this.GLM.vecN(this._add(a,\r\n\tb))},\"ivec<N>,ivec<N>\":function(a,b){return new this.GLM.ivecN(this._add(a,b))},\"ivec<N>,uvec<N>\":function(a,b){return new this.GLM.ivecN(this._add(a,b))}},add_eq:{$op:\"+=\",\"vec<N>,vec<N>\":function(a,b){for(var c=a.elements,e=b.elements,d=0;d<N;d++)c[d]+=e[d];return a},\"vec<N>,uvec<N>\":function(a,b){return this[\"vecN,vecN\"](a,b)},\"uvec<N>,uvec<N>\":function(a,b){return this[\"vecN,vecN\"](a,b)},\"uvec<N>,ivec<N>\":function(a,b){return this[\"vecN,vecN\"](a,b)},\"vec<N>,ivec<N>\":function(a,b){return this[\"vecN,vecN\"](a,\r\n\tb)},\"ivec<N>,ivec<N>\":function(a,b){return this[\"vecN,vecN\"](a,b)},\"ivec<N>,uvec<N>\":function(a,b){return this[\"vecN,vecN\"](a,b)}},div:{$op:\"/\",\"vec<N>,float\":function(a,b){return new this.GLM.vecN(this.GLM.$to_array(a).map(function(a){return a/b}))}},div_eq:{$op:\"/=\",\"vec<N>,float\":function(a,b){for(var c=0;c<N;c++)a.elements[c]/=b;return a}},mul:{$op:\"*\",\"vec<N>,vec<N>\":function(a,b){return new this.GLM.vecN(this.GLM.$to_array(a).map(function(a,e){return a*b[e]}))}},eql_epsilon:function(a){return{$op:\"~=\",\r\n\t\"vec<N>,vec<N>\":a,\"mat<N>,mat<N>\":a,\"quat,quat\":a,\"uvec<N>,uvec<N>\":a,\"ivec<N>,ivec<N>\":a}}(function(a,b){return this.GLM.all(this.GLM.epsilonEqual(a,b,this.GLM.epsilon()))}),eql:function(a){return{$op:\"==\",\"mat<N>,mat<N>\":function(a,c){return c.elements.length===glm.$to_array(a).filter(function(a,b){return a===c.elements[b]}).length},\"vec<N>,vec<N>\":a,\"quat,quat\":a,\"uvec<N>,uvec<N>\":a,\"ivec<N>,ivec<N>\":a,\"bvec<N>,bvec<N>\":a}}(function(a,b){return GLM.all(GLM.equal(a,b))})});\r\n\tGLM.string={$type_name:\"string\",$:{}};GLM.number={$type_name:\"float\",$:{}};GLM[\"boolean\"]={$type:\"bool\",$type_name:\"bool\",$:{}};\r\n\tGLM.vec2=GLM.$template.GLMType(\"vec2\",{name:\"fvec2\",identity:[0,0],components:[\"xy\",\"01\"],undefined0:function(){return this.identity},number1:function(a){return[a,a]},number2:function(a,b){return[a,b]},object1:function(a){if(null!==a)switch(a.length){case 4:case 3:case 2:return[a[0],a[1]];default:if(\"y\"in a&&\"x\"in a){if(typeof a.x!==typeof a.y)throw new GLM.GLMJSError(\"unrecognized .x-ish object passed to GLM.vec2: \"+a);return\"string\"===typeof a.x?[1*a.x,1*a.y]:[a.x,a.y]}}throw new GLM.GLMJSError(\"unrecognized object passed to GLM.vec2: \"+\r\n\ta);}});\r\n\tGLM.uvec2=GLM.$template.GLMType(\"uvec2\",{name:\"uvec2\",identity:[0,0],components:[\"xy\",\"01\"],_clamp:function(a){return~~a},undefined0:function(){return this.identity},number1:function(a){a=this._clamp(a);return[a,a]},number2:function(a,b){a=this._clamp(a);b=this._clamp(b);return[a,b]},object1:function(a){switch(a.length){case 4:case 3:case 2:return[a[0],a[1]].map(this._clamp);default:if(\"y\"in a&&\"x\"in a){if(typeof a.x!==typeof a.y)throw new GLM.GLMJSError(\"unrecognized .x-ish object passed to GLM.\"+this.name+\r\n\t\": \"+a);return[a.x,a.y].map(this._clamp)}}throw new GLM.GLMJSError(\"unrecognized object passed to GLM.\"+this.name+\": \"+a);}});\r\n\tGLM.vec3=GLM.$template.GLMType(\"vec3\",{name:\"fvec3\",identity:[0,0,0],components:[\"xyz\",\"012\",\"rgb\"],undefined0:function(){return GLM.vec3.$.identity},number1:function(a){return[a,a,a]},number2:function(a,b){return[a,b,b]},number3:function(a,b,c){return[a,b,c]},Error:GLM.GLMJSError,object1:function(a){if(a)switch(a.length){case 4:case 3:return[a[0],a[1],a[2]];case 2:return[a[0],a[1],a[1]];default:if(\"z\"in a&&\"x\"in a){if(typeof a.x!==typeof a.y)throw new this.Error(\"unrecognized .x-ish object passed to GLM.vec3: \"+\r\n\ta);return\"string\"===typeof a.x?[1*a.x,1*a.y,1*a.z]:[a.x,a.y,a.z]}}throw new this.Error(\"unrecognized object passed to GLM.vec3: \"+a);},object2:function(a,b){if(a instanceof GLM.vec2||a instanceof GLM.uvec2||a instanceof GLM.ivec2||a instanceof GLM.bvec2)return[a.x,a.y,b];throw new GLM.GLMJSError(\"unrecognized object passed to GLM.vec3(o,z): \"+[a,b]);}});\r\n\tGLM.uvec3=GLM.$template.GLMType(\"uvec3\",{name:\"uvec3\",identity:[0,0,0],components:[\"xyz\",\"012\"],_clamp:GLM.uvec2.$._clamp,undefined0:function(){return this.identity},number1:function(a){a=this._clamp(a);return[a,a,a]},number2:function(a,b){a=this._clamp(a);b=this._clamp(b);return[a,b,b]},number3:function(a,b,c){a=this._clamp(a);b=this._clamp(b);c=this._clamp(c);return[a,b,c]},object1:function(a){if(a)switch(a.length){case 4:case 3:return[a[0],a[1],a[2]].map(this._clamp);case 2:return[a[0],a[1],a[1]].map(this._clamp);\r\n\tdefault:if(\"z\"in a&&\"x\"in a){if(typeof a.x!==typeof a.y)throw new GLM.GLMJSError(\"unrecognized .x-ish object passed to GLM.\"+this.name+\": \"+a);return[a.x,a.y,a.z].map(this._clamp)}}throw new GLM.GLMJSError(\"unrecognized object passed to GLM.\"+this.name+\": \"+a);},object2:function(a,b){if(a instanceof GLM.vec2)return[a.x,a.y,b].map(this._clamp);if(a instanceof GLM.uvec2||a instanceof GLM.ivec2||a instanceof GLM.bvec2)return[a.x,a.y,this._clamp(b)];throw new GLM.GLMJSError(\"unrecognized object passed to GLM.\"+\r\n\tthis.name+\"(o,z): \"+[a,b]);}});\r\n\tGLM.vec4=GLM.$template.GLMType(\"vec4\",{name:\"fvec4\",identity:[0,0,0,0],components:[\"xyzw\",\"0123\",\"rgba\"],undefined0:function(){return this.identity},number1:function(a){return[a,a,a,a]},number2:function(a,b){return[a,b,b,b]},number3:function(a,b,c){return[a,b,c,c]},number4:function(a,b,c,e){return[a,b,c,e]},Error:GLM.GLMJSError,object1:function(a){if(a)switch(a.length){case 4:return[a[0],a[1],a[2],a[3]];case 3:return[a[0],a[1],a[2],a[2]];case 2:return[a[0],a[1],a[1],a[1]];default:if(\"w\"in a&&\"x\"in\r\n\ta){if(typeof a.x!==typeof a.w)throw new this.Error(\"unrecognized .x-ish object passed to GLM.vec4: \"+a);return\"string\"===typeof a.x?[1*a.x,1*a.y,1*a.z,1*a.w]:[a.x,a.y,a.z,a.w]}}throw new this.Error(\"unrecognized object passed to GLM.vec4: \"+[a,a&&a.$type]);},$GLM:GLM,object2:function(a,b){if(a instanceof this.$GLM.vec3||a instanceof this.$GLM.uvec3||a instanceof this.$GLM.ivec3||a instanceof this.$GLM.bvec3)return[a.x,a.y,a.z,b];throw new this.$GLM.GLMJSError(\"unrecognized object passed to GLM.vec4(o,w): \"+\r\n\t[a,b]);},object3:function(a,b,c){if(a instanceof this.$GLM.vec2||a instanceof this.$GLM.uvec2||a instanceof this.$GLM.ivec2||a instanceof this.$GLM.bvec2)return[a.x,a.y,b,c];throw new this.$GLM.GLMJSError(\"unrecognized object passed to GLM.vec4(o,z,w): \"+[a,b,c]);}});\r\n\tGLM.uvec4=GLM.$template.GLMType(\"uvec4\",{name:\"uvec4\",identity:[0,0,0,0],components:[\"xyzw\",\"0123\"],_clamp:GLM.uvec2.$._clamp,undefined0:function(){return this.identity},number1:function(a){a=this._clamp(a);return[a,a,a,a]},number2:function(a,b){a=this._clamp(a);b=this._clamp(b);return[a,b,b,b]},number3:function(a,b,c){a=this._clamp(a);b=this._clamp(b);c=this._clamp(c);return[a,b,c,c]},number4:function(a,b,c,e){return[a,b,c,e].map(this._clamp)},Error:GLM.GLMJSError,object1:function(a){if(a)switch(a.length){case 4:return[a[0],\r\n\ta[1],a[2],a[3]].map(this._clamp);case 3:return[a[0],a[1],a[2],a[2]].map(this._clamp);case 2:return[a[0],a[1],a[1],a[1]].map(this._clamp);default:if(\"w\"in a&&\"x\"in a){if(typeof a.x!==typeof a.y)throw new this.Error(\"unrecognized .x-ish object passed to GLM.\"+this.name+\": \"+a);return[a.x,a.y,a.z,a.w].map(this._clamp)}}throw new GLM.GLMJSError(\"unrecognized object passed to GLM.\"+this.name+\": \"+[a,a&&a.$type]);},object2:function(a,b){if(a instanceof GLM.vec3)return[a.x,a.y,a.z,b].map(this._clamp);if(a instanceof\r\n\tGLM.uvec3||a instanceof GLM.ivec3||a instanceof GLM.bvec3)return[a.x,a.y,a.z,this._clamp(b)];throw new GLM.GLMJSError(\"unrecognized object passed to GLM.\"+this.name+\"(o,w): \"+[a,b]);},object3:function(a,b,c){if(a instanceof GLM.vec2)return[a.x,a.y,b,c].map(this._clamp);if(a instanceof GLM.uvec2||a instanceof GLM.ivec2||a instanceof GLM.bvec2)return[a.x,a.y,this._clamp(b),this._clamp(c)];throw new GLM.GLMJSError(\"unrecognized object passed to GLM.\"+this.name+\"(o,z,w): \"+[a,b,c]);}});\r\n\tGLM.ivec2=GLM.$template.GLMType(\"ivec2\",GLM.$template.extend({},GLM.uvec2.$,{name:\"ivec2\"}));GLM.ivec3=GLM.$template.GLMType(\"ivec3\",GLM.$template.extend({},GLM.uvec3.$,{name:\"ivec3\"}));GLM.ivec4=GLM.$template.GLMType(\"ivec4\",GLM.$template.extend({},GLM.uvec4.$,{name:\"ivec4\"}));GLM.bvec2=GLM.$template.GLMType(\"bvec2\",GLM.$template.extend({},GLM.uvec2.$,{name:\"bvec2\",boolean1:GLM.uvec2.$.number1,boolean2:GLM.uvec2.$.number2}));\r\n\tGLM.bvec3=GLM.$template.GLMType(\"bvec3\",GLM.$template.extend({},GLM.uvec3.$,{name:\"bvec3\",boolean1:GLM.uvec3.$.number1,boolean2:GLM.uvec3.$.number2,boolean3:GLM.uvec3.$.number3}));GLM.bvec4=GLM.$template.GLMType(\"bvec4\",GLM.$template.extend({},GLM.uvec4.$,{name:\"bvec4\",boolean1:GLM.uvec4.$.number1,boolean2:GLM.uvec4.$.number2,boolean3:GLM.uvec4.$.number3,boolean4:GLM.uvec4.$.number4}));GLM.bvec2.$._clamp=GLM.bvec3.$._clamp=GLM.bvec4.$._clamp=function(a){return!!a};\r\n\tGLM.mat3=GLM.$template.GLMType(\"mat3\",{name:\"mat3x3\",identity:[1,0,0,0,1,0,0,0,1],undefined0:function(){return this.identity},number1:function(a){return 1===a?this.identity:[a,0,0,0,a,0,0,0,a]},number9:function(a,b,c,e,d,h,j,g,k){return arguments},Error:GLM.GLMJSError,$vec3:GLM.vec3,object1:function(a){if(a){var b=a.elements||a;if(16===b.length)return[b[0],b[1],b[2],b[4],b[5],b[6],b[8],b[9],b[10]];if(9===b.length)return b;if(0 in b&&1 in b&&2 in b&&!(3 in b)&&\"object\"===typeof b[2])return[b[0],b[1],\r\n\tb[2]].map(this.$vec3.$.object1).reduce(function(a,b){return a.concat(b)})}throw new this.Error(\"unrecognized object passed to GLM.mat3: \"+a);},object3:function(a,b,c){return[a,b,c].map(glm.$to_array).reduce(function(a,b){return a.concat(b)})}});\r\n\tGLM.mat4=GLM.$template.GLMType(\"mat4\",{name:\"mat4x4\",identity:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],undefined0:function(){return this.identity},number16:function(a,b,c,e,d,h,j,g,k,i,w,r,m,q,s,t){return arguments},number1:function(a){return 1===a?this.identity:[a,0,0,0,0,a,0,0,0,0,a,0,0,0,0,a]},Error:GLM.GLMJSError,$vec4:GLM.vec4,object1:function(a){var b;if(a){b=a.elements||a;if(9===b.length)return[b[0],b[1],b[2],0,b[3],b[4],b[5],0,b[6],b[7],b[8],0,0,0,0,1];if(4===b.length&&b[0]&&4===b[0].length)return b[0].concat(b[1],\r\n\tb[2],b[3]);if(16===b.length)return b;if(0 in b&&1 in b&&2 in b&&3 in b&&!(4 in b)&&\"object\"===typeof b[3])return[b[0],b[1],b[2],b[3]].map(this.$vec4.$.object1).reduce(function(a,b){return a.concat(b)})}throw new this.Error(\"unrecognized object passed to GLM.mat4: \"+[a,b&&b.length]);},object4:function(a,b,c,e){return[a,b,c,e].map(glm.$to_array).reduce(function(a,b){return a.concat(b)})}});\r\n\tGLM.quat=GLM.$template.GLMType(\"quat\",{identity:[0,0,0,1],components:[\"xyzw\",\"0123\"],undefined0:function(){return this.identity},number1:function(a){if(1!==a)throw Error(\"only quat(1) syntax supported for quat(number1 args)...\");return this.identity},number4:function(a,b,c,e){return[b,c,e,a]},$GLM:GLM,$M3:GLM.mat3(),$quat_array_from_zyx:function(a){var b=this.$M3;return this.$GLM.$outer.quat_angleAxis(a.z,b[2]).mul(this.$GLM.$outer.quat_angleAxis(a.y,b[1])).mul(this.$GLM.$outer.quat_angleAxis(a.x,\r\n\tb[0])).elements},object1:function(a){if(a){if(a instanceof this.$GLM.mat4)return this.$GLM.$outer.quat_array_from_mat4(a);if(4===a.length)return[a[0],a[1],a[2],a[3]];if(a instanceof this.$GLM.quat)return[a.x,a.y,a.z,a.w];if(a instanceof this.$GLM.vec3)return this.$quat_array_from_zyx(a);if(\"w\"in a&&\"x\"in a)return\"string\"===typeof a.x?[1*a.x,1*a.y,1*a.z,1*a.w]:[a.x,a.y,a.z,a.w]}throw new this.$GLM.GLMJSError(\"unrecognized object passed to GLM.quat.object1: \"+[a,a&&a.$type,typeof a,a&&a.constructor]);\r\n\t}});\r\n\t(function(){var a=function(a,b,c,e){var k={def:function(b,c){this[b]=c;Object.defineProperty(a.prototype,b,c)}};a.$properties=a.$properties||k;var i=a.$properties.def.bind(a.$properties),w=[0,1,2,3].map(function(a){return{enumerable:c,get:function(){return this.elements[a]},set:function(b){this.elements[a]=b}}});b.forEach(function(a,b){i(a,w[b])});if(isNaN(b[0])&&!/^_/.test(b[0])){var k=b.slice(),r=GLM.$subarray;do(function(a,b,c){\"quat\"===b&&(b=\"vec\"+c);var d=GLM[b];i(a,{enumerable:!1,get:function(){return new d(r(this.elements,0*\r\n\tc,1*c))},set:function(a){return(new d(r(this.elements,0*c,1*c)))[\"=\"](a)}})})(k.join(\"\"),a.prototype.$type.replace(/[1-9]$/,k.length),k.length);while(k[1]!=k.pop());if(e)return a.$properties;k=b.slice();if(b={xyz:{yz:1},xyzw:{yzw:1,yz:1,zw:2}}[k.join(\"\")])for(var m in b)(function(a,b,c,d){i(a,{enumerable:!1,get:function(){return new GLM[b](GLM.$subarray(this.elements,0*c+d,1*c+d))},set:function(a){return(new GLM[b](GLM.$subarray(this.elements,0*c+d,1*c+d)))[\"=\"](a)}})})(m,a.prototype.$type.replace(/[1-9]$/,\r\n\tm.length),m.length,b[m])}return a.$properties};a(GLM.vec2,GLM.vec2.$.components[0],!0);a(GLM.vec2,GLM.vec2.$.components[1]);a(GLM.vec3,GLM.vec3.$.components[0],!0);a(GLM.vec3,GLM.vec3.$.components[1]);a(GLM.vec3,GLM.vec3.$.components[2]);a(GLM.vec4,GLM.vec4.$.components[0],!0);a(GLM.vec4,GLM.vec4.$.components[1]);a(GLM.vec4,GLM.vec4.$.components[2]);a(GLM.quat,GLM.quat.$.components[0],!0,\"noswizzles\");a(GLM.quat,GLM.quat.$.components[1]);GLM.quat.$properties.def(\"wxyz\",{enumerable:!1,get:function(){return new GLM.vec4(this.w,\r\n\tthis.x,this.y,this.z)},set:function(a){a=GLM.vec4(a);return this[\"=\"](GLM.quat(a.x,a.y,a.z,a.w))}});\"uvec2 uvec3 uvec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4\".split(\" \").forEach(function(b){a(GLM[b],GLM[b].$.components[0],!0);a(GLM[b],GLM[b].$.components[1])});Object.defineProperty(GLM.quat.prototype,\"_x\",{get:function(){throw Error(\"erroneous quat._x access\");}});var b={2:{yx:{enumerable:!1,get:function(){return new GLM.vec2(this.y,this.x)},set:function(a){a=GLM.vec2(a);this.y=a[0];this.x=a[1]}}},3:{xz:{enumerable:!1,\r\n\tget:function(){return new GLM.vec2(this.x,this.z)},set:function(a){a=GLM.vec2(a);this.x=a[0];this.z=a[1]}},zx:{enumerable:!1,get:function(){return new GLM.vec2(this.z,this.x)},set:function(a){a=GLM.vec2(a);this.z=a[0];this.x=a[1]}},xzy:{enumerable:!1,get:function(){return new GLM.vec3(this.x,this.z,this.y)},set:function(a){a=GLM.vec3(a);this.x=a[0];this.z=a[1];this.y=a[2]}}},4:{xw:{enumerable:!1,get:function(){return new GLM.vec2(this.x,this.w)},set:function(a){a=GLM.vec2(a);this.x=a[0];this.w=a[1]}},\r\n\twz:{enumerable:!1,get:function(){return new GLM.vec2(this.w,this.z)},set:function(a){a=GLM.vec2(a);this.w=a[0];this.z=a[1]}},wxz:{enumerable:!1,get:function(){return new GLM.vec3(this.w,this.x,this.z)},set:function(a){a=GLM.vec3(a);this.w=a[0];this.x=a[1];this.z=a[2];return this}},xyw:{enumerable:!1,get:function(){return new GLM.vec3(this.x,this.y,this.w)},set:function(a){a=GLM.vec3(a);this.x=a[0];this.y=a[1];this.w=a[2];return this}},xzw:{enumerable:!1,get:function(){return new GLM.vec3(this.x,this.z,\r\n\tthis.w)},set:function(a){a=GLM.vec3(a);this.x=a[0];this.z=a[1];this.w=a[2]}},wxyz:{enumerable:!1,get:function(){return new GLM.vec4(this.w,this.x,this.y,this.z)},set:function(a){a=GLM.vec4(a);this.w=a[0];this.x=a[1];this.y=a[2];this.z=a[3];return this}}}},c;for(c in b)for(var e in b[c])2>=c&&GLM.vec2.$properties.def(e,b[c][e]),3>=c&&GLM.vec3.$properties.def(e,b[c][e]),4>=c&&GLM.vec4.$properties.def(e,b[c][e]);GLM.$partition=function(a,b,c,e){if(void 0===c)throw new GLM.GLMJSError(\"nrows is undefined\");\r\n\tvar k=b.$.identity.length;c=c||k;for(var i=function(a){3<GLM.$DEBUG&&GLM.$outer.console.debug(\"CACHEDBG: \"+a)},w=0;w<c;w++)(function(c){var j=e&&e+c,q=c*k;Object.defineProperty(a,c,{configurable:!0,enumerable:!0,set:function(e){if(e instanceof b)this.elements.set(e.elements,q);else if(e&&e.length===k)this.elements.set(e,q);else throw new GLM.GLMJSError(\"unsupported argtype to \"+(a&&a.$type)+\"[\"+c+\"] setter: \"+[typeof e,e]);},get:function(){if(e){if(this[j])return c||i(\"cache hit \"+j),this[j];c||i(\"cache miss \"+\r\n\tj)}var a,d=new b(a=GLM.$subarray(this.elements,q,q+k));if(d.elements!==a)throw new GLM.GLMJSError(\"v.elements !== t \"+[GLM.$subarray,d.elements.constructor===a.constructor,d.elements.buffer===a.buffer]);e&&Object.defineProperty(this,j,{configurable:!0,enumerable:!1,value:d});return d}})})(w)};GLM.$partition(GLM.mat4.prototype,GLM.vec4,4,\"_cache_\");GLM.$partition(GLM.mat3.prototype,GLM.vec3,3,\"_cache_\")})();\r\n\tGLM.$dumpTypes=function(a){GLM.$types.forEach(function(b){GLM[b].componentLength&&a(\"GLM.\"+b,JSON.stringify({\"#type\":GLM[b].prototype.$type_name,\"#floats\":GLM[b].componentLength,\"#bytes\":GLM[b].BYTES_PER_ELEMENT}))})};\r\n\tGLM.$init=function(a){a.prefix&&(GLMJS_PREFIX=a.prefix);GLM.$prefix=GLMJS_PREFIX;var b=a.log||function(){};try{b(\"GLM-js: ENV: \"+_ENV._VERSION)}catch(c){}b(\"GLM-JS: initializing: \"+JSON.stringify(a,0,2));b(JSON.stringify({functions:Object.keys(GLM.$outer.functions)}));var e=GLM.mat4,d=GLM.$outer;GLM.toMat4=function(a){return new e(d.mat4_array_from_quat(a))};GLM.$template.extend(GLM.rotation.$template,{$quat:GLM.quat,$dot:GLM.dot.link(\"vec3,vec3\"),$epsilon:GLM.epsilon(),$m:GLM.mat3(),$pi:GLM.pi(),\r\n\t$length2:GLM.length2.link(\"vec3\"),$cross:GLM.cross.link(\"vec3,vec3\"),$normalize:GLM.normalize.link(\"vec3\"),$angleAxis:GLM.angleAxis.link(\"float,vec3\"),$sqrt:GLM.sqrt});GLM.$symbols=[];for(var h in GLM)\"function\"===typeof GLM[h]&&/^[a-z]/.test(h)&&GLM.$symbols.push(h);GLM.$types.forEach(function(a){var b=GLM[a].prototype.$type,c;for(c in GLM.$outer.functions){var d=GLM.$outer.functions[c];d.$op&&(GLM.$DEBUG&&GLM.$outer.console.debug(\"mapping operator<\"+b+\"> \"+c+\" / \"+d.$op),GLM[a].prototype[c]=d,GLM[a].prototype[d.$op]=\r\n\td)}});b(\"GLM-JS: \"+GLM.version+\" emulating GLM_VERSION=\"+GLM.GLM_VERSION+\" vendor_name=\"+a.vendor_name+\" vendor_version=\"+a.vendor_version);glm.vendor=a};\r\n\tGLM.using_namespace=function(a){GLM.$DEBUG&&GLM.$outer.console.debug(\"GLM.using_namespace munges globals; it should probably not be used!\");GLM.using_namespace.$tmp={ret:void 0,tpl:a,names:GLM.$symbols,saved:{},evals:[],restore:[],before:[],after:[]};eval(GLM.using_namespace.$tmp.names.map(function(a,c){return\"GLM.using_namespace.$tmp.saved['\"+a+\"'] = GLM.using_namespace.$tmp.before[\"+c+\"] = 'undefined' !== typeof \"+a+\";\"}).join(\"\\n\"));GLM.$DEBUG&&console.warn(\"GLM.using_namespace before #globals: \"+\r\n\tGLM.using_namespace.$tmp.before.length);GLM.using_namespace.$tmp.names.map(function(a){GLM.using_namespace.$tmp.restore.push(a+\"=GLM.using_namespace.$tmp.saved['\"+a+\"'];\"+(\"GLM.using_namespace.$tmp.saved['\"+a+\"']=undefined;delete GLM.using_namespace.$tmp.saved['\"+a+\"'];\"));GLM.using_namespace.$tmp.evals.push(a+\"=GLM.\"+a+\";\")});eval(GLM.using_namespace.$tmp.evals.join(\"\\n\"));GLM.using_namespace.$tmp.ret=a();eval(GLM.using_namespace.$tmp.restore.join(\"\\n\"));eval(GLM.using_namespace.$tmp.names.map(function(a,\r\n\tc){return\"GLM.using_namespace.$tmp.after[\"+c+\"] = 'undefined' !== typeof \"+a+\";\"}).join(\"\\n\"));GLM.$DEBUG&&console.warn(\"GLM.using_namespace after #globals: \"+GLM.using_namespace.$tmp.after.length);a=GLM.using_namespace.$tmp.ret;delete GLM.using_namespace.$tmp;return a};\r\n\tfunction $GLM_extern(a,b){b=b||a;return function(){GLM[b]=GLM.$outer.functions[a]||GLM.$outer[a];if(!GLM[b])throw new GLM.GLMJSError(\"$GLM_extern: unresolved external symbol: \"+a);GLM.$DEBUG&&GLM.$outer.console.debug(\"$GLM_extern: resolved external symbol \"+a+\" \"+typeof GLM[b]);return GLM[b].apply(this,arguments)}}\r\n\tfunction GLM_polyfills(){var a={};\"bind\"in Function.prototype||(a.bind=Function.prototype.bind=function(a){function c(){}if(\"function\"!==typeof this)throw new TypeError(\"not callable\");var e=[].slice,d=e.call(arguments,1),h=this,j=function(){return h.apply(this instanceof c?this:a||global,d.concat(e.call(arguments)))};c.prototype=this.prototype||c.prototype;j.prototype=new c;return j});return a}\r\n\t$GLM_reset_logging.current=function(){return{$GLM_log:\"undefined\"!==typeof $GLM_log&&$GLM_log,$GLM_console_log:\"undefined\"!==typeof $GLM_console_log&&$GLM_console_log,$GLM_console_prefixed:\"undefined\"!==typeof $GLM_console_prefixed&&$GLM_console_prefixed,console:GLM.$outer.console}};\r\n\tfunction $GLM_reset_logging(a){a&&\"object\"===typeof a&&($GLM_log=a.$GLM_log,$GLM_console_log=a.$GLM_console_log,$GLM_console_factory=a.$GLM_console_factory,GLM.$outer.console=a.console,a=!1);if(a||\"undefined\"===typeof $GLM_log)$GLM_log=function(a,b){GLM.$outer.console.log.apply(GLM.$outer.console,[].slice.call(arguments).map(function(a){var b=typeof a;return\"xboolean\"===b||\"string\"===b?a+\"\":GLM.$isGLMObject(a)||!isNaN(a)?GLM.to_string(a):a+\"\"}))};if(a||\"undefined\"===typeof $GLM_console_log)$GLM_console_log=\r\n\tfunction(a,b){(console[a]||function(){}).apply(console,[].slice.call(arguments,1))};if(a||\"undefined\"===typeof $GLM_console_factory)$GLM_console_factory=function(a){return $GLM_console_log.bind($GLM_console_log,a)};var b=$GLM_console_factory,c={};\"debug,warn,info,error,log,write\".replace(/\\w+/g,function(a){c[a]=b(a)});\"object\"===typeof GLM&&(GLM.$outer&&(GLM.$outer.console=c),GLM.$log=$GLM_log);return c}try{window.$GLM_reset_logging=this.$GLM_reset_logging=$GLM_reset_logging}catch(e$$19){}\r\n\tGLM.$reset_logging=$GLM_reset_logging;GLM.$log=GLM.$log||$GLM_log;function $GLM_GLMJSError(a,b){function c(c){this.name=a;this.stack=Error().stack;Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor);this.message=c;b&&b.apply(this,arguments)}c.prototype=Error();c.prototype.name=a;return c.prototype.constructor=c}GLMAT.mat4.exists;glm=GLM;var DLL={_version:\"0.0.2\",_name:\"glm.gl-matrix.js\",_glm_version:glm.version,prefix:\"glm-js[glMatrix]: \",vendor_version:GLMAT.VERSION,vendor_name:\"glMatrix\"};\r\n\tDLL.statics={$outer:GLM.$outer,$typeArray:function(a){return new this.$outer.Float32Array(a)},$mat4:GLM.mat4,$quat:GLM.quat,$mat4$perspective:GLMAT.mat4.perspective,$mat4$ortho:GLMAT.mat4.ortho,mat4_perspective:function(a,b,c,e){return new this.$mat4(this.$mat4$perspective(this.$typeArray(16),a,b,c,e))},mat4_ortho:function(a,b,c,e,d,h){return new this.$mat4(this.$mat4$ortho(this.$typeArray(16),a,b,c,e,d||-1,h||1))},$quat$setAxisAngle:GLMAT.quat.setAxisAngle,$mat4$fromQuat:GLMAT.mat4.fromQuat,mat4_angleAxis:function(a,\r\n\tb){var c=this.$quat$setAxisAngle(this.$typeArray(4),b,a);return new this.$mat4(this.$mat4$fromQuat(this.$typeArray(16),c))},quat_angleAxis:function(a,b){return new this.$quat(this.$quat$setAxisAngle(this.$typeArray(4),b,a))},$mat4$translate:GLMAT.mat4.translate,mat4_translation:function(a){var b=new this.$mat4;this.$mat4$translate(b.elements,b.elements,a.elements);return b},$mat4$scale:GLMAT.mat4.scale,mat4_scale:function(a){var b=new this.$mat4;this.$mat4$scale(b.elements,b.elements,a.elements);\r\n\treturn b},toJSON:function(){var a={},b;for(b in this)0!==b.indexOf(\"$\")&&(a[b]=this[b]);return a},$vec3:GLM.vec3,$clamp:GLM.clamp,mat4_array_from_quat:function(a){return this.$mat4$fromQuat(this.$typeArray(16),a.elements)},$qtmp:new GLM.$outer.Float32Array(9),$quat$fromMat3:GLMAT.quat.fromMat3,$mat3$fromMat4:GLMAT.mat3.fromMat4,quat_array_from_mat4:function(a){return this.$quat$fromMat3(this.$typeArray(4),this.$mat3$fromMat4(this.$qtmp,a.elements))}};\r\n\tDLL[\"declare<T,V,...>\"]={mul:{$op:\"*\",$typeArray:function(a){return new this.GLM.$outer.Float32Array(a)},$vec3$transformQuat:GLMAT.vec3.transformQuat,\"quat,vec3\":function(a,b){return new this.GLM.vec3(this.$vec3$transformQuat(this.$typeArray(3),b.elements,a.elements))},\"vec3,quat\":function(a,b){return this[\"quat,vec3\"](this.GLM.inverse(b),a)},\"quat,vec4\":function(a,b){return this[\"mat4,vec4\"](this.GLM.toMat4(a),b)},\"vec4,quat\":function(a,b){return this[\"quat,vec4\"](this.GLM.inverse(b),a)},\"$vec<N>$scale\":\"GLMAT.vecN.scale\",\r\n\t\"vec<N>,float\":function(a,b){return new this.GLM.vecN(this.$vecN$scale(this.$typeArray(N),a.elements,b))},\"quat,float\":function(a,b){return new a.constructor(this[\"vec4,float\"](a,b).elements)},$vec4$transformMat4:GLMAT.vec4.transformMat4,\"mat4,vec4\":function(a,b){return new GLM.vec4(this.$vec4$transformMat4(this.$typeArray(4),b.elements,a.elements))},\"vec4,mat4\":function(a,b){return this[\"mat4,vec4\"](GLM.inverse(b),a)},\"$mat<N>mul\":\"GLMAT.matN.mul\",\"mat<N>,mat<N>\":function(a,b){return new a.constructor(this.$matNmul(this.$typeArray(N*\r\n\tN),a.elements,b.elements))},$quat$multiply:GLMAT.quat.multiply,\"quat,quat\":function(a,b){return new a.constructor(this.$quat$multiply(this.$typeArray(4),a.elements,b.elements))}},mul_eq:{$op:\"*=\",\"$mat<N>$multiply\":\"GLMAT.matN.multiply\",\"mat<N>,mat<N>\":function(a,b){this.$matN$multiply(a.elements,a.elements,b.elements);return a},\"$vec<N>$scale\":\"GLMAT.vecN.scale\",\"vec<N>,float\":function(a,b){this.$vecN$scale(a.elements,a.elements,b);return a},$quat$multiply:GLMAT.quat.multiply,\"quat,quat\":function(a,\r\n\tb){this.$quat$multiply(a.elements,a.elements,b.elements);return a},$quat$invert:GLMAT.quat.invert,$vec3$transformQuat:GLMAT.vec3.transformQuat,\"inplace:vec3,quat\":function(a,b){var c=this.$quat$invert(new this.GLM.$outer.Float32Array(4),b.elements);this.$vec3$transformQuat(a.elements,a.elements,c);return a},$mat4$invert:GLMAT.mat4.invert,$vec4$transformMat4:GLMAT.vec4.transformMat4,\"inplace:vec4,mat4\":function(a,b){var c=this.$mat4$invert(new this.GLM.$outer.Float32Array(16),b.elements);this.$vec4$transformMat4(a.elements,\r\n\ta.elements,c);return a}},cross:{$vec2$cross:GLMAT.vec2.cross,\"vec2,vec2\":function(a,b){return new this.GLM.vec3(this.$vec2$cross(new this.GLM.$outer.Float32Array(3),a,b))},$vec3$cross:GLMAT.vec3.cross,\"vec3,vec3\":function(a,b){return new this.GLM.vec3(this.$vec3$cross(new this.GLM.$outer.Float32Array(3),a,b))}},dot:{\"$vec<N>$dot\":\"GLMAT.vecN.dot\",\"vec<N>,vec<N>\":function(a,b){return this.$vecN$dot(a,b)}},lookAt:{$mat4$lookAt:GLMAT.mat4.lookAt,\"vec3,vec3\":function(a,b,c){return new this.GLM.mat4(this.$mat4$lookAt(new this.GLM.$outer.Float32Array(16),\r\n\ta.elements,b.elements,c.elements))}}};DLL[\"declare<T,V,number>\"]={mix:{$quat$slerp:GLMAT.quat.slerp,\"quat,quat\":function(a,b,c){return new GLM.quat(this.$quat$slerp(new GLM.$outer.Float32Array(4),a.elements,b.elements,c))}}};DLL[\"declare<T,V,number>\"].slerp=DLL[\"declare<T,V,number>\"].mix;\r\n\tDLL[\"declare<T>\"]={normalize:{\"$vec<N>normalize\":\"GLMAT.vecN.normalize\",$typeArray:function(a){return new this.GLM.$outer.Float32Array(a)},\"vec<N>\":function(a){return new this.GLM.vecN(this.$vecNnormalize(this.$typeArray(N),a))},$quat$normalize:GLMAT.quat.normalize,quat:function(a){return new this.GLM.quat(this.$quat$normalize(new this.GLM.$outer.Float32Array(4),a.elements))}},length:{$quat$length:GLMAT.quat.length,quat:function(a){return this.$quat$length(a.elements)},\"$vec<N>$length\":\"GLMAT.vecN.length\",\r\n\t\"vec<N>\":function(a){return this.$vecN$length(a.elements)}},length2:{$quat$squaredLength:GLMAT.quat.squaredLength,quat:function(a){return this.$quat$squaredLength(a.elements)},\"$vec<N>$squaredLength\":\"GLMAT.vecN.squaredLength\",\"vec<N>\":function(a){return this.$vecN$squaredLength(a.elements)}},inverse:{$quatinvert:GLMAT.quat.invert,quat:function(a){return this.GLM.quat(this.$quatinvert(new this.GLM.$outer.Float32Array(4),a.elements))},$mat4invert:GLMAT.mat4.invert,mat4:function(a){a=a.clone();return null===\r\n\tthis.$mat4invert(a.elements,a.elements)?a[\"=\"](this.GLM.mat4()):a}},transpose:{$mat4$transpose:GLMAT.mat4.transpose,mat4:function(a){a=a.clone();this.$mat4$transpose(a.elements,a.elements);return a}}};glm.$outer.$import(DLL);try{module.exports=glm}catch(e$$20){}\r\n\tfunction $GLMVector(a,b,c){this.typearray=c=c||GLM.$outer.Float32Array;if(!(this instanceof $GLMVector))throw new GLM.GLMJSError(\"use new\");if(\"function\"!==typeof a||!GLM.$isGLMConstructor(a))throw new GLM.GLMJSError(\"expecting typ to be GLM.$isGLMConstructor: \"+[typeof a,a?a.$type:a]+\" // \"+GLM.$isGLMConstructor(a));if(1===a.componentLength&&GLM[a.prototype.$type.replace(\"$\",\"$$v\")])throw new GLM.GLMJSError(\"unsupported argtype to glm.$vectorType - for single-value types use glm.\"+a.prototype.$type.replace(\"$\",\r\n\t\"$$v\")+\"...\"+a.prototype.$type);this.glmtype=a;if(!this.glmtype.componentLength)throw Error(\"need .componentLength \"+[a,b,c]);this.componentLength=this.glmtype.componentLength;this.BYTES_PER_ELEMENT=this.glmtype.BYTES_PER_ELEMENT;this._set_$elements=function(a){Object.defineProperty(this,\"$elements\",{enumerable:!1,configurable:!0,value:a});return this.$elements};Object.defineProperty(this,\"elements\",{enumerable:!0,configurable:!0,get:function(){return this.$elements},set:function(a){this._kv&&!this._kv.dynamic&&\r\n\tGLM.$DEBUG&&GLM.$outer.console.warn(\"WARNING: setting .elements on frozen (non-dynamic) GLMVector...\");if(a){var b=this.length;this.length=a.length/this.componentLength;this.byteLength=this.length*this.BYTES_PER_ELEMENT;if(this.length!==Math.round(this.length))throw new GLM.GLMJSError(\"$vectorType.length alignment mismatch \"+JSON.stringify({componentLength:this.componentLength,length:this.length,rounded_length:Math.round(this.length),elements_length:a.length,old_length:b}));}else this.length=this.byteLength=\r\n\t0;return this._set_$elements(a)}});this.elements=b&&new c(b*a.componentLength)}GLM.$vectorType=$GLMVector;GLM.$vectorType.version=\"0.0.2\";\r\n\t$GLMVector.prototype=GLM.$template.extend(new GLM.$GLMBaseType($GLMVector,\"$vectorType\"),{toString:function(){return\"[$GLMVector .elements=#\"+(this.elements&&this.elements.length)+\" .elements[0]=\"+(this.elements&&this.elements[0])+\" ->[0]\"+(this[\"->\"]&&this[\"->\"][0])+\"]\"},\"=\":function(a){if(a instanceof this.constructor||glm.$isGLMObject(a))a=a.elements;return this._set(new this.typearray(a))},_typed_concat:function(a,b,c){var e=a.length+b.length;c=c||new a.constructor(e);c.set(a);c.set(b,a.length);\r\n\treturn c},\"+\":function(a){if(a instanceof this.constructor||glm.$isGLMObject(a))a=a.elements;return new this.constructor(this._typed_concat(this.elements,a))},\"+=\":function(a){if(a instanceof this.constructor||glm.$isGLMObject(a))a=a.elements;return this._set(this._typed_concat(this.elements,a))},_set:function(a){a instanceof this.constructor&&(a=new this.typearray(a.elements));if(!(a instanceof this.typearray))throw new GLM.GLMJSError(\"unsupported argtype to $GLMVector._set \"+(a&&a.constructor));\r\n\tGLM.$DEBUG&&GLM.$outer.console.debug(\"$GLMVector.prototype.set...this.elements:\"+[this.elements&&this.elements.constructor.name,this.elements&&this.elements.length]+\"elements:\"+[a.constructor.name,a.length]);var b=this._kv;this._kv=void 0;this.elements=a;if(this.elements!==a)throw new GLM.GLMJSError(\"err with .elements: \"+[this.glmtype.prototype.$type,this.elements,a]);b&&this._setup(b);return this},arrayize:function(a,b){return this._setup({dynamic:b,setters:a},this.length)},$destroy:function(a){if(a){for(var b=\r\n\tArray.isArray(a),c=function(c){Object.defineProperty(a,c,{enumerable:!0,configurable:!0,value:void 0});delete a[c];b||(a[c]=void 0,delete a[c])},e=0;e<a.length;e++)e in a&&c(e);for(;e in a;)GLM.$DEBUG&&GLM.$outer.console.debug(\"$destroy\",this.name,e),c(e++);b&&(a.length=0)}},_arrlike_toJSON:function(){return this.slice(0)},_mixinArray:function(a){a.toJSON=this._arrlike_toJSON;\"forEach map slice filter join reduce\".split(\" \").forEach(function(b){a[b]=Array.prototype[b]});return a},_setup:function(a,\r\n\tb){var c=this.glmtype,e=this.typearray,d=this.length;this._kv=a;var h=a.stride||this.glmtype.BYTES_PER_ELEMENT,j=a.offset||this.elements.byteOffset,g=a.elements||this.elements,k=a.container||this.arr||[],i=a.setters||!1,w=a.dynamic||!1;\"self\"===k&&(k=this);if(!g)throw new GLMJSError(\"GLMVector._setup - neither kv.elements nor this.elements...\");this.$destroy(this.arr,b);var r=this.arr=this[\"->\"]=k;Array.isArray(r)||this._mixinArray(r);var m=this.componentLength;if(!m)throw new GLM.GLMJSError(\"no componentLength!?\"+\r\n\tObject.keys(this));for(var q=g.buffer.byteLength,s=this,t=0;t<d;t++){var k=j+t*h,z=k+this.glmtype.BYTES_PER_ELEMENT,y=function(){a.i=t;a.next=z;a.last=q;a.offset=a.offset||j;a.stride=a.stride||h;return JSON.stringify(a)};if(k>q)throw Error(\"[\"+t+\"] off \"+k+\" > last \"+q+\" \"+y());if(z>q)throw Error(\"[\"+t+\"] next \"+z+\" > last \"+q+\" \"+y());r[t]=null;var f=function(a,b){var d=new c(new e(a.buffer,b,m));w&&Object.defineProperty(d,\"$elements\",{value:a});return d},y=f(g,k);!i&&!w?r[t]=y:function(a,b,c){Object.defineProperty(r,\r\n\tb,{enumerable:!0,configurable:!0,get:w?function(){a.$elements!==s.elements&&(GLM.$log(\"dynoget rebinding ti\",b,c,a.$elements===s.elements),a=f(s.elements,c));return a}:function(){return a},set:i&&(w?function(d){GLM.$log(\"dynoset\",b,c,a.$elements===s.elements);a.$elements!==s.elements&&(GLM.$log(\"dynoset rebinding ti\",b,c,a.$elements===s.elements),a=f(s.elements,c));return a.copy(d)}:function(b){return a.copy(b)})||void 0})}(y,t,k)}return this},setFromBuffers:function(a){var b=this.elements,c=0;a.forEach(function(a){var d=\r\n\ta.length;if(c+d>b.length){d=Math.min(b.length-c,a.length);if(0>=d)return;a=glm.$subarray(a,0,d);d=a.length}if(c+d>b.length)throw new glm.GLMJSError(\"$vectorType.fromBuffers mismatch \"+[c,d,b.length]);b.set(a,c);c+=a.length});return c},setFromPointer:function(a){if(!(a instanceof GLM.$outer.ArrayBuffer))throw new glm.GLMJSError(\"unsupported argtype \"+[typeof a]+\" - $GLMVector.setFromPointer\");return this._set(new this.typearray(a))}});GLM.exists;GLM.$vectorType.exists;\r\n\tif(GLM.$toTypedArray)throw\"error: glm.experimental.js double-included\";\r\n\tGLM.$toTypedArray=function(a,b,c){var e=b||0,d=typeof e;if(\"number\"===d){if(\"number\"!==typeof c)throw new GLM.GLMJSError(\"GLM.$toTypedArray: unsupported argtype for componentLength (\"+typeof c+\")\");return new a(e*c)}if(\"object\"!==d)throw new GLM.GLMJSError(\"GLM.$toTypedArray: unsupported arrayType: \"+[typeof a,a]);if(e instanceof a)return e;if(e instanceof GLM.$outer.ArrayBuffer||Array.isArray(e))return new a(e);GLM.$isGLMObject(e)&&(d=e.elements,e=new a(d.length),e.set(d));if(!(e instanceof a)&&\r\n\t\"byteOffset\"in e&&\"buffer\"in e)return GLM.$DEBUG&&GLM.$outer.console.warn(\"coercing \"+e.constructor.name+\".buffer into \"+[a.name,e.byteOffset,e.byteLength+\" bytes\",\"~\"+e.byteLength/a.BYTES_PER_ELEMENT+\" coerced elements\"]+\"...\",{byteOffset:e.byteOffset,byteLength:e.byteLength,ecount:e.byteLength/a.BYTES_PER_ELEMENT}),new a(e.buffer,e.byteOffset,e.byteLength/a.BYTES_PER_ELEMENT);if(e instanceof a)return e;throw new GLM.GLMJSError(\"GLM.$toTypedArray: unsupported argtype initializers: \"+[a,b,c]);};\r\n\tGLM.$make_primitive=function(a,b){GLM[a]=function(c){if(!(this instanceof GLM[a]))return new GLM[a](c);\"object\"!==typeof c&&(c=[c]);this.elements=GLM.$toTypedArray(b,c,1)};GLM[a]=eval(GLM.$template._traceable(\"glm_\"+a+\"$class\",GLM[a]))();GLM.$template._add_overrides(a,{$to_string:function(a){return a.$type.replace(/[^a-z]/g,\"\")+\"(\"+a.elements[0]+\")\"},$to_object:function(a){return a.elements[0]},$to_glsl:function(a){return a.$type.replace(/[^a-z]/g,\"\")+\"(\"+a.elements[0]+\")\"}});GLM.$template._add_overrides(a.substr(1),\r\n\t{$to_string:!(a.substr(1)in GLM.$to_string.$template)&&function(a){return a.$type.replace(/[^a-z]/g,\"\")+\"(\"+a.elements[0]+\")\"},$to_object:function(a){return a},$to_glsl:function(a){return a.$type.replace(/[^a-z]/g,\"\")+\"(\"+a+\")\"}});GLM.$template.extend(GLM[a],{componentLength:1,BYTES_PER_ELEMENT:b.BYTES_PER_ELEMENT,prototype:GLM.$template.extend(new GLM.$GLMBaseType(GLM[a],a),{copy:function(a){this.elements.set(GLM.$isGLMObject(a)?a.elements:[a]);return this},valueOf:function(){return this.elements[0]}})});\r\n\tGLM[a].prototype[\"=\"]=GLM[a].prototype.copy;return GLM[a]};GLM.$make_primitive(\"$bool\",GLM.$outer.Int32Array);GLM.$template._add_overrides(\"$bool\",{$to_object:function(a){return!!a}});GLM.$make_primitive(\"$int32\",GLM.$outer.Int32Array);GLM.$make_primitive(\"$uint32\",GLM.$outer.Uint32Array);GLM.$make_primitive(\"$uint16\",GLM.$outer.Uint16Array);GLM.$make_primitive(\"$uint8\",GLM.$outer.Uint8Array);GLM.$float32=GLM.$make_primitive(\"$float\",GLM.$outer.Float32Array);\r\n\tGLM.$make_primitive_vector=function(a,b,c){c=c||(new b).elements.constructor;var e=function(d){if(!(this instanceof e))return new e(d);this.$type=a;this.$type_name=\"vector<\"+a+\">\";(d=GLM.$toTypedArray(c,d,b.componentLength))&&this._set(d)},e=eval(GLM.$template._traceable(\"glm_\"+a+\"$class\",e))();e.prototype=new GLM.$vectorType(b,0,c);GLM.$template._add_overrides(a,{$to_string:function(a){return\"[GLM.\"+a.$type+\" elements[0]=\"+(a.elements&&a.elements[0])+\"]\"},$to_object:function(a){return a.map(GLM.$to_object)},\r\n\t$to_glsl:function(a,b){var c=a.$type.substr(2).replace(/[^a-z]/g,\"\");b=\"string\"===typeof b?b:\"example\";var e=[];b&&e.push(c+\" \"+b+\"[\"+a.length+\"]\");return e.concat(a.map(function(a,c){return b+\"[\"+c+\"] = \"+a})).join(\";\")+\";\"}});GLM.$types.push(a);GLM.$template.extend(e.prototype,{$type:a,constructor:e,_setup:function(){throw new GLM.GLMJSError(\"._setup not available on primitive vectors yet...\");},_set:function(a){this.elements=a;this.length=!this.elements?0:this.elements.length/this.glmtype.componentLength;\r\n\tthis.arrayize();return this},arrayize:function(){for(var a=Object.defineProperty.bind(Object,this),b=0;b<this.length;b++)(function(b){a(b,{configurable:!0,enumerable:!0,get:function(){return this.elements[b]},set:function(a){return this.elements[b]=a}})})(b);return this._mixinArray(this)},toString:function(){return\"[vector<\"+a+\"> {\"+[].slice.call(this.elements,0,5)+(5<this.elements.length?\",...\":\"\")+\"}]\"}});return e};GLM.$vint32=GLM.$make_primitive_vector(\"$vint32\",GLM.$int32);\r\n\tGLM.$vfloat=GLM.$vfloat32=GLM.$make_primitive_vector(\"$vfloat32\",GLM.$float32);GLM.$vuint8=GLM.$make_primitive_vector(\"$vuint8\",GLM.$uint8);GLM.$vuint16=GLM.$make_primitive_vector(\"$vuint16\",GLM.$uint16);GLM.$vuint32=GLM.$make_primitive_vector(\"$vuint32\",GLM.$uint32);\r\n\tGLM.$make_componentized_vector=function(a,b,c){c=c||(new b).elements.constructor;var e=function(a,h){if(!(this instanceof e))return new e(a,h);this._set(GLM.$toTypedArray(c,a,b.componentLength));if(!this.elements)throw new GLM.GLMJSError(\"!this.elements: \"+[GLM.$toTypedArray(c,a,b.componentLength)]);this._setup({setters:!0,dynamic:h,container:\"self\"})},e=eval(GLM.$template._traceable(\"glm_\"+a+\"$class\",e))();e.prototype=new GLM.$vectorType(b,0,c);GLM.$template._add_overrides(a,{$to_string:function(a){return\"[GLM.\"+\r\n\ta.$type+\" elements[0]=\"+(a.elements&&a.elements[0])+\"]\"},$to_object:function(a){return a.map(GLM.$to_object)},$to_glsl:function(a,b){var c=a.$type.substr(2);b=\"string\"===typeof b?b:\"example\";var e=[];b&&e.push(c+\" \"+b+\"[\"+a.length+\"]\");return e.concat(a.map(GLM.$to_glsl).map(function(a,c){return b+\"[\"+c+\"] = \"+a})).join(\";\\n \")+\";\"}});GLM.$types.push(a);GLM.$template.extend(e.prototype,{$type:a,constructor:e});e.prototype.componentLength||alert(\"!cmop \"+p);return e};\r\n\t(function(){var a=GLM.$template.deNify({\"$vvec<N>\":function(){return GLM.$make_componentized_vector(\"$vvecN\",GLM.vecN)},\"$vuvec<N>\":function(){return GLM.$make_componentized_vector(\"$vuvecN\",GLM.uvecN)},\"$vmat<N>\":function(){return GLM.$make_componentized_vector(\"$vmatN\",GLM.matN)},$vquat:function(){return GLM.$make_componentized_vector(\"$vquat\",GLM.quat)}},\"$v\"),b;for(b in a)GLM[b]=a[b]()})();\r\n\t(GLM._redefine_base64_helpers=function define_base64_helpers(b,c){function e(b){return(b+\"\").replace(/\\s/g,\"\")}function d(b){return new k(b.split(\"\").map(function(b){return b.charCodeAt(0)}))}function h(b){b instanceof k||(b=new k(b));return[].map.call(b,function(b){return String.fromCharCode(b)}).join(\"\")}function j(b){b=b instanceof i?b:d(b).buffer;return GLM.$b64.encode(b,b.byteOffset,b.byteLength)}function g(b){b=new String(h(GLM.$b64.decode(b)));b.array=d(b);b.buffer=b.array.buffer;return b}\r\n\tb=define_base64_helpers.atob=b||define_base64_helpers.atob||g;c=define_base64_helpers.btoa=c||define_base64_helpers.btoa||j;var k=GLM.$outer.Uint8Array,i=GLM.$outer.ArrayBuffer,w,r=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\".indexOf.bind(\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\");w={encode:function(b,c,d){b=new k(b,c,d);d=b.length;var e=\"\";for(c=0;c<d;c+=3)e+=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\"[b[c]>>2],e+=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\"[(b[c]&\r\n\t3)<<4|b[c+1]>>4],e+=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\"[(b[c+1]&15)<<2|b[c+2]>>6],e+=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\"[b[c+2]&63];2===d%3?e=e.substring(0,e.length-1)+\"=\":1===d%3&&(e=e.substring(0,e.length-2)+\"==\");return e},decode:function(b){b=e(b);var c=b.length,d=0.75*c,g=0,h,j,f,v;\"=\"===b[c-1]&&(d--,\"=\"===b[c-2]&&d--);for(var w=new i(d),R=new k(w),d=0;d<c;d+=4)h=r(b[d]),j=r(b[d+1]),f=r(b[d+2]),v=r(b[d+3]),R[g++]=h<<2|j>>4,R[g++]=\r\n\t(j&15)<<4|f>>2,R[g++]=(f&3)<<6|v&63;return w}};GLM.$template.extend(w,{trim:e,atob:b,btoa:c,$atob:g,$btoa:j,toCharCodes:d,fromCharCodes:h,b64_to_utf8:function(c){return decodeURIComponent(escape(b(e(c))))},utf8_to_b64:function(b){return c(unescape(encodeURIComponent(b)))}});GLM.$template.extend(GLM,{$b64:w,$to_base64:function(b){return GLM.$b64.encode(b.elements.buffer,b.elements.byteOffset,b.elements.byteLength)},$from_base64:function(b,c){var d=GLM.$b64.decode(b);if(!0===c||c==GLM.$outer.ArrayBuffer)return d;\r\n\tvoid 0===c&&(c=GLM.$outer.Float32Array);return new c(d);throw new GLM.GLMJSError(\"TODO: $from_base64 not yet supported second argument type: (\"+[typeof c,c]+\")\");}})})(\"function\"===typeof atob&&atob.bind(this),\"function\"===typeof btoa&&btoa.bind(this));\r\n\t(function(){function a(a,c){return{get:function(){return a.call(this)},set:function(a){if(this.copy)return this.copy(new this.constructor(c.call(this,a)));this.elements.set(c.call(this,a))}}}\"$bool $float32 $vfloat32 $vuint8 $vuint16 $vuint32 $vvec2 $vvec3 $vvec4 $vmat3 $vmat4 $vquat vec2 vec3 vec4 mat3 mat4 uvec2 uvec3 uvec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 quat\".split(\" \").map(GLM.$getGLMType).forEach(function(b){Object.defineProperty(b.prototype,\"array\",a(function(){return GLM.$to_array(this)},\r\n\tfunction(a){return a}));Object.defineProperty(b.prototype,\"base64\",a(function(){return GLM.$to_base64(this)},function(a){return GLM.$from_base64(a,this.elements.constructor)}));Object.defineProperty(b.prototype,\"buffer\",a(function(){return this.elements.buffer},function(a){return new this.elements.constructor(a)}));Object.defineProperty(b.prototype,\"json\",a(function(){return GLM.$to_json(this)},function(a){return JSON.parse(a)}));Object.defineProperty(b.prototype,\"object\",a(function(){return GLM.$to_object(this)},\r\n\tfunction(a){return a}));Object.defineProperty(b.prototype,\"glsl\",a(function(){return GLM.$to_glsl(this)},function(a){return GLM.$from_glsl(a,Array)}))})})();\r\n\tglm.GLMAT = GLMAT; return glm; })(this, typeof $GLM_log !== \"undefined\" ? $GLM_log : undefined, typeof $GLM_console_log !== \"undefined\" ? $GLM_console_log : undefined);\r\n\r\n\texport { glm }","class ulist_elem<T> {\r\n\tconstructor(private elem: any, private list: ulist_base<any>, private idx: number)\r\n\t{\r\n\t}\r\n\tget(): T {\r\n\t\treturn this.list.data[this.idx].elem;\r\n\t}\r\n\tremove() {\r\n\t\tthis.list.data[this.idx] = this.list.data[this.list.data.length - 1];\r\n\t\tthis.list.data[this.idx].idx = this.idx;\r\n\t\tthis.list.data.pop();\r\n\t}\r\n\ttranslate<U>(): ulist_elem<U> {\r\n\t\treturn new ulist_elem<U>(this.elem, this.list, this.idx);\r\n\t}\r\n\tget index(): number {\r\n\t\treturn this.idx;\r\n\t}\r\n}\r\n\r\nclass ulist_base<T> {\r\n\tpublic data: ulist_elem<T>[] = [];\r\n}\r\n\r\nclass ulist<T> {\r\n\tprivate data = new ulist_base<T>();\r\n\r\n\tpush(elem: T): ulist_elem<T> {\r\n\t\tlet object = new ulist_elem<T>(elem, this.data, this.data.data.length);\r\n\t\tthis.data.data.push(object);\r\n\t\treturn this.data.data[this.data.data.length - 1];\r\n\t}\r\n\tsize(): number { \r\n\t\treturn this.data.data.length;\r\n\t}\r\n\tvisit(callback: (e: ulist_elem<T>) => void) { \r\n\t\tfor (let elem of this.data.data) {\r\n\t\t\tcallback(elem);\r\n\t\t}\r\n\t}\r\n\tsubscribe(index: number): ulist_elem<T> {\r\n\t\treturn this.data.data[index];\r\n\t}\r\n}\r\n\r\nexport {\r\n\tulist_elem,\r\n\tulist\r\n}\r\n","type xhrType = XMLHttpRequestResponseType;\r\n\r\nexport default class xhr {\r\n\tstatic getAsync(filename: string, type: xhrType, callback: (err: any, data: any) => void);\r\n\tstatic getAsync(filename: string[], type: xhrType, callback: (err: any, data: any[]) => void);\r\n\tstatic getAsync(filename: any, type: xhrType, callback: any) {\r\n\t\tlet xhr = new XMLHttpRequest();\r\n\t\txhr.responseType = type;\r\n\t\tif (typeof filename == \"string\") {\r\n\t\t\txhr.onload = (event: Event) => {\r\n\t\t\t\tcallback(undefined, xhr.response);\r\n\t\t\t}\r\n\t\t\txhr.open(\"get\", filename);\r\n\t\t\txhr.send();\r\n\t\t} else {\r\n\t\t\tif (filename.length) {\r\n\t\t\t\tlet result: string[] = [];\r\n\t\t\t\txhr.onload = (event: Event) => {\r\n\t\t\t\t\tfilename = filename.slice(1);\r\n\t\t\t\t\tresult.push(xhr.response);\r\n\t\t\t\t\tif (filename.length) {\r\n\t\t\t\t\t\txhr.open(\"get\", filename[0]);\r\n\t\t\t\t\t\txhr.send();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcallback(undefined, result);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\txhr.open(\"get\", filename[0]);\r\n\t\t\t\txhr.send();\r\n\t\t\t} else {\r\n\t\t\t\tcallback(undefined, []);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tstatic getSync(filename: string): any {\r\n\t\tlet xhr = new XMLHttpRequest();\r\n\t\txhr.open(\"get\", filename, false);\r\n\t\txhr.send();\r\n\t\tif (xhr.status == 200) {\r\n\t\t\treturn xhr.response;\r\n\t\t} else {\r\n\t\t\tthrow \"failed to load resource: \" + filename + \" due to \" +\r\n\t\t\t\txhr.statusText;\r\n\t\t}\r\n\t}\r\n}\r\n"],"sourceRoot":""}