$(document).ready(function(){function b(a){this.el=$(a.el),this.status=$.extend({},{init:{width:"100%",opacity:1,left:0,rotateZ:0,top:0}},a.status)}var a,c,d,e,f,g,h,i,j;NexT.motion={},a={lines:[],push:function(a){this.lines.push(a)},init:function(){this.lines.forEach(function(a){a.init()})},arrow:function(){this.lines.forEach(function(a){a.arrow()})},close:function(){this.lines.forEach(function(a){a.close()})}},b.prototype.init=function(){this.transform("init")},b.prototype.arrow=function(){this.transform("arrow")},b.prototype.close=function(){this.transform("close")},b.prototype.transform=function(a){this.el.velocity("stop").velocity(this.status[a])},c=new b({el:".sidebar-toggle-line-first",status:{arrow:{width:"50%",rotateZ:"-45deg",top:"2px"},close:{width:"100%",rotateZ:"-45deg",top:"5px"}}}),d=new b({el:".sidebar-toggle-line-middle",status:{arrow:{width:"90%"},close:{opacity:0}}}),e=new b({el:".sidebar-toggle-line-last",status:{arrow:{width:"50%",rotateZ:"45deg",top:"-2px"},close:{width:"100%",rotateZ:"45deg",top:"-5px"}}}),a.push(c),a.push(d),a.push(e),f="320px",g=200,j={toggleEl:$(".sidebar-toggle"),dimmerEl:$("#sidebar-dimmer"),sidebarEl:$(".sidebar"),isSidebarVisible:!1,init:function(){this.toggleEl.on("click",this.clickHandler.bind(this)),this.dimmerEl.on("click",this.clickHandler.bind(this)),this.toggleEl.on("mouseenter",this.mouseEnterHandler.bind(this)),this.toggleEl.on("mouseleave",this.mouseLeaveHandler.bind(this)),this.sidebarEl.on("touchstart",this.touchstartHandler.bind(this)),this.sidebarEl.on("touchend",this.touchendHandler.bind(this)),this.sidebarEl.on("touchmove",function(a){a.preventDefault()}),$(document).on("sidebar.isShowing",function(){NexT.utils.isDesktop()&&$("body").velocity("stop").velocity({paddingRight:f},g)}).on("sidebar.isHiding",function(){})},clickHandler:function(){this.isSidebarVisible?this.hideSidebar():this.showSidebar(),this.isSidebarVisible=!this.isSidebarVisible},mouseEnterHandler:function(){this.isSidebarVisible||a.arrow()},mouseLeaveHandler:function(){this.isSidebarVisible||a.init()},touchstartHandler:function(a){h=a.originalEvent.touches[0].clientX,i=a.originalEvent.touches[0].clientY},touchendHandler:function(a){var b=a.originalEvent.changedTouches[0].clientX,c=a.originalEvent.changedTouches[0].clientY;b-h>30&&Math.abs(c-i)<20&&this.clickHandler()},showSidebar:function(){var b=this;a.close(),this.sidebarEl.velocity("stop").velocity({width:f},{display:"block",duration:g,begin:function(){$(".sidebar .motion-element").velocity("transition.slideRightIn",{stagger:50,drag:!0,complete:function(){b.sidebarEl.trigger("sidebar.motion.complete")}})},complete:function(){b.sidebarEl.addClass("sidebar-active"),b.sidebarEl.trigger("sidebar.didShow")}}),this.sidebarEl.trigger("sidebar.isShowing")},hideSidebar:function(){NexT.utils.isDesktop()&&$("body").velocity("stop").velocity({paddingRight:0}),this.sidebarEl.find(".motion-element").velocity("stop").css("display","none"),this.sidebarEl.velocity("stop").velocity({width:0},{display:"none"}),a.init(),this.sidebarEl.removeClass("sidebar-active"),this.sidebarEl.trigger("sidebar.isHiding"),$(".post-toc-wrap")&&("block"===$(".site-overview-wrap").css("display")?$(".post-toc-wrap").removeClass("motion-element"):$(".post-toc-wrap").addClass("motion-element"))}},j.init(),NexT.motion.integrator={queue:[],cursor:-1,add:function(a){return this.queue.push(a),this},next:function(){this.cursor++;var a=this.queue[this.cursor];$.isFunction(a)&&a(NexT.motion.integrator)},bootstrap:function(){this.next()}},NexT.motion.middleWares={logo:function(a){function h(a,b){return{e:$(a),p:{translateX:b},o:{duration:500,sequenceQueue:!1}}}function i(a){return a=Array.isArray(a)?a:[a],a.every(function(a){return $.isFunction(a.size)&&a.size()>0})}var b=[],c=$(".brand"),d=$(".site-title"),e=$(".site-subtitle"),f=$(".logo-line-before i"),g=$(".logo-line-after i");c.size()>0&&b.push({e:c,p:{opacity:1},o:{duration:175}}),NexT.utils.isMist()&&i([f,g])&&b.push(h(f,"100%"),h(g,"-100%")),i(d)&&b.push({e:d,p:{opacity:1,top:0},o:{duration:175}}),i(e)&&b.push({e:e,p:{opacity:1,top:0},o:{duration:175}}),CONFIG.motion.async&&a.next(),b.length>0?(b[b.length-1].o.complete=function(){a.next()},$.Velocity.RunSequence(b)):a.next()},menu:function(a){CONFIG.motion.async&&a.next(),$(".menu-item").velocity("transition.slideDownIn",{display:null,duration:175,complete:function(){a.next()}})},postList:function(a){function m(){var l=window.postMotionOptions||{stagger:100,drag:!0};l.complete=function(){CONFIG.motion.transition.sidebar&&(NexT.utils.isPisces()||NexT.utils.isGemini())&&j.css({transform:"initial"}),a.next()},CONFIG.motion.transition.post_block&&b.velocity("transition."+c,l),CONFIG.motion.transition.post_header&&d.velocity("transition."+e,l),CONFIG.motion.transition.post_body&&f.velocity("transition."+g,l),CONFIG.motion.transition.coll_header&&h.velocity("transition."+i,l),CONFIG.motion.transition.sidebar&&(NexT.utils.isPisces()||NexT.utils.isGemini())&&j.velocity("transition."+k,l)}var b=$(".post-block, .pagination, .comments"),c=CONFIG.motion.transition.post_block,d=$(".post-header"),e=CONFIG.motion.transition.post_header,f=$(".post-body"),g=CONFIG.motion.transition.post_body,h=$(".collection-title, .archive-year"),i=CONFIG.motion.transition.coll_header,j=$(".sidebar-inner"),k=CONFIG.motion.transition.sidebar,l=b.size()>0;l?m():a.next(),CONFIG.motion.async&&a.next()},sidebar:function(a){"always"===CONFIG.sidebar.display&&NexT.utils.displaySidebar(),a.next()}}});