/*! For license information please see iframe.js.LICENSE.txt */
(()=>{var t={431:t=>{var e=.1,i="function"==typeof Float32Array;function r(t,e){return 1-3*e+3*t}function n(t,e){return 3*e-6*t}function o(t){return 3*t}function a(t,e,i){return((r(e,i)*t+n(e,i))*t+o(e))*t}function s(t,e,i){return 3*r(e,i)*t*t+2*n(e,i)*t+o(e)}function p(t){return t}t.exports=function(t,r,n,o){if(!(0<=t&&t<=1&&0<=n&&n<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===r&&n===o)return p;for(var l=i?new Float32Array(11):new Array(11),m=0;m<11;++m)l[m]=a(m*e,t,n);return function(i){return 0===i?0:1===i?1:a(function(i){for(var r=0,o=1;10!==o&&l[o]<=i;++o)r+=e;--o;var p=r+(i-l[o])/(l[o+1]-l[o])*e,m=s(p,t,n);return m>=.001?function(t,e,i,r){for(var n=0;n<4;++n){var o=s(e,i,r);if(0===o)return e;e-=(a(e,i,r)-t)/o}return e}(i,p,t,n):0===m?p:function(t,e,i,r,n){var o,s,p=0;do{(o=a(s=e+(i-e)/2,r,n)-t)>0?i=s:e=s}while(Math.abs(o)>1e-7&&++p<10);return s}(i,r,r+e,t,n)}(i),r,o)}}},669:(t,e,i)=>{"use strict";i.d(e,{Z:()=>s});var r=i(537),n=i.n(r),o=i(645),a=i.n(o)()(n());a.push([t.id,".fill-parent {\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  overflow: hidden;\n}\n.compositor-root {\n  position: fixed;\n  top: 50%;\n  left: 50%;\n}\n.compositor-scene {\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  overflow: hidden;\n  position: absolute;\n  display: block;\n}\n.overlay {\n  pointer-events: none;\n}\n.hidden {\n  visibility: hidden;\n}\nhtml,\nbody {\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  overflow: hidden;\n}\nbody {\n  background: black;\n}\n","",{version:3,sources:["webpack://./web/css/index.less"],names:[],mappings:"AAAA;EACE,WAAA;EACA,YAAA;EACA,SAAA;EACA,UAAA;EACA,gBAAA;AACF;AAEA;EACE,eAAA;EACA,QAAA;EACA,SAAA;AAAF;AAGA;EAbE,WAAA;EACA,YAAA;EACA,SAAA;EACA,UAAA;EACA,gBAAA;EAWA,kBAAA;EACA,cAAA;AAGF;AAAA;EACE,oBAAA;AAEF;AACA;EACE,kBAAA;AACF;AAEA;;EA3BE,WAAA;EACA,YAAA;EACA,SAAA;EACA,UAAA;EACA,gBAAA;AA6BF;AAFA;EAEE,iBAAA;AAGF",sourcesContent:[".fill-parent {\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  overflow: hidden;\n}\n\n.compositor-root {\n  position: fixed;\n  top: 50%;  \n  left: 50%;\n}\n\n.compositor-scene {\n  .fill-parent;\n  position: absolute;\n  display: block;\n}\n\n.overlay {\n  pointer-events: none;\n}\n\n.hidden {\n  visibility: hidden;\n}\n\nhtml, body {\n  .fill-parent;\n}\n\nbody {\n  // background: #4838a3;\n  background: black;\n}\n"],sourceRoot:""}]);const s=a},645:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i="",r=void 0!==e[5];return e[4]&&(i+="@supports (".concat(e[4],") {")),e[2]&&(i+="@media ".concat(e[2]," {")),r&&(i+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),i+=t(e),r&&(i+="}"),e[2]&&(i+="}"),e[4]&&(i+="}"),i})).join("")},e.i=function(t,i,r,n,o){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(r)for(var s=0;s<this.length;s++){var p=this[s][0];null!=p&&(a[p]=!0)}for(var l=0;l<t.length;l++){var m=[].concat(t[l]);r&&a[m[0]]||(void 0!==o&&(void 0===m[5]||(m[1]="@layer".concat(m[5].length>0?" ".concat(m[5]):""," {").concat(m[1],"}")),m[5]=o),i&&(m[2]?(m[1]="@media ".concat(m[2]," {").concat(m[1],"}"),m[2]=i):m[2]=i),n&&(m[4]?(m[1]="@supports (".concat(m[4],") {").concat(m[1],"}"),m[4]=n):m[4]="".concat(n)),e.push(m))}},e}},537:t=>{"use strict";t.exports=function(t){var e=t[1],i=t[3];if(!i)return e;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),n="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),o="/*# ".concat(n," */"),a=i.sources.map((function(t){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(t," */")}));return[e].concat(a).concat([o]).join("\n")}return[e].join("\n")}},187:t=>{"use strict";function e(t,e,r){r=r||2;var o,a,s,p,y,h,E,c=e&&e.length,d=c?e[0]*r:t.length,f=i(t,0,d,r,!0),_=[];if(!f||f.next===f.prev)return _;if(c&&(f=function(t,e,r,n){var o,a,s,p=[];for(o=0,a=e.length;o<a;o++)(s=i(t,e[o]*n,o<a-1?e[o+1]*n:t.length,n,!1))===s.next&&(s.steiner=!0),p.push(u(s));for(p.sort(l),o=0;o<p.length;o++)r=m(p[o],r);return r}(t,e,f,r)),t.length>80*r){o=s=t[0],a=p=t[1];for(var v=r;v<d;v+=r)(y=t[v])<o&&(o=y),(h=t[v+1])<a&&(a=h),y>s&&(s=y),h>p&&(p=h);E=0!==(E=Math.max(s-o,p-a))?32767/E:0}return n(f,_,r,o,a,E,0),_}function i(t,e,i,r,n){var o,a;if(n===I(t,e,i,r)>0)for(o=e;o<i;o+=r)a=x(o,t[o],t[o+1],a);else for(o=i-r;o>=e;o-=r)a=x(o,t[o],t[o+1],a);return a&&f(a,a.next)&&(S(a),a=a.next),a}function r(t,e){if(!t)return t;e||(e=t);var i,r=t;do{if(i=!1,r.steiner||!f(r,r.next)&&0!==d(r.prev,r,r.next))r=r.next;else{if(S(r),(r=e=r.prev)===r.next)break;i=!0}}while(i||r!==e);return e}function n(t,e,i,l,m,y,u){if(t){!u&&y&&function(t,e,i,r){var n=t;do{0===n.z&&(n.z=h(n.x,n.y,e,i,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==t);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,i,r,n,o,a,s,p,l=1;do{for(i=t,t=null,o=null,a=0;i;){for(a++,r=i,s=0,e=0;e<l&&(s++,r=r.nextZ);e++);for(p=l;s>0||p>0&&r;)0!==s&&(0===p||!r||i.z<=r.z)?(n=i,i=i.nextZ,s--):(n=r,r=r.nextZ,p--),o?o.nextZ=n:t=n,n.prevZ=o,o=n;i=r}o.nextZ=null,l*=2}while(a>1)}(n)}(t,l,m,y);for(var E,c,d=t;t.prev!==t.next;)if(E=t.prev,c=t.next,y?a(t,l,m,y):o(t))e.push(E.i/i|0),e.push(t.i/i|0),e.push(c.i/i|0),S(t),t=c.next,d=c.next;else if((t=c)===d){u?1===u?n(t=s(r(t),e,i),e,i,l,m,y,2):2===u&&p(t,e,i,l,m,y):n(r(t),e,i,l,m,y,1);break}}}function o(t){var e=t.prev,i=t,r=t.next;if(d(e,i,r)>=0)return!1;for(var n=e.x,o=i.x,a=r.x,s=e.y,p=i.y,l=r.y,m=n<o?n<a?n:a:o<a?o:a,y=s<p?s<l?s:l:p<l?p:l,h=n>o?n>a?n:a:o>a?o:a,u=s>p?s>l?s:l:p>l?p:l,c=r.next;c!==e;){if(c.x>=m&&c.x<=h&&c.y>=y&&c.y<=u&&E(n,s,o,p,a,l,c.x,c.y)&&d(c.prev,c,c.next)>=0)return!1;c=c.next}return!0}function a(t,e,i,r){var n=t.prev,o=t,a=t.next;if(d(n,o,a)>=0)return!1;for(var s=n.x,p=o.x,l=a.x,m=n.y,y=o.y,u=a.y,c=s<p?s<l?s:l:p<l?p:l,f=m<y?m<u?m:u:y<u?y:u,_=s>p?s>l?s:l:p>l?p:l,v=m>y?m>u?m:u:y>u?y:u,g=h(c,f,e,i,r),T=h(_,v,e,i,r),b=t.prevZ,x=t.nextZ;b&&b.z>=g&&x&&x.z<=T;){if(b.x>=c&&b.x<=_&&b.y>=f&&b.y<=v&&b!==n&&b!==a&&E(s,m,p,y,l,u,b.x,b.y)&&d(b.prev,b,b.next)>=0)return!1;if(b=b.prevZ,x.x>=c&&x.x<=_&&x.y>=f&&x.y<=v&&x!==n&&x!==a&&E(s,m,p,y,l,u,x.x,x.y)&&d(x.prev,x,x.next)>=0)return!1;x=x.nextZ}for(;b&&b.z>=g;){if(b.x>=c&&b.x<=_&&b.y>=f&&b.y<=v&&b!==n&&b!==a&&E(s,m,p,y,l,u,b.x,b.y)&&d(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;x&&x.z<=T;){if(x.x>=c&&x.x<=_&&x.y>=f&&x.y<=v&&x!==n&&x!==a&&E(s,m,p,y,l,u,x.x,x.y)&&d(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function s(t,e,i){var n=t;do{var o=n.prev,a=n.next.next;!f(o,a)&&_(o,n,n.next,a)&&T(o,a)&&T(a,o)&&(e.push(o.i/i|0),e.push(n.i/i|0),e.push(a.i/i|0),S(n),S(n.next),n=t=a),n=n.next}while(n!==t);return r(n)}function p(t,e,i,o,a,s){var p=t;do{for(var l=p.next.next;l!==p.prev;){if(p.i!==l.i&&c(p,l)){var m=b(p,l);return p=r(p,p.next),m=r(m,m.next),n(p,e,i,o,a,s,0),void n(m,e,i,o,a,s,0)}l=l.next}p=p.next}while(p!==t)}function l(t,e){return t.x-e.x}function m(t,e){var i=function(t,e){var i,r=e,n=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=n&&s>a&&(a=s,i=r.x<r.next.x?r:r.next,s===n))return i}r=r.next}while(r!==e);if(!i)return null;var p,l=i,m=i.x,h=i.y,u=1/0;r=i;do{n>=r.x&&r.x>=m&&n!==r.x&&E(o<h?n:a,o,m,h,o<h?a:n,o,r.x,r.y)&&(p=Math.abs(o-r.y)/(n-r.x),T(r,t)&&(p<u||p===u&&(r.x>i.x||r.x===i.x&&y(i,r)))&&(i=r,u=p)),r=r.next}while(r!==l);return i}(t,e);if(!i)return e;var n=b(i,t);return r(n,n.next),r(i,i.next)}function y(t,e){return d(t.prev,t,e.prev)<0&&d(e.next,t,t.next)<0}function h(t,e,i,r,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*n|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*n|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function u(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function E(t,e,i,r,n,o,a,s){return(n-a)*(e-s)>=(t-a)*(o-s)&&(t-a)*(r-s)>=(i-a)*(e-s)&&(i-a)*(o-s)>=(n-a)*(r-s)}function c(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&_(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&(T(t,e)&&T(e,t)&&function(t,e){var i=t,r=!1,n=(t.x+e.x)/2,o=(t.y+e.y)/2;do{i.y>o!=i.next.y>o&&i.next.y!==i.y&&n<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next}while(i!==t);return r}(t,e)&&(d(t.prev,t,e.prev)||d(t,e.prev,e))||f(t,e)&&d(t.prev,t,t.next)>0&&d(e.prev,e,e.next)>0)}function d(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function f(t,e){return t.x===e.x&&t.y===e.y}function _(t,e,i,r){var n=g(d(t,e,i)),o=g(d(t,e,r)),a=g(d(i,r,t)),s=g(d(i,r,e));return n!==o&&a!==s||!(0!==n||!v(t,i,e))||!(0!==o||!v(t,r,e))||!(0!==a||!v(i,t,r))||!(0!==s||!v(i,e,r))}function v(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function g(t){return t>0?1:t<0?-1:0}function T(t,e){return d(t.prev,t,t.next)<0?d(t,e,t.next)>=0&&d(t,t.prev,e)>=0:d(t,e,t.prev)<0||d(t,t.next,e)<0}function b(t,e){var i=new R(t.i,t.x,t.y),r=new R(e.i,e.x,e.y),n=t.next,o=e.prev;return t.next=e,e.prev=t,i.next=n,n.prev=i,r.next=i,i.prev=r,o.next=r,r.prev=o,r}function x(t,e,i,r){var n=new R(t,e,i);return r?(n.next=r.next,n.prev=r,r.next.prev=n,r.next=n):(n.prev=n,n.next=n),n}function S(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function R(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function I(t,e,i,r){for(var n=0,o=e,a=i-r;o<i;o+=r)n+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return n}t.exports=e,t.exports.default=e,e.deviation=function(t,e,i,r){var n=e&&e.length,o=n?e[0]*i:t.length,a=Math.abs(I(t,0,o,i));if(n)for(var s=0,p=e.length;s<p;s++){var l=e[s]*i,m=s<p-1?e[s+1]*i:t.length;a-=Math.abs(I(t,l,m,i))}var y=0;for(s=0;s<r.length;s+=3){var h=r[s]*i,u=r[s+1]*i,E=r[s+2]*i;y+=Math.abs((t[h]-t[E])*(t[u+1]-t[h+1])-(t[h]-t[u])*(t[E+1]-t[h+1]))}return 0===a&&0===y?0:Math.abs((y-a)/a)},e.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},r=0,n=0;n<t.length;n++){for(var o=0;o<t[n].length;o++)for(var a=0;a<e;a++)i.vertices.push(t[n][o][a]);n>0&&(r+=t[n-1].length,i.holes.push(r))}return i}},729:t=>{"use strict";var e=Object.prototype.hasOwnProperty,i="~";function r(){}function n(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function o(t,e,r,o,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new n(r,o||t,a),p=i?i+e:e;return t._events[p]?t._events[p].fn?t._events[p]=[t._events[p],s]:t._events[p].push(s):(t._events[p]=s,t._eventsCount++),t}function a(t,e){0==--t._eventsCount?t._events=new r:delete t._events[e]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(i=!1)),s.prototype.eventNames=function(){var t,r,n=[];if(0===this._eventsCount)return n;for(r in t=this._events)e.call(t,r)&&n.push(i?r.slice(1):r);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},s.prototype.listeners=function(t){var e=i?i+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,o=r.length,a=new Array(o);n<o;n++)a[n]=r[n].fn;return a},s.prototype.listenerCount=function(t){var e=i?i+t:t,r=this._events[e];return r?r.fn?1:r.length:0},s.prototype.emit=function(t,e,r,n,o,a){var s=i?i+t:t;if(!this._events[s])return!1;var p,l,m=this._events[s],y=arguments.length;if(m.fn){switch(m.once&&this.removeListener(t,m.fn,void 0,!0),y){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,e),!0;case 3:return m.fn.call(m.context,e,r),!0;case 4:return m.fn.call(m.context,e,r,n),!0;case 5:return m.fn.call(m.context,e,r,n,o),!0;case 6:return m.fn.call(m.context,e,r,n,o,a),!0}for(l=1,p=new Array(y-1);l<y;l++)p[l-1]=arguments[l];m.fn.apply(m.context,p)}else{var h,u=m.length;for(l=0;l<u;l++)switch(m[l].once&&this.removeListener(t,m[l].fn,void 0,!0),y){case 1:m[l].fn.call(m[l].context);break;case 2:m[l].fn.call(m[l].context,e);break;case 3:m[l].fn.call(m[l].context,e,r);break;case 4:m[l].fn.call(m[l].context,e,r,n);break;default:if(!p)for(h=1,p=new Array(y-1);h<y;h++)p[h-1]=arguments[h];m[l].fn.apply(m[l].context,p)}}return!0},s.prototype.on=function(t,e,i){return o(this,t,e,i,!1)},s.prototype.once=function(t,e,i){return o(this,t,e,i,!0)},s.prototype.removeListener=function(t,e,r,n){var o=i?i+t:t;if(!this._events[o])return this;if(!e)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==e||n&&!s.once||r&&s.context!==r||a(this,o);else{for(var p=0,l=[],m=s.length;p<m;p++)(s[p].fn!==e||n&&!s[p].once||r&&s[p].context!==r)&&l.push(s[p]);l.length?this._events[o]=1===l.length?l[0]:l:a(this,o)}return this},s.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&a(this,e)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=i,s.EventEmitter=s,t.exports=s},418:t=>{"use strict";var e=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function n(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,o){for(var a,s,p=n(t),l=1;l<arguments.length;l++){for(var m in a=Object(arguments[l]))i.call(a,m)&&(p[m]=a[m]);if(e){s=e(a);for(var y=0;y<s.length;y++)r.call(a,s[y])&&(p[s[y]]=a[s[y]])}}return p}},587:t=>{"use strict";function e(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,i,r,n){i=i||"&",r=r||"=";var o={};if("string"!=typeof t||0===t.length)return o;var a=/\+/g;t=t.split(i);var s=1e3;n&&"number"==typeof n.maxKeys&&(s=n.maxKeys);var p=t.length;s>0&&p>s&&(p=s);for(var l=0;l<p;++l){var m,y,h,u,E=t[l].replace(a,"%20"),c=E.indexOf(r);c>=0?(m=E.substr(0,c),y=E.substr(c+1)):(m=E,y=""),h=decodeURIComponent(m),u=decodeURIComponent(y),e(o,h)?Array.isArray(o[h])?o[h].push(u):o[h]=[o[h],u]:o[h]=u}return o}},361:t=>{"use strict";var e=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,i,r,n){return i=i||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map((function(n){var o=encodeURIComponent(e(n))+r;return Array.isArray(t[n])?t[n].map((function(t){return o+encodeURIComponent(e(t))})).join(i):o+encodeURIComponent(e(t[n]))})).join(i):n?encodeURIComponent(e(n))+r+encodeURIComponent(e(t)):""}},673:(t,e,i)=>{"use strict";e.decode=e.parse=i(587),e.encode=e.stringify=i(361)},379:t=>{"use strict";var e=[];function i(t){for(var i=-1,r=0;r<e.length;r++)if(e[r].identifier===t){i=r;break}return i}function r(t,r){for(var o={},a=[],s=0;s<t.length;s++){var p=t[s],l=r.base?p[0]+r.base:p[0],m=o[l]||0,y="".concat(l," ").concat(m);o[l]=m+1;var h=i(y),u={css:p[1],media:p[2],sourceMap:p[3],supports:p[4],layer:p[5]};if(-1!==h)e[h].references++,e[h].updater(u);else{var E=n(u,r);r.byIndex=s,e.splice(s,0,{identifier:y,updater:E,references:1})}a.push(y)}return a}function n(t,e){var i=e.domAPI(e);return i.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;i.update(t=e)}else i.remove()}}t.exports=function(t,n){var o=r(t=t||[],n=n||{});return function(t){t=t||[];for(var a=0;a<o.length;a++){var s=i(o[a]);e[s].references--}for(var p=r(t,n),l=0;l<o.length;l++){var m=i(o[l]);0===e[m].references&&(e[m].updater(),e.splice(m,1))}o=p}}},569:t=>{"use strict";var e={};t.exports=function(t,i){var r=function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}e[t]=i}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(i)}},216:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,i)=>{"use strict";t.exports=function(t){var e=i.nc;e&&t.setAttribute("nonce",e)}},795:t=>{"use strict";t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(i){!function(t,e,i){var r="";i.supports&&(r+="@supports (".concat(i.supports,") {")),i.media&&(r+="@media ".concat(i.media," {"));var n=void 0!==i.layer;n&&(r+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),r+=i.css,n&&(r+="}"),i.media&&(r+="}"),i.supports&&(r+="}");var o=i.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,i)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},511:function(t,e,i){var r;t=i.nmd(t),function(n){e&&e.nodeType,t&&t.nodeType;var o="object"==typeof i.g&&i.g;o.global!==o&&o.window!==o&&o.self;var a,s=2147483647,p=36,l=/^xn--/,m=/[^\x20-\x7E]/,y=/[\x2E\u3002\uFF0E\uFF61]/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},u=Math.floor,E=String.fromCharCode;function c(t){throw RangeError(h[t])}function d(t,e){for(var i=t.length,r=[];i--;)r[i]=e(t[i]);return r}function f(t,e){var i=t.split("@"),r="";return i.length>1&&(r=i[0]+"@",t=i[1]),r+d((t=t.replace(y,".")).split("."),e).join(".")}function _(t){for(var e,i,r=[],n=0,o=t.length;n<o;)(e=t.charCodeAt(n++))>=55296&&e<=56319&&n<o?56320==(64512&(i=t.charCodeAt(n++)))?r.push(((1023&e)<<10)+(1023&i)+65536):(r.push(e),n--):r.push(e);return r}function v(t){return d(t,(function(t){var e="";return t>65535&&(e+=E((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+E(t)})).join("")}function g(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function T(t,e,i){var r=0;for(t=i?u(t/700):t>>1,t+=u(t/e);t>455;r+=p)t=u(t/35);return u(r+36*t/(t+38))}function b(t){var e,i,r,n,o,a,l,m,y,h,E,d=[],f=t.length,_=0,g=128,b=72;for((i=t.lastIndexOf("-"))<0&&(i=0),r=0;r<i;++r)t.charCodeAt(r)>=128&&c("not-basic"),d.push(t.charCodeAt(r));for(n=i>0?i+1:0;n<f;){for(o=_,a=1,l=p;n>=f&&c("invalid-input"),((m=(E=t.charCodeAt(n++))-48<10?E-22:E-65<26?E-65:E-97<26?E-97:p)>=p||m>u((s-_)/a))&&c("overflow"),_+=m*a,!(m<(y=l<=b?1:l>=b+26?26:l-b));l+=p)a>u(s/(h=p-y))&&c("overflow"),a*=h;b=T(_-o,e=d.length+1,0==o),u(_/e)>s-g&&c("overflow"),g+=u(_/e),_%=e,d.splice(_++,0,g)}return v(d)}function x(t){var e,i,r,n,o,a,l,m,y,h,d,f,v,b,x,S=[];for(f=(t=_(t)).length,e=128,i=0,o=72,a=0;a<f;++a)(d=t[a])<128&&S.push(E(d));for(r=n=S.length,n&&S.push("-");r<f;){for(l=s,a=0;a<f;++a)(d=t[a])>=e&&d<l&&(l=d);for(l-e>u((s-i)/(v=r+1))&&c("overflow"),i+=(l-e)*v,e=l,a=0;a<f;++a)if((d=t[a])<e&&++i>s&&c("overflow"),d==e){for(m=i,y=p;!(m<(h=y<=o?1:y>=o+26?26:y-o));y+=p)x=m-h,b=p-h,S.push(E(g(h+x%b,0))),m=u(x/b);S.push(E(g(m,0))),o=T(i,v,r==n),i=0,++r}++i,++e}return S.join("")}a={version:"1.3.2",ucs2:{decode:_,encode:v},decode:b,encode:x,toASCII:function(t){return f(t,(function(t){return m.test(t)?"xn--"+x(t):t}))},toUnicode:function(t){return f(t,(function(t){return l.test(t)?b(t.slice(4).toLowerCase()):t}))}},void 0===(r=function(){return a}.call(e,i,e,t))||(t.exports=r)}()},575:(t,e,i)=>{"use strict";var r=i(511),n=i(502);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.Qc=v,e.DB=function(t,e){return v(t,!1,!0).resolve(e)},e.WU=function(t){return n.isString(t)&&(t=v(t)),t instanceof o?t.format():o.prototype.format.call(t)};var a=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,p=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),m=["'"].concat(l),y=["%","/","?",";","#"].concat(m),h=["/","?","#"],u=/^[+a-z0-9A-Z_-]{0,63}$/,E=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,c={javascript:!0,"javascript:":!0},d={javascript:!0,"javascript:":!0},f={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},_=i(673);function v(t,e,i){if(t&&n.isObject(t)&&t instanceof o)return t;var r=new o;return r.parse(t,e,i),r}o.prototype.parse=function(t,e,i){if(!n.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),s=-1!==o&&o<t.indexOf("#")?"?":"#",l=t.split(s);l[0]=l[0].replace(/\\/g,"/");var v=t=l.join(s);if(v=v.trim(),!i&&1===t.split("#").length){var g=p.exec(v);if(g)return this.path=v,this.href=v,this.pathname=g[1],g[2]?(this.search=g[2],this.query=e?_.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var T=a.exec(v);if(T){var b=(T=T[0]).toLowerCase();this.protocol=b,v=v.substr(T.length)}if(i||T||v.match(/^\/\/[^@\/]+@[^@\/]+/)){var x="//"===v.substr(0,2);!x||T&&d[T]||(v=v.substr(2),this.slashes=!0)}if(!d[T]&&(x||T&&!f[T])){for(var S,R,I=-1,A=0;A<h.length;A++)-1!==(M=v.indexOf(h[A]))&&(-1===I||M<I)&&(I=M);for(-1!==(R=-1===I?v.lastIndexOf("@"):v.lastIndexOf("@",I))&&(S=v.slice(0,R),v=v.slice(R+1),this.auth=decodeURIComponent(S)),I=-1,A=0;A<y.length;A++){var M;-1!==(M=v.indexOf(y[A]))&&(-1===I||M<I)&&(I=M)}-1===I&&(I=v.length),this.host=v.slice(0,I),v=v.slice(I),this.parseHost(),this.hostname=this.hostname||"";var C="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!C)for(var F=this.hostname.split(/\./),N=(A=0,F.length);A<N;A++){var O=F[A];if(O&&!O.match(u)){for(var w="",P=0,G=O.length;P<G;P++)O.charCodeAt(P)>127?w+="x":w+=O[P];if(!w.match(u)){var D=F.slice(0,A),L=F.slice(A+1),U=O.match(E);U&&(D.push(U[1]),L.unshift(U[2])),L.length&&(v="/"+L.join(".")+v),this.hostname=D.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),C||(this.hostname=r.toASCII(this.hostname));var B=this.port?":"+this.port:"",k=this.hostname||"";this.host=k+B,this.href+=this.host,C&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==v[0]&&(v="/"+v))}if(!c[b])for(A=0,N=m.length;A<N;A++){var H=m[A];if(-1!==v.indexOf(H)){var X=encodeURIComponent(H);X===H&&(X=escape(H)),v=v.split(H).join(X)}}var j=v.indexOf("#");-1!==j&&(this.hash=v.substr(j),v=v.slice(0,j));var W=v.indexOf("?");if(-1!==W?(this.search=v.substr(W),this.query=v.substr(W+1),e&&(this.query=_.parse(this.query)),v=v.slice(0,W)):e&&(this.search="",this.query={}),v&&(this.pathname=v),f[b]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){B=this.pathname||"";var V=this.search||"";this.path=B+V}return this.href=this.format(),this},o.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",i=this.pathname||"",r=this.hash||"",o=!1,a="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&n.isObject(this.query)&&Object.keys(this.query).length&&(a=_.stringify(this.query));var s=this.search||a&&"?"+a||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||f[e])&&!1!==o?(o="//"+(o||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),e+o+(i=i.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(s=s.replace("#","%23"))+r},o.prototype.resolve=function(t){return this.resolveObject(v(t,!1,!0)).format()},o.prototype.resolveObject=function(t){if(n.isString(t)){var e=new o;e.parse(t,!1,!0),t=e}for(var i=new o,r=Object.keys(this),a=0;a<r.length;a++){var s=r[a];i[s]=this[s]}if(i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol){for(var p=Object.keys(t),l=0;l<p.length;l++){var m=p[l];"protocol"!==m&&(i[m]=t[m])}return f[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(t.protocol&&t.protocol!==i.protocol){if(!f[t.protocol]){for(var y=Object.keys(t),h=0;h<y.length;h++){var u=y[h];i[u]=t[u]}return i.href=i.format(),i}if(i.protocol=t.protocol,t.host||d[t.protocol])i.pathname=t.pathname;else{for(var E=(t.pathname||"").split("/");E.length&&!(t.host=E.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==E[0]&&E.unshift(""),E.length<2&&E.unshift(""),i.pathname=E.join("/")}if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var c=i.pathname||"",_=i.search||"";i.path=c+_}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var v=i.pathname&&"/"===i.pathname.charAt(0),g=t.host||t.pathname&&"/"===t.pathname.charAt(0),T=g||v||i.host&&t.pathname,b=T,x=i.pathname&&i.pathname.split("/")||[],S=(E=t.pathname&&t.pathname.split("/")||[],i.protocol&&!f[i.protocol]);if(S&&(i.hostname="",i.port=null,i.host&&(""===x[0]?x[0]=i.host:x.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===E[0]?E[0]=t.host:E.unshift(t.host)),t.host=null),T=T&&(""===E[0]||""===x[0])),g)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,x=E;else if(E.length)x||(x=[]),x.pop(),x=x.concat(E),i.search=t.search,i.query=t.query;else if(!n.isNullOrUndefined(t.search))return S&&(i.hostname=i.host=x.shift(),(C=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=C.shift(),i.host=i.hostname=C.shift())),i.search=t.search,i.query=t.query,n.isNull(i.pathname)&&n.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i;if(!x.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var R=x.slice(-1)[0],I=(i.host||t.host||x.length>1)&&("."===R||".."===R)||""===R,A=0,M=x.length;M>=0;M--)"."===(R=x[M])?x.splice(M,1):".."===R?(x.splice(M,1),A++):A&&(x.splice(M,1),A--);if(!T&&!b)for(;A--;A)x.unshift("..");!T||""===x[0]||x[0]&&"/"===x[0].charAt(0)||x.unshift(""),I&&"/"!==x.join("/").substr(-1)&&x.push("");var C,F=""===x[0]||x[0]&&"/"===x[0].charAt(0);return S&&(i.hostname=i.host=F?"":x.length?x.shift():"",(C=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=C.shift(),i.host=i.hostname=C.shift())),(T=T||i.host&&x.length)&&!F&&x.unshift(""),x.length?i.pathname=x.join("/"):(i.pathname=null,i.path=null),n.isNull(i.pathname)&&n.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},o.prototype.parseHost=function(){var t=this.host,e=s.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},502:t=>{"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}}},e={};function i(r){var n=e[r];if(void 0!==n)return n.exports;var o=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(o.exports,o,o.exports,i),o.loaded=!0,o.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var r in e)i.o(e,r)&&!i.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),i.nc=void 0,(()=>{"use strict";var t=i(379),e=i.n(t),r=i(795),n=i.n(r),o=i(569),a=i.n(o),s=i(565),p=i.n(s),l=i(216),m=i.n(l),y=i(589),h=i.n(y),u=i(669),E={};E.styleTagTransform=h(),E.setAttributes=p(),E.insert=a().bind(null,"head"),E.domAPI=n(),E.insertStyleElement=m(),e()(u.Z,E),u.Z&&u.Z.locals&&u.Z.locals;var c=setTimeout;function d(t){return Boolean(t&&void 0!==t.length)}function f(){}function _(t){if(!(this instanceof _))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],S(t,this)}function v(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,_._immediateFn((function(){var i=1===t._state?e.onFulfilled:e.onRejected;if(null!==i){var r;try{r=i(t._value)}catch(t){return void T(e.promise,t)}g(e.promise,r)}else(1===t._state?g:T)(e.promise,t._value)}))):t._deferreds.push(e)}function g(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var i=e.then;if(e instanceof _)return t._state=3,t._value=e,void b(t);if("function"==typeof i)return void S((r=i,n=e,function(){r.apply(n,arguments)}),t)}t._state=1,t._value=e,b(t)}catch(e){T(t,e)}var r,n}function T(t,e){t._state=2,t._value=e,b(t)}function b(t){2===t._state&&0===t._deferreds.length&&_._immediateFn((function(){t._handled||_._unhandledRejectionFn(t._value)}));for(var e=0,i=t._deferreds.length;e<i;e++)v(t,t._deferreds[e]);t._deferreds=null}function x(t,e,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=i}function S(t,e){var i=!1;try{t((function(t){i||(i=!0,g(e,t))}),(function(t){i||(i=!0,T(e,t))}))}catch(t){if(i)return;i=!0,T(e,t)}}_.prototype.catch=function(t){return this.then(null,t)},_.prototype.then=function(t,e){var i=new this.constructor(f);return v(this,new x(t,e,i)),i},_.prototype.finally=function(t){var e=this.constructor;return this.then((function(i){return e.resolve(t()).then((function(){return i}))}),(function(i){return e.resolve(t()).then((function(){return e.reject(i)}))}))},_.all=function(t){return new _((function(e,i){if(!d(t))return i(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var n=r.length;function o(t,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,(function(e){o(t,e)}),i)}r[t]=a,0==--n&&e(r)}catch(t){i(t)}}for(var a=0;a<r.length;a++)o(a,r[a])}))},_.allSettled=function(t){return new this((function(e,i){if(!t||void 0===t.length)return i(new TypeError(typeof t+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var n=r.length;function o(t,i){if(i&&("object"==typeof i||"function"==typeof i)){var a=i.then;if("function"==typeof a)return void a.call(i,(function(e){o(t,e)}),(function(i){r[t]={status:"rejected",reason:i},0==--n&&e(r)}))}r[t]={status:"fulfilled",value:i},0==--n&&e(r)}for(var a=0;a<r.length;a++)o(a,r[a])}))},_.resolve=function(t){return t&&"object"==typeof t&&t.constructor===_?t:new _((function(e){e(t)}))},_.reject=function(t){return new _((function(e,i){i(t)}))},_.race=function(t){return new _((function(e,i){if(!d(t))return i(new TypeError("Promise.race accepts an array"));for(var r=0,n=t.length;r<n;r++)_.resolve(t[r]).then(e,i)}))},_._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){c(t,0)},_._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};const R=_;var I=i(418);if("undefined"==typeof globalThis&&("undefined"!=typeof self?self.globalThis=self:"undefined"!=typeof global&&(global.globalThis=global)),globalThis.Promise||(globalThis.Promise=R),Object.assign||(Object.assign=I),Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!globalThis.performance||!globalThis.performance.now){var A=Date.now();globalThis.performance||(globalThis.performance={}),globalThis.performance.now=function(){return Date.now()-A}}for(var M,C,F,N,O,w,P,G,D,L,U,B,k,H,X,j,W,V,Y,z,q=Date.now(),K=["ms","moz","webkit","o"],Z=0;Z<K.length&&!globalThis.requestAnimationFrame;++Z){var Q=K[Z];globalThis.requestAnimationFrame=globalThis[Q+"RequestAnimationFrame"],globalThis.cancelAnimationFrame=globalThis[Q+"CancelAnimationFrame"]||globalThis[Q+"CancelRequestAnimationFrame"]}globalThis.requestAnimationFrame||(globalThis.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),i=16+q-e;return i<0&&(i=0),q=e,globalThis.self.setTimeout((function(){q=Date.now(),t(performance.now())}),i)}),globalThis.cancelAnimationFrame||(globalThis.cancelAnimationFrame=function(t){return clearTimeout(t)}),Math.sign||(Math.sign=function(t){return 0===(t=Number(t))||isNaN(t)?t:t>0?1:-1}),Number.isInteger||(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),globalThis.ArrayBuffer||(globalThis.ArrayBuffer=Array),globalThis.Float32Array||(globalThis.Float32Array=Array),globalThis.Uint32Array||(globalThis.Uint32Array=Array),globalThis.Uint16Array||(globalThis.Uint16Array=Array),globalThis.Uint8Array||(globalThis.Uint8Array=Array),globalThis.Int32Array||(globalThis.Int32Array=Array),function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(M||(M={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(C||(C={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(F||(F={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(N||(N={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(O||(O={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(w||(w={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(P||(P={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(G||(G={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(D||(D={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(L||(L={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(U||(U={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(B||(B={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(k||(k={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(H||(H={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(X||(X={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(j||(j={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR"}(W||(W={})),function(t){t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA"}(V||(V={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(Y||(Y={})),function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(z||(z={}));var J,$,tt,et,it,rt,nt,ot,at,st,pt,lt,mt,yt,ht,ut,Et,ct,dt,ft,_t={createCanvas:function(t,e){var i=document.createElement("canvas");return i.width=t,i.height=e,i},getWebGLRenderingContext:function(){return WebGLRenderingContext},getNavigator:function(){return navigator},getBaseUrl:function(){var t;return null!==(t=document.baseURI)&&void 0!==t?t:window.location.href},fetch:function(t,e){return fetch(t,e)}},vt=/iPhone/i,gt=/iPod/i,Tt=/iPad/i,bt=/\biOS-universal(?:.+)Mac\b/i,xt=/\bAndroid(?:.+)Mobile\b/i,St=/Android/i,Rt=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,It=/Silk/i,At=/Windows Phone/i,Mt=/\bWindows(?:.+)ARM\b/i,Ct=/BlackBerry/i,Ft=/BB10/i,Nt=/Opera Mini/i,Ot=/\b(CriOS|Chrome)(?:.+)Mobile/i,wt=/Mobile(?:.+)Firefox\b/i,Pt=function(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&t.maxTouchPoints>1&&"undefined"==typeof MSStream},Gt=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var i=e.userAgent,r=i.split("[FBAN");void 0!==r[1]&&(i=r[0]),void 0!==(r=i.split("Twitter"))[1]&&(i=r[0]);var n=function(t){return function(e){return e.test(t)}}(i),o={apple:{phone:n(vt)&&!n(At),ipod:n(gt),tablet:!n(vt)&&(n(Tt)||Pt(e))&&!n(At),universal:n(bt),device:(n(vt)||n(gt)||n(Tt)||n(bt)||Pt(e))&&!n(At)},amazon:{phone:n(Rt),tablet:!n(Rt)&&n(It),device:n(Rt)||n(It)},android:{phone:!n(At)&&n(Rt)||!n(At)&&n(xt),tablet:!n(At)&&!n(Rt)&&!n(xt)&&(n(It)||n(St)),device:!n(At)&&(n(Rt)||n(It)||n(xt)||n(St))||n(/\bokhttp\b/i)},windows:{phone:n(At),tablet:n(Mt),device:n(At)||n(Mt)},other:{blackberry:n(Ct),blackberry10:n(Ft),opera:n(Nt),firefox:n(wt),chrome:n(Ot),device:n(Ct)||n(Ft)||n(Nt)||n(wt)||n(Ot)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}(globalThis.navigator),Dt={ADAPTER:_t,MIPMAP_TEXTURES:B.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:Y.NONE,SPRITE_MAX_TEXTURES:function(t){var e,i=!0;(Gt.tablet||Gt.phone)&&(Gt.apple.device&&(e=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(e[1],10)<11&&(i=!1),Gt.android.device&&(e=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(e[1],10)<7&&(i=!1));return i?32:4}(),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:X.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:U.CLAMP,SCALE_MODE:L.LINEAR,PRECISION_VERTEX:j.HIGH,PRECISION_FRAGMENT:Gt.apple.device?j.HIGH:j.MEDIUM,CAN_UPLOAD_SAME_BUFFER:!Gt.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},Lt=i(729),Ut=i(187),Bt=i(575);!function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(J||(J={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}($||($={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(tt||(tt={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(et||(et={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(it||(it={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(rt||(rt={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(nt||(nt={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(ot||(ot={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(at||(at={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(st||(st={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(pt||(pt={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(lt||(lt={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(mt||(mt={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(yt||(yt={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(ht||(ht={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(ut||(ut={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR"}(Et||(Et={})),function(t){t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA"}(ct||(ct={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(dt||(dt={})),function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(ft||(ft={}));var kt={parse:Bt.Qc,format:Bt.WU,resolve:Bt.DB};Dt.RETINA_PREFIX=/@([0-9\.]+)x/,Dt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var Ht,Xt=!1,jt={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Wt(t,e){return void 0===e&&(e=[]),e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}function Vt(t){var e=t.toString(16);return"#"+("000000".substring(0,6-e.length)+e)}function Yt(t){return"string"==typeof t&&"#"===(t=jt[t.toLowerCase()]||t)[0]&&(t=t.slice(1)),parseInt(t,16)}var zt=function(){for(var t=[],e=[],i=0;i<32;i++)t[i]=i,e[i]=i;t[et.NORMAL_NPM]=et.NORMAL,t[et.ADD_NPM]=et.ADD,t[et.SCREEN_NPM]=et.SCREEN,e[et.NORMAL]=et.NORMAL_NPM,e[et.ADD]=et.ADD_NPM,e[et.SCREEN]=et.SCREEN_NPM;var r=[];return r.push(e),r.push(t),r}();function qt(t,e){return zt[e?1:0][t]}function Kt(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;var i=t>>16&255,r=t>>8&255,n=255&t;return(255*e<<24)+((i=i*e+.5|0)<<16)+((r=r*e+.5|0)<<8)+(n*e+.5|0)}function Zt(t,e,i,r){return(i=i||new Float32Array(4))[0]=(t>>16&255)/255,i[1]=(t>>8&255)/255,i[2]=(255&t)/255,(r||void 0===r)&&(i[0]*=e,i[1]*=e,i[2]*=e),i[3]=e,i}function Qt(t,e){void 0===e&&(e=null);var i=6*t;if((e=e||new Uint16Array(i)).length!==i)throw new Error("Out buffer length is incorrect, got "+e.length+" and expected "+i);for(var r=0,n=0;r<i;r+=6,n+=4)e[r+0]=n+0,e[r+1]=n+1,e[r+2]=n+2,e[r+3]=n+0,e[r+4]=n+2,e[r+5]=n+3;return e}function Jt(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}function $t(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,1+(t|=t>>>16)}function te(t){return!(t&t-1||!t)}function ee(t){var e=(t>65535?1:0)<<4,i=((t>>>=e)>255?1:0)<<3;return e|=i,e|=i=((t>>>=i)>15?1:0)<<2,(e|=i=((t>>>=i)>3?1:0)<<1)|(t>>>=i)>>1}function ie(t,e,i){var r,n=t.length;if(!(e>=n||0===i)){var o=n-(i=e+i>n?n-e:i);for(r=e;r<o;++r)t[r]=t[r+i];t.length=o}}function re(t){return 0===t?0:t<0?-1:1}Float32Array,Uint32Array,Int32Array,Uint8Array;var ne=0;function oe(){return++ne}var ae={};function se(t,e,i){if(void 0===i&&(i=3),!ae[e]){var r=(new Error).stack;void 0===r?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(r=r.split("\n").splice(i).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(r))),ae[e]=!0}}var pe,le={},me=Object.create(null),ye=Object.create(null),he=function(){function t(t,e,i){this.canvas=Dt.ADAPTER.createCanvas(),this.context=this.canvas.getContext("2d"),this.resolution=i||Dt.RESOLUTION,this.resize(t,e)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=Math.round(t*this.resolution),this.canvas.height=Math.round(e*this.resolution)},t.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=Math.round(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=Math.round(t)},enumerable:!1,configurable:!0}),t}();function ue(t,e){var i=Dt.RETINA_PREFIX.exec(t);return i?parseFloat(i[1]):void 0!==e?e:1}var Ee,ce=2*Math.PI,de=180/Math.PI,fe=Math.PI/180;!function(t){t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC"}(Ee||(Ee={}));var _e=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},t.prototype.copyTo=function(t){return t.set(this.x,this.y),t},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},t.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},t}(),ve=[new _e,new _e,new _e,new _e],ge=function(){function t(t,e,i,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(r),this.type=Ee.RECT}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t,"EMPTY",{get:function(){return new t(0,0,0,0)},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},t.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height},t.prototype.intersects=function(t,e){if(!e){var i=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=i)return!1;var r=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>r}var n=this.left,o=this.right,a=this.top,s=this.bottom;if(o<=n||s<=a)return!1;var p=ve[0].set(t.left,t.top),l=ve[1].set(t.left,t.bottom),m=ve[2].set(t.right,t.top),y=ve[3].set(t.right,t.bottom);if(m.x<=p.x||l.y<=p.y)return!1;var h=Math.sign(e.a*e.d-e.b*e.c);if(0===h)return!1;if(e.apply(p,p),e.apply(l,l),e.apply(m,m),e.apply(y,y),Math.max(p.x,l.x,m.x,y.x)<=n||Math.min(p.x,l.x,m.x,y.x)>=o||Math.max(p.y,l.y,m.y,y.y)<=a||Math.min(p.y,l.y,m.y,y.y)>=s)return!1;var u=h*(l.y-p.y),E=h*(p.x-l.x),c=u*n+E*a,d=u*o+E*a,f=u*n+E*s,_=u*o+E*s;if(Math.max(c,d,f,_)<=u*p.x+E*p.y||Math.min(c,d,f,_)>=u*y.x+E*y.y)return!1;var v=h*(p.y-m.y),g=h*(m.x-p.x),T=v*n+g*a,b=v*o+g*a,x=v*n+g*s,S=v*o+g*s;return!(Math.max(T,b,x,S)<=v*p.x+g*p.y||Math.min(T,b,x,S)>=v*y.x+g*y.y)},t.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},t.prototype.fit=function(t){var e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),r=Math.max(this.y,t.y),n=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=r,this.height=Math.max(n-r,0),this},t.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var i=Math.ceil((this.x+this.width-e)*t)/t,r=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=r-this.y,this},t.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),r=Math.min(this.y,t.y),n=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=r,this.height=n-r,this},t.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},t}(),Te=function(){function t(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.x=t,this.y=e,this.radius=i,this.type=Ee.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(t,e){if(this.radius<=0)return!1;var i=this.radius*this.radius,r=this.x-t,n=this.y-e;return(r*=r)+(n*=n)<=i},t.prototype.getBounds=function(){return new ge(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},t.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},t}(),be=function(){function t(t,e,i,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),this.x=t,this.y=e,this.width=i,this.height=r,this.type=Ee.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=(t-this.x)/this.width,r=(e-this.y)/this.height;return(i*=i)+(r*=r)<=1},t.prototype.getBounds=function(){return new ge(this.x-this.width,this.y-this.height,this.width,this.height)},t.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},t}(),xe=function(){function t(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];var r=Array.isArray(e[0])?e[0]:e;if("number"!=typeof r[0]){for(var n=[],o=0,a=r.length;o<a;o++)n.push(r[o].x,r[o].y);r=n}this.points=r,this.type=Ee.POLY,this.closeStroke=!0}return t.prototype.clone=function(){var e=new t(this.points.slice());return e.closeStroke=this.closeStroke,e},t.prototype.contains=function(t,e){for(var i=!1,r=this.points.length/2,n=0,o=r-1;n<r;o=n++){var a=this.points[2*n],s=this.points[2*n+1],p=this.points[2*o],l=this.points[2*o+1];s>e!=l>e&&t<(e-s)/(l-s)*(p-a)+a&&(i=!i)}return i},t.prototype.toString=function(){return"[@pixi/math:PolygoncloseStroke="+this.closeStroke+"points="+this.points.reduce((function(t,e){return t+", "+e}),"")+"]"},t}(),Se=function(){function t(t,e,i,r,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=20),this.x=t,this.y=e,this.width=i,this.height=r,this.radius=n,this.type=Ee.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){var i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+i&&e<=this.y+this.height-i||t>=this.x+i&&t<=this.x+this.width-i)return!0;var r=t-(this.x+i),n=e-(this.y+i),o=i*i;if(r*r+n*n<=o)return!0;if((r=t-(this.x+this.width-i))*r+n*n<=o)return!0;if(r*r+(n=e-(this.y+this.height-i))*n<=o)return!0;if((r=t-(this.x+i))*r+n*n<=o)return!0}return!1},t.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+"width="+this.width+" height="+this.height+" radius="+this.radius+"]"},t}(),Re=function(){function t(t,e,i,r){void 0===i&&(i=0),void 0===r&&(r=0),this._x=i,this._y=r,this.cb=t,this.scope=e}return t.prototype.clone=function(e,i){return void 0===e&&(e=this.cb),void 0===i&&(i=this.scope),new t(e,i,this._x,this._y)},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},t.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},t.prototype.copyTo=function(t){return t.set(this._x,this._y),t},t.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},t.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),t}(),Ie=function(){function t(t,e,i,r,n,o){void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=1),void 0===n&&(n=0),void 0===o&&(o=0),this.array=null,this.a=t,this.b=e,this.c=i,this.d=r,this.tx=n,this.ty=o}return t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,e,i,r,n,o){return this.a=t,this.b=e,this.c=i,this.d=r,this.tx=n,this.ty=o,this},t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},t.prototype.apply=function(t,e){e=e||new _e;var i=t.x,r=t.y;return e.x=this.a*i+this.c*r+this.tx,e.y=this.b*i+this.d*r+this.ty,e},t.prototype.applyInverse=function(t,e){e=e||new _e;var i=1/(this.a*this.d+this.c*-this.b),r=t.x,n=t.y;return e.x=this.d*i*r+-this.c*i*n+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*n+-this.b*i*r+(-this.ty*this.a+this.tx*this.b)*i,e},t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),r=this.a,n=this.c,o=this.tx;return this.a=r*e-this.b*i,this.b=r*i+this.b*e,this.c=n*e-this.d*i,this.d=n*i+this.d*e,this.tx=o*e-this.ty*i,this.ty=o*i+this.ty*e,this},t.prototype.append=function(t){var e=this.a,i=this.b,r=this.c,n=this.d;return this.a=t.a*e+t.b*r,this.b=t.a*i+t.b*n,this.c=t.c*e+t.d*r,this.d=t.c*i+t.d*n,this.tx=t.tx*e+t.ty*r+this.tx,this.ty=t.tx*i+t.ty*n+this.ty,this},t.prototype.setTransform=function(t,e,i,r,n,o,a,s,p){return this.a=Math.cos(a+p)*n,this.b=Math.sin(a+p)*n,this.c=-Math.sin(a-s)*o,this.d=Math.cos(a-s)*o,this.tx=t-(i*this.a+r*this.c),this.ty=e-(i*this.b+r*this.d),this},t.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var i=this.a,r=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var e=this.a,i=this.b,r=this.c,n=this.d,o=t.pivot,a=-Math.atan2(-r,n),s=Math.atan2(i,e),p=Math.abs(a+s);return p<1e-5||Math.abs(ce-p)<1e-5?(t.rotation=s,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=a,t.skew.y=s),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(r*r+n*n),t.position.x=this.tx+(o.x*e+o.y*r),t.position.y=this.ty+(o.x*i+o.y*n),t},t.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,r=this.d,n=this.tx,o=t*r-e*i;return this.a=r/o,this.b=-e/o,this.c=-i/o,this.d=t/o,this.tx=(i*this.ty-r*n)/o,this.ty=-(t*this.ty-e*n)/o,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},t.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},t.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(t,"IDENTITY",{get:function(){return new t},enumerable:!1,configurable:!0}),Object.defineProperty(t,"TEMP_MATRIX",{get:function(){return new t},enumerable:!1,configurable:!0}),t}(),Ae=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Me=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Ce=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Fe=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Ne=[],Oe=[],we=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];Ne.push(e);for(var i=0;i<16;i++)for(var r=we(Ae[t]*Ae[i]+Ce[t]*Me[i]),n=we(Me[t]*Ae[i]+Fe[t]*Me[i]),o=we(Ae[t]*Ce[i]+Ce[t]*Fe[i]),a=we(Me[t]*Ce[i]+Fe[t]*Fe[i]),s=0;s<16;s++)if(Ae[s]===r&&Me[s]===n&&Ce[s]===o&&Fe[s]===a){e.push(s);break}}for(t=0;t<16;t++){var p=new Ie;p.set(Ae[t],Me[t],Ce[t],Fe[t],0,0),Oe.push(p)}}();var Pe={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return Ae[t]},uY:function(t){return Me[t]},vX:function(t){return Ce[t]},vY:function(t){return Fe[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return Ne[t][e]},sub:function(t,e){return Ne[t][Pe.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?Pe.S:Pe.N:2*Math.abs(e)<=Math.abs(t)?t>0?Pe.E:Pe.W:e>0?t>0?Pe.SE:Pe.SW:t>0?Pe.NE:Pe.NW},matrixAppendRotationInv:function(t,e,i,r){void 0===i&&(i=0),void 0===r&&(r=0);var n=Oe[Pe.inv(e)];n.tx=i,n.ty=r,t.append(n)}},Ge=function(){function t(){this.worldTransform=new Ie,this.localTransform=new Ie,this.position=new Re(this.onChange,this,0,0),this.scale=new Re(this.onChange,this,1,1),this.pivot=new Re(this.onChange,this,0,0),this.skew=new Re(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return t.prototype.onChange=function(){this._localID++},t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},t.prototype.toString=function(){return"[@pixi/math:Transform position=("+this.position.x+", "+this.position.y+") rotation="+this.rotation+" scale=("+this.scale.x+", "+this.scale.y+") skew=("+this.skew.x+", "+this.skew.y+") ]"},t.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},t.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var i=t.worldTransform,r=this.worldTransform;r.a=e.a*i.a+e.b*i.c,r.b=e.a*i.b+e.b*i.d,r.c=e.c*i.a+e.d*i.c,r.d=e.c*i.b+e.d*i.d,r.tx=e.tx*i.a+e.ty*i.c+i.tx,r.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}},t.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),t.IDENTITY=new t,t}();Dt.SORTABLE_CHILDREN=!1;var De=function(){function t(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},t.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?ge.EMPTY:((t=t||new ge(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},t.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},t.prototype.addPointMatrix=function(t,e){var i=t.a,r=t.b,n=t.c,o=t.d,a=t.tx,s=t.ty,p=i*e.x+n*e.y+a,l=r*e.x+o*e.y+s;this.minX=Math.min(this.minX,p),this.maxX=Math.max(this.maxX,p),this.minY=Math.min(this.minY,l),this.maxY=Math.max(this.maxY,l)},t.prototype.addQuad=function(t){var e=this.minX,i=this.minY,r=this.maxX,n=this.maxY,o=t[0],a=t[1];e=o<e?o:e,i=a<i?a:i,r=o>r?o:r,n=a>n?a:n,e=(o=t[2])<e?o:e,i=(a=t[3])<i?a:i,r=o>r?o:r,n=a>n?a:n,e=(o=t[4])<e?o:e,i=(a=t[5])<i?a:i,r=o>r?o:r,n=a>n?a:n,e=(o=t[6])<e?o:e,i=(a=t[7])<i?a:i,r=o>r?o:r,n=a>n?a:n,this.minX=e,this.minY=i,this.maxX=r,this.maxY=n},t.prototype.addFrame=function(t,e,i,r,n){this.addFrameMatrix(t.worldTransform,e,i,r,n)},t.prototype.addFrameMatrix=function(t,e,i,r,n){var o=t.a,a=t.b,s=t.c,p=t.d,l=t.tx,m=t.ty,y=this.minX,h=this.minY,u=this.maxX,E=this.maxY,c=o*e+s*i+l,d=a*e+p*i+m;y=c<y?c:y,h=d<h?d:h,u=c>u?c:u,E=d>E?d:E,y=(c=o*r+s*i+l)<y?c:y,h=(d=a*r+p*i+m)<h?d:h,u=c>u?c:u,E=d>E?d:E,y=(c=o*e+s*n+l)<y?c:y,h=(d=a*e+p*n+m)<h?d:h,u=c>u?c:u,E=d>E?d:E,y=(c=o*r+s*n+l)<y?c:y,h=(d=a*r+p*n+m)<h?d:h,u=c>u?c:u,E=d>E?d:E,this.minX=y,this.minY=h,this.maxX=u,this.maxY=E},t.prototype.addVertexData=function(t,e,i){for(var r=this.minX,n=this.minY,o=this.maxX,a=this.maxY,s=e;s<i;s+=2){var p=t[s],l=t[s+1];r=p<r?p:r,n=l<n?l:n,o=p>o?p:o,a=l>a?l:a}this.minX=r,this.minY=n,this.maxX=o,this.maxY=a},t.prototype.addVertices=function(t,e,i,r){this.addVerticesMatrix(t.worldTransform,e,i,r)},t.prototype.addVerticesMatrix=function(t,e,i,r,n,o){void 0===n&&(n=0),void 0===o&&(o=n);for(var a=t.a,s=t.b,p=t.c,l=t.d,m=t.tx,y=t.ty,h=this.minX,u=this.minY,E=this.maxX,c=this.maxY,d=i;d<r;d+=2){var f=e[d],_=e[d+1],v=a*f+p*_+m,g=l*_+s*f+y;h=Math.min(h,v-n),E=Math.max(E,v+n),u=Math.min(u,g-o),c=Math.max(c,g+o)}this.minX=h,this.minY=u,this.maxX=E,this.maxY=c},t.prototype.addBounds=function(t){var e=this.minX,i=this.minY,r=this.maxX,n=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>r?t.maxX:r,this.maxY=t.maxY>n?t.maxY:n},t.prototype.addBoundsMask=function(t,e){var i=t.minX>e.minX?t.minX:e.minX,r=t.minY>e.minY?t.minY:e.minY,n=t.maxX<e.maxX?t.maxX:e.maxX,o=t.maxY<e.maxY?t.maxY:e.maxY;if(i<=n&&r<=o){var a=this.minX,s=this.minY,p=this.maxX,l=this.maxY;this.minX=i<a?i:a,this.minY=r<s?r:s,this.maxX=n>p?n:p,this.maxY=o>l?o:l}},t.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},t.prototype.addBoundsArea=function(t,e){var i=t.minX>e.x?t.minX:e.x,r=t.minY>e.y?t.minY:e.y,n=t.maxX<e.x+e.width?t.maxX:e.x+e.width,o=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(i<=n&&r<=o){var a=this.minX,s=this.minY,p=this.maxX,l=this.maxY;this.minX=i<a?i:a,this.minY=r<s?r:s,this.maxX=n>p?n:p,this.maxY=o>l?o:l}},t.prototype.pad=function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},t.prototype.addFramePad=function(t,e,i,r,n,o){t-=n,e-=o,i+=n,r+=o,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>r?this.maxY:r},t}(),Le=function(t,e){return Le=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},Le(t,e)};function Ue(t,e){function i(){this.constructor=t}Le(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var Be,ke,He,Xe,je,We,Ve,Ye,ze,qe,Ke,Ze,Qe,Je,$e,ti,ei,ii,ri,ni,oi=function(t){function e(){var e=t.call(this)||this;return e.tempDisplayObjectParent=null,e.transform=new Ge,e.alpha=1,e.visible=!0,e.renderable=!0,e.cullable=!1,e.cullArea=null,e.parent=null,e.worldAlpha=1,e._lastSortedIndex=0,e._zIndex=0,e.filterArea=null,e.filters=null,e._enabledFilters=null,e._bounds=new De,e._localBounds=null,e._boundsID=0,e._boundsRect=null,e._localBoundsRect=null,e._mask=null,e._maskRefCount=0,e._destroyed=!1,e.isSprite=!1,e.isMask=!1,e}return Ue(e,t),e.mixin=function(t){for(var i=Object.keys(t),r=0;r<i.length;++r){var n=i[r];Object.defineProperty(e.prototype,n,Object.getOwnPropertyDescriptor(t,n))}},Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},e.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new ge),e=this._boundsRect),this._bounds.getRectangle(e)},e.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new ge),t=this._localBoundsRect),this._localBounds||(this._localBounds=new De);var e=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var r=this._bounds,n=this._boundsID;this._bounds=this._localBounds;var o=this.getBounds(!1,t);return this.parent=i,this.transform=e,this._bounds=r,this._bounds.updateID+=this._boundsID-n,o},e.prototype.toGlobal=function(t,e,i){return void 0===i&&(i=!1),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},e.prototype.toLocal=function(t,e,i,r){return e&&(t=e.toGlobal(t,i,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(t,e,i,r,n,o,a,s,p){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=1),void 0===r&&(r=1),void 0===n&&(n=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===s&&(s=0),void 0===p&&(p=0),this.position.x=t,this.position.y=e,this.scale.x=i||1,this.scale.y=r||1,this.rotation=n,this.skew.x=o,this.skew.y=a,this.pivot.x=s,this.pivot.y=p,this},e.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()},Object.defineProperty(e.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new ai),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),e.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},e.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.transform.rotation*de},set:function(t){this.transform.rotation=t*fe},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(t){var e;this._mask!==t&&(this._mask&&(e=this._mask.isMaskData?this._mask.maskObject:this._mask)&&(e._maskRefCount--,0===e._maskRefCount&&(e.renderable=!0,e.isMask=!1)),this._mask=t,this._mask&&(e=this._mask.isMaskData?this._mask.maskObject:this._mask)&&(0===e._maskRefCount&&(e.renderable=!1,e.isMask=!0),e._maskRefCount++))},enumerable:!1,configurable:!0}),e}(Lt),ai=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sortDirty=null,e}return Ue(e,t),e}(oi);function si(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}oi.prototype.displayObjectUpdateTransform=oi.prototype.updateTransform,function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(Be||(Be={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(ke||(ke={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(He||(He={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(Xe||(Xe={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(je||(je={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(We||(We={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(Ve||(Ve={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(Ye||(Ye={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(ze||(ze={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(qe||(qe={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(Ke||(Ke={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(Ze||(Ze={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(Qe||(Qe={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(Je||(Je={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}($e||($e={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(ti||(ti={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR"}(ei||(ei={})),function(t){t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA"}(ii||(ii={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(ri||(ri={})),function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(ni||(ni={}));var pi=function(t){function e(){var e=t.call(this)||this;return e.children=[],e.sortableChildren=Dt.SORTABLE_CHILDREN,e.sortDirty=!1,e}return Ue(e,t),e.prototype.onChildrenChange=function(t){},e.prototype.addChild=function(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];if(e.length>1)for(var r=0;r<e.length;r++)this.addChild(e[r]);else{var n=e[0];n.parent&&n.parent.removeChild(n),n.parent=this,this.sortDirty=!0,n.transform._parentID=-1,this.children.push(n),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",n,this,this.children.length-1),n.emit("added",this)}return e[0]},e.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},e.prototype.swapChildren=function(t,e){if(t!==e){var i=this.getChildIndex(t),r=this.getChildIndex(e);this.children[i]=e,this.children[r]=t,this.onChildrenChange(i<r?i:r)}},e.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var i=this.getChildIndex(t);ie(this.children,i,1),this.children.splice(e,0,t),this.onChildrenChange(e)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];if(e.length>1)for(var r=0;r<e.length;r++)this.removeChild(e[r]);else{var n=e[0],o=this.children.indexOf(n);if(-1===o)return null;n.parent=null,n.transform._parentID=-1,ie(this.children,o,1),this._boundsID++,this.onChildrenChange(o),n.emit("removed",this),this.emit("childRemoved",n,this,o)}return e[0]},e.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,ie(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},e.prototype.removeChildren=function(t,e){void 0===t&&(t=0),void 0===e&&(e=this.children.length);var i,r=t,n=e-r;if(n>0&&n<=e){i=this.children.splice(r,n);for(var o=0;o<i.length;++o)i[o].parent=null,i[o].transform&&(i[o].transform._parentID=-1);for(this._boundsID++,this.onChildrenChange(t),o=0;o<i.length;++o)i[o].emit("removed",this),this.emit("childRemoved",i[o],this,o);return i}if(0===n&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.sortChildren=function(){for(var t=!1,e=0,i=this.children.length;e<i;++e){var r=this.children[e];r._lastSortedIndex=e,t||0===r.zIndex||(t=!0)}t&&this.children.length>1&&this.children.sort(si),this.sortDirty=!1},e.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var i=this.children[t];i.visible&&i.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];if(e.visible&&e.renderable)if(e.calculateBounds(),e._mask){var i=e._mask.isMaskData?e._mask.maskObject:e._mask;i?(i.calculateBounds(),this._bounds.addBoundsMask(e._bounds,i._bounds)):this._bounds.addBounds(e._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID},e.prototype.getLocalBounds=function(e,i){void 0===i&&(i=!1);var r=t.prototype.getLocalBounds.call(this,e);if(!i)for(var n=0,o=this.children.length;n<o;++n){var a=this.children[n];a.visible&&a.updateTransform()}return r},e.prototype._calculateBounds=function(){},e.prototype._renderWithCulling=function(t){var i=t.renderTexture.sourceFrame;if(i.width>0&&i.height>0){var r,n;if(this.cullArea?(r=this.cullArea,n=this.worldTransform):this._render!==e.prototype._render&&(r=this.getBounds(!0)),r&&i.intersects(r,n))this._render(t);else if(this.cullArea)return;for(var o=0,a=this.children.length;o<a;++o){var s=this.children[o],p=s.cullable;s.cullable=p||!this.cullArea,s.render(t),s.cullable=p}}},e.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else if(this.cullable)this._renderWithCulling(t);else{this._render(t);for(var e=0,i=this.children.length;e<i;++e)this.children[e].render(t)}},e.prototype.renderAdvanced=function(t){var e=this.filters,i=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var r=0;r<e.length;r++)e[r].enabled&&this._enabledFilters.push(e[r])}var n=e&&this._enabledFilters&&this._enabledFilters.length||i&&(!i.isMaskData||i.enabled&&(i.autoDetect||i.type!==ei.NONE));if(n&&t.batch.flush(),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.push(this,this._enabledFilters),i&&t.mask.push(this,this._mask),this.cullable)this._renderWithCulling(t);else{this._render(t),r=0;for(var o=this.children.length;r<o;++r)this.children[r].render(t)}n&&t.batch.flush(),i&&t.mask.pop(this),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},e.prototype._render=function(t){},e.prototype.destroy=function(e){t.prototype.destroy.call(this),this.sortDirty=!1;var i="boolean"==typeof e?e:e&&e.children,r=this.removeChildren(0,this.children.length);if(i)for(var n=0;n<r.length;++n)r[n].destroy(e)},Object.defineProperty(e.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t},enumerable:!1,configurable:!0}),e}(oi);pi.prototype.containerUpdateTransform=pi.prototype.updateTransform;var li,mi=function(){return mi=Object.assign||function(t){for(var e,i=arguments,r=1,n=arguments.length;r<n;r++)for(var o in e=i[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},mi.apply(this,arguments)};!function(t){t.Application="application",t.RendererPlugin="renderer-webgl-plugin",t.CanvasRendererPlugin="renderer-canvas-plugin",t.Loader="loader",t.LoadParser="load-parser",t.ResolveParser="resolve-parser",t.CacheParser="cache-parser",t.DetectionParser="detection-parser"}(li||(li={}));var yi,hi=function(t){if("function"==typeof t||"object"==typeof t&&t.extension){if(!t.extension)throw new Error("Extension class must have an extension object");var e="object"!=typeof t.extension?{type:t.extension}:t.extension;t=mi(mi({},e),{ref:t})}if("object"!=typeof t)throw new Error("Invalid extension type");return"string"==typeof(t=mi({},t)).type&&(t.type=[t.type]),t},ui={_addHandlers:null,_removeHandlers:null,_queue:{},remove:function(){for(var t=arguments,e=this,i=[],r=0;r<arguments.length;r++)i[r]=t[r];return i.map(hi).forEach((function(t){t.type.forEach((function(i){var r,n;return null===(n=(r=e._removeHandlers)[i])||void 0===n?void 0:n.call(r,t)}))})),this},add:function(){for(var t=arguments,e=this,i=[],r=0;r<arguments.length;r++)i[r]=t[r];return i.map(hi).forEach((function(t){t.type.forEach((function(i){var r=e._addHandlers,n=e._queue;r[i]?r[i](t):(n[i]=n[i]||[],n[i].push(t))}))})),this},handle:function(t,e,i){var r=this._addHandlers=this._addHandlers||{},n=this._removeHandlers=this._removeHandlers||{};if(r[t]||n[t])throw new Error("Extension type "+t+" already has a handler");r[t]=e,n[t]=i;var o=this._queue;return o[t]&&(o[t].forEach((function(t){return e(t)})),delete o[t]),this},handleByMap:function(t,e){return this.handle(t,(function(t){e[t.name]=t.ref}),(function(t){delete e[t.name]}))},handleByList:function(t,e){return this.handle(t,(function(i){var r,n;e.push(i.ref),t===li.Loader&&(null===(n=(r=i.ref).add)||void 0===n||n.call(r))}),(function(t){var i=e.indexOf(t.ref);-1!==i&&e.splice(i,1)}))}},Ei=function(){function t(t){this.items=[],this._name=t,this._aliasCount=0}return t.prototype.emit=function(t,e,i,r,n,o,a,s){if(arguments.length>8)throw new Error("max arguments reached");var p=this,l=p.name,m=p.items;this._aliasCount++;for(var y=0,h=m.length;y<h;y++)m[y][l](t,e,i,r,n,o,a,s);return m===this.items&&this._aliasCount--,this},t.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},t.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},t.prototype.remove=function(t){var e=this.items.indexOf(t);return-1!==e&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this},t.prototype.contains=function(t){return-1!==this.items.indexOf(t)},t.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},t.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),t}();Object.defineProperties(Ei.prototype,{dispatch:{value:Ei.prototype.emit},run:{value:Ei.prototype.emit}}),Dt.TARGET_FPMS=.06,function(t){t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY"}(yi||(yi={}));var ci=function(){function t(t,e,i,r){void 0===e&&(e=null),void 0===i&&(i=0),void 0===r&&(r=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=i,this.once=r}return t.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},t.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},t.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},t.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},t}(),di=function(){function t(){var t=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new ci(null,null,1/0),this.deltaMS=1/Dt.TARGET_FPMS,this.elapsedMS=1/Dt.TARGET_FPMS,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return t.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(t,e,i){return void 0===i&&(i=yi.NORMAL),this._addListener(new ci(t,e,i))},t.prototype.addOnce=function(t,e,i){return void 0===i&&(i=yi.NORMAL),this._addListener(new ci(t,e,i,!0))},t.prototype._addListener=function(t){var e=this._head.next,i=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}else t.connect(i);return this._startIfPossible(),this},t.prototype.remove=function(t,e){for(var i=this._head.next;i;)i=i.match(t,e)?i.destroy():i.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(t.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},t.prototype.update=function(t){var e;if(void 0===t&&(t=performance.now()),t>this.lastTime){if((e=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var i=t-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=t-i%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*Dt.TARGET_FPMS;for(var r=this._head,n=r.next;n;)n=n.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(t.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,e)/1e3,Dt.TARGET_FPMS);this._maxElapsedMS=1/i},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(0===t)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"shared",{get:function(){if(!t._shared){var e=t._shared=new t;e.autoStart=!0,e._protected=!0}return t._shared},enumerable:!1,configurable:!0}),Object.defineProperty(t,"system",{get:function(){if(!t._system){var e=t._system=new t;e.autoStart=!0,e._protected=!0}return t._system},enumerable:!1,configurable:!0}),t}(),fi=function(){function t(){}return t.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,yi.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?di.shared:new di,t.autoStart&&this.start()},t.destroy=function(){if(this._ticker){var t=this._ticker;this.ticker=null,t.destroy()}},t.extension=li.Application,t}();Dt.PREFER_ENV=Gt.any?J.WEBGL:J.WEBGL2,Dt.STRICT_TEXTURE_CACHE=!1;var _i=[];function vi(t,e){if(!t)return null;var i="";if("string"==typeof t){var r=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);r&&(i=r[1].toLowerCase())}for(var n=_i.length-1;n>=0;--n){var o=_i[n];if(o.test&&o.test(t,i))return new o(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}var gi=function(t,e){return gi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},gi(t,e)};function Ti(t,e){function i(){this.constructor=t}gi(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var bi=function(){return bi=Object.assign||function(t){for(var e,i=arguments,r=1,n=arguments.length;r<n;r++)for(var o in e=i[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},bi.apply(this,arguments)},xi=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new Ei("setRealSize"),this.onUpdate=new Ei("update"),this.onError=new Ei("onError")}return t.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},t.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},t.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(t.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),t.prototype.update=function(){this.destroyed||this.onUpdate.emit()},t.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),t.prototype.style=function(t,e,i){return!1},t.prototype.dispose=function(){},t.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},t.test=function(t,e){return!1},t}(),Si=function(t){function e(e,i){var r=this,n=i||{},o=n.width,a=n.height;if(!o||!a)throw new Error("BufferResource width or height invalid");return(r=t.call(this,o,a)||this).data=e,r}return Ti(e,t),e.prototype.upload=function(t,e,i){var r=t.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===mt.UNPACK);var n=e.realWidth,o=e.realHeight;return i.width===n&&i.height===o?r.texSubImage2D(e.target,0,0,0,n,o,e.format,i.type,this.data):(i.width=n,i.height=o,r.texImage2D(e.target,0,i.internalFormat,n,o,0,e.format,i.type,this.data)),!0},e.prototype.dispose=function(){this.data=null},e.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},e}(xi),Ri={scaleMode:st.NEAREST,format:rt.RGBA,alphaMode:mt.NPM},Ii=function(t){function e(e,i){void 0===e&&(e=null),void 0===i&&(i=null);var r=t.call(this)||this,n=(i=i||{}).alphaMode,o=i.mipmap,a=i.anisotropicLevel,s=i.scaleMode,p=i.width,l=i.height,m=i.wrapMode,y=i.format,h=i.type,u=i.target,E=i.resolution,c=i.resourceOptions;return!e||e instanceof xi||((e=vi(e,c)).internal=!0),r.resolution=E||Dt.RESOLUTION,r.width=Math.round((p||0)*r.resolution)/r.resolution,r.height=Math.round((l||0)*r.resolution)/r.resolution,r._mipmap=void 0!==o?o:Dt.MIPMAP_TEXTURES,r.anisotropicLevel=void 0!==a?a:Dt.ANISOTROPIC_LEVEL,r._wrapMode=m||Dt.WRAP_MODE,r._scaleMode=void 0!==s?s:Dt.SCALE_MODE,r.format=y||rt.RGBA,r.type=h||ot.UNSIGNED_BYTE,r.target=u||nt.TEXTURE_2D,r.alphaMode=void 0!==n?n:mt.UNPACK,r.uid=oe(),r.touched=0,r.isPowerOfTwo=!1,r._refreshPOT(),r._glTextures={},r.dirtyId=0,r.dirtyStyleId=0,r.cacheId=null,r.valid=p>0&&l>0,r.textureCacheIds=[],r.destroyed=!1,r.resource=null,r._batchEnabled=0,r._batchLocation=0,r.parentTextureArray=null,r.setResource(e),r}return Ti(e,t),Object.defineProperty(e.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mipmap",{get:function(){return this._mipmap},set:function(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),e.prototype.setStyle=function(t,e){var i;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,i=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,i=!0),i&&this.dirtyStyleId++,this},e.prototype.setSize=function(t,e,i){return i=i||this.resolution,this.setRealSize(t*i,e*i,i)},e.prototype.setRealSize=function(t,e,i){return this.resolution=i||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(e)/this.resolution,this._refreshPOT(),this.update(),this},e.prototype._refreshPOT=function(){this.isPowerOfTwo=te(this.realWidth)&&te(this.realHeight)},e.prototype.setResolution=function(t){var e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=Math.round(this.width*e)/t,this.height=Math.round(this.height*e)/t,this.emit("update",this)),this._refreshPOT()),this},e.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},e.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},e.prototype.onError=function(t){this.emit("error",this,t)},e.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete ye[this.cacheId],delete me[this.cacheId],this.cacheId=null),this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.castToBaseTexture=function(){return this},e.from=function(t,i,r){void 0===r&&(r=Dt.STRICT_TEXTURE_CACHE);var n="string"==typeof t,o=null;if(n)o=t;else{if(!t._pixiId){var a=i&&i.pixiIdPrefix||"pixiid";t._pixiId=a+"_"+oe()}o=t._pixiId}var s=ye[o];if(n&&r&&!s)throw new Error('The cacheId "'+o+'" does not exist in BaseTextureCache.');return s||((s=new e(t,i)).cacheId=o,e.addToCache(s,o)),s},e.fromBuffer=function(t,i,r,n){t=t||new Float32Array(i*r*4);var o=new Si(t,{width:i,height:r}),a=t instanceof Float32Array?ot.FLOAT:ot.UNSIGNED_BYTE;return new e(o,Object.assign({},Ri,n||{width:i,height:r,type:a}))},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),ye[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),ye[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=ye[t];if(e){var i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete ye[t],e}}else if(t&&t.textureCacheIds){for(var r=0;r<t.textureCacheIds.length;++r)delete ye[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null},e._globalBatch=0,e}(Lt),Ai=function(t){function e(e,i){var r=this,n=i||{},o=n.width,a=n.height;(r=t.call(this,o,a)||this).items=[],r.itemDirtyIds=[];for(var s=0;s<e;s++){var p=new Ii;r.items.push(p),r.itemDirtyIds.push(-2)}return r.length=e,r._load=null,r.baseTexture=null,r}return Ti(e,t),e.prototype.initFromArray=function(t,e){for(var i=0;i<this.length;i++)t[i]&&(t[i].castToBaseTexture?this.addBaseTextureAt(t[i].castToBaseTexture(),i):t[i]instanceof xi?this.addResourceAt(t[i],i):this.addResourceAt(vi(t[i],e),i))},e.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},e.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},e.prototype.bind=function(e){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");t.prototype.bind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=e,this.items[i].on("update",e.update,e)},e.prototype.unbind=function(e){t.prototype.unbind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=null,this.items[i].off("update",e.update,e)},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.items.map((function(t){return t.resource})).filter((function(t){return t})).map((function(t){return t.load()}));return this._load=Promise.all(e).then((function(){var e=t.items[0],i=e.realWidth,r=e.realHeight;return t.resize(i,r),Promise.resolve(t)})),this._load},e}(xi),Mi=function(t){function e(e,i){var r,n,o=this,a=i||{},s=a.width,p=a.height;return Array.isArray(e)?(r=e,n=e.length):n=e,o=t.call(this,n,{width:s,height:p})||this,r&&o.initFromArray(r,i),o}return Ti(e,t),e.prototype.addBaseTextureAt=function(t,e){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,e),this},e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=nt.TEXTURE_2D_ARRAY},e.prototype.upload=function(t,e,i){var r=this,n=r.length,o=r.itemDirtyIds,a=r.items,s=t.gl;i.dirtyId<0&&s.texImage3D(s.TEXTURE_2D_ARRAY,0,i.internalFormat,this._width,this._height,n,0,e.format,i.type,null);for(var p=0;p<n;p++){var l=a[p];o[p]<l.dirtyId&&(o[p]=l.dirtyId,l.valid&&s.texSubImage3D(s.TEXTURE_2D_ARRAY,0,0,0,p,l.resource.width,l.resource.height,1,e.format,i.type,l.resource.source))}return!0},e}(Ai),Ci=function(t){function e(e){var i=this,r=e,n=r.naturalWidth||r.videoWidth||r.width,o=r.naturalHeight||r.videoHeight||r.height;return(i=t.call(this,n,o)||this).source=e,i.noSubImage=!1,i}return Ti(e,t),e.crossOrigin=function(t,e,i){void 0===i&&0!==e.indexOf("data:")?t.crossOrigin=function(t,e){if(void 0===e&&(e=globalThis.location),0===t.indexOf("data:"))return"";e=e||globalThis.location,pe||(pe=document.createElement("a")),pe.href=t;var i=kt.parse(pe.href),r=!i.port&&""===e.port||i.port===e.port;return i.hostname===e.hostname&&r&&i.protocol===e.protocol?"":"anonymous"}(e):!1!==i&&(t.crossOrigin="string"==typeof i?i:"anonymous")},e.prototype.upload=function(t,e,i,r){var n=t.gl,o=e.realWidth,a=e.realHeight;if((r=r||this.source)instanceof HTMLImageElement){if(!r.complete||0===r.naturalWidth)return!1}else if(r instanceof HTMLVideoElement&&r.readyState<=1)return!1;return n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===mt.UNPACK),this.noSubImage||e.target!==n.TEXTURE_2D||i.width!==o||i.height!==a?(i.width=o,i.height=a,n.texImage2D(e.target,0,i.internalFormat,e.format,i.type,r)):n.texSubImage2D(n.TEXTURE_2D,0,0,0,e.format,i.type,r),!0},e.prototype.update=function(){if(!this.destroyed){var e=this.source,i=e.naturalWidth||e.videoWidth||e.width,r=e.naturalHeight||e.videoHeight||e.height;this.resize(i,r),t.prototype.update.call(this)}},e.prototype.dispose=function(){this.source=null},e}(xi),Fi=function(t){function e(e){return t.call(this,e)||this}return Ti(e,t),e.test=function(t){var e=globalThis.OffscreenCanvas;return!!(e&&t instanceof e)||globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement},e}(Ci),Ni=function(t){function e(i,r){var n=this,o=r||{},a=o.width,s=o.height,p=o.autoLoad,l=o.linkBaseTexture;if(i&&i.length!==e.SIDES)throw new Error("Invalid length. Got "+i.length+", expected 6");n=t.call(this,6,{width:a,height:s})||this;for(var m=0;m<e.SIDES;m++)n.items[m].target=nt.TEXTURE_CUBE_MAP_POSITIVE_X+m;return n.linkBaseTexture=!1!==l,i&&n.initFromArray(i,r),!1!==p&&n.load(),n}return Ti(e,t),e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=nt.TEXTURE_CUBE_MAP},e.prototype.addBaseTextureAt=function(t,e,i){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=nt.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this},e.prototype.upload=function(t,i,r){for(var n=this.itemDirtyIds,o=0;o<e.SIDES;o++){var a=this.items[o];(n[o]<a.dirtyId||r.dirtyId<i.dirtyId)&&(a.valid&&a.resource?(a.resource.upload(t,a,r),n[o]=a.dirtyId):n[o]<-1&&(t.gl.texImage2D(a.target,0,r.internalFormat,i.realWidth,i.realHeight,0,i.format,r.type,null),n[o]=-1))}return!0},e.test=function(t){return Array.isArray(t)&&t.length===e.SIDES},e.SIDES=6,e}(Ai),Oi=function(t){function e(e,i){var r=this;if(i=i||{},!(e instanceof HTMLImageElement)){var n=new Image;Ci.crossOrigin(n,e,i.crossorigin),n.src=e,e=n}return r=t.call(this,e)||this,!e.complete&&r._width&&r._height&&(r._width=0,r._height=0),r.url=e.src,r._process=null,r.preserveBitmap=!1,r.createBitmap=(void 0!==i.createBitmap?i.createBitmap:Dt.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,r.alphaMode="number"==typeof i.alphaMode?i.alphaMode:null,r.bitmap=null,r._load=null,!1!==i.autoLoad&&r.load(),r}return Ti(e,t),e.prototype.load=function(t){var e=this;return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise((function(t,i){var r=e.source;e.url=r.src;var n=function(){e.destroyed||(r.onload=null,r.onerror=null,e.resize(r.width,r.height),e._load=null,e.createBitmap?t(e.process()):t(e))};r.complete&&r.src?n():(r.onload=n,r.onerror=function(t){i(t),e.onError.emit(t)})}))),this._load},e.prototype.process=function(){var t=this,e=this.source;if(null!==this._process)return this._process;if(null!==this.bitmap||!globalThis.createImageBitmap)return Promise.resolve(this);var i=globalThis.createImageBitmap,r=!e.crossOrigin||"anonymous"===e.crossOrigin;return this._process=fetch(e.src,{mode:r?"cors":"no-cors"}).then((function(t){return t.blob()})).then((function(r){return i(r,0,0,e.width,e.height,{premultiplyAlpha:null===t.alphaMode||t.alphaMode===mt.UNPACK?"premultiply":"none"})})).then((function(e){return t.destroyed?Promise.reject():(t.bitmap=e,t.update(),t._process=null,Promise.resolve(t))})),this._process},e.prototype.upload=function(e,i,r){if("number"==typeof this.alphaMode&&(i.alphaMode=this.alphaMode),!this.createBitmap)return t.prototype.upload.call(this,e,i,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(t.prototype.upload.call(this,e,i,r,this.bitmap),!this.preserveBitmap){var n=!0,o=i._glTextures;for(var a in o){var s=o[a];if(s!==r&&s.dirtyId!==i.dirtyId){n=!1;break}}n&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},e.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,t.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},e.test=function(t){return"string"==typeof t||t instanceof HTMLImageElement},e}(Ci),wi=function(t){function e(e,i){var r=this;return i=i||{},(r=t.call(this,Dt.ADAPTER.createCanvas())||this)._width=0,r._height=0,r.svg=e,r.scale=i.scale||1,r._overrideWidth=i.width,r._overrideHeight=i.height,r._resolve=null,r._crossorigin=i.crossorigin,r._load=null,!1!==i.autoLoad&&r.load(),r}return Ti(e,t),e.prototype.load=function(){var t=this;return this._load||(this._load=new Promise((function(i){if(t._resolve=function(){t.resize(t.source.width,t.source.height),i(t)},e.SVG_XML.test(t.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");t.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t.svg)))}t._loadSvg()}))),this._load},e.prototype._loadSvg=function(){var t=this,e=new Image;Ci.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=function(i){t._resolve&&(e.onerror=null,t.onError.emit(i))},e.onload=function(){if(t._resolve){var i=e.width,r=e.height;if(!i||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var n=i*t.scale,o=r*t.scale;(t._overrideWidth||t._overrideHeight)&&(n=t._overrideWidth||t._overrideHeight/r*i,o=t._overrideHeight||t._overrideWidth/i*r),n=Math.round(n),o=Math.round(o);var a=t.source;a.width=n,a.height=o,a._pixiId="canvas_"+oe(),a.getContext("2d").drawImage(e,0,0,i,r,0,0,n,o),t._resolve(),t._resolve=null}}},e.getSize=function(t){var i=e.SVG_SIZE.exec(t),r={};return i&&(r[i[1]]=Math.round(parseFloat(i[3])),r[i[5]]=Math.round(parseFloat(i[7]))),r},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},e.test=function(t,i){return"svg"===i||"string"==typeof t&&t.startsWith("data:image/svg+xml")||"string"==typeof t&&e.SVG_XML.test(t)},e.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e}(Ci),Pi=function(t){function e(i,r){var n=this;if(r=r||{},!(i instanceof HTMLVideoElement)){var o=document.createElement("video");o.setAttribute("preload","auto"),o.setAttribute("webkit-playsinline",""),o.setAttribute("playsinline",""),"string"==typeof i&&(i=[i]);var a=i[0].src||i[0];Ci.crossOrigin(o,a,r.crossorigin);for(var s=0;s<i.length;++s){var p=document.createElement("source"),l=i[s],m=l.src,y=l.mime,h=(m=m||i[s]).split("?").shift().toLowerCase(),u=h.slice(h.lastIndexOf(".")+1);y=y||e.MIME_TYPES[u]||"video/"+u,p.src=m,p.type=y,o.appendChild(p)}i=o}return(n=t.call(this,i)||this).noSubImage=!0,n._autoUpdate=!0,n._isConnectedToTicker=!1,n._updateFPS=r.updateFPS||0,n._msToNextUpdate=0,n.autoPlay=!1!==r.autoPlay,n._load=null,n._resolve=null,n._onCanPlay=n._onCanPlay.bind(n),n._onError=n._onError.bind(n),!1!==r.autoLoad&&n.load(),n}return Ti(e,t),e.prototype.update=function(e){if(!this.destroyed){var i=di.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-i),(!this._updateFPS||this._msToNextUpdate<=0)&&(t.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart.bind(this)),e.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((function(i){t.valid?i(t):(t._resolve=i,e.load())})),this._load},e.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},e.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&!1===t.paused&&!1===t.ended&&t.readyState>2},e.prototype._isSourceReady=function(){var t=this.source;return 3===t.readyState||4===t.readyState},e.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(di.shared.add(this.update,this),this._isConnectedToTicker=!0)},e.prototype._onPlayStop=function(){this._isConnectedToTicker&&(di.shared.remove(this.update,this),this._isConnectedToTicker=!1)},e.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},e.prototype.dispose=function(){this._isConnectedToTicker&&(di.shared.remove(this.update,this),this._isConnectedToTicker=!1);var e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(di.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(di.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),e.test=function(t,i){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||e.TYPES.indexOf(i)>-1},e.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],e.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},e}(Ci),Gi=function(t){function e(e){return t.call(this,e)||this}return Ti(e,t),e.test=function(t){return!!globalThis.createImageBitmap&&"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap},e}(Ci);_i.push(Oi,Gi,Fi,Pi,wi,Si,Ni,Mi);var Di={__proto__:null,Resource:xi,BaseImageResource:Ci,INSTALLED:_i,autoDetectResource:vi,AbstractMultiResource:Ai,ArrayResource:Mi,BufferResource:Si,CanvasResource:Fi,CubeResource:Ni,ImageResource:Oi,SVGResource:wi,VideoResource:Pi,ImageBitmapResource:Gi},Li=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ti(e,t),e.prototype.upload=function(t,e,i){var r=t.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===mt.UNPACK);var n=e.realWidth,o=e.realHeight;return i.width===n&&i.height===o?r.texSubImage2D(e.target,0,0,0,n,o,e.format,i.type,this.data):(i.width=n,i.height=o,r.texImage2D(e.target,0,i.internalFormat,n,o,0,e.format,i.type,this.data)),!0},e}(Si),Ui=function(){function t(t,e){this.width=Math.round(t||100),this.height=Math.round(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Ei("disposeFramebuffer"),this.multisample=dt.NONE}return Object.defineProperty(t.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),t.prototype.addColorTexture=function(t,e){return void 0===t&&(t=0),this.colorTextures[t]=e||new Ii(null,{scaleMode:st.NEAREST,resolution:1,mipmap:lt.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.addDepthTexture=function(t){return this.depthTexture=t||new Ii(new Li(null,{width:this.width,height:this.height}),{scaleMode:st.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:lt.OFF,format:rt.DEPTH_COMPONENT,type:ot.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.resize=function(t,e){if(t=Math.round(t),e=Math.round(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var i=0;i<this.colorTextures.length;i++){var r=this.colorTextures[i],n=r.resolution;r.setSize(t/n,e/n)}this.depthTexture&&(n=this.depthTexture.resolution,this.depthTexture.setSize(t/n,e/n))}},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},t}(),Bi=function(t){function e(e){void 0===e&&(e={});var i=this;if("number"==typeof e){var r=arguments[0],n=arguments[1],o=arguments[2],a=arguments[3];e={width:r,height:n,scaleMode:o,resolution:a}}return e.width=e.width||100,e.height=e.height||100,e.multisample=void 0!==e.multisample?e.multisample:dt.NONE,(i=t.call(this,null,e)||this).mipmap=lt.OFF,i.valid=!0,i.clearColor=[0,0,0,0],i.framebuffer=new Ui(i.realWidth,i.realHeight).addColorTexture(0,i),i.framebuffer.multisample=e.multisample,i.maskStack=[],i.filterStack=[{}],i}return Ti(e,t),e.prototype.resize=function(t,e){this.framebuffer.resize(t*this.resolution,e*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},e.prototype.dispose=function(){this.framebuffer.dispose(),t.prototype.dispose.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},e}(Ii),ki=function(){function t(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return t.prototype.set=function(t,e,i){var r=e.width,n=e.height;if(i){var o=t.width/2/r,a=t.height/2/n,s=t.x/r+o,p=t.y/n+a;i=Pe.add(i,Pe.NW),this.x0=s+o*Pe.uX(i),this.y0=p+a*Pe.uY(i),i=Pe.add(i,2),this.x1=s+o*Pe.uX(i),this.y1=p+a*Pe.uY(i),i=Pe.add(i,2),this.x2=s+o*Pe.uX(i),this.y2=p+a*Pe.uY(i),i=Pe.add(i,2),this.x3=s+o*Pe.uX(i),this.y3=p+a*Pe.uY(i)}else this.x0=t.x/r,this.y0=t.y/n,this.x1=(t.x+t.width)/r,this.y1=t.y/n,this.x2=(t.x+t.width)/r,this.y2=(t.y+t.height)/n,this.x3=t.x/r,this.y3=(t.y+t.height)/n;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},t.prototype.toString=function(){return"[@pixi/core:TextureUvs x0="+this.x0+" y0="+this.y0+" x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" y2="+this.y2+" x3="+this.x3+" y3="+this.y3+"]"},t}(),Hi=new ki;function Xi(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}var ji=function(t){function e(i,r,n,o,a,s){var p=t.call(this)||this;if(p.noFrame=!1,r||(p.noFrame=!0,r=new ge(0,0,1,1)),i instanceof e&&(i=i.baseTexture),p.baseTexture=i,p._frame=r,p.trim=o,p.valid=!1,p._uvs=Hi,p.uvMatrix=null,p.orig=n||r,p._rotate=Number(a||0),!0===a)p._rotate=2;else if(p._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return p.defaultAnchor=s?new _e(s.x,s.y):new _e(0,0),p._updateID=0,p.textureCacheIds=[],i.valid?p.noFrame?i.valid&&p.onBaseTextureUpdated(i):p.frame=r:i.once("loaded",p.onBaseTextureUpdated,p),p.noFrame&&i.on("update",p.onBaseTextureUpdated,p),p}return Ti(e,t),e.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},e.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},e.prototype.destroy=function(t){if(this.baseTexture){if(t){var i=this.baseTexture.resource;i&&i.url&&me[i.url]&&e.removeFromCache(i.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){var t=this._frame.clone(),i=this._frame===this.orig?t:this.orig.clone(),r=new e(this.baseTexture,!this.noFrame&&t,i,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(r._frame=t),r},e.prototype.updateUvs=function(){this._uvs===Hi&&(this._uvs=new ki),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.from=function(t,i,r){void 0===i&&(i={}),void 0===r&&(r=Dt.STRICT_TEXTURE_CACHE);var n="string"==typeof t,o=null;if(n)o=t;else if(t instanceof Ii){if(!t.cacheId){var a=i&&i.pixiIdPrefix||"pixiid";t.cacheId=a+"-"+oe(),Ii.addToCache(t,t.cacheId)}o=t.cacheId}else t._pixiId||(a=i&&i.pixiIdPrefix||"pixiid",t._pixiId=a+"_"+oe()),o=t._pixiId;var s=me[o];if(n&&r&&!s)throw new Error('The cacheId "'+o+'" does not exist in TextureCache.');return s||t instanceof Ii?!s&&t instanceof Ii&&(s=new e(t),e.addToCache(s,o)):(i.resolution||(i.resolution=ue(t)),(s=new e(new Ii(t,i))).baseTexture.cacheId=o,Ii.addToCache(s.baseTexture,o),e.addToCache(s,o)),s},e.fromURL=function(t,i){var r=Object.assign({autoLoad:!1},null==i?void 0:i.resourceOptions),n=e.from(t,Object.assign({resourceOptions:r},i),!1),o=n.baseTexture.resource;return n.baseTexture.valid?Promise.resolve(n):o.load().then((function(){return Promise.resolve(n)}))},e.fromBuffer=function(t,i,r,n){return new e(Ii.fromBuffer(t,i,r,n))},e.fromLoader=function(t,i,r,n){var o=new Ii(t,Object.assign({scaleMode:Dt.SCALE_MODE,resolution:ue(i)},n)),a=o.resource;a instanceof Oi&&(a.url=i);var s=new e(o);return r||(r=i),Ii.addToCache(s.baseTexture,r),e.addToCache(s,r),r!==i&&(Ii.addToCache(s.baseTexture,i),e.addToCache(s,i)),s.baseTexture.valid?Promise.resolve(s):new Promise((function(t){s.baseTexture.once("loaded",(function(){return t(s)}))}))},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),me[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),me[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=me[t];if(e){var i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete me[t],e}}else if(t&&t.textureCacheIds){for(var r=0;r<t.textureCacheIds.length;++r)me[t.textureCacheIds[r]]===t&&delete me[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(e.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,i=t.y,r=t.width,n=t.height,o=e+r>this.baseTexture.width,a=i+n>this.baseTexture.height;if(o||a){var s=o&&a?"and":"or",p="X: "+e+" + "+r+" = "+(e+r)+" > "+this.baseTexture.width,l="Y: "+i+" + "+n+" = "+(i+n)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+p+" "+s+" "+l)}this.valid=r&&n&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),e.prototype.castToBaseTexture=function(){return this.baseTexture},Object.defineProperty(e,"EMPTY",{get:function(){return e._EMPTY||(e._EMPTY=new e(new Ii),Xi(e._EMPTY),Xi(e._EMPTY.baseTexture)),e._EMPTY},enumerable:!1,configurable:!0}),Object.defineProperty(e,"WHITE",{get:function(){if(!e._WHITE){var t=Dt.ADAPTER.createCanvas(16,16),i=t.getContext("2d");t.width=16,t.height=16,i.fillStyle="white",i.fillRect(0,0,16,16),e._WHITE=new e(Ii.from(t)),Xi(e._WHITE),Xi(e._WHITE.baseTexture)}return e._WHITE},enumerable:!1,configurable:!0}),e}(Lt),Wi=function(t){function e(e,i){var r=t.call(this,e,i)||this;return r.valid=!0,r.filterFrame=null,r.filterPoolKey=null,r.updateUvs(),r}return Ti(e,t),Object.defineProperty(e.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(t){this.framebuffer.multisample=t},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,e,i){void 0===i&&(i=!0);var r=this.baseTexture.resolution,n=Math.round(t*r)/r,o=Math.round(e*r)/r;this.valid=n>0&&o>0,this._frame.width=this.orig.width=n,this._frame.height=this.orig.height=o,i&&this.baseTexture.resize(n,o),this.updateUvs()},e.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},e.create=function(t){for(var i=arguments,r=[],n=1;n<arguments.length;n++)r[n-1]=i[n];return"number"==typeof t&&(se("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),t={width:t,height:r[0],scaleMode:r[1],resolution:r[2]}),new e(new Bi(t))},e}(ji),Vi=function(){function t(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return t.prototype.createTexture=function(t,e,i){void 0===i&&(i=dt.NONE);var r=new Bi(Object.assign({width:t,height:e,resolution:1,multisample:i},this.textureOptions));return new Wi(r)},t.prototype.getOptimalTexture=function(t,e,i,r){var n;void 0===i&&(i=1),void 0===r&&(r=dt.NONE),t=Math.ceil(t*i-1e-6),e=Math.ceil(e*i-1e-6),this.enableFullScreen&&t===this._pixelsWidth&&e===this._pixelsHeight?n=r>1?-r:-1:(n=((65535&(t=$t(t)))<<16|65535&(e=$t(e)))>>>0,r>1&&(n+=4294967296*r)),this.texturePool[n]||(this.texturePool[n]=[]);var o=this.texturePool[n].pop();return o||(o=this.createTexture(t,e,r)),o.filterPoolKey=n,o.setResolution(i),o},t.prototype.getFilterTexture=function(t,e,i){var r=this.getOptimalTexture(t.width,t.height,e||t.resolution,i||dt.NONE);return r.filterFrame=t.filterFrame,r},t.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},t.prototype.returnFilterTexture=function(t){this.returnTexture(t)},t.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var i=this.texturePool[e];if(i)for(var r=0;r<i.length;r++)i[r].destroy(!0)}this.texturePool={}},t.prototype.setScreenSize=function(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){for(var e in this.enableFullScreen=t.width>0&&t.height>0,this.texturePool)if(Number(e)<0){var i=this.texturePool[e];if(i)for(var r=0;r<i.length;r++)i[r].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}},t.SCREEN_KEY=-1,t}(),Yi=function(){function t(t,e,i,r,n,o,a){void 0===e&&(e=0),void 0===i&&(i=!1),void 0===r&&(r=ot.FLOAT),this.buffer=t,this.size=e,this.normalized=i,this.type=r,this.stride=n,this.start=o,this.instance=a}return t.prototype.destroy=function(){this.buffer=null},t.from=function(e,i,r,n,o){return new t(e,i,r,n,o)},t}(),zi=0,qi=function(){function t(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=e,this.id=zi++,this.disposeRunner=new Ei("disposeBuffer")}return t.prototype.update=function(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(t.prototype,"index",{get:function(){return this.type===ft.ELEMENT_ARRAY_BUFFER},set:function(t){this.type=t?ft.ELEMENT_ARRAY_BUFFER:ft.ARRAY_BUFFER},enumerable:!1,configurable:!0}),t.from=function(e){return e instanceof Array&&(e=new Float32Array(e)),new t(e)},t}(),Ki={Float32Array,Uint32Array,Int32Array,Uint8Array},Zi={5126:4,5123:2,5121:1},Qi=0,Ji={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},$i=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e={}),this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=Qi++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Ei("disposeGeometry"),this.refCount=0}return t.prototype.addAttribute=function(t,e,i,r,n,o,a,s){if(void 0===i&&(i=0),void 0===r&&(r=!1),void 0===s&&(s=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof qi||(e instanceof Array&&(e=new Float32Array(e)),e=new qi(e));var p=t.split("|");if(p.length>1){for(var l=0;l<p.length;l++)this.addAttribute(p[l],e,i,r,n);return this}var m=this.buffers.indexOf(e);return-1===m&&(this.buffers.push(e),m=this.buffers.length-1),this.attributes[t]=new Yi(m,i,r,n,o,a,s),this.instanced=this.instanced||s,this},t.prototype.getAttribute=function(t){return this.attributes[t]},t.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},t.prototype.addIndex=function(t){return t instanceof qi||(t instanceof Array&&(t=new Uint16Array(t)),t=new qi(t)),t.type=ft.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},t.prototype.getIndex=function(){return this.indexBuffer},t.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],i=[],r=new qi;for(t in this.attributes){var n=this.attributes[t],o=this.buffers[n.buffer];e.push(o.data),i.push(n.size*Zi[n.type]/4),n.buffer=0}for(r.data=function(t,e){for(var i=0,r=0,n={},o=0;o<t.length;o++)r+=e[o],i+=t[o].length;var a=new ArrayBuffer(4*i),s=null,p=0;for(o=0;o<t.length;o++){var l=e[o],m=t[o],y=Jt(m);n[y]||(n[y]=new Ki[y](a)),s=n[y];for(var h=0;h<m.length;h++)s[(h/l|0)*r+p+h%l]=m[h];p+=l}return new Float32Array(a)}(e,i),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},t.prototype.getSize=function(){for(var t in this.attributes){var e=this.attributes[t];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},t.prototype.clone=function(){for(var e=new t,i=0;i<this.buffers.length;i++)e.buffers[i]=new qi(this.buffers[i].data.slice(0));for(var i in this.attributes){var r=this.attributes[i];e.attributes[i]=new Yi(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=ft.ELEMENT_ARRAY_BUFFER),e},t.merge=function(e){for(var i,r=new t,n=[],o=[],a=[],s=0;s<e.length;s++){i=e[s];for(var p=0;p<i.buffers.length;p++)o[p]=o[p]||0,o[p]+=i.buffers[p].data.length,a[p]=0}for(s=0;s<i.buffers.length;s++)n[s]=new(Ji[Jt(i.buffers[s].data)])(o[s]),r.buffers[s]=new qi(n[s]);for(s=0;s<e.length;s++)for(i=e[s],p=0;p<i.buffers.length;p++)n[p].set(i.buffers[p].data,a[p]),a[p]+=i.buffers[p].data.length;if(r.attributes=i.attributes,i.indexBuffer){r.indexBuffer=r.buffers[i.buffers.indexOf(i.indexBuffer)],r.indexBuffer.type=ft.ELEMENT_ARRAY_BUFFER;var l=0,m=0,y=0,h=0;for(s=0;s<i.buffers.length;s++)if(i.buffers[s]!==i.indexBuffer){h=s;break}for(var s in i.attributes){var u=i.attributes[s];(0|u.buffer)===h&&(m+=u.size*Zi[u.type]/4)}for(s=0;s<e.length;s++){var E=e[s].indexBuffer.data;for(p=0;p<E.length;p++)r.indexBuffer.data[p+y]+=l;l+=e[s].buffers[h].data.length/m,y+=E.length}}return r},t}(),tr=function(t){function e(){var e=t.call(this)||this;return e.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),e}return Ti(e,t),e}($i),er=function(t){function e(){var e=t.call(this)||this;return e.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),e.uvs=new Float32Array([0,0,1,0,1,1,0,1]),e.vertexBuffer=new qi(e.vertices),e.uvBuffer=new qi(e.uvs),e.addAttribute("aVertexPosition",e.vertexBuffer).addAttribute("aTextureCoord",e.uvBuffer).addIndex([0,1,2,0,2,3]),e}return Ti(e,t),e.prototype.map=function(t,e){var i=0,r=0;return this.uvs[0]=i,this.uvs[1]=r,this.uvs[2]=i+e.width/t.width,this.uvs[3]=r,this.uvs[4]=i+e.width/t.width,this.uvs[5]=r+e.height/t.height,this.uvs[6]=i,this.uvs[7]=r+e.height/t.height,i=e.x,r=e.y,this.vertices[0]=i,this.vertices[1]=r,this.vertices[2]=i+e.width,this.vertices[3]=r,this.vertices[4]=i+e.width,this.vertices[5]=r+e.height,this.vertices[6]=i,this.vertices[7]=r+e.height,this.invalidate(),this},e.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},e}($i),ir=0,rr=function(){function t(t,e,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=ir++,this.static=!!e,this.ubo=!!i,t instanceof qi?(this.buffer=t,this.buffer.type=ft.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new qi(new Float32Array(1)),this.buffer.type=ft.UNIFORM_BUFFER,this.autoManage=!0))}return t.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},t.prototype.add=function(e,i,r){if(this.ubo)throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");this.uniforms[e]=new t(i,r)},t.from=function(e,i,r){return new t(e,i,r)},t.uboFrom=function(e,i){return new t(e,null==i||i,!0)},t}(),nr=function(){function t(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=dt.NONE,this.sourceFrame=new ge,this.destinationFrame=new ge,this.bindingSourceFrame=new ge,this.bindingDestinationFrame=new ge,this.filters=[],this.transform=null}return t.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},t}(),or=[new _e,new _e,new _e,new _e],ar=new Ie,sr=function(){function t(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new Vi,this.texturePool.setScreenSize(t.view),this.statePool=[],this.quad=new tr,this.quadUv=new er,this.tempRect=new ge,this.activeState={},this.globalUniforms=new rr({outputFrame:new ge,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return t.prototype.push=function(t,e){for(var i,r,n=this.renderer,o=this.defaultFilterStack,a=this.statePool.pop()||new nr,s=this.renderer.renderTexture,p=e[0].resolution,l=e[0].multisample,m=e[0].padding,y=e[0].autoFit,h=null===(i=e[0].legacy)||void 0===i||i,u=1;u<e.length;u++){var E=e[u];p=Math.min(p,E.resolution),l=Math.min(l,E.multisample),m=this.useMaxPadding?Math.max(m,E.padding):m+E.padding,y=y&&E.autoFit,h=h||null===(r=E.legacy)||void 0===r||r}1===o.length&&(this.defaultFilterStack[0].renderTexture=s.current),o.push(a),a.resolution=p,a.multisample=l,a.legacy=h,a.target=t,a.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),a.sourceFrame.pad(m);var c=this.tempRect.copyFrom(s.sourceFrame);n.projection.transform&&this.transformAABB(ar.copyFrom(n.projection.transform).invert(),c),y?(a.sourceFrame.fit(c),(a.sourceFrame.width<=0||a.sourceFrame.height<=0)&&(a.sourceFrame.width=0,a.sourceFrame.height=0)):a.sourceFrame.intersects(c)||(a.sourceFrame.width=0,a.sourceFrame.height=0),this.roundFrame(a.sourceFrame,s.current?s.current.resolution:n.resolution,s.sourceFrame,s.destinationFrame,n.projection.transform),a.renderTexture=this.getOptimalFilterTexture(a.sourceFrame.width,a.sourceFrame.height,p,l),a.filters=e,a.destinationFrame.width=a.renderTexture.width,a.destinationFrame.height=a.renderTexture.height;var d=this.tempRect;d.x=0,d.y=0,d.width=a.sourceFrame.width,d.height=a.sourceFrame.height,a.renderTexture.filterFrame=a.sourceFrame,a.bindingSourceFrame.copyFrom(s.sourceFrame),a.bindingDestinationFrame.copyFrom(s.destinationFrame),a.transform=n.projection.transform,n.projection.transform=null,s.bind(a.renderTexture,a.sourceFrame,d),n.framebuffer.clear(0,0,0,0)},t.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),i=e.filters;this.activeState=e;var r=this.globalUniforms.uniforms;r.outputFrame=e.sourceFrame,r.resolution=e.resolution;var n=r.inputSize,o=r.inputPixel,a=r.inputClamp;if(n[0]=e.destinationFrame.width,n[1]=e.destinationFrame.height,n[2]=1/n[0],n[3]=1/n[1],o[0]=Math.round(n[0]*e.resolution),o[1]=Math.round(n[1]*e.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=e.sourceFrame.width*n[2]-.5*o[2],a[3]=e.sourceFrame.height*n[3]-.5*o[3],e.legacy){var s=r.filterArea;s[0]=e.destinationFrame.width,s[1]=e.destinationFrame.height,s[2]=e.sourceFrame.x,s[3]=e.sourceFrame.y,r.filterClamp=r.inputClamp}this.globalUniforms.update();var p=t[t.length-1];if(this.renderer.framebuffer.blit(),1===i.length)i[0].apply(this,e.renderTexture,p.renderTexture,yt.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var l=e.renderTexture,m=this.getOptimalFilterTexture(l.width,l.height,e.resolution);m.filterFrame=l.filterFrame;var y=0;for(y=0;y<i.length-1;++y){1===y&&e.multisample>1&&((m=this.getOptimalFilterTexture(l.width,l.height,e.resolution)).filterFrame=l.filterFrame),i[y].apply(this,l,m,yt.CLEAR,e);var h=l;l=m,m=h}i[y].apply(this,l,p.renderTexture,yt.BLEND,e),y>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(l),this.returnFilterTexture(m)}e.clear(),this.statePool.push(e)},t.prototype.bindAndClear=function(t,e){void 0===e&&(e=yt.CLEAR);var i=this.renderer,r=i.renderTexture,n=i.state;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame){var o=this.tempRect;o.x=0,o.y=0,o.width=t.filterFrame.width,o.height=t.filterFrame.height,r.bind(t,t.filterFrame,o)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?r.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var a=1&n.stateId||this.forceClear;(e===yt.CLEAR||e===yt.BLIT&&a)&&this.renderer.framebuffer.clear(0,0,0,0)},t.prototype.applyFilter=function(t,e,i,r){var n=this.renderer;n.state.set(t.state),this.bindAndClear(i,r),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,n.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),n.geometry.bind(this.quadUv),n.geometry.draw(it.TRIANGLES)):(n.geometry.bind(this.quad),n.geometry.draw(it.TRIANGLE_STRIP))},t.prototype.calculateSpriteMatrix=function(t,e){var i=this.activeState,r=i.sourceFrame,n=i.destinationFrame,o=e._texture.orig,a=t.set(n.width,0,0,n.height,r.x,r.y),s=e.worldTransform.copyTo(Ie.TEMP_MATRIX);return s.invert(),a.prepend(s),a.scale(1/o.width,1/o.height),a.translate(e.anchor.x,e.anchor.y),a},t.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},t.prototype.getOptimalFilterTexture=function(t,e,i,r){return void 0===i&&(i=1),void 0===r&&(r=dt.NONE),this.texturePool.getOptimalTexture(t,e,i,r)},t.prototype.getFilterTexture=function(t,e,i){if("number"==typeof t){var r=t;t=e,e=r}t=t||this.activeState.renderTexture;var n=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,i||dt.NONE);return n.filterFrame=t.filterFrame,n},t.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},t.prototype.emptyPool=function(){this.texturePool.clear(!0)},t.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},t.prototype.transformAABB=function(t,e){var i=or[0],r=or[1],n=or[2],o=or[3];i.set(e.left,e.top),r.set(e.left,e.bottom),n.set(e.right,e.top),o.set(e.right,e.bottom),t.apply(i,i),t.apply(r,r),t.apply(n,n),t.apply(o,o);var a=Math.min(i.x,r.x,n.x,o.x),s=Math.min(i.y,r.y,n.y,o.y),p=Math.max(i.x,r.x,n.x,o.x),l=Math.max(i.y,r.y,n.y,o.y);e.x=a,e.y=s,e.width=p-a,e.height=l-s},t.prototype.roundFrame=function(t,e,i,r,n){if(!(t.width<=0||t.height<=0||i.width<=0||i.height<=0)){if(n){var o=n.a,a=n.b,s=n.c,p=n.d;if((Math.abs(a)>1e-4||Math.abs(s)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(p)>1e-4))return}(n=n?ar.copyFrom(n):ar.identity()).translate(-i.x,-i.y).scale(r.width/i.width,r.height/i.height).translate(r.x,r.y),this.transformAABB(n,t),t.ceil(e),this.transformAABB(n.invert(),t)}},t}(),pr=function(){function t(t){this.renderer=t}return t.prototype.flush=function(){},t.prototype.destroy=function(){this.renderer=null},t.prototype.start=function(){},t.prototype.stop=function(){this.flush()},t.prototype.render=function(t){},t}(),lr=function(){function t(t){this.renderer=t,this.emptyRenderer=new pr(t),this.currentRenderer=this.emptyRenderer}return t.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},t.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.copyBoundTextures=function(t,e){for(var i=this.renderer.texture.boundTextures,r=e-1;r>=0;--r)t[r]=i[r]||null,t[r]&&(t[r]._batchLocation=r)},t.prototype.boundArray=function(t,e,i,r){for(var n=t.elements,o=t.ids,a=t.count,s=0,p=0;p<a;p++){var l=n[p],m=l._batchLocation;if(m>=0&&m<r&&e[m]===l)o[p]=m;else for(;s<r;){var y=e[s];if(!y||y._batchEnabled!==i||y._batchLocation!==s){o[p]=s,l._batchLocation=s,e[s]=l;break}s++}}},t.prototype.destroy=function(){this.renderer=null},t}(),mr=0,yr=function(){function t(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),t.view.addEventListener("webglcontextlost",this.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(t.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),t.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=mr++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},t.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=mr++,this.renderer.runners.contextChange.emit(t)},t.prototype.initFromOptions=function(t){var e=this.createContext(this.renderer.view,t);this.initFromContext(e)},t.prototype.createContext=function(t,e){var i;if(Dt.PREFER_ENV>=J.WEBGL2&&(i=t.getContext("webgl2",e)),i)this.webGLVersion=2;else if(this.webGLVersion=1,!(i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl},t.prototype.getExtensions=function(){var t=this.gl,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},t.prototype.handleContextLost=function(t){t.preventDefault()},t.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},t.prototype.destroy=function(){var t=this.renderer.view;this.renderer=null,t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},t.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},t.prototype.validateContext=function(t){var e=t.getContextAttributes(),i="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;i&&(this.webGLVersion=2),e&&!e.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var r=i||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=r,r||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},t}(),hr=function(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=dt.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0},ur=new ge,Er=function(){function t(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new Ui(10,10),this.msaaSamples=null}return t.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new ge,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion){var e=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;Dt.PREFER_ENV===J.WEBGL_LEGACY&&(e=null,i=null),e?t.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,t.drawBuffers=function(){}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)},t.prototype.bind=function(t,e,i){void 0===i&&(i=0);var r=this.gl;if(t){var n=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,r.bindFramebuffer(r.FRAMEBUFFER,n.framebuffer)),n.mipLevel!==i&&(t.dirtyId++,t.dirtyFormat++,n.mipLevel=i),n.dirtyId!==t.dirtyId&&(n.dirtyId=t.dirtyId,n.dirtyFormat!==t.dirtyFormat?(n.dirtyFormat=t.dirtyFormat,n.dirtySize=t.dirtySize,this.updateFramebuffer(t,i)):n.dirtySize!==t.dirtySize&&(n.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var o=0;o<t.colorTextures.length;o++){var a=t.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){var s=e.width>>i,p=e.height>>i,l=s/e.width;this.setViewport(e.x*l,e.y*l,s,p)}else s=t.width>>i,p=t.height>>i,this.setViewport(0,0,s,p)}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},t.prototype.setViewport=function(t,e,i,r){var n=this.viewport;t=Math.round(t),e=Math.round(e),i=Math.round(i),r=Math.round(r),n.width===i&&n.height===r&&n.x===t&&n.y===e||(n.x=t,n.y=e,n.width=i,n.height=r,this.gl.viewport(t,e,i,r))},Object.defineProperty(t.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),t.prototype.clear=function(t,e,i,r,n){void 0===n&&(n=tt.COLOR|tt.DEPTH);var o=this.gl;o.clearColor(t,e,i,r),o.clear(n)},t.prototype.initFramebuffer=function(t){var e=this.gl,i=new hr(e.createFramebuffer());return i.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(t),t.disposeRunner.add(this),i},t.prototype.resizeFramebuffer=function(t){var e=this.gl,i=t.glFramebuffers[this.CONTEXT_UID];i.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,i.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,e.RGBA8,t.width,t.height)),i.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,i.stencil),i.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,e.DEPTH24_STENCIL8,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));var r=t.colorTextures,n=r.length;e.drawBuffers||(n=Math.min(n,1));for(var o=0;o<n;o++){var a=r[o],s=a.parentTextureArray||a;this.renderer.texture.bind(s,0)}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)},t.prototype.updateFramebuffer=function(t,e){var i=this.gl,r=t.glFramebuffers[this.CONTEXT_UID],n=t.colorTextures,o=n.length;i.drawBuffers||(o=Math.min(o,1)),r.multisample>1&&this.canMultisampleFramebuffer(t)?(r.msaaBuffer=r.msaaBuffer||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,r.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,r.multisample,i.RGBA8,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,r.msaaBuffer)):r.msaaBuffer&&(i.deleteRenderbuffer(r.msaaBuffer),r.msaaBuffer=null,r.blitFramebuffer&&(r.blitFramebuffer.dispose(),r.blitFramebuffer=null));for(var a=[],s=0;s<o;s++){var p=n[s],l=p.parentTextureArray||p;this.renderer.texture.bind(l,0),0===s&&r.msaaBuffer||(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+s,p.target,l._glTextures[this.CONTEXT_UID].texture,e),a.push(i.COLOR_ATTACHMENT0+s))}if(a.length>1&&i.drawBuffers(a),t.depthTexture&&this.writeDepthTexture){var m=t.depthTexture;this.renderer.texture.bind(m,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,m._glTextures[this.CONTEXT_UID].texture,e)}!t.stencil&&!t.depth||t.depthTexture&&this.writeDepthTexture?r.stencil&&(i.deleteRenderbuffer(r.stencil),r.stencil=null):(r.stencil=r.stencil||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,r.stencil),r.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,r.multisample,i.DEPTH24_STENCIL8,t.width,t.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,r.stencil))},t.prototype.canMultisampleFramebuffer=function(t){return 1!==this.renderer.context.webGLVersion&&t.colorTextures.length<=1&&!t.depthTexture},t.prototype.detectSamples=function(t){var e=this.msaaSamples,i=dt.NONE;if(t<=1||null===e)return i;for(var r=0;r<e.length;r++)if(e[r]<=t){i=e[r];break}return 1===i&&(i=dt.NONE),i},t.prototype.blit=function(t,e,i){var r=this,n=r.current,o=r.renderer,a=r.gl,s=r.CONTEXT_UID;if(2===o.context.webGLVersion&&n){var p=n.glFramebuffers[s];if(p){if(!t){if(!p.msaaBuffer)return;var l=n.colorTextures[0];if(!l)return;p.blitFramebuffer||(p.blitFramebuffer=new Ui(n.width,n.height),p.blitFramebuffer.addColorTexture(0,l)),(t=p.blitFramebuffer).colorTextures[0]!==l&&(t.colorTextures[0]=l,t.dirtyId++,t.dirtyFormat++),t.width===n.width&&t.height===n.height||(t.width=n.width,t.height=n.height,t.dirtyId++,t.dirtySize++)}e||((e=ur).width=n.width,e.height=n.height),i||(i=e);var m=e.width===i.width&&e.height===i.height;this.bind(t),a.bindFramebuffer(a.READ_FRAMEBUFFER,p.framebuffer),a.blitFramebuffer(e.left,e.top,e.right,e.bottom,i.left,i.top,i.right,i.bottom,a.COLOR_BUFFER_BIT,m?a.NEAREST:a.LINEAR)}}},t.prototype.disposeFramebuffer=function(t,e){var i=t.glFramebuffers[this.CONTEXT_UID],r=this.gl;if(i){delete t.glFramebuffers[this.CONTEXT_UID];var n=this.managedFramebuffers.indexOf(t);n>=0&&this.managedFramebuffers.splice(n,1),t.disposeRunner.remove(this),e||(r.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&r.deleteRenderbuffer(i.msaaBuffer),i.stencil&&r.deleteRenderbuffer(i.stencil)),i.blitFramebuffer&&i.blitFramebuffer.dispose()}},t.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var i=0;i<e.length;i++)this.disposeFramebuffer(e[i],t)},t.prototype.forceStencil=function(){var t=this.current;if(t){var e=t.glFramebuffers[this.CONTEXT_UID];if(e&&!e.stencil){t.stencil=!0;var i=t.width,r=t.height,n=this.gl,o=n.createRenderbuffer();n.bindRenderbuffer(n.RENDERBUFFER,o),e.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,e.multisample,n.DEPTH24_STENCIL8,i,r):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,i,r),e.stencil=o,n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,o)}}},t.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new ge},t.prototype.destroy=function(){this.renderer=null},t}(),cr={5126:4,5123:2,5121:1},dr=function(){function t(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return t.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==e.webGLVersion){var i=this.renderer.context.extensions.vertexArrayObject;Dt.PREFER_ENV===J.WEBGL_LEGACY&&(i=null),i?(t.createVertexArray=function(){return i.createVertexArrayOES()},t.bindVertexArray=function(t){return i.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return i.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})}if(2!==e.webGLVersion){var r=t.getExtension("ANGLE_instanced_arrays");r?(t.vertexAttribDivisor=function(t,e){return r.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,i,n,o){return r.drawElementsInstancedANGLE(t,e,i,n,o)},t.drawArraysInstanced=function(t,e,i,n){return r.drawArraysInstancedANGLE(t,e,i,n)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===e.webGLVersion||!!e.extensions.uint32ElementIndex},t.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var i=this.gl,r=t.glVertexArrayObjects[this.CONTEXT_UID],n=!1;r||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=r={},n=!0);var o=r[e.program.id]||this.initGeometryVao(t,e,n);this._activeGeometry=t,this._activeVao!==o&&(this._activeVao=o,this.hasVao?i.bindVertexArray(o):this.activateVao(t,e.program)),this.updateBuffers()},t.prototype.reset=function(){this.unbind()},t.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.renderer.buffer,i=0;i<t.buffers.length;i++){var r=t.buffers[i];e.update(r)}},t.prototype.checkCompatibility=function(t,e){var i=t.attributes,r=e.attributeData;for(var n in r)if(!i[n])throw new Error('shader and geometry incompatible, geometry missing the "'+n+'" attribute')},t.prototype.getSignature=function(t,e){var i=t.attributes,r=e.attributeData,n=["g",t.id];for(var o in i)r[o]&&n.push(o,r[o].location);return n.join("-")},t.prototype.initGeometryVao=function(t,e,i){void 0===i&&(i=!0);var r=this.gl,n=this.CONTEXT_UID,o=this.renderer.buffer,a=e.program;a.glPrograms[n]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,a);var s=this.getSignature(t,a),p=t.glVertexArrayObjects[this.CONTEXT_UID],l=p[s];if(l)return p[a.id]=l,l;var m=t.buffers,y=t.attributes,h={},u={};for(var E in m)h[E]=0,u[E]=0;for(var E in y)!y[E].size&&a.attributeData[E]?y[E].size=a.attributeData[E].size:y[E].size||console.warn("PIXI Geometry attribute '"+E+"' size cannot be determined (likely the bound shader does not have the attribute)"),h[y[E].buffer]+=y[E].size*cr[y[E].type];for(var E in y){var c=y[E],d=c.size;void 0===c.stride&&(h[c.buffer]===d*cr[c.type]?c.stride=0:c.stride=h[c.buffer]),void 0===c.start&&(c.start=u[c.buffer],u[c.buffer]+=d*cr[c.type])}l=r.createVertexArray(),r.bindVertexArray(l);for(var f=0;f<m.length;f++){var _=m[f];o.bind(_),i&&_._glBuffers[n].refCount++}return this.activateVao(t,a),this._activeVao=l,p[a.id]=l,p[s]=l,l},t.prototype.disposeGeometry=function(t,e){var i;if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var r=t.glVertexArrayObjects[this.CONTEXT_UID],n=this.gl,o=t.buffers,a=null===(i=this.renderer)||void 0===i?void 0:i.buffer;if(t.disposeRunner.remove(this),r){if(a)for(var s=0;s<o.length;s++){var p=o[s]._glBuffers[this.CONTEXT_UID];p&&(p.refCount--,0!==p.refCount||e||a.dispose(o[s],e))}if(!e)for(var l in r)if("g"===l[0]){var m=r[l];this._activeVao===m&&this.unbind(),n.deleteVertexArray(m)}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},t.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),i=0;i<e.length;i++)this.disposeGeometry(this.managedGeometries[e[i]],t)},t.prototype.activateVao=function(t,e){var i=this.gl,r=this.CONTEXT_UID,n=this.renderer.buffer,o=t.buffers,a=t.attributes;t.indexBuffer&&n.bind(t.indexBuffer);var s=null;for(var p in a){var l=a[p],m=o[l.buffer],y=m._glBuffers[r];if(e.attributeData[p]){s!==y&&(n.bind(m),s=y);var h=e.attributeData[p].location;if(i.enableVertexAttribArray(h),i.vertexAttribPointer(h,l.size,l.type||i.FLOAT,l.normalized,l.stride,l.start),l.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");i.vertexAttribDivisor(h,1)}}}},t.prototype.draw=function(t,e,i,r){var n=this.gl,o=this._activeGeometry;if(o.indexBuffer){var a=o.indexBuffer.data.BYTES_PER_ELEMENT,s=2===a?n.UNSIGNED_SHORT:n.UNSIGNED_INT;2===a||4===a&&this.canUseUInt32ElementIndex?o.instanced?n.drawElementsInstanced(t,e||o.indexBuffer.data.length,s,(i||0)*a,r||1):n.drawElements(t,e||o.indexBuffer.data.length,s,(i||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?n.drawArraysInstanced(t,i,e||o.getSize(),r||1):n.drawArrays(t,i,e||o.getSize());return this},t.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},t.prototype.destroy=function(){this.renderer=null},t}(),fr=function(){function t(t){void 0===t&&(t=null),this.type=Et.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Dt.FILTER_MULTISAMPLE,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}return Object.defineProperty(t.prototype,"filter",{get:function(){return this._filters?this._filters[0]:null},set:function(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=Et.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},t.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},t}();function _r(t,e,i){var r=t.createShader(e);return t.shaderSource(r,i),t.compileShader(r),r}function vr(t,e){var i=t.getShaderSource(e).split("\n").map((function(t,e){return e+": "+t})),r=t.getShaderInfoLog(e),n=r.split("\n"),o={},a=n.map((function(t){return parseFloat(t.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))})).filter((function(t){return!(!t||o[t]||(o[t]=!0,0))})),s=[""];a.forEach((function(t){i[t-1]="%c"+i[t-1]+"%c",s.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")}));var p=i.join("\n");s[0]=p,console.error(r),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,s),console.groupEnd()}function gr(t){for(var e=new Array(t),i=0;i<e.length;i++)e[i]=!1;return e}function Tr(t,e){switch(t){case"float":case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return gr(2*e);case"bvec3":return gr(3*e);case"bvec4":return gr(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var br,xr={},Sr=xr;function Rr(t,e,i){if("precision"!==t.substring(0,9)){var r=e;return e===ut.HIGH&&i!==ut.HIGH&&(r=ut.MEDIUM),"precision "+r+" float;\n"+t}return i!==ut.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t}var Ir={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function Ar(t){return Ir[t]}var Mr=null,Cr={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Fr(t,e){if(!Mr){var i=Object.keys(Cr);Mr={};for(var r=0;r<i.length;++r){var n=i[r];Mr[t[n]]=Cr[n]}}return Mr[e]}var Nr,Or=[{test:function(t){return"float"===t.type&&1===t.size&&!t.isArray},code:function(t){return'\n            if(uv["'+t+'"] !== ud["'+t+'"].value)\n            {\n                ud["'+t+'"].value = uv["'+t+'"]\n                gl.uniform1f(ud["'+t+'"].location, uv["'+t+'"])\n            }\n            '}},{test:function(t,e){return!("sampler2D"!==t.type&&"samplerCube"!==t.type&&"sampler2DArray"!==t.type||1!==t.size||t.isArray||null!=e&&void 0===e.castToBaseTexture)},code:function(t){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+t+'"], t);\n\n            if(ud["'+t+'"].value !== t)\n            {\n                ud["'+t+'"].value = t;\n                gl.uniform1i(ud["'+t+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(t,e){return"mat3"===t.type&&1===t.size&&!t.isArray&&void 0!==e.a},code:function(t){return'\n            gl.uniformMatrix3fv(ud["'+t+'"].location, false, uv["'+t+'"].toArray(true));\n            '},codeUbo:function(t){return"\n                var "+t+"_matrix = uv."+t+".toArray(true);\n\n                data[offset] = "+t+"_matrix[0];\n                data[offset+1] = "+t+"_matrix[1];\n                data[offset+2] = "+t+"_matrix[2];\n        \n                data[offset + 4] = "+t+"_matrix[3];\n                data[offset + 5] = "+t+"_matrix[4];\n                data[offset + 6] = "+t+"_matrix[5];\n        \n                data[offset + 8] = "+t+"_matrix[6];\n                data[offset + 9] = "+t+"_matrix[7];\n                data[offset + 10] = "+t+"_matrix[8];\n            "}},{test:function(t,e){return"vec2"===t.type&&1===t.size&&!t.isArray&&void 0!==e.x},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+t+'"].location, v.x, v.y);\n                }'},codeUbo:function(t){return"\n                v = uv."+t+";\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            "}},{test:function(t){return"vec2"===t.type&&1===t.size&&!t.isArray},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+t+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(t,e){return"vec4"===t.type&&1===t.size&&!t.isArray&&void 0!==e.width},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+t+'"].location, v.x, v.y, v.width, v.height)\n                }'},codeUbo:function(t){return"\n                    v = uv."+t+";\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                "}},{test:function(t){return"vec4"===t.type&&1===t.size&&!t.isArray},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+t+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],wr={float:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",vec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }",int:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",ivec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",ivec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",ivec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",uint:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",uvec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",uvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",uvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",bool:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",bvec2:"\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",bvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",bvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",samplerCube:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",sampler2DArray:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }"},Pr={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"},Gr=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function Dr(t){for(var e="",i=0;i<t;++i)i>0&&(e+="\nelse "),i<t-1&&(e+="if(test == "+i+".0){}");return e}var Lr=0,Ur={},Br=function(){function t(e,i,r){void 0===r&&(r="pixi-shader"),this.id=Lr++,this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=i||t.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(r=r.replace(/\s+/g,"-"),Ur[r]?(Ur[r]++,r+="-"+Ur[r]):Ur[r]=1,this.vertexSrc="#define SHADER_NAME "+r+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+r+"\n"+this.fragmentSrc,this.vertexSrc=Rr(this.vertexSrc,Dt.PRECISION_VERTEX,ut.HIGH),this.fragmentSrc=Rr(this.fragmentSrc,Dt.PRECISION_FRAGMENT,function(){if(!br){br=ut.MEDIUM;var t=function(){if(Sr===xr||Sr&&Sr.isContextLost()){var t=Dt.ADAPTER.createCanvas(),e=void 0;Dt.PREFER_ENV>=J.WEBGL2&&(e=t.getContext("webgl2",{})),e||((e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}))?e.getExtension("WEBGL_draw_buffers"):e=null),Sr=e}return Sr}();if(t&&t.getShaderPrecisionFormat){var e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);br=e.precision?ut.HIGH:ut.MEDIUM}}return br}())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(t,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),t.from=function(e,i,r){var n=e+i,o=le[n];return o||(le[n]=o=new t(e,i,r)),o},t}(),kr=function(){function t(t,e){this.uniformBindCount=0,this.program=t,this.uniformGroup=e?e instanceof rr?e:new rr(e):new rr({})}return t.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var i in e.uniforms){var r=e.uniforms[i];if(r.group&&this.checkUniformExists(t,r))return!0}return!1},t.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(t.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),t.from=function(e,i,r){return new t(Br.from(e,i),r)},t}(),Hr=function(){function t(){this.data=0,this.blendMode=et.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(t.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(t){!!(1&this.data)!==t&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(t){!!(2&this.data)!==t&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(t){!!(4&this.data)!==t&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(t){!!(8&this.data)!==t&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthMask",{get:function(){return!!(32&this.data)},set:function(t){!!(32&this.data)!==t&&(this.data^=32)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(t){!!(16&this.data)!==t&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==et.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return"[@pixi/core:State blendMode="+this.blendMode+" clockwiseFrontFace="+this.clockwiseFrontFace+" culling="+this.culling+" depthMask="+this.depthMask+" polygonOffset="+this.polygonOffset+"]"},t.for2d=function(){var e=new t;return e.depthTest=!1,e.blend=!0,e},t}(),Xr=function(t){function e(i,r,n){var o=this,a=Br.from(i||e.defaultVertexSrc,r||e.defaultFragmentSrc);return(o=t.call(this,a,n)||this).padding=0,o.resolution=Dt.FILTER_RESOLUTION,o.multisample=Dt.FILTER_MULTISAMPLE,o.enabled=!0,o.autoFit=!0,o.state=new Hr,o}return Ti(e,t),e.prototype.apply=function(t,e,i,r,n){t.applyFilter(this,e,i,r)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._resolution=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),e}(kr),jr=new Ie,Wr=function(){function t(t,e){this._texture=t,this.mapCoord=new Ie,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1}return Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),t.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var i=this.mapCoord,r=0;r<t.length;r+=2){var n=t[r],o=t[r+1];e[r]=n*i.a+o*i.c+i.tx,e[r+1]=n*i.b+o*i.d+i.ty}return e},t.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var r=e.orig,n=e.trim;n&&(jr.set(r.width/n.width,0,0,r.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(jr));var o=e.baseTexture,a=this.uClampFrame,s=this.clampMargin/o.resolution,p=this.clampOffset;return a[0]=(e._frame.x+s+p)/o.width,a[1]=(e._frame.y+s+p)/o.height,a[2]=(e._frame.x+e._frame.width-s+p)/o.width,a[3]=(e._frame.y+e._frame.height-s+p)/o.height,this.uClampOffset[0]=p/o.realWidth,this.uClampOffset[1]=p/o.realHeight,this.isSimple=e._frame.width===o.width&&e._frame.height===o.height&&0===e.rotate,!0},t}(),Vr=function(t){function e(e,i,r){var n=this,o=null;return"string"!=typeof e&&void 0===i&&void 0===r&&(o=e,e=void 0,i=void 0,r=void 0),(n=t.call(this,e||"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",i||"varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",r)||this).maskSprite=o,n.maskMatrix=new Ie,n}return Ti(e,t),Object.defineProperty(e.prototype,"maskSprite",{get:function(){return this._maskSprite},set:function(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),e.prototype.apply=function(t,e,i,r){var n=this._maskSprite,o=n._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new Wr(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,t.applyFilter(this,e,i,r))},e}(Xr),Yr=function(){function t(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return t.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},t.prototype.push=function(t,e){var i=e;if(!i.isMaskData){var r=this.maskDataPool.pop()||new fr;r.pooled=!0,r.maskObject=e,i=r}var n=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null;if(i.copyCountersOrReset(n),i._colorMask=n?n._colorMask:15,i.autoDetect&&this.detect(i),i._target=t,i.type!==Et.SPRITE&&this.maskStack.push(i),i.enabled)switch(i.type){case Et.SCISSOR:this.renderer.scissor.push(i);break;case Et.STENCIL:this.renderer.stencil.push(i);break;case Et.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i);break;case Et.COLOR:this.pushColorMask(i)}i.type===Et.SPRITE&&this.maskStack.push(i)},t.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){if(e.enabled)switch(e.type){case Et.SCISSOR:this.renderer.scissor.pop(e);break;case Et.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case Et.SPRITE:this.popSpriteMask(e);break;case Et.COLOR:this.popColorMask(e)}if(e.reset(),e.pooled&&this.maskDataPool.push(e),0!==this.maskStack.length){var i=this.maskStack[this.maskStack.length-1];i.type===Et.SPRITE&&i._filters&&(i._filters[0].maskSprite=i.maskObject)}}},t.prototype.detect=function(t){var e=t.maskObject;e?e.isSprite?t.type=Et.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=Et.SCISSOR:t.type=Et.STENCIL:t.type=Et.COLOR},t.prototype.pushSpriteMask=function(t){var e,i,r=t.maskObject,n=t._target,o=t._filters;o||(o=this.alphaMaskPool[this.alphaMaskIndex])||(o=this.alphaMaskPool[this.alphaMaskIndex]=[new Vr]);var a,s,p=this.renderer,l=p.renderTexture;if(l.current){var m=l.current;a=t.resolution||m.resolution,s=null!==(e=t.multisample)&&void 0!==e?e:m.multisample}else a=t.resolution||p.resolution,s=null!==(i=t.multisample)&&void 0!==i?i:p.multisample;o[0].resolution=a,o[0].multisample=s,o[0].maskSprite=r;var y=n.filterArea;n.filterArea=r.getBounds(!0),p.filter.push(n,o),n.filterArea=y,t._filters||this.alphaMaskIndex++},t.prototype.popSpriteMask=function(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},t.prototype.pushColorMask=function(t){var e=t._colorMask,i=t._colorMask=e&t.colorMask;i!==e&&this.renderer.gl.colorMask(0!=(1&i),0!=(2&i),0!=(4&i),0!=(8&i))},t.prototype.popColorMask=function(t){var e=t._colorMask,i=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;i!==e&&this.renderer.gl.colorMask(0!=(1&i),0!=(2&i),0!=(4&i),0!=(8&i))},t.prototype.destroy=function(){this.renderer=null},t}(),zr=function(){function t(t){this.renderer=t,this.maskStack=[],this.glConst=0}return t.prototype.getStackLength=function(){return this.maskStack.length},t.prototype.setMaskStack=function(t){var e=this.renderer.gl,i=this.getStackLength();this.maskStack=t;var r=this.getStackLength();r!==i&&(0===r?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},t.prototype._useCurrent=function(){},t.prototype.destroy=function(){this.renderer=null,this.maskStack=null},t}(),qr=new Ie,Kr=[],Zr=function(t){function e(e){var i=t.call(this,e)||this;return i.glConst=Dt.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST,i}return Ti(e,t),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},e.prototype.calcScissorRect=function(t){var e;if(!t._scissorRectLocal){var i=t._scissorRect,r=t.maskObject,n=this.renderer,o=n.renderTexture,a=r.getBounds(!0,null!==(e=Kr.pop())&&void 0!==e?e:new ge);this.roundFrameToPixels(a,o.current?o.current.resolution:n.resolution,o.sourceFrame,o.destinationFrame,n.projection.transform),i&&a.fit(i),t._scissorRectLocal=a}},e.isMatrixRotated=function(t){if(!t)return!1;var e=t.a,i=t.b,r=t.c,n=t.d;return(Math.abs(i)>1e-4||Math.abs(r)>1e-4)&&(Math.abs(e)>1e-4||Math.abs(n)>1e-4)},e.prototype.testScissor=function(t){var i=t.maskObject;if(!i.isFastRect||!i.isFastRect())return!1;if(e.isMatrixRotated(i.worldTransform))return!1;if(e.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);var r=t._scissorRectLocal;return r.width>0&&r.height>0},e.prototype.roundFrameToPixels=function(t,i,r,n,o){e.isMatrixRotated(o)||((o=o?qr.copyFrom(o):qr.identity()).translate(-r.x,-r.y).scale(n.width/r.width,n.height/r.height).translate(n.x,n.y),this.renderer.filter.transformAABB(o,t),t.fit(n),t.x=Math.round(t.x*i),t.y=Math.round(t.y*i),t.width=Math.round(t.width*i),t.height=Math.round(t.height*i))},e.prototype.push=function(t){t._scissorRectLocal||this.calcScissorRect(t);var e=this.renderer.gl;t._scissorRect||e.enable(e.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()},e.prototype.pop=function(t){var e=this.renderer.gl;t&&Kr.push(t._scissorRectLocal),this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)},e.prototype._useCurrent=function(){var t,e=this.maskStack[this.maskStack.length-1]._scissorRect;t=this.renderer.renderTexture.current?e.y:this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,t,e.width,e.height)},e}(zr),Qr=function(t){function e(e){var i=t.call(this,e)||this;return i.glConst=Dt.ADAPTER.getWebGLRenderingContext().STENCIL_TEST,i}return Ti(e,t),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},e.prototype.push=function(t){var e=t.maskObject,i=this.renderer.gl,r=t._stencilCounter;0===r&&(this.renderer.framebuffer.forceStencil(),i.clearStencil(0),i.clear(i.STENCIL_BUFFER_BIT),i.enable(i.STENCIL_TEST)),t._stencilCounter++;var n=t._colorMask;0!==n&&(t._colorMask=0,i.colorMask(!1,!1,!1,!1)),i.stencilFunc(i.EQUAL,r,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,0!==n&&(t._colorMask=n,i.colorMask(0!=(1&n),0!=(2&n),0!=(4&n),0!=(8&n))),this._useCurrent()},e.prototype.pop=function(t){var e=this.renderer.gl;if(0===this.getStackLength())e.disable(e.STENCIL_TEST);else{var i=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null,r=i?i._colorMask:15;0!==r&&(i._colorMask=0,e.colorMask(!1,!1,!1,!1)),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,0!==r&&(i._colorMask=r,e.colorMask(0!=(1&r),0!=(2&r),0!=(4&r),0!=(8&r))),this._useCurrent()}},e.prototype._useCurrent=function(){var t=this.renderer.gl;t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},e}(zr),Jr=function(){function t(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Ie,this.transform=null}return t.prototype.update=function(t,e,i,r){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,r),this.transform&&this.projectionMatrix.append(this.transform);var n=this.renderer;n.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,n.globalUniforms.update(),n.shader.shader&&n.shader.syncUniformGroup(n.shader.shader.uniforms.globals)},t.prototype.calculateProjection=function(t,e,i,r){var n=this.projectionMatrix,o=r?-1:1;n.identity(),n.a=1/e.width*2,n.d=o*(1/e.height*2),n.tx=-1-e.x*n.a,n.ty=-o-e.y*n.d},t.prototype.setTransform=function(t){},t.prototype.destroy=function(){this.renderer=null},t}(),$r=new ge,tn=new ge,en=function(){function t(t){this.renderer=t,this.clearColor=t._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new ge,this.destinationFrame=new ge,this.viewportFrame=new ge}return t.prototype.bind=function(t,e,i){void 0===t&&(t=null);var r,n,o,a=this.renderer;this.current=t,t?(o=(r=t.baseTexture).resolution,e||($r.width=t.frame.width,$r.height=t.frame.height,e=$r),i||(tn.x=t.frame.x,tn.y=t.frame.y,tn.width=e.width,tn.height=e.height,i=tn),n=r.framebuffer):(o=a.resolution,e||($r.width=a.screen.width,$r.height=a.screen.height,e=$r),i||((i=$r).width=e.width,i.height=e.height));var s=this.viewportFrame;s.x=i.x*o,s.y=i.y*o,s.width=i.width*o,s.height=i.height*o,t||(s.y=a.view.height-(s.y+s.height)),s.ceil(),this.renderer.framebuffer.bind(n,s),this.renderer.projection.update(i,e,o,!n),t?this.renderer.mask.setMaskStack(r.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(i)},t.prototype.clear=function(t,e){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor;var i=this.destinationFrame,r=this.current?this.current.baseTexture:this.renderer.screen,n=i.width!==r.width||i.height!==r.height;if(n){var o=this.viewportFrame,a=o.x,s=o.y,p=o.width,l=o.height;a=Math.round(a),s=Math.round(s),p=Math.round(p),l=Math.round(l),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(a,s,p,l)}this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),n&&this.renderer.scissor.pop()},t.prototype.resize=function(){this.bind(null)},t.prototype.reset=function(){this.bind(null)},t.prototype.destroy=function(){this.renderer=null},t}();function rn(t,e,i,r,n){i.buffer.update(n)}var nn={float:"\n        data[offset] = v;\n    ",vec2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",vec3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",vec4:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",mat2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",mat3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",mat4:"\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    "},on={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};var an=function(){function t(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return t.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},t}();var sn=0,pn={textureCount:0,uboCount:0},ln=function(){function t(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=sn++}return t.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof Nr)return Nr;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");Nr=!0===t({a:"b"},"a","b")}catch(t){Nr=!1}return Nr}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},t.prototype.contextChange=function(t){this.gl=t,this.reset()},t.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var i=t.program,r=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==i&&(this.program=i,this.gl.useProgram(r.program)),e||(pn.textureCount=0,pn.uboCount=0,this.syncUniformGroup(t.uniformGroup,pn)),r},t.prototype.setUniforms=function(t){var e=this.shader.program,i=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(i.uniformData,t,this.renderer)},t.prototype.syncUniformGroup=function(t,e){var i=this.getGlProgram();t.static&&t.dirtyId===i.uniformDirtyGroups[t.id]||(i.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,i,e))},t.prototype.syncUniforms=function(t,e,i){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,i)},t.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=function(t,e){var i,r=["\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    "];for(var n in t.uniforms){var o=e[n];if(o){for(var a=t.uniforms[n],s=!1,p=0;p<Or.length;p++)if(Or[p].test(o,a)){r.push(Or[p].code(n,a)),s=!0;break}if(!s){var l=(1!==o.size||o.isArray?Pr:wr)[o.type].replace("location",'ud["'+n+'"].location');r.push('\n            cu = ud["'+n+'"];\n            cv = cu.value;\n            v = uv["'+n+'"];\n            '+l+";")}}else(null===(i=t.uniforms[n])||void 0===i?void 0:i.group)&&(t.uniforms[n].ubo?r.push("\n                        renderer.shader.syncUniformBufferGroup(uv."+n+", '"+n+"');\n                    "):r.push("\n                        renderer.shader.syncUniformGroup(uv."+n+", syncData);\n                    "))}return new Function("ud","uv","renderer","syncData",r.join("\n"))}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},t.prototype.syncUniformBufferGroup=function(t,e){var i=this.getGlProgram();if(!t.static||0!==t.dirtyId||!i.uniformGroups[t.id]){t.dirtyId=0;var r=i.uniformGroups[t.id]||this.createSyncBufferGroup(t,i,e);t.buffer.update(),r(i.uniformData,t.uniforms,this.renderer,pn,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,i.uniformBufferBindings[e])},t.prototype.createSyncBufferGroup=function(t,e,i){var r=this.renderer.gl;this.renderer.buffer.bind(t.buffer);var n=this.gl.getUniformBlockIndex(e.program,i);e.uniformBufferBindings[i]=this.shader.uniformBindCount,r.uniformBlockBinding(e.program,n,this.shader.uniformBindCount),this.shader.uniformBindCount++;var o=this.getSignature(t,this.shader.program.uniformData,"ubo"),a=this._uboCache[o];if(a||(a=this._uboCache[o]=function(t,e){if(!t.autoManage)return{size:0,syncFunc:rn};for(var i=function(t,e){var i=[];for(var r in t)e[r]&&i.push(e[r]);return i.sort((function(t,e){return t.index-e.index})),i}(t.uniforms,e),r=function(t){for(var e=t.map((function(t){return{data:t,offset:0,dataLen:0,dirty:0}})),i=0,r=0,n=0,o=0;o<e.length;o++){var a=e[o];if(i=on[a.data.type],a.data.size>1&&(i=Math.max(i,16)*a.data.size),a.dataLen=i,r%i!=0&&r<16){var s=r%i%16;r+=s,n+=s}r+i>16?(n=16*Math.ceil(n/16),a.offset=n,n+=i,r=i):(a.offset=n,r+=i,n+=i)}return{uboElements:e,size:n=16*Math.ceil(n/16)}}(i),n=r.uboElements,o=r.size,a=["\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    "],s=0;s<n.length;s++){for(var p=n[s],l=t.uniforms[p.data.name],m=p.data.name,y=!1,h=0;h<Or.length;h++){var u=Or[h];if(u.codeUbo&&u.test(p.data,l)){a.push("offset = "+p.offset/4+";",Or[h].codeUbo(p.data.name,l)),y=!0;break}}if(!y)if(p.data.size>1){var E=Ar(p.data.type),c=Math.max(on[p.data.type]/16,1),d=E/c,f=(4-d%4)%4;a.push("\n                cv = ud."+m+".value;\n                v = uv."+m+";\n                offset = "+p.offset/4+";\n\n                t = 0;\n\n                for(var i=0; i < "+p.data.size*c+"; i++)\n                {\n                    for(var j = 0; j < "+d+"; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += "+f+";\n                }\n\n                ")}else{var _=nn[p.data.type];a.push("\n                cv = ud."+m+".value;\n                v = uv."+m+";\n                offset = "+p.offset/4+";\n                "+_+";\n                ")}}return a.push("\n       renderer.buffer.update(buffer);\n    "),{size:o,syncFunc:new Function("ud","uv","renderer","syncData","buffer",a.join("\n"))}}(t,this.shader.program.uniformData)),t.autoManage){var s=new Float32Array(a.size/4);t.buffer.update(s)}return e.uniformGroups[t.id]=a.syncFunc,e.uniformGroups[t.id]},t.prototype.getSignature=function(t,e,i){var r=t.uniforms,n=[i+"-"];for(var o in r)n.push(o),e[o]&&n.push(e[o].type);return n.join("-")},t.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},t.prototype.generateProgram=function(t){var e=this.gl,i=t.program,r=function(t,e){var i=_r(t,t.VERTEX_SHADER,e.vertexSrc),r=_r(t,t.FRAGMENT_SHADER,e.fragmentSrc),n=t.createProgram();if(t.attachShader(n,i),t.attachShader(n,r),t.linkProgram(n),t.getProgramParameter(n,t.LINK_STATUS)||function(t,e,i,r){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(i,t.COMPILE_STATUS)||vr(t,i),t.getShaderParameter(r,t.COMPILE_STATUS)||vr(t,r),console.error("PixiJS Error: Could not initialize shader."),""!==t.getProgramInfoLog(e)&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}(t,n,i,r),e.attributeData=function(t,e){for(var i={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),n=0;n<r;n++){var o=e.getActiveAttrib(t,n);if(0!==o.name.indexOf("gl_")){var a=Fr(e,o.type),s={type:a,name:o.name,size:Ar(a),location:e.getAttribLocation(t,o.name)};i[o.name]=s}}return i}(n,t),e.uniformData=function(t,e){for(var i={},r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=0;n<r;n++){var o=e.getActiveUniform(t,n),a=o.name.replace(/\[.*?\]$/,""),s=!!o.name.match(/\[.*?\]$/),p=Fr(e,o.type);i[a]={name:a,index:n,type:p,size:o.size,isArray:s,value:Tr(p,o.size)}}return i}(n,t),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){var o=Object.keys(e.attributeData);o.sort((function(t,e){return t>e?1:-1}));for(var a=0;a<o.length;a++)e.attributeData[o[a]].location=a,t.bindAttribLocation(n,a,o[a]);t.linkProgram(n)}t.deleteShader(i),t.deleteShader(r);var s={};for(var a in e.uniformData){var p=e.uniformData[a];s[a]={location:t.getUniformLocation(n,a),value:Tr(p.type,p.size)}}return new an(n,s)}(e,i);return i.glPrograms[this.renderer.CONTEXT_UID]=r,r},t.prototype.reset=function(){this.program=null,this.shader=null},t.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},t}(),mn=function(){function t(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=et.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=new Hr,this.defaultState.blend=!0}return t.prototype.contextChange=function(t){this.gl=t,this.blendModes=function(t,e){return void 0===e&&(e=[]),e[et.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[et.ADD]=[t.ONE,t.ONE],e[et.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[et.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[et.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[et.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[et.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[et.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[et.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[et.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[et.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[et.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[et.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[et.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[et.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[et.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[et.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[et.NONE]=[0,0],e[et.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[et.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[et.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[et.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[et.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[et.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[et.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[et.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[et.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[et.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[et.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[et.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}(t),this.set(this.defaultState),this.reset()},t.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,i=0;e;)1&e&&this.map[i].call(this,!!(t.data&1<<i)),e>>=1,i++;this.stateId=t.data}for(i=0;i<this.checks.length;i++)this.checks[i](this,t)},t.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},t.prototype.setBlend=function(e){this.updateCheck(t.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)},t.prototype.setOffset=function(e){this.updateCheck(t.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},t.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},t.prototype.setDepthMask=function(t){this.gl.depthMask(t)},t.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},t.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},t.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var e=this.blendModes[t],i=this.gl;2===e.length?i.blendFunc(e[0],e[1]):i.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,i.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}},t.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},t.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},t.prototype.updateCheck=function(t,e){var i=this.checks.indexOf(t);e&&-1===i?this.checks.push(t):e||-1===i||this.checks.splice(i,1)},t.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},t.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},t.prototype.destroy=function(){this.gl=null},t}(),yn=function(){function t(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=Dt.GC_MAX_IDLE,this.checkCountMax=Dt.GC_MAX_CHECK_COUNT,this.mode=Dt.GC_MODE}return t.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==ht.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},t.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,i=!1,r=0;r<e.length;r++){var n=e[r];!n.framebuffer&&this.count-n.touched>this.maxIdle&&(t.destroyTexture(n,!0),e[r]=null,i=!0)}if(i){var o=0;for(r=0;r<e.length;r++)null!==e[r]&&(e[o++]=e[r]);e.length=o}},t.prototype.unload=function(t){var e=this.renderer.texture,i=t._texture;i&&!i.framebuffer&&e.destroyTexture(i);for(var r=t.children.length-1;r>=0;r--)this.unload(t.children[r])},t.prototype.destroy=function(){this.renderer=null},t}(),hn=function(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=ot.UNSIGNED_BYTE,this.internalFormat=rt.RGBA,this.samplerType=0},un=function(){function t(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Ii,this.hasIntegerTextures=!1}return t.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=function(t){var e,i,r,n,o,a,s,p,l,m,y,h,u,E,c,d,f,_,v,g,T,b,x;return"WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?((e={})[ot.UNSIGNED_BYTE]=((i={})[rt.RGBA]=t.RGBA8,i[rt.RGB]=t.RGB8,i[rt.RG]=t.RG8,i[rt.RED]=t.R8,i[rt.RGBA_INTEGER]=t.RGBA8UI,i[rt.RGB_INTEGER]=t.RGB8UI,i[rt.RG_INTEGER]=t.RG8UI,i[rt.RED_INTEGER]=t.R8UI,i[rt.ALPHA]=t.ALPHA,i[rt.LUMINANCE]=t.LUMINANCE,i[rt.LUMINANCE_ALPHA]=t.LUMINANCE_ALPHA,i),e[ot.BYTE]=((r={})[rt.RGBA]=t.RGBA8_SNORM,r[rt.RGB]=t.RGB8_SNORM,r[rt.RG]=t.RG8_SNORM,r[rt.RED]=t.R8_SNORM,r[rt.RGBA_INTEGER]=t.RGBA8I,r[rt.RGB_INTEGER]=t.RGB8I,r[rt.RG_INTEGER]=t.RG8I,r[rt.RED_INTEGER]=t.R8I,r),e[ot.UNSIGNED_SHORT]=((n={})[rt.RGBA_INTEGER]=t.RGBA16UI,n[rt.RGB_INTEGER]=t.RGB16UI,n[rt.RG_INTEGER]=t.RG16UI,n[rt.RED_INTEGER]=t.R16UI,n[rt.DEPTH_COMPONENT]=t.DEPTH_COMPONENT16,n),e[ot.SHORT]=((o={})[rt.RGBA_INTEGER]=t.RGBA16I,o[rt.RGB_INTEGER]=t.RGB16I,o[rt.RG_INTEGER]=t.RG16I,o[rt.RED_INTEGER]=t.R16I,o),e[ot.UNSIGNED_INT]=((a={})[rt.RGBA_INTEGER]=t.RGBA32UI,a[rt.RGB_INTEGER]=t.RGB32UI,a[rt.RG_INTEGER]=t.RG32UI,a[rt.RED_INTEGER]=t.R32UI,a[rt.DEPTH_COMPONENT]=t.DEPTH_COMPONENT24,a),e[ot.INT]=((s={})[rt.RGBA_INTEGER]=t.RGBA32I,s[rt.RGB_INTEGER]=t.RGB32I,s[rt.RG_INTEGER]=t.RG32I,s[rt.RED_INTEGER]=t.R32I,s),e[ot.FLOAT]=((p={})[rt.RGBA]=t.RGBA32F,p[rt.RGB]=t.RGB32F,p[rt.RG]=t.RG32F,p[rt.RED]=t.R32F,p[rt.DEPTH_COMPONENT]=t.DEPTH_COMPONENT32F,p),e[ot.HALF_FLOAT]=((l={})[rt.RGBA]=t.RGBA16F,l[rt.RGB]=t.RGB16F,l[rt.RG]=t.RG16F,l[rt.RED]=t.R16F,l),e[ot.UNSIGNED_SHORT_5_6_5]=((m={})[rt.RGB]=t.RGB565,m),e[ot.UNSIGNED_SHORT_4_4_4_4]=((y={})[rt.RGBA]=t.RGBA4,y),e[ot.UNSIGNED_SHORT_5_5_5_1]=((h={})[rt.RGBA]=t.RGB5_A1,h),e[ot.UNSIGNED_INT_2_10_10_10_REV]=((u={})[rt.RGBA]=t.RGB10_A2,u[rt.RGBA_INTEGER]=t.RGB10_A2UI,u),e[ot.UNSIGNED_INT_10F_11F_11F_REV]=((E={})[rt.RGB]=t.R11F_G11F_B10F,E),e[ot.UNSIGNED_INT_5_9_9_9_REV]=((c={})[rt.RGB]=t.RGB9_E5,c),e[ot.UNSIGNED_INT_24_8]=((d={})[rt.DEPTH_STENCIL]=t.DEPTH24_STENCIL8,d),e[ot.FLOAT_32_UNSIGNED_INT_24_8_REV]=((f={})[rt.DEPTH_STENCIL]=t.DEPTH32F_STENCIL8,f),x=e):((_={})[ot.UNSIGNED_BYTE]=((v={})[rt.RGBA]=t.RGBA,v[rt.RGB]=t.RGB,v[rt.ALPHA]=t.ALPHA,v[rt.LUMINANCE]=t.LUMINANCE,v[rt.LUMINANCE_ALPHA]=t.LUMINANCE_ALPHA,v),_[ot.UNSIGNED_SHORT_5_6_5]=((g={})[rt.RGB]=t.RGB,g),_[ot.UNSIGNED_SHORT_4_4_4_4]=((T={})[rt.RGBA]=t.RGBA,T),_[ot.UNSIGNED_SHORT_5_5_5_1]=((b={})[rt.RGBA]=t.RGBA,b),x=_),x}(t);var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var i=0;i<e;i++)this.boundTextures[i]=null;this.emptyTextures={};var r=new hn(t.createTexture());for(t.bindTexture(t.TEXTURE_2D,r.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=r,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new hn(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture),i=0;i<6;i++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);for(t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR),i=0;i<this.boundTextures.length;i++)this.bind(null,i)},t.prototype.bind=function(t,e){void 0===e&&(e=0);var i=this.gl;if((t=null==t?void 0:t.castToBaseTexture())&&t.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;var r=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,r.texture)),r.dirtyId!==t.dirtyId?(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)):r.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(t),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null},t.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},t.prototype.unbind=function(t){var e=this.gl,i=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var r=0;r<i.length;r++)i[r]===this.unknownTexture&&this.bind(null,r)}for(r=0;r<i.length;r++)i[r]===t&&(this.currentLocation!==r&&(e.activeTexture(e.TEXTURE0+r),this.currentLocation=r),e.bindTexture(t.target,this.emptyTextures[t.target].texture),i[r]=null)},t.prototype.ensureSamplerType=function(t){var e=this,i=e.boundTextures,r=e.hasIntegerTextures,n=e.CONTEXT_UID;if(r)for(var o=t-1;o>=0;--o){var a=i[o];a&&a._glTextures[n].samplerType!==at.FLOAT&&this.renderer.texture.unbind(a)}},t.prototype.initTexture=function(t){var e=new hn(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},t.prototype.initTextureType=function(t,e){var i,r;e.internalFormat=null!==(r=null===(i=this.internalFormats[t.type])||void 0===i?void 0:i[t.format])&&void 0!==r?r:t.format,2===this.webGLVersion&&t.type===ot.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type},t.prototype.updateTexture=function(t){var e=t._glTextures[this.CONTEXT_UID];if(e){var i=this.renderer;if(this.initTextureType(t,e),t.resource&&t.resource.upload(i,t,e))e.samplerType!==at.FLOAT&&(this.hasIntegerTextures=!0);else{var r=t.realWidth,n=t.realHeight,o=i.gl;(e.width!==r||e.height!==n||e.dirtyId<0)&&(e.width=r,e.height=n,o.texImage2D(t.target,0,e.internalFormat,r,n,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}},t.prototype.destroyTexture=function(t,e){var i=this.gl;if((t=t.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(t),i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){var r=this.managedTextures.indexOf(t);-1!==r&&ie(this.managedTextures,r,1)}},t.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==lt.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=t.mipmap>=1:e.mipmap=!1,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=pt.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},t.prototype.setStyle=function(t,e){var i=this.gl;if(e.mipmap&&t.mipmap!==lt.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===st.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);var r=this.renderer.context.extensions.anisotropicFiltering;if(r&&t.anisotropicLevel>0&&t.scaleMode===st.LINEAR){var n=Math.min(t.anisotropicLevel,i.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(t.target,r.TEXTURE_MAX_ANISOTROPY_EXT,n)}}else i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===st.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===st.LINEAR?i.LINEAR:i.NEAREST)},t.prototype.destroy=function(){this.renderer=null},t}(),En={__proto__:null,FilterSystem:sr,BatchSystem:lr,ContextSystem:yr,FramebufferSystem:Er,GeometrySystem:dr,MaskSystem:Yr,ScissorSystem:Zr,StencilSystem:Qr,ProjectionSystem:Jr,RenderTextureSystem:en,ShaderSystem:ln,StateSystem:mn,TextureGCSystem:yn,TextureSystem:un},cn=new Ie,dn=function(t){function e(e,i){void 0===e&&(e=$.UNKNOWN);var r=t.call(this)||this;return i=Object.assign({},Dt.RENDER_OPTIONS,i),r.options=i,r.type=e,r.screen=new ge(0,0,i.width,i.height),r.view=i.view||Dt.ADAPTER.createCanvas(),r.resolution=i.resolution||Dt.RESOLUTION,r.useContextAlpha=i.useContextAlpha,r.autoDensity=!!i.autoDensity,r.preserveDrawingBuffer=i.preserveDrawingBuffer,r.clearBeforeRender=i.clearBeforeRender,r._backgroundColor=0,r._backgroundColorRgba=[0,0,0,1],r._backgroundColorString="#000000",r.backgroundColor=i.backgroundColor||r._backgroundColor,r.backgroundAlpha=i.backgroundAlpha,void 0!==i.transparent&&(se("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),r.useContextAlpha=i.transparent,r.backgroundAlpha=i.transparent?0:1),r._lastObjectRendered=null,r.plugins={},r}return Ti(e,t),e.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},Object.defineProperty(e.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,e){this.view.width=Math.round(t*this.resolution),this.view.height=Math.round(e*this.resolution);var i=this.view.width/this.resolution,r=this.view.height/this.resolution;this.screen.width=i,this.screen.height=r,this.autoDensity&&(this.view.style.width=i+"px",this.view.style.height=r+"px"),this.emit("resize",i,r)},e.prototype.generateTexture=function(t,e,i,r){void 0===e&&(e={}),"number"==typeof e&&(se("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),e={scaleMode:e,resolution:i,region:r});var n=e.region,o=function(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(i[r[n]]=t[r[n]])}return i}(e,["region"]);0===(r=n||t.getLocalBounds(null,!0)).width&&(r.width=1),0===r.height&&(r.height=1);var a=Wi.create(bi({width:r.width,height:r.height},o));return cn.tx=-r.x,cn.ty=-r.y,this.render(t,{renderTexture:a,clear:!1,transform:cn,skipUpdateTransform:!!t.parent}),a},e.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var i=this;i.plugins=null,i.type=$.UNKNOWN,i.view=null,i.screen=null,i._tempDisplayObjectParent=null,i.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=Vt(t),Wt(t,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(t){this._backgroundColorRgba[3]=t},enumerable:!1,configurable:!0}),e}(Lt),fn=function(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},_n=function(){function t(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}return t.prototype.destroy=function(){this.renderer=null},t.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},t.prototype.bind=function(t){var e=this.gl,i=this.CONTEXT_UID,r=t._glBuffers[i]||this.createGLBuffer(t);e.bindBuffer(t.type,r.buffer)},t.prototype.bindBufferBase=function(t,e){var i=this.gl,r=this.CONTEXT_UID;if(this.boundBufferBases[e]!==t){var n=t._glBuffers[r]||this.createGLBuffer(t);this.boundBufferBases[e]=t,i.bindBufferBase(i.UNIFORM_BUFFER,e,n.buffer)}},t.prototype.bindBufferRange=function(t,e,i){var r=this.gl,n=this.CONTEXT_UID;i=i||0;var o=t._glBuffers[n]||this.createGLBuffer(t);r.bindBufferRange(r.UNIFORM_BUFFER,e||0,o.buffer,256*i,256)},t.prototype.update=function(t){var e=this.gl,i=this.CONTEXT_UID,r=t._glBuffers[i];if(t._updateID!==r.updateID)if(r.updateID=t._updateID,e.bindBuffer(t.type,r.buffer),r.byteLength>=t.data.byteLength)e.bufferSubData(t.type,0,t.data);else{var n=t.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;r.byteLength=t.data.byteLength,e.bufferData(t.type,t.data,n)}},t.prototype.dispose=function(t,e){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var i=t._glBuffers[this.CONTEXT_UID],r=this.gl;t.disposeRunner.remove(this),i&&(e||r.deleteBuffer(i.buffer),delete t._glBuffers[this.CONTEXT_UID])}},t.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedBuffers),i=0;i<e.length;i++)this.dispose(this.managedBuffers[e[i]],t)},t.prototype.createGLBuffer=function(t){var e=this.CONTEXT_UID,i=this.gl;return t._glBuffers[e]=new fn(i.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[e]},t}(),vn=function(t){function e(i){var r=t.call(this,$.WEBGL,i)||this;return i=r.options,r.gl=null,r.CONTEXT_UID=0,r.runners={destroy:new Ei("destroy"),contextChange:new Ei("contextChange"),reset:new Ei("reset"),update:new Ei("update"),postrender:new Ei("postrender"),prerender:new Ei("prerender"),resize:new Ei("resize")},r.runners.contextChange.add(r),r.globalUniforms=new rr({projectionMatrix:new Ie},!0),r.addSystem(Yr,"mask").addSystem(yr,"context").addSystem(mn,"state").addSystem(ln,"shader").addSystem(un,"texture").addSystem(_n,"buffer").addSystem(dr,"geometry").addSystem(Er,"framebuffer").addSystem(Zr,"scissor").addSystem(Qr,"stencil").addSystem(Jr,"projection").addSystem(yn,"textureGC").addSystem(sr,"filter").addSystem(en,"renderTexture").addSystem(lr,"batch"),r.initPlugins(e.__plugins),r.multisample=void 0,i.context?r.context.initFromContext(i.context):r.context.initFromOptions({alpha:!!r.useContextAlpha,antialias:i.antialias,premultipliedAlpha:r.useContextAlpha&&"notMultiplied"!==r.useContextAlpha,stencil:!0,preserveDrawingBuffer:i.preserveDrawingBuffer,powerPreference:r.options.powerPreference}),r.renderingToScreen=!0,function(t){var e;if(!Xt){if(Dt.ADAPTER.getNavigator().userAgent.toLowerCase().indexOf("chrome")>-1){var i=["\n %c %c %c PixiJS 6.5.6 -  "+t+"   %c  %c  http://www.pixijs.com/  %c %c %c%c \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(e=globalThis.console).log.apply(e,i)}else globalThis.console&&globalThis.console.log("PixiJS 6.5.6 - "+t+" - http://www.pixijs.com/");Xt=!0}}(2===r.context.webGLVersion?"WebGL 2":"WebGL 1"),r.resize(r.options.width,r.options.height),r}return Ti(e,t),e.create=function(t){if(void 0===Ht&&(Ht=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:Dt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!Dt.ADAPTER.getWebGLRenderingContext())return!1;var e=Dt.ADAPTER.createCanvas(),i=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),r=!(!i||!i.getContextAttributes().stencil);if(i){var n=i.getExtension("WEBGL_lose_context");n&&n.loseContext()}return i=null,r}catch(t){return!1}}()),Ht)return new e(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},e.prototype.contextChange=function(){var t,e=this.gl;if(1===this.context.webGLVersion){var i=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,i)}else i=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,i);t>=dt.HIGH?this.multisample=dt.HIGH:t>=dt.MEDIUM?this.multisample=dt.MEDIUM:t>=dt.LOW?this.multisample=dt.LOW:this.multisample=dt.NONE},e.prototype.addSystem=function(t,e){var i=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(var r in this[e]=i,this.runners)this.runners[r].add(i);return this},e.prototype.render=function(t,e){var i,r,n,o;if(e&&(e instanceof Wi?(se("6.0.0","Renderer#render arguments changed, use options instead."),i=e,r=arguments[2],n=arguments[3],o=arguments[4]):(i=e.renderTexture,r=e.clear,n=e.transform,o=e.skipUpdateTransform)),this.renderingToScreen=!i,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=n,!this.context.isLost){if(i||(this._lastObjectRendered=t),!o){var a=t.enableTempParent();t.updateTransform(),t.disableTempParent(a)}this.renderTexture.bind(i),this.batch.currentRenderer.start(),(void 0!==r?r:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),i&&i.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},e.prototype.generateTexture=function(e,i,r,n){void 0===i&&(i={});var o=t.prototype.generateTexture.call(this,e,i,r,n);return this.framebuffer.blit(),o},e.prototype.resize=function(e,i){t.prototype.resize.call(this,e,i),this.runners.resize.emit(this.screen.height,this.screen.width)},e.prototype.reset=function(){return this.runners.reset.emit(),this},e.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},e.prototype.destroy=function(e){for(var i in this.runners.destroy.emit(),this.runners)this.runners[i].destroy();t.prototype.destroy.call(this,e),this.gl=null},Object.defineProperty(e.prototype,"extract",{get:function(){return se("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),e.registerPlugin=function(t,e){se("6.5.0","Renderer.registerPlugin() has been deprecated, please use extensions.add() instead."),ui.add({name:t,type:li.RendererPlugin,ref:e})},e.__plugins={},e}(dn);ui.handleByMap(li.RendererPlugin,vn.__plugins);var gn="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",Tn=function(){this.texArray=null,this.blend=0,this.type=it.TRIANGLES,this.start=0,this.size=0,this.data=null},bn=function(){function t(){this.elements=[],this.ids=[],this.count=0}return t.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},t}(),xn=function(){function t(t){"number"==typeof t?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(t.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),t.prototype.view=function(t){return this[t+"View"]},t.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},t.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},t}(),Sn=function(t){function e(e){var i=t.call(this,e)||this;return i.shaderGenerator=null,i.geometryClass=null,i.vertexSize=null,i.state=Hr.for2d(),i.size=4*Dt.SPRITE_BATCH_SIZE,i._vertexCount=0,i._indexCount=0,i._bufferedElements=[],i._bufferedTextures=[],i._bufferSize=0,i._shader=null,i._packedGeometries=[],i._packedGeometryPoolSize=2,i._flushId=0,i._aBuffers={},i._iBuffers={},i.MAX_TEXTURES=1,i.renderer.on("prerender",i.onPrerender,i),e.runners.contextChange.add(i),i._dcIndex=0,i._aIndex=0,i._iIndex=0,i._attributeBuffer=null,i._indexBuffer=null,i._tempBoundTextures=[],i}return Ti(e,t),e.prototype.contextChange=function(){var t=this.renderer.gl;Dt.PREFER_ENV===J.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),Dt.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=function(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var i=e.createShader(e.FRAGMENT_SHADER);;){var r=Gr.replace(/%forloop%/gi,Dr(t));if(e.shaderSource(i,r),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS))break;t=t/2|0}return t}(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},e.prototype.initFlushBuffers=function(){for(var t=e._drawCallPool,i=e._textureArrayPool,r=this.size/4,n=Math.floor(r/this.MAX_TEXTURES)+1;t.length<r;)t.push(new Tn);for(;i.length<n;)i.push(new bn);for(var o=0;o<this.MAX_TEXTURES;o++)this._tempBoundTextures[o]=null},e.prototype.onPrerender=function(){this._flushId=0},e.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},e.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,i=this.MAX_TEXTURES,r=e._textureArrayPool,n=this.renderer.batch,o=this._tempBoundTextures,a=this.renderer.textureGC.count,s=++Ii._globalBatch,p=0,l=r[0],m=0;n.copyBoundTextures(o,i);for(var y=0;y<this._bufferSize;++y){var h=t[y];t[y]=null,h._batchEnabled!==s&&(l.count>=i&&(n.boundArray(l,o,s,i),this.buildDrawCalls(l,m,y),m=y,l=r[++p],++s),h._batchEnabled=s,h.touched=a,l.elements[l.count++]=h)}for(l.count>0&&(n.boundArray(l,o,s,i),this.buildDrawCalls(l,m,this._bufferSize),++p,++s),y=0;y<o.length;y++)o[y]=null;Ii._globalBatch=s},e.prototype.buildDrawCalls=function(t,i,r){var n=this,o=n._bufferedElements,a=n._attributeBuffer,s=n._indexBuffer,p=n.vertexSize,l=e._drawCallPool,m=this._dcIndex,y=this._aIndex,h=this._iIndex,u=l[m];u.start=this._iIndex,u.texArray=t;for(var E=i;E<r;++E){var c=o[E],d=c._texture.baseTexture,f=zt[d.alphaMode?1:0][c.blendMode];o[E]=null,i<E&&u.blend!==f&&(u.size=h-u.start,i=E,(u=l[++m]).texArray=t,u.start=h),this.packInterleavedGeometry(c,a,s,y,h),y+=c.vertexData.length/2*p,h+=c.indices.length,u.blend=f}i<r&&(u.size=h-u.start,++m),this._dcIndex=m,this._aIndex=y,this._iIndex=h},e.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,i=0;i<t.count;i++)e.bind(t.elements[i],t.ids[i]),t.elements[i]=null;t.count=0},e.prototype.updateGeometry=function(){var t=this,e=t._packedGeometries,i=t._attributeBuffer,r=t._indexBuffer;Dt.CAN_UPLOAD_SAME_BUFFER?(e[this._flushId]._buffer.update(i.rawBinaryData),e[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(i.rawBinaryData),e[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},e.prototype.drawBatches=function(){for(var t=this._dcIndex,i=this.renderer,r=i.gl,n=i.state,o=e._drawCallPool,a=null,s=0;s<t;s++){var p=o[s],l=p.texArray,m=p.type,y=p.size,h=p.start,u=p.blend;a!==l&&(a=l,this.bindAndClearTexArray(l)),this.state.blendMode=u,n.set(this.state),r.drawElements(m,y,r.UNSIGNED_SHORT,2*h)}},e.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},e.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),Dt.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),t.prototype.destroy.call(this)},e.prototype.getAttributeBuffer=function(t){var e=$t(Math.ceil(t/8)),i=ee(e),r=8*e;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);var n=this._aBuffers[r];return n||(this._aBuffers[r]=n=new xn(r*this.vertexSize*4)),n},e.prototype.getIndexBuffer=function(t){var e=$t(Math.ceil(t/12)),i=ee(e),r=12*e;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);var n=this._iBuffers[i];return n||(this._iBuffers[i]=n=new Uint16Array(r)),n},e.prototype.packInterleavedGeometry=function(t,e,i,r,n){for(var o=e.uint32View,a=e.float32View,s=r/this.vertexSize,p=t.uvs,l=t.indices,m=t.vertexData,y=t._texture.baseTexture._batchLocation,h=Math.min(t.worldAlpha,1),u=h<1&&t._texture.baseTexture.alphaMode?Kt(t._tintRGB,h):t._tintRGB+(255*h<<24),E=0;E<m.length;E+=2)a[r++]=m[E],a[r++]=m[E+1],a[r++]=p[E],a[r++]=p[E+1],o[r++]=u,a[r++]=y;for(E=0;E<l.length;E++)i[n++]=s+l[E]},e._drawCallPool=[],e._textureArrayPool=[],e}(pr),Rn=function(){function t(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return t.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),i=0;i<t;i++)e[i]=i;this.defaultGroupCache[t]=rr.from({uSamplers:e},!0);var r=this.fragTemplate;r=(r=r.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new Br(this.vertexSrc,r)}var n={tint:new Float32Array([1,1,1,1]),translationMatrix:new Ie,default:this.defaultGroupCache[t]};return new kr(this.programCache[t],n)},t.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var i=0;i<t;i++)i>0&&(e+="\nelse "),i<t-1&&(e+="if(vTextureId < "+i+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+i+"], vTextureCoord);",e+="\n}";return(e+="\n")+"\n"},t}(),In=function(t){function e(e){void 0===e&&(e=!1);var i=t.call(this)||this;return i._buffer=new qi(null,e,!1),i._indexBuffer=new qi(null,e,!0),i.addAttribute("aVertexPosition",i._buffer,2,!1,ot.FLOAT).addAttribute("aTextureCoord",i._buffer,2,!1,ot.FLOAT).addAttribute("aColor",i._buffer,4,!0,ot.UNSIGNED_BYTE).addAttribute("aTextureId",i._buffer,1,!0,ot.FLOAT).addIndex(i._indexBuffer),i}return Ti(e,t),e}($i),An="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",Mn="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",Cn=function(){function t(){}return t.create=function(t){var e=Object.assign({vertex:An,fragment:Mn,geometryClass:In,vertexSize:6},t),i=e.vertex,r=e.fragment,n=e.vertexSize,o=e.geometryClass;return function(t){function e(e){var a=t.call(this,e)||this;return a.shaderGenerator=new Rn(i,r),a.geometryClass=o,a.vertexSize=n,a}return Ti(e,t),e}(Sn)},Object.defineProperty(t,"defaultVertexSrc",{get:function(){return An},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentTemplate",{get:function(){return Mn},enumerable:!1,configurable:!0}),t}(),Fn=Cn.create();Object.assign(Fn,{extension:{name:"batch",type:li.RendererPlugin}});var Nn={},On=function(t){Object.defineProperty(Nn,t,{get:function(){return se("6.0.0","PIXI.systems."+t+" has moved to PIXI."+t),Di[t]}})};for(var wn in Di)On(wn);var Pn={},Gn=function(t){Object.defineProperty(Pn,t,{get:function(){return se("6.0.0","PIXI.resources."+t+" has moved to PIXI."+t),En[t]}})};for(var wn in En)Gn(wn);oi.mixin({accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1});var Dn=function(){function t(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Gt.tablet||Gt.phone)&&this.createTouchHook();var e=document.createElement("div");e.style.width="100px",e.style.height="100px",e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.zIndex=2..toString(),this.div=e,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(t.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),t.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2..toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",(function(){t._isMobileAccessibility=!0,t.activate(),t.destroyTouchHook()})),document.body.appendChild(e),this._hookDiv=e},t.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},t.prototype.activate=function(){var t;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),null===(t=this.renderer.view.parentNode)||void 0===t||t.appendChild(this.div))},t.prototype.deactivate=function(){var t;this._isActive&&!this._isMobileAccessibility&&(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),null===(t=this.div.parentNode)||void 0===t||t.removeChild(this.div))},t.prototype.updateAccessibleObjects=function(t){if(t.visible&&t.accessibleChildren){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);var e=t.children;if(e)for(var i=0;i<e.length;i++)this.updateAccessibleObjects(e[i])}},t.prototype.update=function(){var t=performance.now();if(!(Gt.android.device&&t<this.androidUpdateCount)&&(this.androidUpdateCount=t+this.androidUpdateFrequency,this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var e=this.renderer.view.getBoundingClientRect(),i=e.left,r=e.top,n=e.width,o=e.height,a=this.renderer,s=a.width,p=a.height,l=a.resolution,m=n/s*l,y=o/p*l,h=this.div;h.style.left=i+"px",h.style.top=r+"px",h.style.width=s+"px",h.style.height=p+"px";for(var u=0;u<this.children.length;u++){var E=this.children[u];if(E.renderId!==this.renderId)E._accessibleActive=!1,ie(this.children,u,1),this.div.removeChild(E._accessibleDiv),this.pool.push(E._accessibleDiv),E._accessibleDiv=null,u--;else{h=E._accessibleDiv;var c=E.hitArea,d=E.worldTransform;E.hitArea?(h.style.left=(d.tx+c.x*d.a)*m+"px",h.style.top=(d.ty+c.y*d.d)*y+"px",h.style.width=c.width*d.a*m+"px",h.style.height=c.height*d.d*y+"px"):(c=E.getBounds(),this.capHitArea(c),h.style.left=c.x*m+"px",h.style.top=c.y*y+"px",h.style.width=c.width*m+"px",h.style.height=c.height*y+"px",h.title!==E.accessibleTitle&&null!==E.accessibleTitle&&(h.title=E.accessibleTitle),h.getAttribute("aria-label")!==E.accessibleHint&&null!==E.accessibleHint&&h.setAttribute("aria-label",E.accessibleHint)),E.accessibleTitle===h.title&&E.tabIndex===h.tabIndex||(h.title=E.accessibleTitle,h.tabIndex=E.tabIndex,this.debug&&this.updateDebugHTML(h))}}this.renderId++}},t.prototype.updateDebugHTML=function(t){t.innerHTML="type: "+t.type+"</br> title : "+t.title+"</br> tabIndex: "+t.tabIndex},t.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);var e=this.renderer,i=e.width,r=e.height;t.x+t.width>i&&(t.width=i-t.x),t.y+t.height>r&&(t.height=r-t.y)},t.prototype.addChild=function(t){var e=this.pool.pop();e||((e=document.createElement("button")).style.width="100px",e.style.height="100px",e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=2..toString(),e.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&null!==t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleHint&&null!==t.accessibleHint||(e.title="displayObject "+t.tabIndex),t.accessibleHint&&null!==t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},t.prototype._onClick=function(t){var e=this.renderer.plugins.interaction,i=t.target.displayObject,r=e.eventData;e.dispatchEvent(i,"click",r),e.dispatchEvent(i,"pointertap",r),e.dispatchEvent(i,"tap",r)},t.prototype._onFocus=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive");var e=this.renderer.plugins.interaction,i=t.target.displayObject,r=e.eventData;e.dispatchEvent(i,"mouseover",r)},t.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite");var e=this.renderer.plugins.interaction,i=t.target.displayObject,r=e.eventData;e.dispatchEvent(i,"mouseout",r)},t.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},t.prototype._onMouseMove=function(t){0===t.movementX&&0===t.movementY||this.deactivate()},t.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},t.extension={name:"accessibility",type:[li.RendererPlugin,li.CanvasRendererPlugin]},t}(),Ln=function(){function t(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new _e,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(t.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),t.prototype.getLocalPosition=function(t,e,i){return t.worldTransform.applyInverse(i||this.global,e)},t.prototype.copyEvent=function(t){"isPrimary"in t&&t.isPrimary&&(this.isPrimary=!0),this.button="button"in t&&t.button;var e="buttons"in t&&t.buttons;this.buttons=Number.isInteger(e)?e:"which"in t&&t.which,this.width="width"in t&&t.width,this.height="height"in t&&t.height,this.tiltX="tiltX"in t&&t.tiltX,this.tiltY="tiltY"in t&&t.tiltY,this.pointerType="pointerType"in t&&t.pointerType,this.pressure="pressure"in t&&t.pressure,this.rotationAngle="rotationAngle"in t&&t.rotationAngle,this.twist="twist"in t&&t.twist||0,this.tangentialPressure="tangentialPressure"in t&&t.tangentialPressure||0},t.prototype.reset=function(){this.isPrimary=!1},t}(),Un=function(t,e){return Un=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},Un(t,e)},Bn=function(){function t(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return t.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},t.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},t}(),kn=function(){function t(e){this._pointerId=e,this._flags=t.FLAGS.NONE}return t.prototype._doSet=function(t,e){this._flags=e?this._flags|t:this._flags&~t},Object.defineProperty(t.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"flags",{get:function(){return this._flags},set:function(t){this._flags=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"none",{get:function(){return this._flags===t.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"over",{get:function(){return 0!=(this._flags&t.FLAGS.OVER)},set:function(e){this._doSet(t.FLAGS.OVER,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightDown",{get:function(){return 0!=(this._flags&t.FLAGS.RIGHT_DOWN)},set:function(e){this._doSet(t.FLAGS.RIGHT_DOWN,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftDown",{get:function(){return 0!=(this._flags&t.FLAGS.LEFT_DOWN)},set:function(e){this._doSet(t.FLAGS.LEFT_DOWN,e)},enumerable:!1,configurable:!0}),t.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),t}(),Hn=function(){function t(){this._tempPoint=new _e}return t.prototype.recursiveFindHit=function(t,e,i,r,n){var o;if(!e||!e.visible)return!1;var a=t.data.global,s=!1,p=n=e.interactive||n,l=!0;if(e.hitArea)r&&(e.worldTransform.applyInverse(a,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?s=!0:(r=!1,l=!1)),p=!1;else if(e._mask&&r){var m=e._mask.isMaskData?e._mask.maskObject:e._mask;m&&!(null===(o=m.containsPoint)||void 0===o?void 0:o.call(m,a))&&(r=!1)}if(l&&e.interactiveChildren&&e.children)for(var y=e.children,h=y.length-1;h>=0;h--){var u=y[h],E=this.recursiveFindHit(t,u,i,r,p);if(E){if(!u.parent)continue;p=!1,E&&(t.target&&(r=!1),s=!0)}}return n&&(r&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(a)&&(s=!0),e.interactive&&(s&&!t.target&&(t.target=e),i&&i(t,e,!!s))),s},t.prototype.findHit=function(t,e,i,r){this.recursiveFindHit(t,e,i,r,!1)},t}(),Xn={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};oi.mixin(Xn);var jn={target:null,data:{global:null}},Wn=function(t){function e(e,i){var r=t.call(this)||this;return i=i||{},r.renderer=e,r.autoPreventDefault=void 0===i.autoPreventDefault||i.autoPreventDefault,r.interactionFrequency=i.interactionFrequency||10,r.mouse=new Ln,r.mouse.identifier=1,r.mouse.global.set(-999999),r.activeInteractionData={},r.activeInteractionData[1]=r.mouse,r.interactionDataPool=[],r.eventData=new Bn,r.interactionDOMElement=null,r.moveWhenInside=!1,r.eventsAdded=!1,r.tickerAdded=!1,r.mouseOverRenderer=!("PointerEvent"in globalThis),r.supportsTouchEvents="ontouchstart"in globalThis,r.supportsPointerEvents=!!globalThis.PointerEvent,r.onPointerUp=r.onPointerUp.bind(r),r.processPointerUp=r.processPointerUp.bind(r),r.onPointerCancel=r.onPointerCancel.bind(r),r.processPointerCancel=r.processPointerCancel.bind(r),r.onPointerDown=r.onPointerDown.bind(r),r.processPointerDown=r.processPointerDown.bind(r),r.onPointerMove=r.onPointerMove.bind(r),r.processPointerMove=r.processPointerMove.bind(r),r.onPointerOut=r.onPointerOut.bind(r),r.processPointerOverOut=r.processPointerOverOut.bind(r),r.onPointerOver=r.onPointerOver.bind(r),r.cursorStyles={default:"inherit",pointer:"pointer"},r.currentCursorMode=null,r.cursor=null,r.resolution=1,r.delayedEvents=[],r.search=new Hn,r._tempDisplayObject=new ai,r._eventListenerOptions={capture:!0,passive:!1},r._useSystemTicker=void 0===i.useSystemTicker||i.useSystemTicker,r.setTargetElement(r.renderer.view,r.renderer.resolution),r}return function(t,e){function i(){this.constructor=t}Un(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),Object.defineProperty(e.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(t){this._useSystemTicker=t,t?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),e.prototype.hitTest=function(t,e){return jn.target=null,jn.data.global=t,e||(e=this.lastObjectRendered),this.processInteractive(jn,e,null,!0),jn.target},e.prototype.setTargetElement=function(t,e){void 0===e&&(e=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents(),this.addTickerListener()},e.prototype.addTickerListener=function(){!this.tickerAdded&&this.interactionDOMElement&&this._useSystemTicker&&(di.system.add(this.tickerUpdate,this,yi.INTERACTION),this.tickerAdded=!0)},e.prototype.removeTickerListener=function(){this.tickerAdded&&(di.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},e.prototype.addEvents=function(){if(!this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none"),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.addEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.eventsAdded=!0}},e.prototype.removeEvents=function(){if(this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.removeEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.interactionDOMElement=null,this.eventsAdded=!1}},e.prototype.tickerUpdate=function(t){this._deltaTime+=t,this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this.update())},e.prototype.update=function(){if(this.interactionDOMElement)if(this._didMove)this._didMove=!1;else{for(var t in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(t)){var e=this.activeInteractionData[t];if(e.originalEvent&&"touch"!==e.pointerType){var i=this.configureInteractionEventForDOMEvent(this.eventData,e.originalEvent,e);this.processInteractive(i,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){t=t||"default";var e=!0;if(globalThis.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(e=!1),this.currentCursorMode!==t){this.currentCursorMode=t;var i=this.cursorStyles[t];if(i)switch(typeof i){case"string":e&&(this.interactionDOMElement.style.cursor=i);break;case"function":i(t);break;case"object":e&&Object.assign(this.interactionDOMElement.style,i)}else e&&"string"==typeof t&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.interactionDOMElement.style.cursor=t)}},e.prototype.dispatchEvent=function(t,e,i){i.stopPropagationHint&&t!==i.stopsPropagatingAt||(i.currentTarget=t,i.type=e,t.emit(e,i),t[e]&&t[e](i))},e.prototype.delayDispatchEvent=function(t,e,i){this.delayedEvents.push({displayObject:t,eventString:e,eventData:i})},e.prototype.mapPositionToPoint=function(t,e,i){var r;r=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0};var n=1/this.resolution;t.x=(e-r.left)*(this.interactionDOMElement.width/r.width)*n,t.y=(i-r.top)*(this.interactionDOMElement.height/r.height)*n},e.prototype.processInteractive=function(t,e,i,r){var n=this.search.findHit(t,e,i,r),o=this.delayedEvents;if(!o.length)return n;t.stopPropagationHint=!1;var a=o.length;this.delayedEvents=[];for(var s=0;s<a;s++){var p=o[s],l=p.displayObject,m=p.eventString,y=p.eventData;y.stopsPropagatingAt===l&&(y.stopPropagationHint=!0),this.dispatchEvent(l,m,y)}return n},e.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(var i=e.length,r=0;r<i;r++){var n=e[r],o=this.getInteractionDataForPointerId(n),a=this.configureInteractionEventForDOMEvent(this.eventData,n,o);if(a.data.originalEvent=t,this.processInteractive(a,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",a),"touch"===n.pointerType)this.emit("touchstart",a);else if("mouse"===n.pointerType||"pen"===n.pointerType){var s=2===n.button;this.emit(s?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(t,e,i){var r=t.data,n=t.data.identifier;if(i)if(e.trackedPointers[n]||(e.trackedPointers[n]=new kn(n)),this.dispatchEvent(e,"pointerdown",t),"touch"===r.pointerType)this.dispatchEvent(e,"touchstart",t);else if("mouse"===r.pointerType||"pen"===r.pointerType){var o=2===r.button;o?e.trackedPointers[n].rightDown=!0:e.trackedPointers[n].leftDown=!0,this.dispatchEvent(e,o?"rightdown":"mousedown",t)}},e.prototype.onPointerComplete=function(t,e,i){var r=this.normalizeToPointerData(t),n=r.length,o=t.target;t.composedPath&&t.composedPath().length>0&&(o=t.composedPath()[0]);for(var a=o!==this.interactionDOMElement?"outside":"",s=0;s<n;s++){var p=r[s],l=this.getInteractionDataForPointerId(p),m=this.configureInteractionEventForDOMEvent(this.eventData,p,l);if(m.data.originalEvent=t,this.processInteractive(m,this.lastObjectRendered,i,e||!a),this.emit(e?"pointercancel":"pointerup"+a,m),"mouse"===p.pointerType||"pen"===p.pointerType){var y=2===p.button;this.emit(y?"rightup"+a:"mouseup"+a,m)}else"touch"===p.pointerType&&(this.emit(e?"touchcancel":"touchend"+a,m),this.releaseInteractionDataForPointerId(p.pointerId))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,e){var i=t.data,r=t.data.identifier;void 0!==e.trackedPointers[r]&&(delete e.trackedPointers[r],this.dispatchEvent(e,"pointercancel",t),"touch"===i.pointerType&&this.dispatchEvent(e,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,e,i){var r=t.data,n=t.data.identifier,o=e.trackedPointers[n],a="touch"===r.pointerType,s="mouse"===r.pointerType||"pen"===r.pointerType,p=!1;if(s){var l=2===r.button,m=kn.FLAGS,y=l?m.RIGHT_DOWN:m.LEFT_DOWN,h=void 0!==o&&o.flags&y;i?(this.dispatchEvent(e,l?"rightup":"mouseup",t),h&&(this.dispatchEvent(e,l?"rightclick":"click",t),p=!0)):h&&this.dispatchEvent(e,l?"rightupoutside":"mouseupoutside",t),o&&(l?o.rightDown=!1:o.leftDown=!1)}i?(this.dispatchEvent(e,"pointerup",t),a&&this.dispatchEvent(e,"touchend",t),o&&(s&&!p||this.dispatchEvent(e,"pointertap",t),a&&(this.dispatchEvent(e,"tap",t),o.over=!1))):o&&(this.dispatchEvent(e,"pointerupoutside",t),a&&this.dispatchEvent(e,"touchendoutside",t)),o&&o.none&&delete e.trackedPointers[n]},e.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);"mouse"!==e[0].pointerType&&"pen"!==e[0].pointerType||(this._didMove=!0,this.cursor=null);for(var i=e.length,r=0;r<i;r++){var n=e[r],o=this.getInteractionDataForPointerId(n),a=this.configureInteractionEventForDOMEvent(this.eventData,n,o);a.data.originalEvent=t,this.processInteractive(a,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",a),"touch"===n.pointerType&&this.emit("touchmove",a),"mouse"!==n.pointerType&&"pen"!==n.pointerType||this.emit("mousemove",a)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(t,e,i){var r=t.data,n="touch"===r.pointerType,o="mouse"===r.pointerType||"pen"===r.pointerType;o&&this.processPointerOverOut(t,e,i),this.moveWhenInside&&!i||(this.dispatchEvent(e,"pointermove",t),n&&this.dispatchEvent(e,"touchmove",t),o&&this.dispatchEvent(e,"mousemove",t))},e.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t)[0];"mouse"===e.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var i=this.getInteractionDataForPointerId(e),r=this.configureInteractionEventForDOMEvent(this.eventData,e,i);r.data.originalEvent=e,this.processInteractive(r,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",r),"mouse"===e.pointerType||"pen"===e.pointerType?this.emit("mouseout",r):this.releaseInteractionDataForPointerId(i.identifier)}},e.prototype.processPointerOverOut=function(t,e,i){var r=t.data,n=t.data.identifier,o="mouse"===r.pointerType||"pen"===r.pointerType,a=e.trackedPointers[n];i&&!a&&(a=e.trackedPointers[n]=new kn(n)),void 0!==a&&(i&&this.mouseOverRenderer?(a.over||(a.over=!0,this.delayDispatchEvent(e,"pointerover",t),o&&this.delayDispatchEvent(e,"mouseover",t)),o&&null===this.cursor&&(this.cursor=e.cursor)):a.over&&(a.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),o&&this.dispatchEvent(e,"mouseout",t),a.none&&delete e.trackedPointers[n]))},e.prototype.onPointerOver=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t)[0],i=this.getInteractionDataForPointerId(e),r=this.configureInteractionEventForDOMEvent(this.eventData,e,i);r.data.originalEvent=e,"mouse"===e.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",r),"mouse"!==e.pointerType&&"pen"!==e.pointerType||this.emit("mouseover",r)}},e.prototype.getInteractionDataForPointerId=function(t){var e,i=t.pointerId;return 1===i||"mouse"===t.pointerType?e=this.mouse:this.activeInteractionData[i]?e=this.activeInteractionData[i]:((e=this.interactionDataPool.pop()||new Ln).identifier=i,this.activeInteractionData[i]=e),e.copyEvent(t),e},e.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e.reset(),this.interactionDataPool.push(e))},e.prototype.configureInteractionEventForDOMEvent=function(t,e,i){return t.data=i,this.mapPositionToPoint(i.global,e.clientX,e.clientY),"touch"===e.pointerType&&(e.globalX=i.global.x,e.globalY=i.global.y),i.originalEvent=e,t.reset(),t},e.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var i=0,r=t.changedTouches.length;i<r;i++){var n=t.changedTouches[i];void 0===n.button&&(n.button=t.touches.length?1:0),void 0===n.buttons&&(n.buttons=t.touches.length?1:0),void 0===n.isPrimary&&(n.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===n.width&&(n.width=n.radiusX||1),void 0===n.height&&(n.height=n.radiusY||1),void 0===n.tiltX&&(n.tiltX=0),void 0===n.tiltY&&(n.tiltY=0),void 0===n.pointerType&&(n.pointerType="touch"),void 0===n.pointerId&&(n.pointerId=n.identifier||0),void 0===n.pressure&&(n.pressure=n.force||.5),void 0===n.twist&&(n.twist=0),void 0===n.tangentialPressure&&(n.tangentialPressure=0),void 0===n.layerX&&(n.layerX=n.offsetX=n.clientX),void 0===n.layerY&&(n.layerY=n.offsetY=n.clientY),n.isNormalized=!0,e.push(n)}else if(!globalThis.MouseEvent||t instanceof MouseEvent&&!(this.supportsPointerEvents&&t instanceof globalThis.PointerEvent)){var o=t;void 0===o.isPrimary&&(o.isPrimary=!0),void 0===o.width&&(o.width=1),void 0===o.height&&(o.height=1),void 0===o.tiltX&&(o.tiltX=0),void 0===o.tiltY&&(o.tiltY=0),void 0===o.pointerType&&(o.pointerType="mouse"),void 0===o.pointerId&&(o.pointerId=1),void 0===o.pressure&&(o.pressure=.5),void 0===o.twist&&(o.twist=0),void 0===o.tangentialPressure&&(o.tangentialPressure=0),o.isNormalized=!0,e.push(o)}else e.push(t);return e},e.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},e.extension={name:"interaction",type:[li.RendererPlugin,li.CanvasRendererPlugin]},e}(Lt),Vn=new ge,Yn=function(){function t(t){this.renderer=t}return t.prototype.image=function(t,e,i){var r=new Image;return r.src=this.base64(t,e,i),r},t.prototype.base64=function(t,e,i){return this.canvas(t).toDataURL(e,i)},t.prototype.canvas=function(e,i){var r,n,o=this.renderer,a=!1,s=!1;e&&(e instanceof Wi?n=e:(n=this.renderer.generateTexture(e),s=!0)),n?(r=n.baseTexture.resolution,i=null!=i?i:n.frame,a=!1,o.renderTexture.bind(n)):(r=o.resolution,i||((i=Vn).width=o.width,i.height=o.height),a=!0,o.renderTexture.bind(null));var p=Math.round(i.width*r),l=Math.round(i.height*r),m=new he(p,l,1),y=new Uint8Array(4*p*l),h=o.gl;h.readPixels(Math.round(i.x*r),Math.round(i.y*r),p,l,h.RGBA,h.UNSIGNED_BYTE,y);var u=m.context.getImageData(0,0,p,l);if(t.arrayPostDivide(y,u.data),m.context.putImageData(u,0,0),a){var E=new he(m.width,m.height,1);E.context.scale(1,-1),E.context.drawImage(m.canvas,0,-l),m.destroy(),m=E}return s&&n.destroy(!0),m.canvas},t.prototype.pixels=function(e,i){var r,n,o=this.renderer,a=!1;e&&(e instanceof Wi?n=e:(n=this.renderer.generateTexture(e),a=!0)),n?(r=n.baseTexture.resolution,i=null!=i?i:n.frame,o.renderTexture.bind(n)):(r=o.resolution,i||((i=Vn).width=o.width,i.height=o.height),o.renderTexture.bind(null));var s=Math.round(i.width*r),p=Math.round(i.height*r),l=new Uint8Array(4*s*p),m=o.gl;return m.readPixels(Math.round(i.x*r),Math.round(i.y*r),s,p,m.RGBA,m.UNSIGNED_BYTE,l),a&&n.destroy(!0),t.arrayPostDivide(l,l),l},t.prototype.destroy=function(){this.renderer=null},t.arrayPostDivide=function(t,e){for(var i=0;i<t.length;i+=4){var r=e[i+3]=t[i+3];0!==r?(e[i]=Math.round(Math.min(255*t[i]/r,255)),e[i+1]=Math.round(Math.min(255*t[i+1]/r,255)),e[i+2]=Math.round(Math.min(255*t[i+2]/r,255))):(e[i]=t[i],e[i+1]=t[i+1],e[i+2]=t[i+2])}},t.extension={name:"extract",type:li.RendererPlugin},t}(),zn=function(){function t(t,e,i){void 0===e&&(e=!1),this._fn=t,this._once=e,this._thisArg=i,this._next=this._prev=this._owner=null}return t.prototype.detach=function(){return null!==this._owner&&(this._owner.detach(this),!0)},t}();function qn(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}var Kn,Zn=function(){function t(){this._head=this._tail=void 0}return t.prototype.handlers=function(t){void 0===t&&(t=!1);var e=this._head;if(t)return!!e;for(var i=[];e;)i.push(e),e=e._next;return i},t.prototype.has=function(t){if(!(t instanceof zn))throw new Error("MiniSignal#has(): First arg must be a SignalBinding object.");return t._owner===this},t.prototype.dispatch=function(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];var r=this._head;if(!r)return!1;for(;r;)r._once&&this.detach(r),r._fn.apply(r._thisArg,e),r=r._next;return!0},t.prototype.add=function(t,e){if(void 0===e&&(e=null),"function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return qn(this,new zn(t,!1,e))},t.prototype.once=function(t,e){if(void 0===e&&(e=null),"function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return qn(this,new zn(t,!0,e))},t.prototype.detach=function(t){if(!(t instanceof zn))throw new Error("MiniSignal#detach(): First arg must be a SignalBinding object.");return t._owner!==this||(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null),this},t.prototype.detachAll=function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this},t}();function Qn(t,e){e=e||{};for(var i={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=i.parser[e.strictMode?"strict":"loose"].exec(t),n={},o=14;o--;)n[i.key[o]]=r[o]||"";return n[i.q.name]={},n[i.key[12]].replace(i.q.parser,(function(t,e,r){e&&(n[i.q.name][e]=r)})),n}var Jn=null;function $n(){}function to(t,e,i){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=i)}function eo(t){return t.toString().replace("object ","")}var io=function(){function t(e,i,r){if(this._dequeue=$n,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=null,this._boundOnError=null,this._boundOnProgress=null,this._boundOnTimeout=null,this._boundXhrOnError=null,this._boundXhrOnTimeout=null,this._boundXhrOnAbort=null,this._boundXhrOnLoad=null,"string"!=typeof e||"string"!=typeof i)throw new Error("Both name and url are required for constructing a resource.");r=r||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,0===i.indexOf("data:")),this.name=e,this.url=i,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===r.crossOrigin?"anonymous":r.crossOrigin,this.timeout=r.timeout||0,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.metadata=r.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=$n,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new Zn,this.onProgress=new Zn,this.onComplete=new Zn,this.onAfterMiddleware=new Zn}return t.setExtensionLoadType=function(e,i){to(t._loadTypeMap,e,i)},t.setExtensionXhrType=function(e,i){to(t._xhrTypeMap,e,i)},Object.defineProperty(t.prototype,"isDataUrl",{get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isComplete",{get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLoading",{get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)},enumerable:!1,configurable:!0}),t.prototype.complete=function(){this._clearEvents(),this._finish()},t.prototype.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},t.prototype.load=function(e){var i=this;if(!this.isLoading)if(this.isComplete)e&&setTimeout((function(){return e(i)}),1);else switch(e&&this.onComplete.once(e),this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:void 0===Kn&&(Kn=!(!globalThis.XDomainRequest||"withCredentials"in new XMLHttpRequest)),Kn&&this.crossOrigin?this._loadXdr():this._loadXhr()}},t.prototype._hasFlag=function(t){return 0!=(this._flags&t)},t.prototype._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},t.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},t.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t.prototype._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&void 0!==globalThis.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t.prototype._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&void 0!==globalThis.Audio?this.data=new Audio:this.data=document.createElement(t),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,i=0;i<this.url.length;++i)this.data.appendChild(this._createSource(t,this.url[i],Array.isArray(e)?e[i]:e));else e=this.metadata.mimeType,this.data.appendChild(this._createSource(t,this.url,Array.isArray(e)?e[0]:e));this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+t)},t.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;"use-credentials"===this.crossOrigin&&(e.withCredentials=!0),e.open("GET",this.url,!0),e.timeout=this.timeout,this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=t.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},t.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new globalThis.XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout((function(){return t.send()}),1)},t.prototype._createSource=function(t,e,i){i||(i=t+"/"+this._getExtension(e));var r=document.createElement("source");return r.src=e,r.type=i,r},t.prototype._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},t.prototype._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},t.prototype._onTimeout=function(){this.abort("Load timed out.")},t.prototype._xhrOnError=function(){var t=this.xhr;this.abort(eo(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},t.prototype._xhrOnTimeout=function(){var t=this.xhr;this.abort(eo(t)+" Request timed out.")},t.prototype._xhrOnAbort=function(){var t=this.xhr;this.abort(eo(t)+" Request was aborted by the user.")},t.prototype._xhrOnLoad=function(){var e=this.xhr,i="",r=void 0===e.status?200:e.status;if(""!==e.responseType&&"text"!==e.responseType&&void 0!==e.responseType||(i=e.responseText),0===r&&(i.length>0||e.responseType===t.XHR_RESPONSE_TYPE.BUFFER)?r=200:1223===r&&(r=204),2==(r/100|0)){if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=i,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(i),this.type=t.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(globalThis.DOMParser){var n=new DOMParser;this.data=n.parseFromString(i,"text/xml")}else{var o=document.createElement("div");o.innerHTML=i,this.data=o}this.type=t.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=e.response||i;this.complete()}else this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL)},t.prototype._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";if(globalThis.origin!==globalThis.location.origin)return"anonymous";e=e||globalThis.location,Jn||(Jn=document.createElement("a")),Jn.href=t;var i=Qn(Jn.href,{strictMode:!0}),r=!i.port&&""===e.port||i.port===e.port,n=i.protocol?i.protocol+":":"";return i.host===e.hostname&&r&&n===e.protocol?"":"anonymous"},t.prototype._determineXhrType=function(){return t._xhrTypeMap[this.extension]||t.XHR_RESPONSE_TYPE.TEXT},t.prototype._determineLoadType=function(){return t._loadTypeMap[this.extension]||t.LOAD_TYPE.XHR},t.prototype._getExtension=function(t){void 0===t&&(t=this.url);var e="";if(this.isDataUrl){var i=t.indexOf("/");e=t.substring(i+1,t.indexOf(";",i))}else{var r=t.indexOf("?"),n=t.indexOf("#"),o=Math.min(r>-1?r:t.length,n>-1?n:t.length);e=(t=t.substring(0,o)).substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},t.prototype._getMimeFromXhrType=function(e){switch(e){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},t}();function ro(){}function no(t){return function(){for(var e=arguments,i=[],r=0;r<arguments.length;r++)i[r]=e[r];if(null===t)throw new Error("Callback was already called.");var n=t;t=null,n.apply(this,i)}}!function(t){var e,i,r,n;(e=t.STATUS_FLAGS||(t.STATUS_FLAGS={}))[e.NONE=0]="NONE",e[e.DATA_URL=1]="DATA_URL",e[e.COMPLETE=2]="COMPLETE",e[e.LOADING=4]="LOADING",(i=t.TYPE||(t.TYPE={}))[i.UNKNOWN=0]="UNKNOWN",i[i.JSON=1]="JSON",i[i.XML=2]="XML",i[i.IMAGE=3]="IMAGE",i[i.AUDIO=4]="AUDIO",i[i.VIDEO=5]="VIDEO",i[i.TEXT=6]="TEXT",(r=t.LOAD_TYPE||(t.LOAD_TYPE={}))[r.XHR=1]="XHR",r[r.IMAGE=2]="IMAGE",r[r.AUDIO=3]="AUDIO",r[r.VIDEO=4]="VIDEO",(n=t.XHR_RESPONSE_TYPE||(t.XHR_RESPONSE_TYPE={})).DEFAULT="text",n.BUFFER="arraybuffer",n.BLOB="blob",n.DOCUMENT="document",n.JSON="json",n.TEXT="text",t._loadTypeMap={gif:t.LOAD_TYPE.IMAGE,png:t.LOAD_TYPE.IMAGE,bmp:t.LOAD_TYPE.IMAGE,jpg:t.LOAD_TYPE.IMAGE,jpeg:t.LOAD_TYPE.IMAGE,tif:t.LOAD_TYPE.IMAGE,tiff:t.LOAD_TYPE.IMAGE,webp:t.LOAD_TYPE.IMAGE,tga:t.LOAD_TYPE.IMAGE,svg:t.LOAD_TYPE.IMAGE,"svg+xml":t.LOAD_TYPE.IMAGE,mp3:t.LOAD_TYPE.AUDIO,ogg:t.LOAD_TYPE.AUDIO,wav:t.LOAD_TYPE.AUDIO,mp4:t.LOAD_TYPE.VIDEO,webm:t.LOAD_TYPE.VIDEO},t._xhrTypeMap={xhtml:t.XHR_RESPONSE_TYPE.DOCUMENT,html:t.XHR_RESPONSE_TYPE.DOCUMENT,htm:t.XHR_RESPONSE_TYPE.DOCUMENT,xml:t.XHR_RESPONSE_TYPE.DOCUMENT,tmx:t.XHR_RESPONSE_TYPE.DOCUMENT,svg:t.XHR_RESPONSE_TYPE.DOCUMENT,tsx:t.XHR_RESPONSE_TYPE.DOCUMENT,gif:t.XHR_RESPONSE_TYPE.BLOB,png:t.XHR_RESPONSE_TYPE.BLOB,bmp:t.XHR_RESPONSE_TYPE.BLOB,jpg:t.XHR_RESPONSE_TYPE.BLOB,jpeg:t.XHR_RESPONSE_TYPE.BLOB,tif:t.XHR_RESPONSE_TYPE.BLOB,tiff:t.XHR_RESPONSE_TYPE.BLOB,webp:t.XHR_RESPONSE_TYPE.BLOB,tga:t.XHR_RESPONSE_TYPE.BLOB,json:t.XHR_RESPONSE_TYPE.JSON,text:t.XHR_RESPONSE_TYPE.TEXT,txt:t.XHR_RESPONSE_TYPE.TEXT,ttf:t.XHR_RESPONSE_TYPE.BUFFER,otf:t.XHR_RESPONSE_TYPE.BUFFER},t.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="}(io||(io={}));var oo=function(t,e){this.data=t,this.callback=e},ao=function(){function t(t,e){var i=this;if(void 0===e&&(e=1),this.workers=0,this.saturated=ro,this.unsaturated=ro,this.empty=ro,this.drain=ro,this.error=ro,this.started=!1,this.paused=!1,this._tasks=[],this._insert=function(t,e,r){if(r&&"function"!=typeof r)throw new Error("task callback must be a function");if(i.started=!0,null==t&&i.idle())setTimeout((function(){return i.drain()}),1);else{var n=new oo(t,"function"==typeof r?r:ro);e?i._tasks.unshift(n):i._tasks.push(n),setTimeout(i.process,1)}},this.process=function(){for(;!i.paused&&i.workers<i.concurrency&&i._tasks.length;){var t=i._tasks.shift();0===i._tasks.length&&i.empty(),i.workers+=1,i.workers===i.concurrency&&i.saturated(),i._worker(t.data,no(i._next(t)))}},this._worker=t,0===e)throw new Error("Concurrency must not be zero");this.concurrency=e,this.buffer=e/4}return t.prototype._next=function(t){var e=this;return function(){for(var i=arguments,r=[],n=0;n<arguments.length;n++)r[n]=i[n];e.workers-=1,t.callback.apply(t,r),null!=r[0]&&e.error(r[0],t.data),e.workers<=e.concurrency-e.buffer&&e.unsaturated(),e.idle()&&e.drain(),e.process()}},t.prototype.push=function(t,e){this._insert(t,!1,e)},t.prototype.kill=function(){this.workers=0,this.drain=ro,this.started=!1,this._tasks=[]},t.prototype.unshift=function(t,e){this._insert(t,!0,e)},t.prototype.length=function(){return this._tasks.length},t.prototype.running=function(){return this.workers},t.prototype.idle=function(){return this._tasks.length+this.workers===0},t.prototype.pause=function(){!0!==this.paused&&(this.paused=!0)},t.prototype.resume=function(){if(!1!==this.paused){this.paused=!1;for(var t=1;t<=this.concurrency;t++)this.process()}},t.eachSeries=function(t,e,i,r){var n=0,o=t.length;!function a(s){s||n===o?i&&i(s):r?setTimeout((function(){e(t[n++],a)}),1):e(t[n++],a)}()},t.queue=function(e,i){return new t(e,i)},t}(),so=/(#[\w-]+)?$/,po=function(){function t(e,i){var r=this;void 0===e&&(e=""),void 0===i&&(i=10),this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,e){return r._loadResource(t,e)},this.resources={},this.baseUrl=e,this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,e){return r._loadResource(t,e)},this._queue=ao.queue(this._boundLoadResource,i),this._queue.pause(),this.resources={},this.onProgress=new Zn,this.onError=new Zn,this.onLoad=new Zn,this.onStart=new Zn,this.onComplete=new Zn;for(var n=0;n<t._plugins.length;++n){var o=t._plugins[n],a=o.pre,s=o.use;a&&this.pre(a),s&&this.use(s)}this._protected=!1}return t.prototype._add=function(t,e,i,r){if(this.loading&&(!i||!i.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new io(t,e,i),"function"==typeof r&&this.resources[t].onAfterMiddleware.once(r),this.loading){for(var n=i.parentResource,o=[],a=0;a<n.children.length;++a)n.children[a].isComplete||o.push(n.children[a]);var s=n.progressChunk*(o.length+1)/(o.length+2);for(n.children.push(this.resources[t]),n.progressChunk=s,a=0;a<o.length;++a)o[a].progressChunk=s;this.resources[t].progressChunk=s}return this._queue.push(this.resources[t]),this},t.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},t.prototype.use=function(t){return this._afterMiddleware.push(t),this},t.prototype.reset=function(){for(var t in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort("loader reset")}return this.resources={},this},t.prototype.load=function(t){if(se("6.5.0","@pixi/loaders is being replaced with @pixi/assets in the next major release."),"function"==typeof t&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=100/this._queue._tasks.length,i=0;i<this._queue._tasks.length;++i)this._queue._tasks[i].data.progressChunk=e;this._onStart(),this._queue.resume()}return this},Object.defineProperty(t.prototype,"concurrency",{get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t},enumerable:!1,configurable:!0}),t.prototype._prepareUrl=function(t){var e,i=Qn(t,{strictMode:!0});if(e=i.protocol||!i.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString){var r=so.exec(e)[0];-1!==(e=e.slice(0,e.length-r.length)).indexOf("?")?e+="&"+this.defaultQueryString:e+="?"+this.defaultQueryString,e+=r}return e},t.prototype._loadResource=function(t,e){var i=this;t._dequeue=e,ao.eachSeries(this._beforeMiddleware,(function(e,r){e.call(i,t,(function(){r(t.isComplete?{}:null)}))}),(function(){t.isComplete?i._onLoad(t):(t._onLoadBinding=t.onComplete.once(i._onLoad,i),t.load())}),!0)},t.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},t.prototype._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},t.prototype._onLoad=function(t){var e=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),ao.eachSeries(this._afterMiddleware,(function(i,r){i.call(e,t,r)}),(function(){t.onAfterMiddleware.dispatch(t),e.progress=Math.min(100,e.progress+t.progressChunk),e.onProgress.dispatch(e,t),t.error?e.onError.dispatch(t.error,e,t):e.onLoad.dispatch(e,t),e._resourcesParsing.splice(e._resourcesParsing.indexOf(t),1),e._queue.idle()&&0===e._resourcesParsing.length&&e._onComplete()}),!0)},t.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(t,"shared",{get:function(){var e=t._shared;return e||((e=new t)._protected=!0,t._shared=e),e},enumerable:!1,configurable:!0}),t.registerPlugin=function(e){return se("6.5.0","Loader.registerPlugin() is deprecated, use extensions.add() instead."),ui.add({type:li.Loader,ref:e}),t},t._plugins=[],t}();ui.handleByList(li.Loader,po._plugins),po.prototype.add=function(t,e,i,r){if(Array.isArray(t)){for(var n=0;n<t.length;++n)this.add(t[n]);return this}if("object"==typeof t&&(i=t,r=e||i.callback||i.onComplete,e=i.url,t=i.name||i.key||i.url),"string"!=typeof e&&(r=i,i=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");return"function"==typeof i&&(r=i,i=null),this._add(t,e,i,r)};var lo=function(){function t(){}return t.init=function(t){t=Object.assign({sharedLoader:!1},t),this.loader=t.sharedLoader?po.shared:new po},t.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},t.extension=li.Application,t}(),mo=function(){function t(){}return t.add=function(){io.setExtensionLoadType("svg",io.LOAD_TYPE.XHR),io.setExtensionXhrType("svg",io.XHR_RESPONSE_TYPE.TEXT)},t.use=function(t,e){if(!t.data||t.type!==io.TYPE.IMAGE&&"svg"!==t.extension)e();else{var i=t.data,r=t.url,n=t.name,o=t.metadata;ji.fromLoader(i,r,n,o).then((function(i){t.texture=i,e()})).catch(e)}},t.extension=li.Loader,t}();function yo(t,e){if(t.data){if(t.xhr&&t.xhrType===io.XHR_RESPONSE_TYPE.BLOB)if(self.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var i=globalThis.URL||globalThis.webkitURL,r=i.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=r,t.type=io.TYPE.IMAGE,void(t.data.onload=function(){i.revokeObjectURL(r),t.data.onload=null,e()})}}else{var n=t.xhr.getResponseHeader("content-type");if(n&&0===n.indexOf("image"))return t.data=new Image,t.data.src="data:"+n+";base64,"+function(t){for(var e="",i=0;i<t.length;){for(var r=[0,0,0],n=[0,0,0,0],o=0;o<r.length;++o)i<t.length?r[o]=255&t.charCodeAt(i++):r[o]=0;switch(n[0]=r[0]>>2,n[1]=(3&r[0])<<4|r[1]>>4,n[2]=(15&r[1])<<2|r[2]>>6,n[3]=63&r[2],i-(t.length-1)){case 2:n[3]=64,n[2]=64;break;case 1:n[3]=64}for(o=0;o<n.length;++o)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(n[o])}return e}(t.xhr.responseText),t.type=io.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}else e()}var ho,uo,Eo=function(){function t(){}return t.extension=li.Loader,t.use=yo,t}();ui.add(mo,Eo),function(t){t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR"}(uo||(uo={}));var co=((ho={})[uo.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,ho[uo.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,ho[uo.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,ho[uo.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,ho[uo.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,ho[uo.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,ho[uo.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,ho[uo.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,ho[uo.COMPRESSED_R11_EAC]=.5,ho[uo.COMPRESSED_SIGNED_R11_EAC]=.5,ho[uo.COMPRESSED_RG11_EAC]=1,ho[uo.COMPRESSED_SIGNED_RG11_EAC]=1,ho[uo.COMPRESSED_RGB8_ETC2]=.5,ho[uo.COMPRESSED_RGBA8_ETC2_EAC]=1,ho[uo.COMPRESSED_SRGB8_ETC2]=.5,ho[uo.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,ho[uo.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,ho[uo.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,ho[uo.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,ho[uo.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,ho[uo.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,ho[uo.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,ho[uo.COMPRESSED_RGB_ETC1_WEBGL]=.5,ho[uo.COMPRESSED_RGB_ATC_WEBGL]=.5,ho[uo.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,ho[uo.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,ho[uo.COMPRESSED_RGBA_ASTC_4x4_KHR]=1,ho),fo=function(t,e){return fo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},fo(t,e)};function _o(t,e){function i(){this.constructor=t}fo(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var vo,go,To=function(t){function e(e,i){void 0===i&&(i={width:1,height:1,autoLoad:!0});var r,n,o=this;return"string"==typeof e?(r=e,n=new Uint8Array):(r=null,n=e),(o=t.call(this,n,i)||this).origin=r,o.buffer=n?new xn(n):null,o.origin&&!1!==i.autoLoad&&o.load(),n&&n.length&&(o.loaded=!0,o.onBlobLoaded(o.buffer.rawBinaryData)),o}return _o(e,t),e.prototype.onBlobLoaded=function(t){},e.prototype.load=function(){return t=this,e=void 0,r=function(){var t;return function(t,e){var i,r,n,o,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,r&&(n=2&o[0]?r.return:o[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,o[1])).done)return n;switch(r=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((n=(n=a.trys).length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){a.label=o[1];break}if(6===o[0]&&a.label<n[1]){a.label=n[1],n=o;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(o);break}n[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{i=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(e){switch(e.label){case 0:return[4,fetch(this.origin)];case 1:return[4,e.sent().blob()];case 2:return[4,e.sent().arrayBuffer()];case 3:return t=e.sent(),this.data=new Uint32Array(t),this.buffer=new xn(t),this.loaded=!0,this.onBlobLoaded(t),this.update(),[2,this]}}))},new((i=Promise)||(i=Promise))((function(n,o){function a(t){try{p(r.next(t))}catch(t){o(t)}}function s(t){try{p(r.throw(t))}catch(t){o(t)}}function p(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}p((r=r.apply(t,e||[])).next())}));var t,e,i,r},e}(Si),bo=function(t){function e(i,r){var n=t.call(this,i,r)||this;return n.format=r.format,n.levels=r.levels||1,n._width=r.width,n._height=r.height,n._extension=e._formatToExtension(n.format),(r.levelBuffers||n.buffer)&&(n._levelBuffers=r.levelBuffers||e._createLevelBuffers(i instanceof Uint8Array?i:n.buffer.uint8View,n.format,n.levels,4,4,n.width,n.height)),n}return _o(e,t),e.prototype.upload=function(t,e,i){var r=t.gl;if(!t.context.extensions[this._extension])throw new Error(this._extension+" textures are not supported on the current machine");if(!this._levelBuffers)return!1;for(var n=0,o=this.levels;n<o;n++){var a=this._levelBuffers[n],s=a.levelID,p=a.levelWidth,l=a.levelHeight,m=a.levelBuffer;r.compressedTexImage2D(r.TEXTURE_2D,s,this.format,p,l,0,m)}return!0},e.prototype.onBlobLoaded=function(){this._levelBuffers=e._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},e._formatToExtension=function(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t>=36196)return"etc1";if(t>=35986&&t<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")},e._createLevelBuffers=function(t,e,i,r,n,o,a){for(var s=new Array(i),p=t.byteOffset,l=o,m=a,y=l+r-1&~(r-1),h=m+n-1&~(n-1),u=y*h*co[e],E=0;E<i;E++)s[E]={levelID:E,levelWidth:i>1?l:y,levelHeight:i>1?m:h,levelBuffer:new Uint8Array(t.buffer,p,u)},p+=u,u=(y=(l=l>>1||1)+r-1&~(r-1))*(h=(m=m>>1||1)+n-1&~(n-1))*co[e];return s},e}(To),xo=function(){function t(){}return t.use=function(e,i){var r=e.data;if(e.type===io.TYPE.JSON&&r&&r.cacheID&&r.textures){for(var n=r.textures,o=void 0,a=void 0,s=0,p=n.length;s<p;s++){var l=n[s],m=l.src,y=l.format;if(y||(a=m),t.textureFormats[y]){o=m;break}}if(!(o=o||a))return void i(new Error("Cannot load compressed-textures in "+e.url+", make sure you provide a fallback"));if(o===e.url)return void i(new Error("URL of compressed texture cannot be the same as the manifest's URL"));var h={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},u=kt.resolve(e.url.replace(this.baseUrl,""),o),E=r.cacheID;this.add(E,u,h,(function(t){if(t.error)i(t.error);else{var r=t.texture,n=void 0===r?null:r,o=t.textures,a=void 0===o?{}:o;Object.assign(e,{texture:n,textures:a}),i()}}))}else i()},Object.defineProperty(t,"textureExtensions",{get:function(){if(!t._textureExtensions){var e=Dt.ADAPTER.createCanvas().getContext("webgl");if(!e)return console.warn("WebGL not available for compressed textures. Silently failing."),{};var i={s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};t._textureExtensions=i}return t._textureExtensions},enumerable:!1,configurable:!0}),Object.defineProperty(t,"textureFormats",{get:function(){if(!t._textureFormats){var e=t.textureExtensions;for(var i in t._textureFormats={},e){var r=e[i];r&&Object.assign(t._textureFormats,Object.getPrototypeOf(r))}}return t._textureFormats},enumerable:!1,configurable:!0}),t.extension=li.Loader,t}();function So(t,e,i){var r={textures:{},texture:null};return e?(e.map((function(t){return new ji(new Ii(t,Object.assign({mipmap:lt.OFF,alphaMode:mt.NO_PREMULTIPLIED_ALPHA},i)))})).forEach((function(e,i){var n=e.baseTexture,o=t+"-"+(i+1);Ii.addToCache(n,o),ji.addToCache(e,o),0===i&&(Ii.addToCache(n,t),ji.addToCache(e,t),r.texture=e),r.textures[o]=e})),r):r}var Ro,Io;!function(t){t[t.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",t[t.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",t[t.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",t[t.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",t[t.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",t[t.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",t[t.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",t[t.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",t[t.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",t[t.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",t[t.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",t[t.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",t[t.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",t[t.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",t[t.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",t[t.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",t[t.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",t[t.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",t[t.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",t[t.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",t[t.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",t[t.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",t[t.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",t[t.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",t[t.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",t[t.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",t[t.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",t[t.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",t[t.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",t[t.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",t[t.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",t[t.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",t[t.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",t[t.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",t[t.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",t[t.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",t[t.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",t[t.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",t[t.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",t[t.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",t[t.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",t[t.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",t[t.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",t[t.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",t[t.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",t[t.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",t[t.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",t[t.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",t[t.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",t[t.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",t[t.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",t[t.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",t[t.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",t[t.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",t[t.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",t[t.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",t[t.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",t[t.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",t[t.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",t[t.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",t[t.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",t[t.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",t[t.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",t[t.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",t[t.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",t[t.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",t[t.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",t[t.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",t[t.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",t[t.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",t[t.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",t[t.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",t[t.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",t[t.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",t[t.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",t[t.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",t[t.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",t[t.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",t[t.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",t[t.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",t[t.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",t[t.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",t[t.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",t[t.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",t[t.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",t[t.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",t[t.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",t[t.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",t[t.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",t[t.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",t[t.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",t[t.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",t[t.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",t[t.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",t[t.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",t[t.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",t[t.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",t[t.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",t[t.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",t[t.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",t[t.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",t[t.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",t[t.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",t[t.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",t[t.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",t[t.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",t[t.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",t[t.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",t[t.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",t[t.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",t[t.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",t[t.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT"}(Ro||(Ro={})),function(t){t[t.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",t[t.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",t[t.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D"}(Io||(Io={}));var Ao,Mo,Co,Fo=((vo={})[827611204]=uo.COMPRESSED_RGBA_S3TC_DXT1_EXT,vo[861165636]=uo.COMPRESSED_RGBA_S3TC_DXT3_EXT,vo[894720068]=uo.COMPRESSED_RGBA_S3TC_DXT5_EXT,vo),No=((go={})[Ro.DXGI_FORMAT_BC1_TYPELESS]=uo.COMPRESSED_RGBA_S3TC_DXT1_EXT,go[Ro.DXGI_FORMAT_BC1_UNORM]=uo.COMPRESSED_RGBA_S3TC_DXT1_EXT,go[Ro.DXGI_FORMAT_BC2_TYPELESS]=uo.COMPRESSED_RGBA_S3TC_DXT3_EXT,go[Ro.DXGI_FORMAT_BC2_UNORM]=uo.COMPRESSED_RGBA_S3TC_DXT3_EXT,go[Ro.DXGI_FORMAT_BC3_TYPELESS]=uo.COMPRESSED_RGBA_S3TC_DXT5_EXT,go[Ro.DXGI_FORMAT_BC3_UNORM]=uo.COMPRESSED_RGBA_S3TC_DXT5_EXT,go[Ro.DXGI_FORMAT_BC1_UNORM_SRGB]=uo.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,go[Ro.DXGI_FORMAT_BC2_UNORM_SRGB]=uo.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,go[Ro.DXGI_FORMAT_BC3_UNORM_SRGB]=uo.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,go),Oo=[171,75,84,88,32,49,49,187,13,10,26,10],wo=((Ao={})[ot.UNSIGNED_BYTE]=1,Ao[ot.UNSIGNED_SHORT]=2,Ao[ot.INT]=4,Ao[ot.UNSIGNED_INT]=4,Ao[ot.FLOAT]=4,Ao[ot.HALF_FLOAT]=8,Ao),Po=((Mo={})[rt.RGBA]=4,Mo[rt.RGB]=3,Mo[rt.RG]=2,Mo[rt.RED]=1,Mo[rt.LUMINANCE]=1,Mo[rt.LUMINANCE_ALPHA]=2,Mo[rt.ALPHA]=1,Mo),Go=((Co={})[ot.UNSIGNED_SHORT_4_4_4_4]=2,Co[ot.UNSIGNED_SHORT_5_5_5_1]=2,Co[ot.UNSIGNED_SHORT_5_6_5]=2,Co);function Do(t){switch(t){case rt.RGBA:return rt.RGBA_INTEGER;case rt.RGB:return rt.RGB_INTEGER;case rt.RG:return rt.RG_INTEGER;case rt.RED:return rt.RED_INTEGER;default:return t}}io.setExtensionXhrType("dds",io.XHR_RESPONSE_TYPE.BUFFER);var Lo=function(){function t(){}return t.use=function(t,e){if("dds"===t.extension&&t.data)try{Object.assign(t,So(t.name||t.url,function(t){var e=new Uint32Array(t);if(542327876!==e[0])throw new Error("Invalid DDS file magic word");var i=new Uint32Array(t,0,124/Uint32Array.BYTES_PER_ELEMENT),r=i[3],n=i[4],o=i[7],a=new Uint32Array(t,19*Uint32Array.BYTES_PER_ELEMENT,32/Uint32Array.BYTES_PER_ELEMENT),s=a[1];if(4&s){var p=a[2];if(808540228!==p){var l=Fo[p],m=new Uint8Array(t,128);return[new bo(m,{format:l,width:n,height:r,levels:o})]}var y=new Uint32Array(e.buffer,128,20/Uint32Array.BYTES_PER_ELEMENT),h=y[0],u=y[1],E=y[2],c=y[3],d=No[h];if(void 0===d)throw new Error("DDSParser cannot parse texture data with DXGI format "+h);if(4===E)throw new Error("DDSParser does not support cubemap textures");if(u===Io.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSParser does not supported 3D texture data");var f=new Array;if(1===c)f.push(new Uint8Array(t,148));else{for(var _=co[d],v=0,g=n,T=r,b=0;b<o;b++)v+=Math.max(1,g+3&-4)*Math.max(1,T+3&-4)*_,g>>>=1,T>>>=1;var x=148;for(b=0;b<c;b++)f.push(new Uint8Array(t,x,v)),x+=v}return f.map((function(t){return new bo(t,{format:d,width:n,height:r,levels:o})}))}if(64&s)throw new Error("DDSParser does not support uncompressed texture data.");if(512&s)throw new Error("DDSParser does not supported YUV uncompressed texture data.");if(131072&s)throw new Error("DDSParser does not support single-channel (lumninance) texture data!");if(2&s)throw new Error("DDSParser does not support single-channel (alpha) texture data!");throw new Error("DDSParser failed to load a texture file due to an unknown reason!")}(t.data),t.metadata))}catch(t){return void e(t)}e()},t.extension=li.Loader,t}();io.setExtensionXhrType("ktx",io.XHR_RESPONSE_TYPE.BUFFER);var Uo=function(){function t(){}return t.use=function(t,e){if("ktx"===t.extension&&t.data)try{var i=t.name||t.url,r=function(t,e,i){void 0===i&&(i=!1);var r=new DataView(e);if(!function(t,e){for(var i=0;i<Oo.length;i++)if(e.getUint8(i)!==Oo[i])return console.error(t+" is not a valid *.ktx file!"),!1;return!0}(t,r))return null;var n=67305985===r.getUint32(12,!0),o=r.getUint32(16,n),a=r.getUint32(24,n),s=r.getUint32(28,n),p=r.getUint32(36,n),l=r.getUint32(40,n)||1,m=r.getUint32(44,n)||1,y=r.getUint32(48,n)||1,h=r.getUint32(52,n),u=r.getUint32(56,n),E=r.getUint32(60,n);if(0===l||1!==m)throw new Error("Only 2D textures are supported");if(1!==h)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(1!==y)throw new Error("WebGL does not support array textures");var c,d=p+3&-4,f=l+3&-4,_=new Array(y),v=p*l;if(0===o&&(v=d*f),void 0===(c=0!==o?wo[o]?wo[o]*Po[a]:Go[o]:co[s]))throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var g=i?function(t,e,i){for(var r=new Map,n=0;n<e;){var o=t.getUint32(64+n,i),a=64+n+4,s=3-(o+3)%4;if(0===o||o>e-n){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}for(var p=0;p<o&&0!==t.getUint8(a+p);p++);if(-1===p){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}var l=(new TextDecoder).decode(new Uint8Array(t.buffer,a,p)),m=new DataView(t.buffer,a+p+1,o-p-1);r.set(l,m),n+=4+o+s}return r}(r,E,n):null,T=v*c,b=p,x=l,S=d,R=f,I=64+E,A=0;A<u;A++){for(var M=r.getUint32(I,n),C=I+4,F=0;F<y;F++){var N=_[F];N||(N=_[F]=new Array(u)),N[A]={levelID:A,levelWidth:u>1||0!==o?b:S,levelHeight:u>1||0!==o?x:R,levelBuffer:new Uint8Array(e,C,T)},C+=T}I=(I+=M+4)%4!=0?I+4-I%4:I,T=(S=(b=b>>1||1)+4-1&-4)*(R=(x=x>>1||1)+4-1&-4)*c}return 0!==o?{uncompressed:_.map((function(t){var e=t[0].levelBuffer,i=!1;return o===ot.FLOAT?e=new Float32Array(t[0].levelBuffer.buffer,t[0].levelBuffer.byteOffset,t[0].levelBuffer.byteLength/4):o===ot.UNSIGNED_INT?(i=!0,e=new Uint32Array(t[0].levelBuffer.buffer,t[0].levelBuffer.byteOffset,t[0].levelBuffer.byteLength/4)):o===ot.INT&&(i=!0,e=new Int32Array(t[0].levelBuffer.buffer,t[0].levelBuffer.byteOffset,t[0].levelBuffer.byteLength/4)),{resource:new Si(e,{width:t[0].levelWidth,height:t[0].levelHeight}),type:o,format:i?Do(a):a}})),kvData:g}:{compressed:_.map((function(t){return new bo(null,{format:s,width:p,height:l,levels:u,levelBuffers:t})})),kvData:g}}(i,t.data,this.loadKeyValueData),n=r.compressed,o=r.uncompressed,a=r.kvData;if(n){var s=So(i,n,t.metadata);if(a&&s.textures)for(var p in s.textures)s.textures[p].baseTexture.ktxKeyValueData=a;Object.assign(t,s)}else if(o){var l={};o.forEach((function(t,e){var r=new ji(new Ii(t.resource,{mipmap:lt.OFF,alphaMode:mt.NO_PREMULTIPLIED_ALPHA,type:t.type,format:t.format})),n=i+"-"+(e+1);a&&(r.baseTexture.ktxKeyValueData=a),Ii.addToCache(r.baseTexture,n),ji.addToCache(r,n),0===e&&(l[i]=r,Ii.addToCache(r.baseTexture,i),ji.addToCache(r,i)),l[n]=r})),Object.assign(t,{textures:l})}}catch(t){return void e(t)}e()},t.extension=li.Loader,t.loadKeyValueData=!1,t}(),Bo=function(t,e){return Bo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},Bo(t,e)};function ko(t,e){function i(){this.constructor=t}Bo(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}!function(t){function e(e,i,r,n){void 0===e&&(e=1500),void 0===r&&(r=16384),void 0===n&&(n=!1);var o=t.call(this)||this;return r>16384&&(r=16384),o._properties=[!1,!0,!1,!1,!1],o._maxSize=e,o._batchSize=r,o._buffers=null,o._bufferUpdateIDs=[],o._updateID=0,o.interactiveChildren=!1,o.blendMode=et.NORMAL,o.autoResize=n,o.roundPixels=!0,o.baseTexture=null,o.setProperties(i),o._tint=0,o.tintRgb=new Float32Array(4),o.tint=16777215,o}ko(e,t),e.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,Wt(t,this.tintRgb)},enumerable:!1,configurable:!0}),e.prototype.render=function(t){var e=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",(function(){return e.onChildrenChange(0)}))),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},e.prototype.onChildrenChange=function(t){for(var e=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID},e.prototype.dispose=function(){if(this._buffers){for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null}}(pi);var Ho,Xo,jo=function(){function t(t,e,i){this.geometry=new $i,this.indexBuffer=null,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(var r=0;r<t.length;++r){var n=t[r];n={attributeName:n.attributeName,size:n.size,uploadFunction:n.uploadFunction,type:n.type||ot.FLOAT,offset:n.offset},e[r]?this.dynamicProperties.push(n):this.staticProperties.push(n)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return t.prototype.initBuffers=function(){var t=this.geometry,e=0;this.indexBuffer=new qi(Qt(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(var i=0;i<this.dynamicProperties.length;++i)(a=this.dynamicProperties[i]).offset=e,e+=a.size,this.dynamicStride+=a.size;var r=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(r),this.dynamicDataUint32=new Uint32Array(r),this.dynamicBuffer=new qi(this.dynamicData,!1,!1);var n=0;for(this.staticStride=0,i=0;i<this.staticProperties.length;++i)(a=this.staticProperties[i]).offset=n,n+=a.size,this.staticStride+=a.size;var o=new ArrayBuffer(this.size*this.staticStride*4*4);for(this.staticData=new Float32Array(o),this.staticDataUint32=new Uint32Array(o),this.staticBuffer=new qi(this.staticData,!0,!1),i=0;i<this.dynamicProperties.length;++i){var a=this.dynamicProperties[i];t.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===ot.UNSIGNED_BYTE,a.type,4*this.dynamicStride,4*a.offset)}for(i=0;i<this.staticProperties.length;++i)a=this.staticProperties[i],t.addAttribute(a.attributeName,this.staticBuffer,0,a.type===ot.UNSIGNED_BYTE,a.type,4*this.staticStride,4*a.offset)},t.prototype.uploadDynamic=function(t,e,i){for(var r=0;r<this.dynamicProperties.length;r++){var n=this.dynamicProperties[r];n.uploadFunction(t,e,i,n.type===ot.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,n.offset)}this.dynamicBuffer._updateID++},t.prototype.uploadStatic=function(t,e,i){for(var r=0;r<this.staticProperties.length;r++){var n=this.staticProperties[r];n.uploadFunction(t,e,i,n.type===ot.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,n.offset)}this.staticBuffer._updateID++},t.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},t}(),Wo=function(t){function e(e){var i=t.call(this,e)||this;return i.shader=null,i.properties=null,i.tempMatrix=new Ie,i.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:i.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:i.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:i.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:i.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:ot.UNSIGNED_BYTE,uploadFunction:i.uploadTint,offset:0}],i.shader=kr.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),i.state=Hr.for2d(),i}return ko(e,t),e.prototype.render=function(t){var e=t.children,i=t._maxSize,r=t._batchSize,n=this.renderer,o=e.length;if(0!==o){o>i&&!t.autoResize&&(o=i);var a=t._buffers;a||(a=t._buffers=this.generateBuffers(t));var s=e[0]._texture.baseTexture,p=s.alphaMode>0;this.state.blendMode=qt(t.blendMode,p),n.state.set(this.state);var l,m,y,h,u=n.gl,E=t.worldTransform.copyTo(this.tempMatrix);E.prepend(n.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=E.toArray(!0),this.shader.uniforms.uColor=(l=t.tintRgb,m=t.worldAlpha,h=p,y=(y=this.shader.uniforms.uColor)||new Float32Array(4),h||void 0===h?(y[0]=l[0]*m,y[1]=l[1]*m,y[2]=l[2]*m):(y[0]=l[0],y[1]=l[1],y[2]=l[2]),y[3]=m,y),this.shader.uniforms.uSampler=s,this.renderer.shader.bind(this.shader);for(var c=!1,d=0,f=0;d<o;d+=r,f+=1){var _=o-d;_>r&&(_=r),f>=a.length&&a.push(this._generateOneMoreBuffer(t));var v=a[f];v.uploadDynamic(e,d,_);var g=t._bufferUpdateIDs[f]||0;(c=c||v._updateID<g)&&(v._updateID=t._updateID,v.uploadStatic(e,d,_)),n.geometry.bind(v.geometry),u.drawElements(u.TRIANGLES,6*_,u.UNSIGNED_SHORT,0)}}},e.prototype.generateBuffers=function(t){for(var e=[],i=t._maxSize,r=t._batchSize,n=t._properties,o=0;o<i;o+=r)e.push(new jo(this.properties,n,r));return e},e.prototype._generateOneMoreBuffer=function(t){var e=t._batchSize,i=t._properties;return new jo(this.properties,i,e)},e.prototype.uploadVertices=function(t,e,i,r,n,o){for(var a=0,s=0,p=0,l=0,m=0;m<i;++m){var y=t[e+m],h=y._texture,u=y.scale.x,E=y.scale.y,c=h.trim,d=h.orig;c?(a=(s=c.x-y.anchor.x*d.width)+c.width,p=(l=c.y-y.anchor.y*d.height)+c.height):(a=d.width*(1-y.anchor.x),s=d.width*-y.anchor.x,p=d.height*(1-y.anchor.y),l=d.height*-y.anchor.y),r[o]=s*u,r[o+1]=l*E,r[o+n]=a*u,r[o+n+1]=l*E,r[o+2*n]=a*u,r[o+2*n+1]=p*E,r[o+3*n]=s*u,r[o+3*n+1]=p*E,o+=4*n}},e.prototype.uploadPosition=function(t,e,i,r,n,o){for(var a=0;a<i;a++){var s=t[e+a].position;r[o]=s.x,r[o+1]=s.y,r[o+n]=s.x,r[o+n+1]=s.y,r[o+2*n]=s.x,r[o+2*n+1]=s.y,r[o+3*n]=s.x,r[o+3*n+1]=s.y,o+=4*n}},e.prototype.uploadRotation=function(t,e,i,r,n,o){for(var a=0;a<i;a++){var s=t[e+a].rotation;r[o]=s,r[o+n]=s,r[o+2*n]=s,r[o+3*n]=s,o+=4*n}},e.prototype.uploadUvs=function(t,e,i,r,n,o){for(var a=0;a<i;++a){var s=t[e+a]._texture._uvs;s?(r[o]=s.x0,r[o+1]=s.y0,r[o+n]=s.x1,r[o+n+1]=s.y1,r[o+2*n]=s.x2,r[o+2*n+1]=s.y2,r[o+3*n]=s.x3,r[o+3*n+1]=s.y3,o+=4*n):(r[o]=0,r[o+1]=0,r[o+n]=0,r[o+n+1]=0,r[o+2*n]=0,r[o+2*n+1]=0,r[o+3*n]=0,r[o+3*n+1]=0,o+=4*n)}},e.prototype.uploadTint=function(t,e,i,r,n,o){for(var a=0;a<i;++a){var s=t[e+a],p=s._texture.baseTexture.alphaMode>0,l=s.alpha,m=l<1&&p?Kt(s._tintRGB,l):s._tintRGB+(255*l<<24);r[o]=m,r[o+n]=m,r[o+2*n]=m,r[o+3*n]=m,o+=4*n}},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},e.extension={name:"particle",type:li.RendererPlugin},e}(pr);!function(t){t.MITER="miter",t.BEVEL="bevel",t.ROUND="round"}(Ho||(Ho={})),function(t){t.BUTT="butt",t.ROUND="round",t.SQUARE="square"}(Xo||(Xo={}));var Vo={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(t,e){if(void 0===e&&(e=20),!this.adaptive||!t||isNaN(t))return e;var i=Math.ceil(t/this.maxLength);return i<this.minSegments?i=this.minSegments:i>this.maxSegments&&(i=this.maxSegments),i}},Yo=function(){function t(){this.color=16777215,this.alpha=1,this.texture=ji.WHITE,this.matrix=null,this.visible=!1,this.reset()}return t.prototype.clone=function(){var e=new t;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e},t.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=ji.WHITE,this.matrix=null,this.visible=!1},t.prototype.destroy=function(){this.texture=null,this.matrix=null},t}(),zo=function(t,e){return zo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},zo(t,e)};function qo(t,e){function i(){this.constructor=t}zo(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function Ko(t,e){var i,r;void 0===e&&(e=!1);var n=t.length;if(!(n<6)){for(var o=0,a=0,s=t[n-2],p=t[n-1];a<n;a+=2){var l=t[a],m=t[a+1];o+=(l-s)*(m+p),s=l,p=m}if(!e&&o>0||e&&o<=0){var y=n/2;for(a=y+y%2;a<n;a+=2){var h=n-a-2,u=n-a-1,E=a,c=a+1;i=[t[E],t[h]],t[h]=i[0],t[E]=i[1],r=[t[c],t[u]],t[u]=r[0],t[c]=r[1]}}}}var Zo={build:function(t){t.points=t.shape.points.slice()},triangulate:function(t,e){var i=t.points,r=t.holes,n=e.points,o=e.indices;if(i.length>=6){Ko(i,!1);for(var a=[],s=0;s<r.length;s++){var p=r[s];Ko(p.points,!0),a.push(i.length/2),i=i.concat(p.points)}var l=Ut(i,a,2);if(!l)return;var m=n.length/2;for(s=0;s<l.length;s+=3)o.push(l[s]+m),o.push(l[s+1]+m),o.push(l[s+2]+m);for(s=0;s<i.length;s++)n.push(i[s])}}},Qo={build:function(t){var e,i,r,n,o,a,s=t.points;if(t.type===Ee.CIRC){var p=t.shape;e=p.x,i=p.y,o=a=p.radius,r=n=0}else if(t.type===Ee.ELIP){var l=t.shape;e=l.x,i=l.y,o=l.width,a=l.height,r=n=0}else{var m=t.shape,y=m.width/2,h=m.height/2;e=m.x+y,i=m.y+h,r=y-(o=a=Math.max(0,Math.min(m.radius,Math.min(y,h)))),n=h-a}if(o>=0&&a>=0&&r>=0&&n>=0){var u=Math.ceil(2.3*Math.sqrt(o+a)),E=8*u+(r?4:0)+(n?4:0);if(s.length=E,0!==E){if(0===u)return s.length=8,s[0]=s[6]=e+r,s[1]=s[3]=i+n,s[2]=s[4]=e-r,void(s[5]=s[7]=i-n);var c,d,f=0,_=4*u+(r?2:0)+2,v=_,g=E,T=e+(c=r+o),b=e-c,x=i+(d=n);if(s[f++]=T,s[f++]=x,s[--_]=x,s[--_]=b,n){var S=i-d;s[v++]=b,s[v++]=S,s[--g]=S,s[--g]=T}for(var R=1;R<u;R++){var I=Math.PI/2*(R/u);T=e+(c=r+Math.cos(I)*o),b=e-c,x=i+(d=n+Math.sin(I)*a),S=i-d,s[f++]=T,s[f++]=x,s[--_]=x,s[--_]=b,s[v++]=b,s[v++]=S,s[--g]=S,s[--g]=T}T=e+(c=r),b=e-c,x=i+(d=n+a),S=i-d,s[f++]=T,s[f++]=x,s[--g]=S,s[--g]=T,r&&(s[f++]=b,s[f++]=x,s[--g]=S,s[--g]=b)}}else s.length=0},triangulate:function(t,e){var i=t.points,r=e.points,n=e.indices;if(0!==i.length){var o,a,s=r.length/2,p=s;if(t.type!==Ee.RREC){var l=t.shape;o=l.x,a=l.y}else{var m=t.shape;o=m.x+m.width/2,a=m.y+m.height/2}var y=t.matrix;r.push(t.matrix?y.a*o+y.c*a+y.tx:o,t.matrix?y.b*o+y.d*a+y.ty:a),s++,r.push(i[0],i[1]);for(var h=2;h<i.length;h+=2)r.push(i[h],i[h+1]),n.push(s++,p,s);n.push(p+1,p,s)}}};function Jo(t,e,i){return t+(e-t)*i}function $o(t,e,i,r,n,o,a){void 0===a&&(a=[]);for(var s=a,p=0,l=0,m=0,y=0,h=0,u=0,E=0,c=0;E<=20;++E)p=Jo(t,i,c=E/20),l=Jo(e,r,c),m=Jo(i,n,c),y=Jo(r,o,c),h=Jo(p,m,c),u=Jo(l,y,c),0===E&&s[s.length-2]===h&&s[s.length-1]===u||s.push(h,u);return s}var ta={build:function(t){if(va.nextRoundedRectBehavior)Qo.build(t);else{var e=t.shape,i=t.points,r=e.x,n=e.y,o=e.width,a=e.height,s=Math.max(0,Math.min(e.radius,Math.min(o,a)/2));i.length=0,s?($o(r,n+s,r,n,r+s,n,i),$o(r+o-s,n,r+o,n,r+o,n+s,i),$o(r+o,n+a-s,r+o,n+a,r+o-s,n+a,i),$o(r+s,n+a,r,n+a,r,n+a-s,i)):i.push(r,n,r+o,n,r+o,n+a,r,n+a)}},triangulate:function(t,e){if(va.nextRoundedRectBehavior)Qo.triangulate(t,e);else{for(var i=t.points,r=e.points,n=e.indices,o=r.length/2,a=Ut(i,null,2),s=0,p=a.length;s<p;s+=3)n.push(a[s]+o),n.push(a[s+1]+o),n.push(a[s+2]+o);for(s=0,p=i.length;s<p;s++)r.push(i[s],i[++s])}}};function ea(t,e,i,r,n,o,a,s){var p,l;a?(p=r,l=-i):(p=-r,l=i);var m=t-i*n+p,y=e-r*n+l,h=t+i*o+p,u=e+r*o+l;return s.push(m,y),s.push(h,u),2}function ia(t,e,i,r,n,o,a,s){var p=i-t,l=r-e,m=Math.atan2(p,l),y=Math.atan2(n-t,o-e);s&&m<y?m+=2*Math.PI:!s&&m>y&&(y+=2*Math.PI);var h=m,u=y-m,E=Math.abs(u),c=Math.sqrt(p*p+l*l),d=1+(15*E*Math.sqrt(c)/Math.PI>>0),f=u/d;if(h+=f,s){a.push(t,e),a.push(i,r);for(var _=1,v=h;_<d;_++,v+=f)a.push(t,e),a.push(t+Math.sin(v)*c,e+Math.cos(v)*c);a.push(t,e),a.push(n,o)}else{for(a.push(i,r),a.push(t,e),_=1,v=h;_<d;_++,v+=f)a.push(t+Math.sin(v)*c,e+Math.cos(v)*c),a.push(t,e);a.push(n,o),a.push(t,e)}return 2*d}function ra(t,e){t.lineStyle.native?function(t,e){var i=0,r=t.shape,n=t.points||r.points,o=r.type!==Ee.POLY||r.closeStroke;if(0!==n.length){var a=e.points,s=e.indices,p=n.length/2,l=a.length/2,m=l;for(a.push(n[0],n[1]),i=1;i<p;i++)a.push(n[2*i],n[2*i+1]),s.push(m,m+1),m++;o&&s.push(m,l)}}(t,e):function(t,e){var i=t.shape,r=t.points||i.points.slice(),n=e.closePointEps;if(0!==r.length){var o=t.lineStyle,a=new _e(r[0],r[1]),s=new _e(r[r.length-2],r[r.length-1]),p=i.type!==Ee.POLY||i.closeStroke,l=Math.abs(a.x-s.x)<n&&Math.abs(a.y-s.y)<n;if(p){r=r.slice(),l&&(r.pop(),r.pop(),s.set(r[r.length-2],r[r.length-1]));var m=.5*(a.x+s.x),y=.5*(s.y+a.y);r.unshift(m,y),r.push(m,y)}var h=e.points,u=r.length/2,E=r.length,c=h.length/2,d=o.width/2,f=d*d,_=o.miterLimit*o.miterLimit,v=r[0],g=r[1],T=r[2],b=r[3],x=0,S=0,R=-(g-b),I=v-T,A=0,M=0,C=Math.sqrt(R*R+I*I);R/=C,I/=C,R*=d,I*=d;var F=o.alignment,N=2*(1-F),O=2*F;p||(o.cap===Xo.ROUND?E+=ia(v-R*(N-O)*.5,g-I*(N-O)*.5,v-R*N,g-I*N,v+R*O,g+I*O,h,!0)+2:o.cap===Xo.SQUARE&&(E+=ea(v,g,R,I,N,O,!0,h))),h.push(v-R*N,g-I*N),h.push(v+R*O,g+I*O);for(var w=1;w<u-1;++w){v=r[2*(w-1)],g=r[2*(w-1)+1],T=r[2*w],b=r[2*w+1],x=r[2*(w+1)],S=r[2*(w+1)+1],R=-(g-b),I=v-T,R/=C=Math.sqrt(R*R+I*I),I/=C,R*=d,I*=d,A=-(b-S),M=T-x,A/=C=Math.sqrt(A*A+M*M),M/=C,A*=d,M*=d;var P=T-v,G=g-b,D=T-x,L=S-b,U=G*D-L*P,B=U<0;if(Math.abs(U)<.1)h.push(T-R*N,b-I*N),h.push(T+R*O,b+I*O);else{var k=(-R+v)*(-I+b)-(-R+T)*(-I+g),H=(-A+x)*(-M+b)-(-A+T)*(-M+S),X=(P*H-D*k)/U,j=(L*k-G*H)/U,W=(X-T)*(X-T)+(j-b)*(j-b),V=T+(X-T)*N,Y=b+(j-b)*N,z=T-(X-T)*O,q=b-(j-b)*O,K=B?N:O;W<=Math.min(P*P+G*G,D*D+L*L)+K*K*f?o.join===Ho.BEVEL||W/f>_?(B?(h.push(V,Y),h.push(T+R*O,b+I*O),h.push(V,Y),h.push(T+A*O,b+M*O)):(h.push(T-R*N,b-I*N),h.push(z,q),h.push(T-A*N,b-M*N),h.push(z,q)),E+=2):o.join===Ho.ROUND?B?(h.push(V,Y),h.push(T+R*O,b+I*O),E+=ia(T,b,T+R*O,b+I*O,T+A*O,b+M*O,h,!0)+4,h.push(V,Y),h.push(T+A*O,b+M*O)):(h.push(T-R*N,b-I*N),h.push(z,q),E+=ia(T,b,T-R*N,b-I*N,T-A*N,b-M*N,h,!1)+4,h.push(T-A*N,b-M*N),h.push(z,q)):(h.push(V,Y),h.push(z,q)):(h.push(T-R*N,b-I*N),h.push(T+R*O,b+I*O),o.join===Ho.ROUND?E+=B?ia(T,b,T+R*O,b+I*O,T+A*O,b+M*O,h,!0)+2:ia(T,b,T-R*N,b-I*N,T-A*N,b-M*N,h,!1)+2:o.join===Ho.MITER&&W/f<=_&&(B?(h.push(z,q),h.push(z,q)):(h.push(V,Y),h.push(V,Y)),E+=2),h.push(T-A*N,b-M*N),h.push(T+A*O,b+M*O),E+=2)}}v=r[2*(u-2)],g=r[2*(u-2)+1],T=r[2*(u-1)],R=-(g-(b=r[2*(u-1)+1])),I=v-T,R/=C=Math.sqrt(R*R+I*I),I/=C,R*=d,I*=d,h.push(T-R*N,b-I*N),h.push(T+R*O,b+I*O),p||(o.cap===Xo.ROUND?E+=ia(T-R*(N-O)*.5,b-I*(N-O)*.5,T-R*N,b-I*N,T+R*O,b+I*O,h,!1)+2:o.cap===Xo.SQUARE&&(E+=ea(T,b,R,I,N,O,!1,h)));var Z=e.indices,Q=Vo.epsilon*Vo.epsilon;for(w=c;w<E+c-2;++w)v=h[2*w],g=h[2*w+1],T=h[2*(w+1)],b=h[2*(w+1)+1],x=h[2*(w+2)],S=h[2*(w+2)+1],Math.abs(v*(b-S)+T*(S-g)+x*(g-b))<Q||Z.push(w,w+1,w+2)}}(t,e)}var na,oa,aa=function(){function t(){}return t.curveTo=function(t,e,i,r,n,o){var a=o[o.length-2],s=o[o.length-1]-e,p=a-t,l=r-e,m=i-t,y=Math.abs(s*m-p*l);if(y<1e-8||0===n)return o[o.length-2]===t&&o[o.length-1]===e||o.push(t,e),null;var h=s*s+p*p,u=l*l+m*m,E=s*l+p*m,c=n*Math.sqrt(h)/y,d=n*Math.sqrt(u)/y,f=c*E/h,_=d*E/u,v=c*m+d*p,g=c*l+d*s,T=p*(d+f),b=s*(d+f),x=m*(c+_),S=l*(c+_);return{cx:v+t,cy:g+e,radius:n,startAngle:Math.atan2(b-g,T-v),endAngle:Math.atan2(S-g,x-v),anticlockwise:p*l>m*s}},t.arc=function(t,e,i,r,n,o,a,s,p){for(var l=a-o,m=Vo._segmentsCount(Math.abs(l)*n,40*Math.ceil(Math.abs(l)/ce)),y=l/(2*m),h=2*y,u=Math.cos(y),E=Math.sin(y),c=m-1,d=c%1/c,f=0;f<=c;++f){var _=y+o+h*(f+d*f),v=Math.cos(_),g=-Math.sin(_);p.push((u*v+E*g)*n+i,(u*-g+E*v)*n+r)}},t}(),sa=function(){function t(){}return t.curveLength=function(t,e,i,r,n,o,a,s){for(var p=0,l=0,m=0,y=0,h=0,u=0,E=0,c=0,d=0,f=0,_=0,v=t,g=e,T=1;T<=10;++T)f=v-(c=(E=(u=(h=1-(l=T/10))*h)*h)*t+3*u*l*i+3*h*(m=l*l)*n+(y=m*l)*a),_=g-(d=E*e+3*u*l*r+3*h*m*o+y*s),v=c,g=d,p+=Math.sqrt(f*f+_*_);return p},t.curveTo=function(e,i,r,n,o,a,s){var p=s[s.length-2],l=s[s.length-1];s.length-=2;var m=Vo._segmentsCount(t.curveLength(p,l,e,i,r,n,o,a)),y=0,h=0,u=0,E=0,c=0;s.push(p,l);for(var d=1,f=0;d<=m;++d)u=(h=(y=1-(f=d/m))*y)*y,c=(E=f*f)*f,s.push(u*p+3*h*f*e+3*y*E*r+c*o,u*l+3*h*f*i+3*y*E*n+c*a)},t}(),pa=function(){function t(){}return t.curveLength=function(t,e,i,r,n,o){var a=t-2*i+n,s=e-2*r+o,p=2*i-2*t,l=2*r-2*e,m=4*(a*a+s*s),y=4*(a*p+s*l),h=p*p+l*l,u=2*Math.sqrt(m+y+h),E=Math.sqrt(m),c=2*m*E,d=2*Math.sqrt(h),f=y/E;return(c*u+E*y*(u-d)+(4*h*m-y*y)*Math.log((2*E+f+u)/(f+d)))/(4*c)},t.curveTo=function(e,i,r,n,o){for(var a=o[o.length-2],s=o[o.length-1],p=Vo._segmentsCount(t.curveLength(a,s,e,i,r,n)),l=0,m=0,y=1;y<=p;++y){var h=y/p;l=a+(e-a)*h,m=s+(i-s)*h,o.push(l+(e+(r-e)*h-l)*h,m+(i+(n-i)*h-m)*h)}},t}(),la=function(){function t(){this.reset()}return t.prototype.begin=function(t,e,i){this.reset(),this.style=t,this.start=e,this.attribStart=i},t.prototype.end=function(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start},t.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},t}(),ma=((na={})[Ee.POLY]=Zo,na[Ee.CIRC]=Qo,na[Ee.ELIP]=Qo,na[Ee.RECT]={build:function(t){var e=t.shape,i=e.x,r=e.y,n=e.width,o=e.height,a=t.points;a.length=0,a.push(i,r,i+n,r,i+n,r+o,i,r+o)},triangulate:function(t,e){var i=t.points,r=e.points,n=r.length/2;r.push(i[0],i[1],i[2],i[3],i[6],i[7],i[4],i[5]),e.indices.push(n,n+1,n+2,n+1,n+2,n+3)}},na[Ee.RREC]=ta,na),ya=[],ha=[],ua=function(){function t(t,e,i,r){void 0===e&&(e=null),void 0===i&&(i=null),void 0===r&&(r=null),this.points=[],this.holes=[],this.shape=t,this.lineStyle=i,this.fillStyle=e,this.matrix=r,this.type=t.type}return t.prototype.clone=function(){return new t(this.shape,this.fillStyle,this.lineStyle,this.matrix)},t.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},t}(),Ea=new _e,ca=function(t){function e(){var e=t.call(this)||this;return e.closePointEps=1e-4,e.boundsPadding=0,e.uvsFloat32=null,e.indicesUint16=null,e.batchable=!1,e.points=[],e.colors=[],e.uvs=[],e.indices=[],e.textureIds=[],e.graphicsData=[],e.drawCalls=[],e.batchDirty=-1,e.batches=[],e.dirty=0,e.cacheDirty=-1,e.clearDirty=0,e.shapeIndex=0,e._bounds=new De,e.boundsDirty=-1,e}return qo(e,t),Object.defineProperty(e.prototype,"bounds",{get:function(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),e.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),ha.push(this.drawCalls[t]);for(this.drawCalls.length=0,t=0;t<this.batches.length;t++){var e=this.batches[t];e.reset(),ya.push(e)}this.batches.length=0},e.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},e.prototype.drawShape=function(t,e,i,r){void 0===e&&(e=null),void 0===i&&(i=null),void 0===r&&(r=null);var n=new ua(t,e,i,r);return this.graphicsData.push(n),this.dirty++,this},e.prototype.drawHole=function(t,e){if(void 0===e&&(e=null),!this.graphicsData.length)return null;var i=new ua(t,null,null,e),r=this.graphicsData[this.graphicsData.length-1];return i.lineStyle=r.lineStyle,r.holes.push(i),this.dirty++,this},e.prototype.destroy=function(){t.prototype.destroy.call(this);for(var e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},e.prototype.containsPoint=function(t){for(var e=this.graphicsData,i=0;i<e.length;++i){var r=e[i];if(r.fillStyle.visible&&r.shape&&(r.matrix?r.matrix.applyInverse(t,Ea):Ea.copyFrom(t),r.shape.contains(Ea.x,Ea.y))){var n=!1;if(r.holes)for(var o=0;o<r.holes.length;o++)if(r.holes[o].shape.contains(Ea.x,Ea.y)){n=!0;break}if(!n)return!0}}return!1},e.prototype.updateBatches=function(){if(this.graphicsData.length){if(this.validateBatching()){this.cacheDirty=this.dirty;var t=this.uvs,e=this.graphicsData,i=null,r=null;this.batches.length>0&&(r=(i=this.batches[this.batches.length-1]).style);for(var n=this.shapeIndex;n<e.length;n++){this.shapeIndex++;var o=e[n],a=o.fillStyle,s=o.lineStyle;ma[o.type].build(o),o.matrix&&this.transformPoints(o.points,o.matrix),(a.visible||s.visible)&&this.processHoles(o.holes);for(var p=0;p<2;p++){var l=0===p?a:s;if(l.visible){var m=l.texture.baseTexture,y=this.indices.length,h=this.points.length/2;m.wrapMode=pt.REPEAT,0===p?this.processFill(o):this.processLine(o);var u=this.points.length/2-h;0!==u&&(i&&!this._compareStyles(r,l)&&(i.end(y,h),i=null),i||((i=ya.pop()||new la).begin(l,y,h),this.batches.push(i),r=l),this.addUvs(this.points,t,l.texture,h,u,l.matrix))}}}var E=this.indices.length,c=this.points.length/2;if(i&&i.end(E,c),0!==this.batches.length){var d=c>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&d===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=d?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}else this.batchable=!0}}else this.batchable=!0},e.prototype._compareStyles=function(t,e){return!(!t||!e)&&t.texture.baseTexture===e.texture.baseTexture&&t.color+t.alpha===e.color+e.alpha&&!!t.native==!!e.native},e.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var t=0,e=this.graphicsData.length;t<e;t++){var i=this.graphicsData[t],r=i.fillStyle,n=i.lineStyle;if(r&&!r.texture.baseTexture.valid)return!1;if(n&&!n.texture.baseTexture.valid)return!1}return!0},e.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var t=this.batches,e=0,i=t.length;e<i;e++)for(var r=t[e],n=0;n<r.size;n++){var o=r.start+n;this.indicesUint16[o]=this.indicesUint16[o]-r.attribStart}},e.prototype.isBatchable=function(){if(this.points.length>131070)return!1;for(var t=this.batches,i=0;i<t.length;i++)if(t[i].style.native)return!1;return this.points.length<2*e.BATCHABLE_SIZE},e.prototype.buildDrawCalls=function(){for(var t=++Ii._globalBatch,e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),ha.push(this.drawCalls[e]);this.drawCalls.length=0;var i=this.colors,r=this.textureIds,n=ha.pop();n||((n=new Tn).texArray=new bn),n.texArray.count=0,n.start=0,n.size=0,n.type=it.TRIANGLES;var o=0,a=null,s=0,p=!1,l=it.TRIANGLES,m=0;for(this.drawCalls.push(n),e=0;e<this.batches.length;e++){var y=this.batches[e],h=y.style,u=h.texture.baseTexture;p!==!!h.native&&(l=(p=!!h.native)?it.LINES:it.TRIANGLES,a=null,o=8,t++),a!==u&&(a=u,u._batchEnabled!==t&&(8===o&&(t++,o=0,n.size>0&&((n=ha.pop())||((n=new Tn).texArray=new bn),this.drawCalls.push(n)),n.start=m,n.size=0,n.texArray.count=0,n.type=l),u.touched=1,u._batchEnabled=t,u._batchLocation=o,u.wrapMode=pt.REPEAT,n.texArray.elements[n.texArray.count++]=u,o++)),n.size+=y.size,m+=y.size,s=u._batchLocation,this.addColors(i,h.color,h.alpha,y.attribSize,y.attribStart),this.addTextureIds(r,s,y.attribSize,y.attribStart)}Ii._globalBatch=t,this.packAttributes()},e.prototype.packAttributes=function(){for(var t=this.points,e=this.uvs,i=this.colors,r=this.textureIds,n=new ArrayBuffer(3*t.length*4),o=new Float32Array(n),a=new Uint32Array(n),s=0,p=0;p<t.length/2;p++)o[s++]=t[2*p],o[s++]=t[2*p+1],o[s++]=e[2*p],o[s++]=e[2*p+1],a[s++]=i[p],o[s++]=r[p];this._buffer.update(n),this._indexBuffer.update(this.indicesUint16)},e.prototype.processFill=function(t){t.holes.length?Zo.triangulate(t,this):ma[t.type].triangulate(t,this)},e.prototype.processLine=function(t){ra(t,this);for(var e=0;e<t.holes.length;e++)ra(t.holes[e],this)},e.prototype.processHoles=function(t){for(var e=0;e<t.length;e++){var i=t[e];ma[i.type].build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}},e.prototype.calculateBounds=function(){var t=this._bounds;t.clear(),t.addVertexData(this.points,0,this.points.length),t.pad(this.boundsPadding,this.boundsPadding)},e.prototype.transformPoints=function(t,e){for(var i=0;i<t.length/2;i++){var r=t[2*i],n=t[2*i+1];t[2*i]=e.a*r+e.c*n+e.tx,t[2*i+1]=e.b*r+e.d*n+e.ty}},e.prototype.addColors=function(t,e,i,r,n){void 0===n&&(n=0);var o=Kt((e>>16)+(65280&e)+((255&e)<<16),i);t.length=Math.max(t.length,n+r);for(var a=0;a<r;a++)t[n+a]=o},e.prototype.addTextureIds=function(t,e,i,r){void 0===r&&(r=0),t.length=Math.max(t.length,r+i);for(var n=0;n<i;n++)t[r+n]=e},e.prototype.addUvs=function(t,e,i,r,n,o){void 0===o&&(o=null);for(var a=0,s=e.length,p=i.frame;a<n;){var l=t[2*(r+a)],m=t[2*(r+a)+1];if(o){var y=o.a*l+o.c*m+o.tx;m=o.b*l+o.d*m+o.ty,l=y}a++,e.push(l/p.width,m/p.height)}var h=i.baseTexture;(p.width<h.width||p.height<h.height)&&this.adjustUvs(e,i,s,n)},e.prototype.adjustUvs=function(t,e,i,r){for(var n=e.baseTexture,o=1e-6,a=i+2*r,s=e.frame,p=s.width/n.width,l=s.height/n.height,m=s.x/s.width,y=s.y/s.height,h=Math.floor(t[i]+o),u=Math.floor(t[i+1]+o),E=i+2;E<a;E+=2)h=Math.min(h,Math.floor(t[E]+o)),u=Math.min(u,Math.floor(t[E+1]+o));for(m-=h,y-=u,E=i;E<a;E+=2)t[E]=(t[E]+m)*p,t[E+1]=(t[E+1]+y)*l},e.BATCHABLE_SIZE=100,e}(In),da=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.width=0,e.alignment=.5,e.native=!1,e.cap=Xo.BUTT,e.join=Ho.MITER,e.miterLimit=10,e}return qo(e,t),e.prototype.clone=function(){var t=new e;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t},e.prototype.reset=function(){t.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},e}(Yo),fa=new Float32Array(3),_a={},va=function(t){function e(e){void 0===e&&(e=null);var i=t.call(this)||this;return i.shader=null,i.pluginName="batch",i.currentPath=null,i.batches=[],i.batchTint=-1,i.batchDirty=-1,i.vertexData=null,i._fillStyle=new Yo,i._lineStyle=new da,i._matrix=null,i._holeMode=!1,i.state=Hr.for2d(),i._geometry=e||new ca,i._geometry.refCount++,i._transformID=-1,i.tint=16777215,i.blendMode=et.NORMAL,i}return qo(e,t),Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return this.finishPoly(),new e(this._geometry)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),e.prototype.lineStyle=function(t,e,i,r,n){return void 0===t&&(t=null),void 0===e&&(e=0),void 0===i&&(i=1),void 0===r&&(r=.5),void 0===n&&(n=!1),"number"==typeof t&&(t={width:t,color:e,alpha:i,alignment:r,native:n}),this.lineTextureStyle(t)},e.prototype.lineTextureStyle=function(t){t=Object.assign({width:0,texture:ji.WHITE,color:t&&t.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:Xo.BUTT,join:Ho.MITER,miterLimit:10},t),this.currentPath&&this.startPoly();var e=t.width>0&&t.alpha>0;return e?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:e},t)):this._lineStyle.reset(),this},e.prototype.startPoly=function(){if(this.currentPath){var t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new xe,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new xe,this.currentPath.closeStroke=!1},e.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},e.prototype.moveTo=function(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this},e.prototype.lineTo=function(t,e){this.currentPath||this.moveTo(0,0);var i=this.currentPath.points,r=i[i.length-2],n=i[i.length-1];return r===t&&n===e||i.push(t,e),this},e.prototype._initCurve=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[t,e]):this.moveTo(t,e)},e.prototype.quadraticCurveTo=function(t,e,i,r){this._initCurve();var n=this.currentPath.points;return 0===n.length&&this.moveTo(0,0),pa.curveTo(t,e,i,r,n),this},e.prototype.bezierCurveTo=function(t,e,i,r,n,o){return this._initCurve(),sa.curveTo(t,e,i,r,n,o,this.currentPath.points),this},e.prototype.arcTo=function(t,e,i,r,n){this._initCurve(t,e);var o=this.currentPath.points,a=aa.curveTo(t,e,i,r,n,o);if(a){var s=a.cx,p=a.cy,l=a.radius,m=a.startAngle,y=a.endAngle,h=a.anticlockwise;this.arc(s,p,l,m,y,h)}return this},e.prototype.arc=function(t,e,i,r,n,o){if(void 0===o&&(o=!1),r===n)return this;if(!o&&n<=r?n+=ce:o&&r<=n&&(r+=ce),0==n-r)return this;var a=t+Math.cos(r)*i,s=e+Math.sin(r)*i,p=this._geometry.closePointEps,l=this.currentPath?this.currentPath.points:null;if(l){var m=Math.abs(l[l.length-2]-a),y=Math.abs(l[l.length-1]-s);m<p&&y<p||l.push(a,s)}else this.moveTo(a,s),l=this.currentPath.points;return aa.arc(a,s,t,e,i,r,n,o,l),this},e.prototype.beginFill=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=1),this.beginTextureFill({texture:ji.WHITE,color:t,alpha:e})},e.prototype.beginTextureFill=function(t){t=Object.assign({texture:ji.WHITE,color:16777215,alpha:1,matrix:null},t),this.currentPath&&this.startPoly();var e=t.alpha>0;return e?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:e},t)):this._fillStyle.reset(),this},e.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},e.prototype.drawRect=function(t,e,i,r){return this.drawShape(new ge(t,e,i,r))},e.prototype.drawRoundedRect=function(t,e,i,r,n){return this.drawShape(new Se(t,e,i,r,n))},e.prototype.drawCircle=function(t,e,i){return this.drawShape(new Te(t,e,i))},e.prototype.drawEllipse=function(t,e,i,r){return this.drawShape(new be(t,e,i,r))},e.prototype.drawPolygon=function(){for(var t,e=arguments,i=[],r=0;r<arguments.length;r++)i[r]=e[r];var n=!0,o=i[0];o.points?(n=o.closeStroke,t=o.points):t=Array.isArray(i[0])?i[0]:i;var a=new xe(t);return a.closeStroke=n,this.drawShape(a),this},e.prototype.drawShape=function(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},e.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},e.prototype.isFastRect=function(){var t=this._geometry.graphicsData;return!(1!==t.length||t[0].shape.type!==Ee.RECT||t[0].matrix||t[0].holes.length||t[0].lineStyle.visible&&t[0].lineStyle.width)},e.prototype._render=function(t){this.finishPoly();var e=this._geometry;e.updateBatches(),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))},e.prototype._populateBatches=function(){var t=this._geometry,e=this.blendMode,i=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=i,this.vertexData=new Float32Array(t.points);for(var r=0;r<i;r++){var n=t.batches[r],o=n.style.color,a=new Float32Array(this.vertexData.buffer,4*n.attribStart*2,2*n.attribSize),s=new Float32Array(t.uvsFloat32.buffer,4*n.attribStart*2,2*n.attribSize),p={vertexData:a,blendMode:e,indices:new Uint16Array(t.indicesUint16.buffer,2*n.start,n.size),uvs:s,_batchRGB:Wt(o),_tintRGB:o,_texture:n.style.texture,alpha:n.style.alpha,worldAlpha:1};this.batches[r]=p}},e.prototype._renderBatched=function(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var e=0,i=this.batches.length;e<i;e++){var r=this.batches[e];r.worldAlpha=this.worldAlpha*r.alpha,t.plugins[this.pluginName].render(r)}}},e.prototype._renderDirect=function(t){var e=this._resolveDirectShader(t),i=this._geometry,r=this.tint,n=this.worldAlpha,o=e.uniforms,a=i.drawCalls;o.translationMatrix=this.transform.worldTransform,o.tint[0]=(r>>16&255)/255*n,o.tint[1]=(r>>8&255)/255*n,o.tint[2]=(255&r)/255*n,o.tint[3]=n,t.shader.bind(e),t.geometry.bind(i,e),t.state.set(this.state);for(var s=0,p=a.length;s<p;s++)this._renderDrawCallDirect(t,i.drawCalls[s])},e.prototype._renderDrawCallDirect=function(t,e){for(var i=e.texArray,r=e.type,n=e.size,o=e.start,a=i.count,s=0;s<a;s++)t.texture.bind(i.elements[s],s);t.geometry.draw(r,n,o)},e.prototype._resolveDirectShader=function(t){var e=this.shader,i=this.pluginName;if(!e){if(!_a[i]){for(var r=t.plugins[i].MAX_TEXTURES,n=new Int32Array(r),o=0;o<r;o++)n[o]=o;var a={tint:new Float32Array([1,1,1,1]),translationMatrix:new Ie,default:rr.from({uSamplers:n},!0)},s=t.plugins[i]._shader.program;_a[i]=new kr(s,a)}e=_a[i]}return e},e.prototype._calculateBounds=function(){this.finishPoly();var t=this._geometry;if(t.graphicsData.length){var e=t.bounds,i=e.minX,r=e.minY,n=e.maxX,o=e.maxY;this._bounds.addFrame(this.transform,i,r,n,o)}},e.prototype.containsPoint=function(t){return this.worldTransform.applyInverse(t,e._TEMP_POINT),this._geometry.containsPoint(e._TEMP_POINT)},e.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var t=Wt(this.tint,fa),e=0;e<this.batches.length;e++){var i=this.batches[e],r=i._batchRGB,n=(t[0]*r[0]*255<<16)+(t[1]*r[1]*255<<8)+(0|t[2]*r[2]*255);i._tintRGB=(n>>16)+(65280&n)+((255&n)<<16)}}},e.prototype.calculateVertices=function(){var t=this.transform._worldID;if(this._transformID!==t){this._transformID=t;for(var e=this.transform.worldTransform,i=e.a,r=e.b,n=e.c,o=e.d,a=e.tx,s=e.ty,p=this._geometry.points,l=this.vertexData,m=0,y=0;y<p.length;y+=2){var h=p[y],u=p[y+1];l[m++]=i*h+n*u+a,l[m++]=o*u+r*h+s}}},e.prototype.closePath=function(){var t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this},e.prototype.setMatrix=function(t){return this._matrix=t,this},e.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},e.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},e.prototype.destroy=function(e){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,t.prototype.destroy.call(this,e)},e.nextRoundedRectBehavior=!1,e._TEMP_POINT=new _e,e}(pi),ga=function(t,e){return ga=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},ga(t,e)},Ta=new _e,ba=new Uint16Array([0,1,2,0,2,3]),xa=function(t){function e(e){var i=t.call(this)||this;return i._anchor=new Re(i._onAnchorUpdate,i,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),i._texture=null,i._width=0,i._height=0,i._tint=null,i._tintRGB=null,i.tint=16777215,i.blendMode=et.NORMAL,i._cachedTint=16777215,i.uvs=null,i.texture=e||ji.EMPTY,i.vertexData=new Float32Array(8),i.vertexTrimmedData=null,i._transformID=-1,i._textureID=-1,i._transformTrimmedID=-1,i._textureTrimmedID=-1,i.indices=ba,i.pluginName="batch",i.isSprite=!0,i._roundPixels=Dt.ROUND_PIXELS,i}return function(t,e){function i(){this.constructor=t}ga(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=re(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=re(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){var t=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==t._updateID){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var e=this.transform.worldTransform,i=e.a,r=e.b,n=e.c,o=e.d,a=e.tx,s=e.ty,p=this.vertexData,l=t.trim,m=t.orig,y=this._anchor,h=0,u=0,E=0,c=0;if(l?(h=(u=l.x-y._x*m.width)+l.width,E=(c=l.y-y._y*m.height)+l.height):(h=(u=-y._x*m.width)+m.width,E=(c=-y._y*m.height)+m.height),p[0]=i*u+n*c+a,p[1]=o*c+r*u+s,p[2]=i*h+n*c+a,p[3]=o*c+r*h+s,p[4]=i*h+n*E+a,p[5]=o*E+r*h+s,p[6]=i*u+n*E+a,p[7]=o*E+r*u+s,this._roundPixels)for(var d=Dt.RESOLUTION,f=0;f<p.length;++f)p[f]=Math.round((p[f]*d|0)/d)}},e.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,i=t.orig,r=this._anchor,n=this.transform.worldTransform,o=n.a,a=n.b,s=n.c,p=n.d,l=n.tx,m=n.ty,y=-r._x*i.width,h=y+i.width,u=-r._y*i.height,E=u+i.height;e[0]=o*y+s*u+l,e[1]=p*u+a*y+m,e[2]=o*h+s*u+l,e[3]=p*u+a*h+m,e[4]=o*h+s*E+l,e[5]=p*E+a*h+m,e[6]=o*y+s*E+l,e[7]=p*E+a*y+m},e.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._localBounds||(this._localBounds=new De),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new ge),e=this._localBoundsRect),this._localBounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,Ta);var e=this._texture.orig.width,i=this._texture.orig.height,r=-e*this.anchor.x,n=0;return Ta.x>=r&&Ta.x<r+e&&(n=-i*this.anchor.y,Ta.y>=n&&Ta.y<n+i)},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof e?e:e&&e.texture){var i="boolean"==typeof e?e:e&&e.baseTexture;this._texture.destroy(!!i)}this._texture=null},e.from=function(t,i){return new e(t instanceof ji?t:ji.from(t,i))},Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=re(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=re(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||ji.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),e}(pi),Sa=function(t,e){return Sa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},Sa(t,e)};!function(t){t[t.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",t[t.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"}(oa||(oa={}));var Ra={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:oa.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},Ia=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Aa=function(){function t(t){this.styleID=0,this.reset(),Fa(this,t,t)}return t.prototype.clone=function(){var e={};return Fa(e,this,Ra),new t(e)},t.prototype.reset=function(){Fa(this,Ra,Ra)},Object.defineProperty(t.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"breakWords",{get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(t){var e=Ca(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fill},set:function(t){var e=Ca(t);this._fill!==e&&(this._fill=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(t){(function(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(var i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0})(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leading",{get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"padding",{get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stroke",{get:function(){return this._stroke},set:function(t){var e=Ca(t);this._stroke!==e&&(this._stroke=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trim",{get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)},enumerable:!1,configurable:!0}),t.prototype.toFontString=function(){var t="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var i=e.length-1;i>=0;i--){var r=e[i].trim();!/([\"\'])[^\'\"]+\1/.test(r)&&Ia.indexOf(r)<0&&(r='"'+r+'"'),e[i]=r}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},t}();function Ma(t){return"number"==typeof t?Vt(t):("string"==typeof t&&0===t.indexOf("0x")&&(t=t.replace("0x","#")),t)}function Ca(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=Ma(t[e]);return t}return Ma(t)}function Fa(t,e,i){for(var r in i)Array.isArray(e[r])?t[r]=e[r].slice():t[r]=e[r]}var Na=function(){function t(t,e,i,r,n,o,a,s,p){this.text=t,this.style=e,this.width=i,this.height=r,this.lines=n,this.lineWidths=o,this.lineHeight=a,this.maxLineWidth=s,this.fontProperties=p}return t.measureText=function(e,i,r,n){void 0===n&&(n=t._canvas),r=null==r?i.wordWrap:r;var o=i.toFontString(),a=t.measureFont(o);0===a.fontSize&&(a.fontSize=i.fontSize,a.ascent=i.fontSize);var s=n.getContext("2d");s.font=o;for(var p=(r?t.wordWrap(e,i,n):e).split(/(?:\r\n|\r|\n)/),l=new Array(p.length),m=0,y=0;y<p.length;y++){var h=s.measureText(p[y]).width+(p[y].length-1)*i.letterSpacing;l[y]=h,m=Math.max(m,h)}var u=m+i.strokeThickness;i.dropShadow&&(u+=i.dropShadowDistance);var E=i.lineHeight||a.fontSize+i.strokeThickness,c=Math.max(E,a.fontSize+i.strokeThickness)+(p.length-1)*(E+i.leading);return i.dropShadow&&(c+=i.dropShadowDistance),new t(e,i,u,c,p,l,E+i.leading,m,a)},t.wordWrap=function(e,i,r){void 0===r&&(r=t._canvas);for(var n=r.getContext("2d"),o=0,a="",s="",p=Object.create(null),l=i.letterSpacing,m=i.whiteSpace,y=t.collapseSpaces(m),h=t.collapseNewlines(m),u=!y,E=i.wordWrapWidth+l,c=t.tokenize(e),d=0;d<c.length;d++){var f=c[d];if(t.isNewline(f)){if(!h){s+=t.addLine(a),u=!y,a="",o=0;continue}f=" "}if(y){var _=t.isBreakingSpace(f),v=t.isBreakingSpace(a[a.length-1]);if(_&&v)continue}var g=t.getFromCache(f,l,p,n);if(g>E)if(""!==a&&(s+=t.addLine(a),a="",o=0),t.canBreakWords(f,i.breakWords))for(var T=t.wordWrapSplit(f),b=0;b<T.length;b++){for(var x=T[b],S=1;T[b+S];){var R=T[b+S],I=x[x.length-1];if(t.canBreakChars(I,R,f,b,i.breakWords))break;x+=R,S++}b+=x.length-1;var A=t.getFromCache(x,l,p,n);A+o>E&&(s+=t.addLine(a),u=!1,a="",o=0),a+=x,o+=A}else{a.length>0&&(s+=t.addLine(a),a="",o=0);var M=d===c.length-1;s+=t.addLine(f,!M),u=!1,a="",o=0}else g+o>E&&(u=!1,s+=t.addLine(a),a="",o=0),(a.length>0||!t.isBreakingSpace(f)||u)&&(a+=f,o+=g)}return s+t.addLine(a,!1)},t.addLine=function(e,i){return void 0===i&&(i=!0),e=t.trimRight(e),i?e+"\n":e},t.getFromCache=function(t,e,i,r){var n=i[t];if("number"!=typeof n){var o=t.length*e;n=r.measureText(t).width+o,i[t]=n}return n},t.collapseSpaces=function(t){return"normal"===t||"pre-line"===t},t.collapseNewlines=function(t){return"normal"===t},t.trimRight=function(e){if("string"!=typeof e)return"";for(var i=e.length-1;i>=0;i--){var r=e[i];if(!t.isBreakingSpace(r))break;e=e.slice(0,-1)}return e},t.isNewline=function(e){return"string"==typeof e&&t._newlines.indexOf(e.charCodeAt(0))>=0},t.isBreakingSpace=function(e,i){return"string"==typeof e&&t._breakingSpaces.indexOf(e.charCodeAt(0))>=0},t.tokenize=function(e){var i=[],r="";if("string"!=typeof e)return i;for(var n=0;n<e.length;n++){var o=e[n],a=e[n+1];t.isBreakingSpace(o,a)||t.isNewline(o)?(""!==r&&(i.push(r),r=""),i.push(o)):r+=o}return""!==r&&i.push(r),i},t.canBreakWords=function(t,e){return e},t.canBreakChars=function(t,e,i,r,n){return!0},t.wordWrapSplit=function(t){return t.split("")},t.measureFont=function(e){if(t._fonts[e])return t._fonts[e];var i={ascent:0,descent:0,fontSize:0},r=t._canvas,n=t._context;n.font=e;var o=t.METRICS_STRING+t.BASELINE_SYMBOL,a=Math.ceil(n.measureText(o).width),s=Math.ceil(n.measureText(t.BASELINE_SYMBOL).width),p=Math.ceil(t.HEIGHT_MULTIPLIER*s);s=s*t.BASELINE_MULTIPLIER|0,r.width=a,r.height=p,n.fillStyle="#f00",n.fillRect(0,0,a,p),n.font=e,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(o,0,s);var l=n.getImageData(0,0,a,p).data,m=l.length,y=4*a,h=0,u=0,E=!1;for(h=0;h<s;++h){for(var c=0;c<y;c+=4)if(255!==l[u+c]){E=!0;break}if(E)break;u+=y}for(i.ascent=s-h,u=m-y,E=!1,h=p;h>s;--h){for(c=0;c<y;c+=4)if(255!==l[u+c]){E=!0;break}if(E)break;u-=y}return i.descent=h-s,i.fontSize=i.ascent+i.descent,t._fonts[e]=i,i},t.clearMetrics=function(e){void 0===e&&(e=""),e?delete t._fonts[e]:t._fonts={}},Object.defineProperty(t,"_canvas",{get:function(){if(!t.__canvas){var e=void 0;try{var i=new OffscreenCanvas(0,0),r=i.getContext("2d");if(r&&r.measureText)return t.__canvas=i,i;e=Dt.ADAPTER.createCanvas()}catch(t){e=Dt.ADAPTER.createCanvas()}e.width=e.height=10,t.__canvas=e}return t.__canvas},enumerable:!1,configurable:!0}),Object.defineProperty(t,"_context",{get:function(){return t.__context||(t.__context=t._canvas.getContext("2d")),t.__context},enumerable:!1,configurable:!0}),t}();Na._fonts={},Na.METRICS_STRING="|q",Na.BASELINE_SYMBOL="M",Na.BASELINE_MULTIPLIER=1.4,Na.HEIGHT_MULTIPLIER=2,Na._newlines=[10,13],Na._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var Oa={texture:!0,children:!1,baseTexture:!0},wa=function(t){function e(e,i,r){var n=this,o=!1;r||(r=Dt.ADAPTER.createCanvas(),o=!0),r.width=3,r.height=3;var a=ji.from(r);return a.orig=new ge,a.trim=new ge,(n=t.call(this,a)||this)._ownCanvas=o,n.canvas=r,n.context=r.getContext("2d"),n._resolution=Dt.RESOLUTION,n._autoResolution=!0,n._text=null,n._style=null,n._styleListener=null,n._font="",n.text=e,n.style=i,n.localStyleID=-1,n}return function(t,e){function i(){this.constructor=t}Sa(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype.updateText=function(t){var i=this._style;if(this.localStyleID!==i.styleID&&(this.dirty=!0,this.localStyleID=i.styleID),this.dirty||!t){this._font=this._style.toFontString();var r,n,o=this.context,a=Na.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=a.width,p=a.height,l=a.lines,m=a.lineHeight,y=a.lineWidths,h=a.maxLineWidth,u=a.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,s)+2*i.padding)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,p)+2*i.padding)*this._resolution),o.scale(this._resolution,this._resolution),o.clearRect(0,0,this.canvas.width,this.canvas.height),o.font=this._font,o.lineWidth=i.strokeThickness,o.textBaseline=i.textBaseline,o.lineJoin=i.lineJoin,o.miterLimit=i.miterLimit;for(var E=i.dropShadow?2:1,c=0;c<E;++c){var d=i.dropShadow&&0===c,f=d?Math.ceil(Math.max(1,p)+2*i.padding):0,_=f*this._resolution;if(d){o.fillStyle="black",o.strokeStyle="black";var v=i.dropShadowColor,g=Wt("number"==typeof v?v:Yt(v)),T=i.dropShadowBlur*this._resolution,b=i.dropShadowDistance*this._resolution;o.shadowColor="rgba("+255*g[0]+","+255*g[1]+","+255*g[2]+","+i.dropShadowAlpha+")",o.shadowBlur=T,o.shadowOffsetX=Math.cos(i.dropShadowAngle)*b,o.shadowOffsetY=Math.sin(i.dropShadowAngle)*b+_}else o.fillStyle=this._generateFillStyle(i,l,a),o.strokeStyle=i.stroke,o.shadowColor="black",o.shadowBlur=0,o.shadowOffsetX=0,o.shadowOffsetY=0;var x=(m-u.fontSize)/2;(!e.nextLineHeightBehavior||m-u.fontSize<0)&&(x=0);for(var S=0;S<l.length;S++)r=i.strokeThickness/2,n=i.strokeThickness/2+S*m+u.ascent+x,"right"===i.align?r+=h-y[S]:"center"===i.align&&(r+=(h-y[S])/2),i.stroke&&i.strokeThickness&&this.drawLetterSpacing(l[S],r+i.padding,n+i.padding-f,!0),i.fill&&this.drawLetterSpacing(l[S],r+i.padding,n+i.padding-f)}this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,i,r,n){void 0===n&&(n=!1);var o=this._style.letterSpacing,a=e.experimentalLetterSpacing&&("letterSpacing"in CanvasRenderingContext2D.prototype||"textLetterSpacing"in CanvasRenderingContext2D.prototype);if(0===o||a)return a&&(this.context.letterSpacing=o,this.context.textLetterSpacing=o),void(n?this.context.strokeText(t,i,r):this.context.fillText(t,i,r));for(var s=i,p=Array.from?Array.from(t):t.split(""),l=this.context.measureText(t).width,m=0,y=0;y<p.length;++y){var h=p[y];n?this.context.strokeText(h,s,r):this.context.fillText(h,s,r);for(var u="",E=y+1;E<p.length;++E)u+=p[E];s+=l-(m=this.context.measureText(u).width)+o,l=m}},e.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var e=function(t){var e,i,r,n=t.width,o=t.height,a=t.getContext("2d"),s=a.getImageData(0,0,n,o).data,p=s.length,l={top:null,left:null,right:null,bottom:null},m=null;for(e=0;e<p;e+=4)0!==s[e+3]&&(i=e/4%n,r=~~(e/4/n),null===l.top&&(l.top=r),(null===l.left||i<l.left)&&(l.left=i),(null===l.right||l.right<i)&&(l.right=i+1),(null===l.bottom||l.bottom<r)&&(l.bottom=r));return null!==l.top&&(n=l.right-l.left,o=l.bottom-l.top+1,m=a.getImageData(l.left,l.top,n,o)),{height:o,width:n,data:m}}(t);e.data&&(t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0))}var i=this._texture,r=this._style,n=r.trim?0:r.padding,o=i.baseTexture;i.trim.width=i._frame.width=t.width/this._resolution,i.trim.height=i._frame.height=t.height/this._resolution,i.trim.x=-n,i.trim.y=-n,i.orig.width=i._frame.width-2*n,i.orig.height=i._frame.height-2*n,this._onTextureUpdate(),o.setRealSize(t.width,t.height,this._resolution),i.updateUvs(),this.dirty=!1},e.prototype._render=function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype._render.call(this,e)},e.prototype.updateTransform=function(){this.updateText(!0),t.prototype.updateTransform.call(this)},e.prototype.getBounds=function(e,i){return this.updateText(!0),-1===this._textureID&&(e=!1),t.prototype.getBounds.call(this,e,i)},e.prototype.getLocalBounds=function(e){return this.updateText(!0),t.prototype.getLocalBounds.call(this,e)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._generateFillStyle=function(t,e,i){var r,n=t.fill;if(!Array.isArray(n))return n;if(1===n.length)return n[0];var o=t.dropShadow?t.dropShadowDistance:0,a=t.padding||0,s=this.canvas.width/this._resolution-o-2*a,p=this.canvas.height/this._resolution-o-2*a,l=n.slice(),m=t.fillGradientStops.slice();if(!m.length)for(var y=l.length+1,h=1;h<y;++h)m.push(h/y);if(l.unshift(n[0]),m.unshift(0),l.push(n[n.length-1]),m.push(1),t.fillGradientType===oa.LINEAR_VERTICAL){r=this.context.createLinearGradient(s/2,a,s/2,p+a);var u=i.fontProperties.fontSize+t.strokeThickness;for(h=0;h<e.length;h++){var E=i.lineHeight*(h-1)+u,c=i.lineHeight*h,d=c;h>0&&E>c&&(d=(c+E)/2);var f=c+u,_=i.lineHeight*(h+1),v=f;h+1<e.length&&_<f&&(v=(f+_)/2);for(var g=(v-d)/p,T=0;T<l.length;T++){var b;b="number"==typeof m[T]?m[T]:T/l.length;var x=Math.min(1,Math.max(0,d/p+b*g));x=Number(x.toFixed(5)),r.addColorStop(x,l[T])}}}else{r=this.context.createLinearGradient(a,p/2,s+a,p/2);var S=l.length+1,R=1;for(h=0;h<l.length;h++){var I;I="number"==typeof m[h]?m[h]:R/S,r.addColorStop(I,l[h]),R++}}return r},e.prototype.destroy=function(e){"boolean"==typeof e&&(e={children:e}),e=Object.assign({},Oa,e),t.prototype.destroy.call(this,e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var e=re(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var e=re(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(t){t=t||{},this._style=t instanceof Aa?t:new Aa(t),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),e.nextLineHeightBehavior=!1,e.experimentalLetterSpacing=!1,e}(xa);Dt.UPLOADS_PER_FRAME=4;var Pa=function(t,e){return Pa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},Pa(t,e)},Ga=function(){function t(t){this.maxItemsPerFrame=t,this.itemsLeft=0}return t.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},t.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},t}();function Da(t,e){var i=!1;if(t&&t._textures&&t._textures.length)for(var r=0;r<t._textures.length;r++)if(t._textures[r]instanceof ji){var n=t._textures[r].baseTexture;-1===e.indexOf(n)&&(e.push(n),i=!0)}return i}function La(t,e){if(t.baseTexture instanceof Ii){var i=t.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function Ua(t,e){if(t._texture&&t._texture instanceof ji){var i=t._texture.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function Ba(t,e){return e instanceof wa&&(e.updateText(!0),!0)}function ka(t,e){if(e instanceof Aa){var i=e.toFontString();return Na.measureFont(i),!0}return!1}function Ha(t,e){if(t instanceof wa){-1===e.indexOf(t.style)&&e.push(t.style),-1===e.indexOf(t)&&e.push(t);var i=t._texture.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function Xa(t,e){return t instanceof Aa&&(-1===e.indexOf(t)&&e.push(t),!0)}var ja=function(){function t(t){var e=this;this.limiter=new Ga(Dt.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){e.queue&&e.prepareItems()},this.registerFindHook(Ha),this.registerFindHook(Xa),this.registerFindHook(Da),this.registerFindHook(La),this.registerFindHook(Ua),this.registerUploadHook(Ba),this.registerUploadHook(ka)}return t.prototype.upload=function(t,e){var i=this;return"function"==typeof t&&(e=t,t=null),e&&se("6.5.0","BasePrepare.upload callback is deprecated, use the return Promise instead."),new Promise((function(r){t&&i.add(t);var n=function(){null==e||e(),r()};i.queue.length?(i.completes.push(n),i.ticking||(i.ticking=!0,di.system.addOnce(i.tick,i,yi.UTILITY))):n()}))},t.prototype.tick=function(){setTimeout(this.delayedTick,0)},t.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],e=!1;if(t&&!t._destroyed)for(var i=0,r=this.uploadHooks.length;i<r;i++)if(this.uploadHooks[i](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)di.system.addOnce(this.tick,this,yi.UTILITY);else{this.ticking=!1;var n=this.completes.slice(0);for(this.completes.length=0,i=0,r=n.length;i<r;i++)n[i]()}},t.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},t.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},t.prototype.add=function(t){for(var e=0,i=this.addHooks.length;e<i&&!this.addHooks[e](t,this.queue);e++);if(t instanceof pi)for(e=t.children.length-1;e>=0;e--)this.add(t.children[e]);return this},t.prototype.destroy=function(){this.ticking&&di.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},t}();function Wa(t,e){return e instanceof Ii&&(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0)}function Va(t,e){if(!(e instanceof va))return!1;var i=e.geometry;e.finishPoly(),i.updateBatches();for(var r=i.batches,n=0;n<r.length;n++){var o=r[n].style.texture;o&&Wa(t,o.baseTexture)}return i.batchable||t.geometry.bind(i,e._resolveDirectShader(t)),!0}function Ya(t,e){return t instanceof va&&(e.push(t),!0)}var za=function(t){function e(e){var i=t.call(this,e)||this;return i.uploadHookHelper=i.renderer,i.registerFindHook(Ya),i.registerUploadHook(Wa),i.registerUploadHook(Va),i}return function(t,e){function i(){this.constructor=t}Pa(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.extension={name:"prepare",type:li.RendererPlugin},e}(ja),qa=(function(){function t(t){this.maxMilliseconds=t,this.frameStart=0}t.prototype.beginFrame=function(){this.frameStart=Date.now()},t.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds}}(),function(){function t(t,e,i){void 0===i&&(i=null),this.linkedSheets=[],this._texture=t instanceof ji?t:null,this.baseTexture=t instanceof Ii?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=e;var r=this.baseTexture.resource;this.resolution=this._updateResolution(i||(r?r.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return t.prototype._updateResolution=function(t){void 0===t&&(t=null);var e=this.data.meta.scale,i=ue(t,null);return null===i&&(i=void 0!==e?parseFloat(e):1),1!==i&&this.baseTexture.setResolution(i),i},t.prototype.parse=function(e){var i=this;return e&&se("6.5.0","Spritesheet.parse callback is deprecated, use the return Promise instead."),new Promise((function(r){i._callback=function(t){null==e||e(t),r(t)},i._batchIndex=0,i._frameKeys.length<=t.BATCH_SIZE?(i._processFrames(0),i._processAnimations(),i._parseComplete()):i._nextBatch()}))},t.prototype._processFrames=function(e){for(var i=e,r=t.BATCH_SIZE;i-e<r&&i<this._frameKeys.length;){var n=this._frameKeys[i],o=this._frames[n],a=o.frame;if(a){var s,p=null,l=!1!==o.trimmed&&o.sourceSize?o.sourceSize:o.frame,m=new ge(0,0,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution);s=o.rotated?new ge(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.h)/this.resolution,Math.floor(a.w)/this.resolution):new ge(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution),!1!==o.trimmed&&o.spriteSourceSize&&(p=new ge(Math.floor(o.spriteSourceSize.x)/this.resolution,Math.floor(o.spriteSourceSize.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution)),this.textures[n]=new ji(this.baseTexture,s,m,p,o.rotated?2:0,o.anchor),ji.addToCache(this.textures[n],n)}i++}},t.prototype._processAnimations=function(){var t=this.data.animations||{};for(var e in t){this.animations[e]=[];for(var i=0;i<t[e].length;i++){var r=t[e][i];this.animations[e].push(this.textures[r])}}},t.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},t.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout((function(){e._batchIndex*t.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())}),0)},t.prototype.destroy=function(t){var e;for(var i in void 0===t&&(t=!1),this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&(null===(e=this._texture)||void 0===e||e.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]},t.BATCH_SIZE=1e3,t}()),Ka=function(){function t(){}return t.use=function(e,i){var r,n,o=this,a=e.name+"_image";if(e.data&&e.type===io.TYPE.JSON&&e.data.frames&&!o.resources[a]){var s=null===(n=null===(r=e.data)||void 0===r?void 0:r.meta)||void 0===n?void 0:n.related_multi_packs;if(Array.isArray(s))for(var p=function(t){if("string"!=typeof t)return"continue";var i=t.replace(".json",""),r=kt.resolve(e.url.replace(o.baseUrl,""),t);if(o.resources[i]||Object.values(o.resources).some((function(t){return kt.format(kt.parse(t.url))===r})))return"continue";var n={crossOrigin:e.crossOrigin,loadType:io.LOAD_TYPE.XHR,xhrType:io.XHR_RESPONSE_TYPE.JSON,parentResource:e,metadata:e.metadata};o.add(i,r,n)},l=0,m=s;l<m.length;l++)p(m[l]);var y={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},h=t.getResourcePath(e,o.baseUrl);o.add(a,h,y,(function(t){if(t.error)i(t.error);else{var r=new qa(t.texture,e.data,e.url);r.parse().then((function(){e.spritesheet=r,e.textures=r.textures,i()}))}}))}else i()},t.getResourcePath=function(t,e){return t.isDataUrl?t.data.meta.image:kt.resolve(t.url.replace(e,""),t.data.meta.image)},t.extension=li.Loader,t}(),Za=function(t,e){return Za=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},Za(t,e)};function Qa(t,e){function i(){this.constructor=t}Za(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var Ja=new _e,$a=function(t){function e(e,i,r){void 0===i&&(i=100),void 0===r&&(r=100);var n=t.call(this,e)||this;return n.tileTransform=new Ge,n._width=i,n._height=r,n.uvMatrix=n.texture.uvMatrix||new Wr(e),n.pluginName="tilingSprite",n.uvRespectAnchor=!1,n}return Qa(e,t),Object.defineProperty(e.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copyFrom(t)},enumerable:!1,configurable:!0}),e.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},e.prototype._render=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,i=this._width*(1-this._anchor._x),r=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,i,r)},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new ge),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,Ja);var e=this._width,i=this._height,r=-e*this.anchor._x;if(Ja.x>=r&&Ja.x<r+e){var n=-i*this.anchor._y;if(Ja.y>=n&&Ja.y<n+i)return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.tileTransform=null,this.uvMatrix=null},e.from=function(t,i){return new e(t instanceof ji?t:ji.from(t,i),i.width,i.height)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!1,configurable:!0}),e}(xa),ts="#version 100\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",es=new Ie,is=function(t){function e(e){var i=t.call(this,e)||this;return e.runners.contextChange.add(i),i.quad=new er,i.state=Hr.for2d(),i}return Qa(e,t),e.prototype.contextChange=function(){var t=this.renderer,e={globals:t.globalUniforms};this.simpleShader=kr.from(ts,"#version 100\n#define SHADER_NAME Tiling-Sprite-Simple-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 texSample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = texSample * uColor;\n}\n",e),this.shader=t.context.webGLVersion>1?kr.from("#version 300 es\n#define SHADER_NAME Tiling-Sprite-300\n\nprecision lowp float;\n\nin vec2 aVertexPosition;\nin vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nout vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","#version 300 es\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nin vec2 vTextureCoord;\n\nout vec4 fragmentColor;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0\n\n    fragmentColor = texSample * uColor;\n}\n",e):kr.from(ts,"#version 100\n#ifdef GL_EXT_shader_texture_lod\n    #extension GL_EXT_shader_texture_lod : enable\n#endif\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    #ifdef GL_EXT_shader_texture_lod\n        vec4 texSample = unclamped == coord\n            ? texture2D(uSampler, coord) \n            : texture2DLodEXT(uSampler, coord, 0);\n    #else\n        vec4 texSample = texture2D(uSampler, coord);\n    #endif\n\n    gl_FragColor = texSample * uColor;\n}\n",e)},e.prototype.render=function(t){var e=this.renderer,i=this.quad,r=i.vertices;r[0]=r[6]=t._width*-t.anchor.x,r[1]=r[3]=t._height*-t.anchor.y,r[2]=r[4]=t._width*(1-t.anchor.x),r[5]=r[7]=t._height*(1-t.anchor.y);var n=t.uvRespectAnchor?t.anchor.x:0,o=t.uvRespectAnchor?t.anchor.y:0;(r=i.uvs)[0]=r[6]=-n,r[1]=r[3]=-o,r[2]=r[4]=1-n,r[5]=r[7]=1-o,i.invalidate();var a=t._texture,s=a.baseTexture,p=s.alphaMode>0,l=t.tileTransform.localTransform,m=t.uvMatrix,y=s.isPowerOfTwo&&a.frame.width===s.width&&a.frame.height===s.height;y&&(s._glTextures[e.CONTEXT_UID]?y=s.wrapMode!==pt.CLAMP:s.wrapMode===pt.CLAMP&&(s.wrapMode=pt.REPEAT));var h=y?this.simpleShader:this.shader,u=a.width,E=a.height,c=t._width,d=t._height;es.set(l.a*u/c,l.b*u/d,l.c*E/c,l.d*E/d,l.tx/c,l.ty/d),es.invert(),y?es.prepend(m.mapCoord):(h.uniforms.uMapCoord=m.mapCoord.toArray(!0),h.uniforms.uClampFrame=m.uClampFrame,h.uniforms.uClampOffset=m.uClampOffset),h.uniforms.uTransform=es.toArray(!0),h.uniforms.uColor=Zt(t.tint,t.worldAlpha,h.uniforms.uColor,p),h.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),h.uniforms.uSampler=a,e.shader.bind(h),e.geometry.bind(i),this.state.blendMode=qt(t.blendMode,p),e.state.set(this.state),e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},e.extension={name:"tilingSprite",type:li.RendererPlugin},e}(pr),rs=function(t,e){return rs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},rs(t,e)};function ns(t,e){function i(){this.constructor=t}rs(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var os=function(){function t(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return t.prototype.update=function(t){if(t||this._bufferUpdateId!==this.uvBuffer._updateID||this._textureUpdateId!==this.uvMatrix._updateID){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var e=this.uvBuffer.data;this.data&&this.data.length===e.length||(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}},t}(),as=new _e,ss=new xe,ps=function(t){function e(e,i,r,n){void 0===n&&(n=it.TRIANGLES);var o=t.call(this)||this;return o.geometry=e,o.shader=i,o.state=r||Hr.for2d(),o.drawMode=n,o.start=0,o.size=0,o.uvs=null,o.indices=null,o.vertexData=new Float32Array(1),o.vertexDirty=-1,o._transformID=-1,o._roundPixels=Dt.ROUND_PIXELS,o.batchUvs=null,o}return ns(e,t),Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},set:function(t){this._geometry!==t&&(this._geometry&&(this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose()),this._geometry=t,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return this.shader},set:function(t){this.shader=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(t){this.shader.tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(t){this.shader.texture=t},enumerable:!1,configurable:!0}),e.prototype._render=function(t){var i=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===it.TRIANGLES&&i.length<2*e.BATCHABLE_SIZE?this._renderToBatch(t):this._renderDefault(t)},e.prototype._renderDefault=function(t){var e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},e.prototype._renderToBatch=function(t){var e=this.geometry,i=this.shader;i.uvMatrix&&(i.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=i._tintRGB,this._texture=i.texture;var r=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[r]),t.plugins[r].render(this)},e.prototype.calculateVertices=function(){var t=this.geometry.buffers[0],e=t.data,i=t._updateID;if(i!==this.vertexDirty||this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID,this.vertexData.length!==e.length&&(this.vertexData=new Float32Array(e.length));for(var r=this.transform.worldTransform,n=r.a,o=r.b,a=r.c,s=r.d,p=r.tx,l=r.ty,m=this.vertexData,y=0;y<m.length/2;y++){var h=e[2*y],u=e[2*y+1];m[2*y]=n*h+a*u+p,m[2*y+1]=o*h+s*u+l}if(this._roundPixels){var E=Dt.RESOLUTION;for(y=0;y<m.length;++y)m[y]=Math.round((m[y]*E|0)/E)}this.vertexDirty=i}},e.prototype.calculateUvs=function(){var t=this.geometry.buffers[1],e=this.shader;e.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new os(t,e.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,as);for(var e=this.geometry.getBuffer("aVertexPosition").data,i=ss.points,r=this.geometry.getIndex().data,n=r.length,o=4===this.drawMode?3:1,a=0;a+2<n;a+=o){var s=2*r[a],p=2*r[a+1],l=2*r[a+2];if(i[0]=e[s],i[1]=e[s+1],i[2]=e[p],i[3]=e[p+1],i[4]=e[l],i[5]=e[l+1],ss.contains(as.x,as.y))return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},e.BATCHABLE_SIZE=100,e}(pi),ls=function(t){function e(e,i){var r=this,n={uSampler:e,alpha:1,uTextureMatrix:Ie.IDENTITY,uColor:new Float32Array([1,1,1,1])};return(i=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},i)).uniforms&&Object.assign(n,i.uniforms),(r=t.call(this,i.program||Br.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),n)||this)._colorDirty=!1,r.uvMatrix=new Wr(e),r.batchable=void 0===i.program,r.pluginName=i.pluginName,r.tint=i.tint,r.alpha=i.alpha,r}return ns(e,t),Object.defineProperty(e.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),e.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var t=this.texture.baseTexture;Zt(this._tint,this._alpha,this.uniforms.uColor,t.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},e}(kr),ms=function(t){function e(e,i,r){var n=t.call(this)||this,o=new qi(e),a=new qi(i,!0),s=new qi(r,!0,!0);return n.addAttribute("aVertexPosition",o,2,!1,ot.FLOAT).addAttribute("aTextureCoord",a,2,!1,ot.FLOAT).addIndex(s),n._updateId=-1,n}return ns(e,t),Object.defineProperty(e.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),e}($i),ys=function(t,e){return ys=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},ys(t,e)},hs=function(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]},us=function(){function t(){}return t.test=function(t){return"string"==typeof t&&0===t.indexOf("info face=")},t.parse=function(t){var e=t.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(var r in e){var n=e[r].match(/^[a-z]+/gm)[0],o=e[r].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),a={};for(var s in o){var p=o[s].split("="),l=p[0],m=p[1].replace(/"/gm,""),y=parseFloat(m),h=isNaN(y)?m:y;a[l]=h}i[n].push(a)}var u=new hs;return i.info.forEach((function(t){return u.info.push({face:t.face,size:parseInt(t.size,10)})})),i.common.forEach((function(t){return u.common.push({lineHeight:parseInt(t.lineHeight,10)})})),i.page.forEach((function(t){return u.page.push({id:parseInt(t.id,10),file:t.file})})),i.char.forEach((function(t){return u.char.push({id:parseInt(t.id,10),page:parseInt(t.page,10),x:parseInt(t.x,10),y:parseInt(t.y,10),width:parseInt(t.width,10),height:parseInt(t.height,10),xoffset:parseInt(t.xoffset,10),yoffset:parseInt(t.yoffset,10),xadvance:parseInt(t.xadvance,10)})})),i.kerning.forEach((function(t){return u.kerning.push({first:parseInt(t.first,10),second:parseInt(t.second,10),amount:parseInt(t.amount,10)})})),i.distanceField.forEach((function(t){return u.distanceField.push({distanceRange:parseInt(t.distanceRange,10),fieldType:t.fieldType})})),u},t}(),Es=function(){function t(){}return t.test=function(t){return t instanceof XMLDocument&&t.getElementsByTagName("page").length&&null!==t.getElementsByTagName("info")[0].getAttribute("face")},t.parse=function(t){for(var e=new hs,i=t.getElementsByTagName("info"),r=t.getElementsByTagName("common"),n=t.getElementsByTagName("page"),o=t.getElementsByTagName("char"),a=t.getElementsByTagName("kerning"),s=t.getElementsByTagName("distanceField"),p=0;p<i.length;p++)e.info.push({face:i[p].getAttribute("face"),size:parseInt(i[p].getAttribute("size"),10)});for(p=0;p<r.length;p++)e.common.push({lineHeight:parseInt(r[p].getAttribute("lineHeight"),10)});for(p=0;p<n.length;p++)e.page.push({id:parseInt(n[p].getAttribute("id"),10)||0,file:n[p].getAttribute("file")});for(p=0;p<o.length;p++){var l=o[p];e.char.push({id:parseInt(l.getAttribute("id"),10),page:parseInt(l.getAttribute("page"),10)||0,x:parseInt(l.getAttribute("x"),10),y:parseInt(l.getAttribute("y"),10),width:parseInt(l.getAttribute("width"),10),height:parseInt(l.getAttribute("height"),10),xoffset:parseInt(l.getAttribute("xoffset"),10),yoffset:parseInt(l.getAttribute("yoffset"),10),xadvance:parseInt(l.getAttribute("xadvance"),10)})}for(p=0;p<a.length;p++)e.kerning.push({first:parseInt(a[p].getAttribute("first"),10),second:parseInt(a[p].getAttribute("second"),10),amount:parseInt(a[p].getAttribute("amount"),10)});for(p=0;p<s.length;p++)e.distanceField.push({fieldType:s[p].getAttribute("fieldType"),distanceRange:parseInt(s[p].getAttribute("distanceRange"),10)});return e},t}(),cs=function(){function t(){}return t.test=function(t){if("string"==typeof t&&t.indexOf("<font>")>-1){var e=(new globalThis.DOMParser).parseFromString(t,"text/xml");return Es.test(e)}return!1},t.parse=function(t){var e=(new globalThis.DOMParser).parseFromString(t,"text/xml");return Es.parse(e)},t}(),ds=[us,Es,cs];function fs(t){for(var e=0;e<ds.length;e++)if(ds[e].test(t))return ds[e];return null}function _s(t,e,i,r,n,o,a){var s=i.text,p=i.fontProperties;e.translate(r,n),e.scale(o,o);var l=a.strokeThickness/2,m=-a.strokeThickness/2;if(e.font=a.toFontString(),e.lineWidth=a.strokeThickness,e.textBaseline=a.textBaseline,e.lineJoin=a.lineJoin,e.miterLimit=a.miterLimit,e.fillStyle=function(t,e,i,r,n,o){var a,s=i.fill;if(!Array.isArray(s))return s;if(1===s.length)return s[0];var p=i.dropShadow?i.dropShadowDistance:0,l=i.padding||0,m=t.width/r-p-2*l,y=t.height/r-p-2*l,h=s.slice(),u=i.fillGradientStops.slice();if(!u.length)for(var E=h.length+1,c=1;c<E;++c)u.push(c/E);if(h.unshift(s[0]),u.unshift(0),h.push(s[s.length-1]),u.push(1),i.fillGradientType===oa.LINEAR_VERTICAL){a=e.createLinearGradient(m/2,l,m/2,y+l);var d=0,f=(o.fontProperties.fontSize+i.strokeThickness)/y;for(c=0;c<n.length;c++)for(var _=o.lineHeight*c,v=0;v<h.length;v++){var g=_/y+("number"==typeof u[v]?u[v]:v/h.length)*f,T=Math.max(d,g);T=Math.min(T,1),a.addColorStop(T,h[v]),d=T}}else{a=e.createLinearGradient(l,y/2,m+l,y/2);var b=h.length+1,x=1;for(c=0;c<h.length;c++){var S;S="number"==typeof u[c]?u[c]:x/b,a.addColorStop(S,h[c]),x++}}return a}(t,e,a,o,[s],i),e.strokeStyle=a.stroke,a.dropShadow){var y=a.dropShadowColor,h=Wt("number"==typeof y?y:Yt(y)),u=a.dropShadowBlur*o,E=a.dropShadowDistance*o;e.shadowColor="rgba("+255*h[0]+","+255*h[1]+","+255*h[2]+","+a.dropShadowAlpha+")",e.shadowBlur=u,e.shadowOffsetX=Math.cos(a.dropShadowAngle)*E,e.shadowOffsetY=Math.sin(a.dropShadowAngle)*E}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;a.stroke&&a.strokeThickness&&e.strokeText(s,l,m+i.lineHeight-p.descent),a.fill&&e.fillText(s,l,m+i.lineHeight-p.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function vs(t){return Array.from?Array.from(t):t.split("")}function gs(t){return t.codePointAt?t.codePointAt(0):t.charCodeAt(0)}var Ts=function(){function t(t,e,i){var r,n,o=t.info[0],a=t.common[0],s=t.page[0],p=t.distanceField[0],l=ue(s.file),m={};this._ownsTextures=i,this.font=o.face,this.size=o.size,this.lineHeight=a.lineHeight/l,this.chars={},this.pageTextures=m;for(var y=0;y<t.page.length;y++){var h=t.page[y],u=h.id,E=h.file;m[u]=e instanceof Array?e[y]:e[E],(null==p?void 0:p.fieldType)&&"none"!==p.fieldType&&(m[u].baseTexture.alphaMode=mt.NO_PREMULTIPLIED_ALPHA,m[u].baseTexture.mipmap=lt.OFF)}for(y=0;y<t.char.length;y++){var c=t.char[y],d=(u=c.id,c.page),f=t.char[y],_=f.x,v=f.y,g=f.width,T=f.height,b=f.xoffset,x=f.yoffset,S=f.xadvance;v/=l,g/=l,T/=l,b/=l,x/=l,S/=l;var R=new ge((_/=l)+m[d].frame.x/l,v+m[d].frame.y/l,g,T);this.chars[u]={xOffset:b,yOffset:x,xAdvance:S,kerning:{},texture:new ji(m[d].baseTexture,R),page:d}}for(y=0;y<t.kerning.length;y++){var I=t.kerning[y],A=I.first,M=I.second,C=I.amount;A/=l,M/=l,C/=l,this.chars[M]&&(this.chars[M].kerning[A]=C)}this.distanceFieldRange=null==p?void 0:p.distanceRange,this.distanceFieldType=null!==(n=null===(r=null==p?void 0:p.fieldType)||void 0===r?void 0:r.toLowerCase())&&void 0!==n?n:"none"}return t.prototype.destroy=function(){for(var t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(var t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null},t.install=function(e,i,r){var n;if(e instanceof hs)n=e;else{var o=fs(e);if(!o)throw new Error("Unrecognized data format for font.");n=o.parse(e)}i instanceof ji&&(i=[i]);var a=new t(n,i,r);return t.available[a.font]=a,a},t.uninstall=function(e){var i=t.available[e];if(!i)throw new Error("No font found named '"+e+"'");i.destroy(),delete t.available[e]},t.from=function(e,i,r){if(!e)throw new Error("[BitmapFont] Property `name` is required.");var n=Object.assign({},t.defaultOptions,r),o=n.chars,a=n.padding,s=n.resolution,p=n.textureWidth,l=n.textureHeight,m=function(t){"string"==typeof t&&(t=[t]);for(var e=[],i=0,r=t.length;i<r;i++){var n=t[i];if(Array.isArray(n)){if(2!==n.length)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+n.length+".");var o=n[0].charCodeAt(0),a=n[1].charCodeAt(0);if(a<o)throw new Error("[BitmapFont]: Invalid character range.");for(var s=o,p=a;s<=p;s++)e.push(String.fromCharCode(s))}else e.push.apply(e,vs(n))}if(0===e.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}(o),y=i instanceof Aa?i:new Aa(i),h=p,u=new hs;u.info[0]={face:y.fontFamily,size:y.fontSize},u.common[0]={lineHeight:y.fontSize};for(var E,c,d,f=0,_=0,v=0,g=[],T=0;T<m.length;T++){E||((E=Dt.ADAPTER.createCanvas()).width=p,E.height=l,c=E.getContext("2d"),d=new Ii(E,{resolution:s}),g.push(new ji(d)),u.page.push({id:g.length-1,file:""}));var b=Na.measureText(m[T],y,!1,E),x=b.width,S=Math.ceil(b.height),R=Math.ceil(("italic"===y.fontStyle?2:1)*x);if(_>=l-S*s){if(0===_)throw new Error("[BitmapFont] textureHeight "+l+"px is too small for "+y.fontSize+"px fonts");--T,E=null,c=null,d=null,_=0,f=0,v=0}else if(v=Math.max(S+b.fontProperties.descent,v),R*s+f>=h)--T,_+=v*s,_=Math.ceil(_),f=0,v=0;else{_s(E,c,b,f,_,s,y);var I=gs(b.text);u.char.push({id:I,page:g.length-1,x:f/s,y:_/s,width:R,height:S,xoffset:0,yoffset:0,xadvance:Math.ceil(x-(y.dropShadow?y.dropShadowDistance:0)-(y.stroke?y.strokeThickness:0))}),f+=(R+2*a)*s,f=Math.ceil(f)}}T=0;for(var A=m.length;T<A;T++)for(var M=m[T],C=0;C<A;C++){var F=m[C],N=c.measureText(M).width,O=c.measureText(F).width,w=c.measureText(M+F).width-(N+O);w&&u.kerning.push({first:gs(M),second:gs(F),amount:w})}var P=new t(u,g,!0);return void 0!==t.available[e]&&t.uninstall(e),t.available[e]=P,P},t.ALPHA=[["a","z"],["A","Z"]," "],t.NUMERIC=[["0","9"]],t.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],t.ASCII=[[" ","~"]],t.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:t.ALPHANUMERIC},t.available={},t}(),bs=[],xs=[],Ss=[],Rs=(function(t){function e(i,r){void 0===r&&(r={});var n=t.call(this)||this;n._tint=16777215;var o=Object.assign({},e.styleDefaults,r),a=o.align,s=o.tint,p=o.maxWidth,l=o.letterSpacing,m=o.fontName,y=o.fontSize;if(!Ts.available[m])throw new Error('Missing BitmapFont "'+m+'"');return n._activePagesMeshData=[],n._textWidth=0,n._textHeight=0,n._align=a,n._tint=s,n._fontName=m,n._fontSize=y||Ts.available[m].size,n.text=i,n._maxWidth=p,n._maxLineHeight=0,n._letterSpacing=l,n._anchor=new Re((function(){n.dirty=!0}),n,0,0),n._roundPixels=Dt.ROUND_PIXELS,n.dirty=!0,n._resolution=Dt.RESOLUTION,n._autoResolution=!0,n._textureCache={},n}(function(t,e){function i(){this.constructor=t}ys(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)})(e,t),e.prototype.updateText=function(){for(var t,e=Ts.available[this._fontName],i=this._fontSize/e.size,r=new _e,n=[],o=[],a=[],s=vs(this._text.replace(/(?:\r\n|\r)/g,"\n")||" "),p=this._maxWidth*e.size/this._fontSize,l="none"===e.distanceFieldType?bs:xs,m=null,y=0,h=0,u=0,E=-1,c=0,d=0,f=0,_=0,v=0;v<s.length;v++){var g=gs(k=s[v]);if(/(?:\s)/.test(k)&&(E=v,c=y,_++),"\r"!==k&&"\n"!==k){var T=e.chars[g];if(T){m&&T.kerning[m]&&(r.x+=T.kerning[m]);var b=Ss.pop()||{texture:ji.EMPTY,line:0,charCode:0,prevSpaces:0,position:new _e};b.texture=T.texture,b.line=u,b.charCode=g,b.position.x=r.x+T.xOffset+this._letterSpacing/2,b.position.y=r.y+T.yOffset,b.prevSpaces=_,n.push(b),y=b.position.x+Math.max(T.xAdvance-T.xOffset,T.texture.orig.width),r.x+=T.xAdvance+this._letterSpacing,f=Math.max(f,T.yOffset+T.texture.height),m=g,-1!==E&&p>0&&r.x>p&&(ie(n,1+E-++d,1+v-E),v=E,E=-1,o.push(c),a.push(n.length>0?n[n.length-1].prevSpaces:0),h=Math.max(h,c),u++,r.x=0,r.y+=e.lineHeight,m=null,_=0)}}else o.push(y),a.push(-1),h=Math.max(h,y),++u,++d,r.x=0,r.y+=e.lineHeight,m=null,_=0}var x=s[s.length-1];"\r"!==x&&"\n"!==x&&(/(?:\s)/.test(x)&&(y=c),o.push(y),h=Math.max(h,y),a.push(-1));var S=[];for(v=0;v<=u;v++){var R=0;"right"===this._align?R=h-o[v]:"center"===this._align?R=(h-o[v])/2:"justify"===this._align&&(R=a[v]<0?0:(h-o[v])/a[v]),S.push(R)}var I=n.length,A={},M=[],C=this._activePagesMeshData;for(l.push.apply(l,C),v=0;v<I;v++){var F=(X=n[v].texture).baseTexture.uid;if(!A[F]){if(!(K=l.pop())){var N=new ms,O=void 0,w=void 0;"none"===e.distanceFieldType?(O=new ls(ji.EMPTY),w=et.NORMAL):(O=new ls(ji.EMPTY,{program:Br.from("// Mesh material default fragment\r\nattribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\nuniform mat3 translationMatrix;\r\nuniform mat3 uTextureMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r\n}\r\n","// Pixi texture info\r\nvarying vec2 vTextureCoord;\r\nuniform sampler2D uSampler;\r\n\r\n// Tint\r\nuniform vec4 uColor;\r\n\r\n// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r\nuniform float uFWidth;\r\n\r\nvoid main(void) {\r\n\r\n  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r\n  vec4 texColor = texture2D(uSampler, vTextureCoord);\r\n\r\n  // MSDF\r\n  float median = texColor.r + texColor.g + texColor.b -\r\n                  min(texColor.r, min(texColor.g, texColor.b)) -\r\n                  max(texColor.r, max(texColor.g, texColor.b));\r\n  // SDF\r\n  median = min(median, texColor.a);\r\n\r\n  float screenPxDistance = uFWidth * (median - 0.5);\r\n  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r\n  if (median < 0.01) {\r\n    alpha = 0.0;\r\n  } else if (median > 0.99) {\r\n    alpha = 1.0;\r\n  }\r\n\r\n  // NPM Textures, NPM outputs\r\n  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r\n\r\n}\r\n"),uniforms:{uFWidth:0}}),w=et.NORMAL_NPM);var P=new ps(N,O);P.blendMode=w,K={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:P,vertices:null,uvs:null,indices:null}}K.index=0,K.indexCount=0,K.vertexCount=0,K.uvsCount=0,K.total=0;var G=this._textureCache;G[F]=G[F]||new ji(X.baseTexture),K.mesh.texture=G[F],K.mesh.tint=this._tint,M.push(K),A[F]=K}A[F].total++}for(v=0;v<C.length;v++)-1===M.indexOf(C[v])&&this.removeChild(C[v].mesh);for(v=0;v<M.length;v++)M[v].mesh.parent!==this&&this.addChild(M[v].mesh);for(var v in this._activePagesMeshData=M,A){var D=(K=A[v]).total;if(!((null===(t=K.indices)||void 0===t?void 0:t.length)>6*D)||K.vertices.length<2*ps.BATCHABLE_SIZE)K.vertices=new Float32Array(8*D),K.uvs=new Float32Array(8*D),K.indices=new Uint16Array(6*D);else for(var L=K.total,U=K.vertices,B=4*L*2;B<U.length;B++)U[B]=0;K.mesh.size=6*D}for(v=0;v<I;v++){var k,H=(k=n[v]).position.x+S[k.line]*("justify"===this._align?k.prevSpaces:1);this._roundPixels&&(H=Math.round(H));var X,j=H*i,W=k.position.y*i,V=A[(X=k.texture).baseTexture.uid],Y=X.frame,z=X._uvs,q=V.index++;V.indices[6*q+0]=0+4*q,V.indices[6*q+1]=1+4*q,V.indices[6*q+2]=2+4*q,V.indices[6*q+3]=0+4*q,V.indices[6*q+4]=2+4*q,V.indices[6*q+5]=3+4*q,V.vertices[8*q+0]=j,V.vertices[8*q+1]=W,V.vertices[8*q+2]=j+Y.width*i,V.vertices[8*q+3]=W,V.vertices[8*q+4]=j+Y.width*i,V.vertices[8*q+5]=W+Y.height*i,V.vertices[8*q+6]=j,V.vertices[8*q+7]=W+Y.height*i,V.uvs[8*q+0]=z.x0,V.uvs[8*q+1]=z.y0,V.uvs[8*q+2]=z.x1,V.uvs[8*q+3]=z.y1,V.uvs[8*q+4]=z.x2,V.uvs[8*q+5]=z.y2,V.uvs[8*q+6]=z.x3,V.uvs[8*q+7]=z.y3}for(var v in this._textWidth=h*i,this._textHeight=(r.y+e.lineHeight)*i,A){var K=A[v];if(0!==this.anchor.x||0!==this.anchor.y)for(var Z=0,Q=this._textWidth*this.anchor.x,J=this._textHeight*this.anchor.y,$=0;$<K.total;$++)K.vertices[Z++]-=Q,K.vertices[Z++]-=J,K.vertices[Z++]-=Q,K.vertices[Z++]-=J,K.vertices[Z++]-=Q,K.vertices[Z++]-=J,K.vertices[Z++]-=Q,K.vertices[Z++]-=J;this._maxLineHeight=f*i;var tt=K.mesh.geometry.getBuffer("aVertexPosition"),it=K.mesh.geometry.getBuffer("aTextureCoord"),rt=K.mesh.geometry.getIndex();tt.data=K.vertices,it.data=K.uvs,rt.data=K.indices,tt.update(),it.update(),rt.update()}for(v=0;v<n.length;v++)Ss.push(n[v])},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype._render=function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);var i=Ts.available[this._fontName],r=i.distanceFieldRange,n=i.distanceFieldType,o=i.size;if("none"!==n)for(var a=this.worldTransform,s=a.a,p=a.b,l=a.c,m=a.d,y=Math.sqrt(s*s+p*p),h=Math.sqrt(l*l+m*m),u=(Math.abs(y)+Math.abs(h))/2,E=this._fontSize/o,c=0,d=this._activePagesMeshData;c<d.length;c++)d[c].mesh.shader.uniforms.uFWidth=u*r*E*this._resolution;t.prototype._render.call(this,e)},e.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){if(this._tint!==t){this._tint=t;for(var e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=t}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontName",{get:function(){return this._fontName},set:function(t){if(!Ts.available[t])throw new Error('Missing BitmapFont "'+t+'"');this._fontName!==t&&(this._fontName=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),e.prototype.destroy=function(e){var i=this._textureCache,r="none"===Ts.available[this._fontName].distanceFieldType?bs:xs;for(var n in r.push.apply(r,this._activePagesMeshData),this._activePagesMeshData=[],r.filter((function(t){return i[t.mesh.texture.baseTexture.uid]})).forEach((function(t){t.mesh.texture=ji.EMPTY})),i)i[n].destroy(),delete i[n];this._textureCache=null,t.prototype.destroy.call(this,e)},e.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0}}(pi),function(){function t(){}return t.add=function(){io.setExtensionXhrType("fnt",io.XHR_RESPONSE_TYPE.TEXT)},t.use=function(e,i){var r=fs(e.data);if(r)for(var n=t.getBaseUrl(this,e),o=r.parse(e.data),a={},s=function(t){a[t.metadata.pageFile]=t.texture,Object.keys(a).length===o.page.length&&(e.bitmapFont=Ts.install(o,a,!0),i())},p=0;p<o.page.length;++p){var l=o.page[p].file,m=n+l,y=!1;for(var h in this.resources){var u=this.resources[h];if(u.url===m){u.metadata.pageFile=l,u.texture?s(u):u.onAfterMiddleware.add(s),y=!0;break}}if(!y){var E={crossOrigin:e.crossOrigin,loadType:io.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:l},e.metadata.imageMetadata),parentResource:e};this.add(m,E,s)}}else i()},t.getBaseUrl=function(e,i){var r=i.isDataUrl?"":t.dirname(i.url);return i.isDataUrl&&("."===r&&(r=""),e.baseUrl&&r&&"/"===e.baseUrl.charAt(e.baseUrl.length-1)&&(r+="/")),(r=r.replace(e.baseUrl,""))&&"/"!==r.charAt(r.length-1)&&(r+="/"),r},t.dirname=function(t){var e=t.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return e===t?".":""===e?"/":e},t.extension=li.Loader,t}()),Is=function(t,e){return Is=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},Is(t,e)};!function(t){function e(e){void 0===e&&(e=1);var i=t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1})||this;return i.alpha=e,i}(function(t,e){function i(){this.constructor=t}Is(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)})(e,t),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0})}(Xr);var As=function(t,e){return As=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},As(t,e)};function Ms(t,e){function i(){this.constructor=t}As(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var Cs,Fs,Ns,Os,ws,Ps,Gs,Ds,Ls,Us,Bs,ks,Hs,Xs,js,Ws,Vs,Ys,zs,qs,Ks={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},Zs=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");!function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(Cs||(Cs={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(Fs||(Fs={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(Ns||(Ns={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(Os||(Os={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(ws||(ws={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(Ps||(Ps={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(Gs||(Gs={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(Ds||(Ds={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(Ls||(Ls={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(Us||(Us={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(Bs||(Bs={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(ks||(ks={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(Hs||(Hs={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(Xs||(Xs={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(js||(js={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(Ws||(Ws={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR"}(Vs||(Vs={})),function(t){t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA"}(Ys||(Ys={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(zs||(zs={})),function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(qs||(qs={}));var Qs=function(t){function e(e,i,r,n,o){void 0===i&&(i=8),void 0===r&&(r=4),void 0===n&&(n=Dt.FILTER_RESOLUTION),void 0===o&&(o=5);var a=this,s=function(t,e){var i,r=Math.ceil(t/2),n="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",o="";i=e?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var a=0;a<t;a++){var s=i.replace("%index%",a.toString());o+=s=s.replace("%sampleIndex%",a-(r-1)+".0"),o+="\n"}return(n=n.replace("%blur%",o)).replace("%size%",t.toString())}(o,e),p=function(t){for(var e,i=Ks[t],r=i.length,n=Zs,o="",a=0;a<t;a++){var s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",a.toString());e=a,a>=r&&(e=t-a-1),o+=s=s.replace("%value%",i[e].toString()),o+="\n"}return(n=n.replace("%blur%",o)).replace("%size%",t.toString())}(o);return(a=t.call(this,s,p)||this).horizontal=e,a.resolution=n,a._quality=0,a.quality=r,a.blur=i,a}return Ms(e,t),e.prototype.apply=function(t,e,i,r){if(i?this.horizontal?this.uniforms.strength=1/i.width*(i.width/e.width):this.uniforms.strength=1/i.height*(i.height/e.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/e.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/e.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,i,r);else{var n=t.getFilterTexture(),o=t.renderer,a=e,s=n;this.state.blend=!1,t.applyFilter(this,a,s,Xs.CLEAR);for(var p=1;p<this.passes-1;p++){t.bindAndClear(a,Xs.BLIT),this.uniforms.uSampler=s;var l=s;s=a,a=l,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,s,i,r),t.returnFilterTexture(n)}},Object.defineProperty(e.prototype,"blur",{get:function(){return this.strength},set:function(t){this.padding=1+2*Math.abs(t),this.strength=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t},enumerable:!1,configurable:!0}),e}(Xr),Js=(function(t){function e(e,i,r,n){void 0===e&&(e=8),void 0===i&&(i=4),void 0===r&&(r=Dt.FILTER_RESOLUTION),void 0===n&&(n=5);var o=t.call(this)||this;return o.blurXFilter=new Qs(!0,e,i,r,n),o.blurYFilter=new Qs(!1,e,i,r,n),o.resolution=r,o.quality=i,o.blur=e,o.repeatEdgePixels=!1,o}Ms(e,t),e.prototype.apply=function(t,e,i,r){var n=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(n&&o){var a=t.getFilterTexture();this.blurXFilter.apply(t,e,a,Xs.CLEAR),this.blurYFilter.apply(t,a,i,r),t.returnFilterTexture(a)}else o?this.blurYFilter.apply(t,e,i,r):this.blurXFilter.apply(t,e,i,r)},e.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))},Object.defineProperty(e.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(t){this.blurYFilter.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(t){this._repeatEdgePixels=t,this.updatePadding()},enumerable:!1,configurable:!0})}(Xr),function(t,e){return Js=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},Js(t,e)}),$s=function(t){function e(){var e=this,i={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return(e=t.call(this,gn,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",i)||this).alpha=1,e}return function(t,e){function i(){this.constructor=t}Js(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype._loadMatrix=function(t,e){void 0===e&&(e=!1);var i=t;e&&(this._multiply(i,this.uniforms.m,t),i=this._colorMatrix(i)),this.uniforms.m=i},e.prototype._multiply=function(t,e,i){return t[0]=e[0]*i[0]+e[1]*i[5]+e[2]*i[10]+e[3]*i[15],t[1]=e[0]*i[1]+e[1]*i[6]+e[2]*i[11]+e[3]*i[16],t[2]=e[0]*i[2]+e[1]*i[7]+e[2]*i[12]+e[3]*i[17],t[3]=e[0]*i[3]+e[1]*i[8]+e[2]*i[13]+e[3]*i[18],t[4]=e[0]*i[4]+e[1]*i[9]+e[2]*i[14]+e[3]*i[19]+e[4],t[5]=e[5]*i[0]+e[6]*i[5]+e[7]*i[10]+e[8]*i[15],t[6]=e[5]*i[1]+e[6]*i[6]+e[7]*i[11]+e[8]*i[16],t[7]=e[5]*i[2]+e[6]*i[7]+e[7]*i[12]+e[8]*i[17],t[8]=e[5]*i[3]+e[6]*i[8]+e[7]*i[13]+e[8]*i[18],t[9]=e[5]*i[4]+e[6]*i[9]+e[7]*i[14]+e[8]*i[19]+e[9],t[10]=e[10]*i[0]+e[11]*i[5]+e[12]*i[10]+e[13]*i[15],t[11]=e[10]*i[1]+e[11]*i[6]+e[12]*i[11]+e[13]*i[16],t[12]=e[10]*i[2]+e[11]*i[7]+e[12]*i[12]+e[13]*i[17],t[13]=e[10]*i[3]+e[11]*i[8]+e[12]*i[13]+e[13]*i[18],t[14]=e[10]*i[4]+e[11]*i[9]+e[12]*i[14]+e[13]*i[19]+e[14],t[15]=e[15]*i[0]+e[16]*i[5]+e[17]*i[10]+e[18]*i[15],t[16]=e[15]*i[1]+e[16]*i[6]+e[17]*i[11]+e[18]*i[16],t[17]=e[15]*i[2]+e[16]*i[7]+e[17]*i[12]+e[18]*i[17],t[18]=e[15]*i[3]+e[16]*i[8]+e[17]*i[13]+e[18]*i[18],t[19]=e[15]*i[4]+e[16]*i[9]+e[17]*i[14]+e[18]*i[19]+e[19],t},e.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},e.prototype.brightness=function(t,e){var i=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.tint=function(t,e){var i=[(t>>16&255)/255,0,0,0,0,0,(t>>8&255)/255,0,0,0,0,0,(255&t)/255,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.greyscale=function(t,e){var i=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},e.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var i=Math.cos(t),r=Math.sin(t),n=1/3,o=(0,Math.sqrt)(n),a=[i+(1-i)*n,n*(1-i)-o*r,n*(1-i)+o*r,0,0,n*(1-i)+o*r,i+n*(1-i),n*(1-i)-o*r,0,0,n*(1-i)-o*r,n*(1-i)+o*r,i+n*(1-i),0,0,0,0,0,1,0];this._loadMatrix(a,e)},e.prototype.contrast=function(t,e){var i=(t||0)+1,r=-.5*(i-1),n=[i,0,0,0,r,0,i,0,0,r,0,0,i,0,r,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.saturate=function(t,e){void 0===t&&(t=0);var i=2*t/3+1,r=-.5*(i-1),n=[i,r,r,0,0,r,i,r,0,0,r,r,i,0,0,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},e.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},e.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},e.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},e.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},e.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},e.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},e.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},e.prototype.colorTone=function(t,e,i,r,n){var o=((i=i||16770432)>>16&255)/255,a=(i>>8&255)/255,s=(255&i)/255,p=((r=r||3375104)>>16&255)/255,l=(r>>8&255)/255,m=(255&r)/255,y=[.3,.59,.11,0,0,o,a,s,t=t||.2,0,p,l,m,e=e||.15,0,o-p,a-l,s-m,0,0];this._loadMatrix(y,n)},e.prototype.night=function(t,e){var i=[-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.predator=function(t,e){var i=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},e.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},Object.defineProperty(e.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),e}(Xr);$s.prototype.grayscale=$s.prototype.greyscale;var tp=function(t,e){return tp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},tp(t,e)};!function(t){function e(e,i){var r=this,n=new Ie;return e.renderable=!1,(r=t.call(this,"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:e._texture,filterMatrix:n,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this).maskSprite=e,r.maskMatrix=n,null==i&&(i=20),r.scale=new _e(i,i),r}(function(t,e){function i(){this.constructor=t}tp(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)})(e,t),e.prototype.apply=function(t,e,i,r){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var n=this.maskSprite.worldTransform,o=Math.sqrt(n.a*n.a+n.b*n.b),a=Math.sqrt(n.c*n.c+n.d*n.d);0!==o&&0!==a&&(this.uniforms.rotation[0]=n.a/o,this.uniforms.rotation[1]=n.b/o,this.uniforms.rotation[2]=n.c/a,this.uniforms.rotation[3]=n.d/a),t.applyFilter(this,e,i,r)},Object.defineProperty(e.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t},enumerable:!1,configurable:!0})}(Xr);var ep,ip=function(t,e){return ip=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},ip(t,e)};(function(t,e){function i(){this.constructor=t}ip(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)})((function(){return ep.call(this,"\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputSize;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')||this}),ep=Xr);var rp,np,op,ap,sp,pp,lp,mp,yp,hp,up,Ep,cp,dp,fp,_p,vp,gp,Tp,bp,xp=function(t,e){return xp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},xp(t,e)};!function(t){function e(e,i){void 0===e&&(e=.5),void 0===i&&(i=Math.random());var r=t.call(this,gn,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0})||this;return r.noise=e,r.seed=i,r}(function(t,e){function i(){this.constructor=t}xp(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)})(e,t),Object.defineProperty(e.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t},enumerable:!1,configurable:!0})}(Xr),function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(rp||(rp={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(np||(np={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(op||(op={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(ap||(ap={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(sp||(sp={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(pp||(pp={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(lp||(lp={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(mp||(mp={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(yp||(yp={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(hp||(hp={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(up||(up={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(Ep||(Ep={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(cp||(cp={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(dp||(dp={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(fp||(fp={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(_p||(_p={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR"}(vp||(vp={})),function(t){t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA"}(gp||(gp={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(Tp||(Tp={})),function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(bp||(bp={}));var Sp=new Ie;oi.prototype._cacheAsBitmap=!1,oi.prototype._cacheData=null,oi.prototype._cacheAsBitmapResolution=null,oi.prototype._cacheAsBitmapMultisample=Tp.NONE;var Rp=function(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null};Object.defineProperties(oi.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(t){t!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get:function(){return this._cacheAsBitmapMultisample},set:function(t){t!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){var e;this._cacheAsBitmap!==t&&(this._cacheAsBitmap=t,t?(this._cacheData||(this._cacheData=new Rp),(e=this._cacheData).originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((e=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea))}}}),oi.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))},oi.prototype._initCachedDisplayObject=function(t){var e;if(!this._cacheData||!this._cacheData.sprite){var i=this.alpha;this.alpha=1,t.batch.flush();var r=this.getLocalBounds(null,!0).clone();if(this.filters&&this.filters.length){var n=this.filters[0].padding;r.pad(n)}r.ceil(Dt.RESOLUTION);var o=t.renderTexture.current,a=t.renderTexture.sourceFrame.clone(),s=t.renderTexture.destinationFrame.clone(),p=t.projection.transform,l=Wi.create({width:r.width,height:r.height,resolution:this.cacheAsBitmapResolution||t.resolution,multisample:null!==(e=this.cacheAsBitmapMultisample)&&void 0!==e?e:t.multisample}),m="cacheAsBitmap_"+oe();this._cacheData.textureCacheId=m,Ii.addToCache(l.baseTexture,m),ji.addToCache(l,m);var y=this.transform.localTransform.copyTo(Sp).invert().translate(-r.x,-r.y);this.render=this._cacheData.originalRender,t.render(this,{renderTexture:l,clear:!0,transform:y,skipUpdateTransform:!1}),t.framebuffer.blit(),t.projection.transform=p,t.renderTexture.bind(o,a,s),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=i;var h=new xa(l);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-r.x/r.width,h.anchor.y=-r.y/r.height,h.alpha=i,h._bounds=this._bounds,this._cacheData.sprite=h,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=h.containsPoint.bind(h)}},oi.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))},oi.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(null,!0),i=this.alpha;this.alpha=1;var r=t.context,n=t._projTransform;e.ceil(Dt.RESOLUTION);var o=Wi.create({width:e.width,height:e.height}),a="cacheAsBitmap_"+oe();this._cacheData.textureCacheId=a,Ii.addToCache(o.baseTexture,a),ji.addToCache(o,a);var s=Sp;this.transform.localTransform.copyTo(s),s.invert(),s.tx-=e.x,s.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:o,clear:!0,transform:s,skipUpdateTransform:!1}),t.context=r,t._projTransform=n,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=i;var p=new xa(o);p.transform.worldTransform=this.transform.worldTransform,p.anchor.x=-e.x/e.width,p.anchor.y=-e.y/e.height,p.alpha=i,p._bounds=this._bounds,this._cacheData.sprite=p,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=p.containsPoint.bind(p)}},oi.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},oi.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},oi.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Ii.removeFromCache(this._cacheData.textureCacheId),ji.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},oi.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)},oi.prototype.name=null,pi.prototype.getChildByName=function(t,e){for(var i=0,r=this.children.length;i<r;i++)if(this.children[i].name===t)return this.children[i];if(e)for(i=0,r=this.children.length;i<r;i++){var n=this.children[i];if(n.getChildByName){var o=n.getChildByName(t,!0);if(o)return o}}return null},oi.prototype.getGlobalPosition=function(t,e){return void 0===t&&(t=new _e),void 0===e&&(e=!1),this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t};var Ip,Ap,Mp,Cp,Fp,Np,Op,wp,Pp,Gp,Dp,Lp,Up,Bp,kp,Hp,Xp,jp,Wp,Vp,Yp=function(){function t(){}return t.init=function(t){var e=this;Object.defineProperty(this,"resizeTo",{set:function(t){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){e._resizeTo&&(e.cancelResize(),e._resizeId=requestAnimationFrame((function(){return e.resize()})))},this.cancelResize=function(){e._resizeId&&(cancelAnimationFrame(e._resizeId),e._resizeId=null)},this.resize=function(){if(e._resizeTo){var t,i;if(e.cancelResize(),e._resizeTo===globalThis.window)t=globalThis.innerWidth,i=globalThis.innerHeight;else{var r=e._resizeTo;t=r.clientWidth,i=r.clientHeight}e.renderer.resize(t,i)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null},t.destroy=function(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},t.extension=li.Application,t}();!function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(Ip||(Ip={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(Ap||(Ap={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(Mp||(Mp={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(Cp||(Cp={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(Fp||(Fp={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(Np||(Np={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(Op||(Op={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(wp||(wp={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(Pp||(Pp={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(Gp||(Gp={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(Dp||(Dp={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(Lp||(Lp={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(Up||(Up={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(Bp||(Bp={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(kp||(kp={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(Hp||(Hp={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR"}(Xp||(Xp={})),function(t){t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA"}(jp||(jp={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(Wp||(Wp={})),function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(Vp||(Vp={}));var zp={createCanvas:function(t,e){var i=document.createElement("canvas");return i.width=t,i.height=e,i},getWebGLRenderingContext:function(){return WebGLRenderingContext},getNavigator:function(){return navigator},getBaseUrl:function(){var t;return null!==(t=document.baseURI)&&void 0!==t?t:window.location.href},fetch:function(t,e){return fetch(t,e)}},qp=/iPhone/i,Kp=/iPod/i,Zp=/iPad/i,Qp=/\biOS-universal(?:.+)Mac\b/i,Jp=/\bAndroid(?:.+)Mobile\b/i,$p=/Android/i,tl=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,el=/Silk/i,il=/Windows Phone/i,rl=/\bWindows(?:.+)ARM\b/i,nl=/BlackBerry/i,ol=/BB10/i,al=/Opera Mini/i,sl=/\b(CriOS|Chrome)(?:.+)Mobile/i,pl=/Mobile(?:.+)Firefox\b/i,ll=function(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&t.maxTouchPoints>1&&"undefined"==typeof MSStream},ml=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var i=e.userAgent,r=i.split("[FBAN");void 0!==r[1]&&(i=r[0]),void 0!==(r=i.split("Twitter"))[1]&&(i=r[0]);var n=function(t){return function(e){return e.test(t)}}(i),o={apple:{phone:n(qp)&&!n(il),ipod:n(Kp),tablet:!n(qp)&&(n(Zp)||ll(e))&&!n(il),universal:n(Qp),device:(n(qp)||n(Kp)||n(Zp)||n(Qp)||ll(e))&&!n(il)},amazon:{phone:n(tl),tablet:!n(tl)&&n(el),device:n(tl)||n(el)},android:{phone:!n(il)&&n(tl)||!n(il)&&n(Jp),tablet:!n(il)&&!n(tl)&&!n(Jp)&&(n(el)||n($p)),device:!n(il)&&(n(tl)||n(el)||n(Jp)||n($p))||n(/\bokhttp\b/i)},windows:{phone:n(il),tablet:n(rl),device:n(il)||n(rl)},other:{blackberry:n(nl),blackberry10:n(ol),opera:n(al),firefox:n(pl),chrome:n(sl),device:n(nl)||n(ol)||n(al)||n(pl)||n(sl)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}(globalThis.navigator),yl={ADAPTER:zp,MIPMAP_TEXTURES:Lp.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:Wp.NONE,SPRITE_MAX_TEXTURES:function(t){var e,i=!0;(ml.tablet||ml.phone)&&(ml.apple.device&&(e=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(e[1],10)<11&&(i=!1),ml.android.device&&(e=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(e[1],10)<7&&(i=!1));return i?32:4}(),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:kp.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:Dp.CLAMP,SCALE_MODE:Gp.LINEAR,PRECISION_VERTEX:Hp.HIGH,PRECISION_FRAGMENT:ml.apple.device?Hp.HIGH:Hp.MEDIUM,CAN_UPLOAD_SAME_BUFFER:!ml.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},hl="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function ul(t,e,i){return t(i={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&i.path)}},i.exports),i.exports}function El(t,e){return Object.prototype.hasOwnProperty.call(t,e)}ul((function(t){var e=Object.prototype.hasOwnProperty,i="~";function r(){}function n(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function o(t,e,r,o,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new n(r,o||t,a),p=i?i+e:e;return t._events[p]?t._events[p].fn?t._events[p]=[t._events[p],s]:t._events[p].push(s):(t._events[p]=s,t._eventsCount++),t}function a(t,e){0==--t._eventsCount?t._events=new r:delete t._events[e]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(i=!1)),s.prototype.eventNames=function(){var t,r,n=[];if(0===this._eventsCount)return n;for(r in t=this._events)e.call(t,r)&&n.push(i?r.slice(1):r);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},s.prototype.listeners=function(t){var e=i?i+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,o=r.length,a=new Array(o);n<o;n++)a[n]=r[n].fn;return a},s.prototype.listenerCount=function(t){var e=i?i+t:t,r=this._events[e];return r?r.fn?1:r.length:0},s.prototype.emit=function(t,e,r,n,o,a){var s=arguments,p=i?i+t:t;if(!this._events[p])return!1;var l,m,y=this._events[p],h=arguments.length;if(y.fn){switch(y.once&&this.removeListener(t,y.fn,void 0,!0),h){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,e),!0;case 3:return y.fn.call(y.context,e,r),!0;case 4:return y.fn.call(y.context,e,r,n),!0;case 5:return y.fn.call(y.context,e,r,n,o),!0;case 6:return y.fn.call(y.context,e,r,n,o,a),!0}for(m=1,l=new Array(h-1);m<h;m++)l[m-1]=s[m];y.fn.apply(y.context,l)}else{var u,E=y.length;for(m=0;m<E;m++)switch(y[m].once&&this.removeListener(t,y[m].fn,void 0,!0),h){case 1:y[m].fn.call(y[m].context);break;case 2:y[m].fn.call(y[m].context,e);break;case 3:y[m].fn.call(y[m].context,e,r);break;case 4:y[m].fn.call(y[m].context,e,r,n);break;default:if(!l)for(u=1,l=new Array(h-1);u<h;u++)l[u-1]=s[u];y[m].fn.apply(y[m].context,l)}}return!0},s.prototype.on=function(t,e,i){return o(this,t,e,i,!1)},s.prototype.once=function(t,e,i){return o(this,t,e,i,!0)},s.prototype.removeListener=function(t,e,r,n){var o=i?i+t:t;if(!this._events[o])return this;if(!e)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==e||n&&!s.once||r&&s.context!==r||a(this,o);else{for(var p=0,l=[],m=s.length;p<m;p++)(s[p].fn!==e||n&&!s[p].once||r&&s[p].context!==r)&&l.push(s[p]);l.length?this._events[o]=1===l.length?l[0]:l:a(this,o)}return this},s.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&a(this,e)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=i,s.EventEmitter=s,t.exports=s})),ul((function(t,e){!function(i){var r=e&&!e.nodeType&&e,n=t&&!t.nodeType&&t,o="object"==typeof hl&&hl;o.global!==o&&o.window!==o&&o.self!==o||(i=o);var a,s,p=2147483647,l=36,m=/^xn--/,y=/[^\x20-\x7E]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,u={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},E=Math.floor,c=String.fromCharCode;function d(t){throw RangeError(u[t])}function f(t,e){for(var i=t.length,r=[];i--;)r[i]=e(t[i]);return r}function _(t,e){var i=t.split("@"),r="";return i.length>1&&(r=i[0]+"@",t=i[1]),r+f((t=t.replace(h,".")).split("."),e).join(".")}function v(t){for(var e,i,r=[],n=0,o=t.length;n<o;)(e=t.charCodeAt(n++))>=55296&&e<=56319&&n<o?56320==(64512&(i=t.charCodeAt(n++)))?r.push(((1023&e)<<10)+(1023&i)+65536):(r.push(e),n--):r.push(e);return r}function g(t){return f(t,(function(t){var e="";return t>65535&&(e+=c((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+c(t)})).join("")}function T(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function b(t,e,i){var r=0;for(t=i?E(t/700):t>>1,t+=E(t/e);t>455;r+=l)t=E(t/35);return E(r+36*t/(t+38))}function x(t){var e,i,r,n,o,a,s,m,y,h,u,c=[],f=t.length,_=0,v=128,T=72;for((i=t.lastIndexOf("-"))<0&&(i=0),r=0;r<i;++r)t.charCodeAt(r)>=128&&d("not-basic"),c.push(t.charCodeAt(r));for(n=i>0?i+1:0;n<f;){for(o=_,a=1,s=l;n>=f&&d("invalid-input"),((m=(u=t.charCodeAt(n++))-48<10?u-22:u-65<26?u-65:u-97<26?u-97:l)>=l||m>E((p-_)/a))&&d("overflow"),_+=m*a,!(m<(y=s<=T?1:s>=T+26?26:s-T));s+=l)a>E(p/(h=l-y))&&d("overflow"),a*=h;T=b(_-o,e=c.length+1,0==o),E(_/e)>p-v&&d("overflow"),v+=E(_/e),_%=e,c.splice(_++,0,v)}return g(c)}function S(t){var e,i,r,n,o,a,s,m,y,h,u,f,_,g,x,S=[];for(f=(t=v(t)).length,e=128,i=0,o=72,a=0;a<f;++a)(u=t[a])<128&&S.push(c(u));for(r=n=S.length,n&&S.push("-");r<f;){for(s=p,a=0;a<f;++a)(u=t[a])>=e&&u<s&&(s=u);for(s-e>E((p-i)/(_=r+1))&&d("overflow"),i+=(s-e)*_,e=s,a=0;a<f;++a)if((u=t[a])<e&&++i>p&&d("overflow"),u==e){for(m=i,y=l;!(m<(h=y<=o?1:y>=o+26?26:y-o));y+=l)x=m-h,g=l-h,S.push(c(T(h+x%g,0))),m=E(x/g);S.push(c(T(m,0))),o=b(i,_,r==n),i=0,++r}++i,++e}return S.join("")}if(a={version:"1.3.2",ucs2:{decode:v,encode:g},decode:x,encode:S,toASCII:function(t){return _(t,(function(t){return y.test(t)?"xn--"+S(t):t}))},toUnicode:function(t){return _(t,(function(t){return m.test(t)?x(t.slice(4).toLowerCase()):t}))}},r&&n)if(t.exports==r)n.exports=a;else for(s in a)a.hasOwnProperty(s)&&(r[s]=a[s]);else i.punycode=a}(hl)}));var cl,dl,fl,_l,vl,gl,Tl,bl,xl,Sl,Rl,Il,Al,Ml,Cl,Fl,Nl,Ol,wl,Pl,Gl=function(t,e,i,r){e=e||"&",i=i||"=";var n={};if("string"!=typeof t||0===t.length)return n;var o=/\+/g;t=t.split(e);var a=1e3;r&&"number"==typeof r.maxKeys&&(a=r.maxKeys);var s=t.length;a>0&&s>a&&(s=a);for(var p=0;p<s;++p){var l,m,y,h,u=t[p].replace(o,"%20"),E=u.indexOf(i);E>=0?(l=u.substr(0,E),m=u.substr(E+1)):(l=u,m=""),y=decodeURIComponent(l),h=decodeURIComponent(m),El(n,y)?Array.isArray(n[y])?n[y].push(h):n[y]=[n[y],h]:n[y]=h}return n},Dl=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}},Ll=function(t,e,i,r){return e=e||"&",i=i||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map((function(r){var n=encodeURIComponent(Dl(r))+i;return Array.isArray(t[r])?t[r].map((function(t){return n+encodeURIComponent(Dl(t))})).join(e):n+encodeURIComponent(Dl(t[r]))})).join(e):r?encodeURIComponent(Dl(r))+i+encodeURIComponent(Dl(t)):""};ul((function(t,e){e.decode=e.parse=Gl,e.encode=e.stringify=Ll})),function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(cl||(cl={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(dl||(dl={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(fl||(fl={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(_l||(_l={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(vl||(vl={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(gl||(gl={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(Tl||(Tl={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(bl||(bl={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(xl||(xl={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(Sl||(Sl={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(Rl||(Rl={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(Il||(Il={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(Al||(Al={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(Ml||(Ml={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(Cl||(Cl={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(Fl||(Fl={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR"}(Nl||(Nl={})),function(t){t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA"}(Ol||(Ol={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(wl||(wl={})),function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(Pl||(Pl={})),yl.RETINA_PREFIX=/@([0-9\.]+)x/,yl.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1,function(){for(var t=[],e=[],i=0;i<32;i++)t[i]=i,e[i]=i;t[_l.NORMAL_NPM]=_l.NORMAL,t[_l.ADD_NPM]=_l.ADD,t[_l.SCREEN_NPM]=_l.SCREEN,e[_l.NORMAL]=_l.NORMAL_NPM,e[_l.ADD]=_l.ADD_NPM,e[_l.SCREEN]=_l.SCREEN_NPM;var r=[];r.push(e),r.push(t)}();var Ul={};!function(){function t(t,e,i){this.canvas=yl.ADAPTER.createCanvas(),this.context=this.canvas.getContext("2d"),this.resolution=i||yl.RESOLUTION,this.resize(t,e)}t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=Math.round(t*this.resolution),this.canvas.height=Math.round(e*this.resolution)},t.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=Math.round(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=Math.round(t)},enumerable:!1,configurable:!0})}();var Bl=function(){function t(e){var i=this;this.stage=new pi,e=Object.assign({forceCanvas:!1},e),this.renderer=function(t){return vn.create(t)}(e),t._plugins.forEach((function(t){t.init.call(i,e)}))}return t.registerPlugin=function(t){!function(t,e,i){if(void 0===i&&(i=3),!Ul[e]){var r=(new Error).stack;void 0===r?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(r=r.split("\n").splice(i).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(r))),Ul[e]=!0}}("6.5.0","Application.registerPlugin() is deprecated, use extensions.add()"),ui.add({type:li.Application,ref:t})},t.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(t.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),t.prototype.destroy=function(e,i){var r=this,n=t._plugins.slice(0);n.reverse(),n.forEach((function(t){t.destroy.call(r)})),this.stage.destroy(i),this.stage=null,this.renderer.destroy(e),this.renderer=null},t._plugins=[],t}();ui.handleByList(li.Application,Bl._plugins),ui.add(Yp);var kl=function(t,e){return kl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},kl(t,e)};function Hl(t,e){function i(){this.constructor=t}kl(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var Xl=function(t){function e(e,i,r,n){void 0===e&&(e=100),void 0===i&&(i=100),void 0===r&&(r=10),void 0===n&&(n=10);var o=t.call(this)||this;return o.segWidth=r,o.segHeight=n,o.width=e,o.height=i,o.build(),o}return Hl(e,t),e.prototype.build=function(){for(var t=this.segWidth*this.segHeight,e=[],i=[],r=[],n=this.segWidth-1,o=this.segHeight-1,a=this.width/n,s=this.height/o,p=0;p<t;p++){var l=p%this.segWidth,m=p/this.segWidth|0;e.push(l*a,m*s),i.push(l/n,m/o)}var y=n*o;for(p=0;p<y;p++){var h=p%n,u=p/n|0,E=u*this.segWidth+h,c=u*this.segWidth+h+1,d=(u+1)*this.segWidth+h,f=(u+1)*this.segWidth+h+1;r.push(E,c,d,c,f,d)}this.buffers[0].data=new Float32Array(e),this.buffers[1].data=new Float32Array(i),this.indexBuffer.data=new Uint16Array(r),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},e}(ms),jl=function(t){function e(e,i,r){void 0===e&&(e=200),void 0===r&&(r=0);var n=t.call(this,new Float32Array(4*i.length),new Float32Array(4*i.length),new Uint16Array(6*(i.length-1)))||this;return n.points=i,n._width=e,n.textureScale=r,n.build(),n}return Hl(e,t),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),e.prototype.build=function(){var t=this.points;if(t){var e=this.getBuffer("aVertexPosition"),i=this.getBuffer("aTextureCoord"),r=this.getIndex();if(!(t.length<1)){e.data.length/4!==t.length&&(e.data=new Float32Array(4*t.length),i.data=new Float32Array(4*t.length),r.data=new Uint16Array(6*(t.length-1)));var n=i.data,o=r.data;n[0]=0,n[1]=0,n[2]=0,n[3]=1;for(var a=0,s=t[0],p=this._width*this.textureScale,l=t.length,m=0;m<l;m++){var y=4*m;if(this.textureScale>0){var h=s.x-t[m].x,u=s.y-t[m].y,E=Math.sqrt(h*h+u*u);s=t[m],a+=E/p}else a=m/(l-1);n[y]=a,n[y+1]=0,n[y+2]=a,n[y+3]=1}var c=0;for(m=0;m<l-1;m++)y=2*m,o[c++]=y,o[c++]=y+1,o[c++]=y+2,o[c++]=y+2,o[c++]=y+1,o[c++]=y+3;i.update(),r.update(),this.updateVertices()}}},e.prototype.updateVertices=function(){var t=this.points;if(!(t.length<1)){for(var e,i=t[0],r=0,n=0,o=this.buffers[0].data,a=t.length,s=0;s<a;s++){var p=t[s],l=4*s;n=-((e=s<t.length-1?t[s+1]:p).x-i.x),r=e.y-i.y;var m=Math.sqrt(r*r+n*n),y=this.textureScale>0?this.textureScale*this._width/2:this._width/2;r/=m,n/=m,r*=y,n*=y,o[l]=p.x+r,o[l+1]=p.y+n,o[l+2]=p.x-r,o[l+3]=p.y-n,i=p}this.buffers[0].update()}},e.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},e}(ms),Wl=function(t){function e(e,i,r){void 0===r&&(r=0);var n=this,o=new jl(e.height,i,r),a=new ls(e);return r>0&&(e.baseTexture.wrapMode=pt.REPEAT),(n=t.call(this,o,a)||this).autoUpdate=!0,n}return Hl(e,t),e.prototype._render=function(e){var i=this.geometry;(this.autoUpdate||i._width!==this.shader.texture.height)&&(i._width=this.shader.texture.height,i.update()),t.prototype._render.call(this,e)},e}(ps),Vl=function(t){function e(e,i,r){var n=this,o=new Xl(e.width,e.height,i,r),a=new ls(ji.WHITE);return(n=t.call(this,o,a)||this).texture=e,n.autoResize=!0,n}return Hl(e,t),e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var t=this.geometry,e=this.shader.texture,i=e.width,r=e.height;!this.autoResize||t.width===i&&t.height===r||(t.width=this.shader.texture.width,t.height=this.shader.texture.height,t.build())},Object.defineProperty(e.prototype,"texture",{get:function(){return this.shader.texture},set:function(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),e.prototype._render=function(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),t.prototype._render.call(this,e)},e.prototype.destroy=function(e){this.shader.texture.off("update",this.textureUpdated,this),t.prototype.destroy.call(this,e)},e}(ps),Yl=function(t){function e(e,i,r,n,o){void 0===e&&(e=ji.EMPTY);var a=this,s=new ms(i,r,n);s.getBuffer("aVertexPosition").static=!1;var p=new ls(e);return(a=t.call(this,s,p,null,o)||this).autoUpdate=!0,a}return Hl(e,t),Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype._render=function(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),t.prototype._render.call(this,e)},e}(ps),zl=(function(t){function e(e,i,r,n,o){void 0===i&&(i=10),void 0===r&&(r=10),void 0===n&&(n=10),void 0===o&&(o=10);var a=t.call(this,ji.WHITE,4,4)||this;return a._origWidth=e.orig.width,a._origHeight=e.orig.height,a._width=a._origWidth,a._height=a._origHeight,a._leftWidth=i,a._rightWidth=n,a._topHeight=r,a._bottomHeight=o,a.texture=e,a}Hl(e,t),e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype.updateHorizontalVertices=function(){var t=this.vertices,e=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*e,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*e,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices,e=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*e,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*e,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._getMinScale=function(){var t=this._leftWidth+this._rightWidth,e=this._width>t?1:this._width/t,i=this._topHeight+this._bottomHeight,r=this._height>i?1:this._height/i;return Math.min(e,r)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topHeight",{get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()},enumerable:!1,configurable:!0}),e.prototype._refresh=function(){var t=this.texture,e=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;var i=1/this._origWidth,r=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=i*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-i*this._rightWidth,e[9]=e[11]=e[13]=e[15]=r*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-r*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()}}(Vl),function(t,e){return zl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},zl(t,e)});function ql(t){this._activeParentLayer&&this._activeParentLayer!==t._activeLayer||(this.visible?(this.displayOrder=t.incDisplayOrder(),this.worldAlpha<=0||!this.renderable||(t._activeLayer=null,this.containerRenderWebGL(t),t._activeLayer=this._activeParentLayer)):this.displayOrder=0)}!function(t){function e(e,i){void 0===i&&(i=!0);var r=t.call(this,e[0]instanceof ji?e[0]:e[0].texture)||this;return r._textures=null,r._durations=null,r._autoUpdate=i,r._isConnectedToTicker=!1,r.animationSpeed=1,r.loop=!0,r.updateAnchor=!1,r.onComplete=null,r.onFrameChange=null,r.onLoop=null,r._currentTime=0,r._playing=!1,r._previousFrame=null,r.textures=e,r}(function(t,e){function i(){this.constructor=t}zl(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)})(e,t),e.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(di.shared.remove(this.update,this),this._isConnectedToTicker=!1))},e.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(di.shared.add(this.update,this,yi.HIGH),this._isConnectedToTicker=!0))},e.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){if(this._playing){var e=this.animationSpeed*t,i=this.currentFrame;if(null!==this._durations){var r=this._currentTime%1*this._durations[this.currentFrame];for(r+=e/60*1e3;r<0;)this._currentTime--,r+=this._durations[this.currentFrame];var n=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);r>=this._durations[this.currentFrame];)r-=this._durations[this.currentFrame]*n,this._currentTime+=n;this._currentTime+=r/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<i||this.animationSpeed<0&&this.currentFrame>i)&&this.onLoop(),this.updateTexture())}},e.prototype.updateTexture=function(){var t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},e.prototype.destroy=function(e){this.stop(),t.prototype.destroy.call(this,e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},e.fromFrames=function(t){for(var i=[],r=0;r<t.length;++r)i.push(ji.from(t[r]));return new e(i)},e.fromImages=function(t){for(var i=[],r=0;r<t.length;++r)i.push(ji.from(t[r]));return new e(i)},Object.defineProperty(e.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textures",{get:function(){return this._textures},set:function(t){if(t[0]instanceof ji)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentFrame",{get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(di.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(di.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0})}(xa),ui.add(Dn,Yn,Wn,Wo,za,Fn,is,Rs,xo,Lo,Uo,Ka,fi,lo);class Kl{constructor(){this._tempPoint=new _e,this._queue=[[],[]],this._eventDisplayOrder=0,this.worksWithLayers=!0}recursiveFindHit(t,e,i,r,n){if(!e||!e.visible)return 0;let o=0,a=r=e.interactive||r;e.hitArea&&(a=!1),e._activeParentLayer&&(n=!1);const s=e._mask;i<1/0&&s&&s.containsPoint&&!s.containsPoint(t)&&(n=!0),i<1/0&&e.filterArea&&(e.filterArea.contains(t.x,t.y)||(n=!0));const p=e.children;if(e.interactiveChildren&&p)for(let e=p.length-1;e>=0;e--){const r=p[e],s=this.recursiveFindHit(t,r,i,a,n);if(s){if(!r.parent)continue;o=s,i=s}}return r&&(n?e.interactive&&this._queueAdd(e,0):(i<e.displayOrder&&(e.hitArea?(e.worldTransform.applyInverse(t,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)&&(o=e.displayOrder)):e.containsPoint&&e.containsPoint(t)&&(o=e.displayOrder)),e.interactive&&this._queueAdd(e,o===1/0?0:o))),o}findHit(t,e,i,r){const n=t.data.global;this._startInteractionProcess(),this.recursiveFindHit(n,e,r?0:1/0,!1,!1),this._finishInteractionProcess(t,i)}_startInteractionProcess(){this._eventDisplayOrder=1,this._queue||(this._queue=[[],[]]),this._queue[0].length=0,this._queue[1].length=0}_queueAdd(t,e){const i=this._queue;if(e<this._eventDisplayOrder)i[0].push(t);else{if(e>this._eventDisplayOrder){this._eventDisplayOrder=e;const t=i[1];for(let e=0,r=t.length;e<r;e++)i[0].push(t[e]);i[1].length=0}i[1].push(t)}}_finishInteractionProcess(t,e){const i=this._queue;let r=i[0];for(let i=0,n=r.length;i<n;i++)e&&e(t,r[i],!1);r=i[1];for(let i=0,n=r.length;i<n;i++)t.target||(t.target=r[i]),e&&e(t,r[i],!0)}}class Zl extends Lt{constructor(t=0,e=!1){super(),this.useRenderTexture=!1,this.useDoubleBuffer=!1,this.sortPriority=0,this.clearColor=new Float32Array([0,0,0,0]),this.canDrawWithoutLayer=!1,this.canDrawInParentStage=!0,this._activeLayer=null,this._activeStage=null,this._activeChildren=[],this._lastUpdateId=-1,this.zIndex=t||0,this.enableSort=!!e,"function"==typeof e&&this.on("sort",e)}doSort(t,e){if(this.listeners("sort",!0))for(let t=0;t<e.length;t++)this.emit("sort",e[t]);e.sort(Zl.compareZIndex)}static compareZIndex(t,e){return t.zOrder<e.zOrder?-1:t.zOrder>e.zOrder?1:t.updateOrder-e.updateOrder}clear(){this._activeLayer=null,this._activeStage=null,this._activeChildren.length=0}_resolveChildDisplayObject(t,e){this.check(t),e._activeParentLayer=this._activeLayer,this._activeLayer?this._activeLayer._activeChildren.push(e):this._activeChildren.push(e)}_resolveLayer(t,e){this.check(t),this._activeLayer&&Zl.conflict(),this._activeLayer=e,this._activeStage=t}check(t){if(this._lastUpdateId<Zl._layerUpdateId)this._lastUpdateId=Zl._layerUpdateId,this.clear(),this._activeStage=t;else if(this.canDrawInParentStage){let e=this._activeStage;for(;e&&e!==t;)e=e._activeParentStage;this._activeStage=e,null===e&&this.clear()}}static conflict(){Zl._lastLayerConflict+5e3<Date.now()&&(Zl._lastLayerConflict=Date.now(),console.log("@pixi/layers found two layers with the same group in one stage - that's not healthy. Please place a breakpoint here and debug it"))}}Zl._layerUpdateId=0,Zl._lastLayerConflict=0;class Ql{constructor(t){this.layer=t,this.renderTexture=null,this.doubleBuffer=null,this.currentBufferIndex=0,this._tempRenderTarget=null,this._tempRenderTargetSource=new ge,this._tempRenderTargetDestination=new ge}init(t){const e=t?t.screen.width:100,i=t?t.screen.height:100,r=t?t.resolution:Dt.RESOLUTION;this.renderTexture=Wi.create({width:e,height:i,resolution:r}),this.layer.group.useDoubleBuffer&&(this.doubleBuffer=[Wi.create({width:e,height:i,resolution:r}),Wi.create({width:e,height:i,resolution:r})])}getRenderTexture(){return this.renderTexture||this.init(),this.renderTexture}pushTexture(t){const e=t.screen;this.renderTexture||this.init(t);const i=this.renderTexture,r=this.layer.group,n=this.doubleBuffer;if(i.width===e.width&&i.height===e.height&&i.baseTexture.resolution===t.resolution||(i.baseTexture.resolution=t.resolution,i.resize(e.width,e.height),n&&(n[0].baseTexture.resolution=t.resolution,n[0].resize(e.width,e.height),n[1].baseTexture.resolution=t.resolution,n[1].resize(e.width,e.height))),n&&(n[0].framebuffer.multisample=i.framebuffer.multisample,n[1].framebuffer.multisample=i.framebuffer.multisample),this._tempRenderTarget=t.renderTexture.current,this._tempRenderTargetSource.copyFrom(t.renderTexture.sourceFrame),this._tempRenderTargetDestination.copyFrom(t.renderTexture.destinationFrame),t.batch.flush(),r.useDoubleBuffer){let e=n[this.currentBufferIndex];e.baseTexture._glTextures[t.CONTEXT_UID]||(t.renderTexture.bind(e,void 0,void 0),t.texture.bind(e),r.clearColor&&t.renderTexture.clear(r.clearColor)),t.texture.unbind(i.baseTexture),i.baseTexture._glTextures=e.baseTexture._glTextures,i.baseTexture.framebuffer=e.baseTexture.framebuffer,e=n[1-this.currentBufferIndex],t.renderTexture.bind(e,void 0,void 0)}else t.renderTexture.bind(i,void 0,void 0);r.clearColor&&t.renderTexture.clear(r.clearColor);const o=t.filter.defaultFilterStack;o.length>1&&(o[o.length-1].renderTexture=t.renderTexture.current)}popTexture(t){t.batch.flush(),t.framebuffer.blit();const e=t.filter.defaultFilterStack;e.length>1&&(e[e.length-1].renderTexture=this._tempRenderTarget),t.renderTexture.bind(this._tempRenderTarget,this._tempRenderTargetSource,this._tempRenderTargetDestination),this._tempRenderTarget=null;const i=this.renderTexture,r=this.layer.group,n=this.doubleBuffer;if(r.useDoubleBuffer){t.texture.unbind(i.baseTexture),this.currentBufferIndex=1-this.currentBufferIndex;const e=n[this.currentBufferIndex];i.baseTexture._glTextures=e.baseTexture._glTextures,i.baseTexture.framebuffer=e.baseTexture.framebuffer}}destroy(){this.renderTexture&&(this.renderTexture.destroy(),this.doubleBuffer&&(this.doubleBuffer[0].destroy(!0),this.doubleBuffer[1].destroy(!0)))}}class Jl extends pi{constructor(t=null){super(),this.isLayer=!0,this.group=null,this._activeChildren=[],this._tempChildren=null,this._activeStageParent=null,this._sortedChildren=[],this._tempLayerParent=null,this.insertChildrenBeforeActive=!0,this.insertChildrenAfterActive=!0,t?(this.group=t,this.zIndex=t.zIndex):this.group=new Zl(0,!1),this._tempChildren=this.children}get useRenderTexture(){return this.group.useRenderTexture}set useRenderTexture(t){this.group.useRenderTexture=t}get useDoubleBuffer(){return this.group.useDoubleBuffer}set useDoubleBuffer(t){this.group.useDoubleBuffer=t}get clearColor(){return this.group.clearColor}set clearColor(t){this.group.clearColor=t}get sortPriority(){return this.group.sortPriority}set sortPriority(t){this.group.sortPriority=t}getRenderTexture(){return this.textureCache||(this.textureCache=new Ql(this)),this.textureCache.getRenderTexture()}doSort(){this.group.doSort(this,this._sortedChildren)}destroy(t){this.textureCache&&(this.textureCache.destroy(),this.textureCache=null),super.destroy(t)}render(t){this.prerender(t)&&(this.group.useRenderTexture&&(this.textureCache||(this.textureCache=new Ql(this)),this.textureCache.pushTexture(t)),this.containerRenderWebGL(t),this.postrender(t),this.group.useRenderTexture&&this.textureCache.popTexture(t))}layerRenderCanvas(t){this.prerender(t)&&(this.containerRenderCanvas(t),this.postrender(t))}_onBeginLayerSubtreeTraversal(t){const e=this._activeChildren;this._activeStageParent=t,this.group._resolveLayer(t,this);const i=this.group._activeChildren;e.length=0;for(let t=0;t<i.length;t++)i[t]._activeParentLayer=this,e.push(i[t]);i.length=0}_onEndLayerSubtreeTraversal(){const t=this.children,e=this._activeChildren,i=this._sortedChildren;for(let t=0;t<e.length;t++)this.emit("display",e[t]);if(i.length=0,this.insertChildrenBeforeActive)for(let e=0;e<t.length;e++)i.push(t[e]);for(let t=0;t<e.length;t++)i.push(e[t]);if(!this.insertChildrenBeforeActive&&this.insertChildrenAfterActive)for(let e=0;e<t.length;e++)i.push(t[e]);this.group.enableSort&&this.doSort()}prerender(t){return!(this._activeParentLayer&&this._activeParentLayer!=t._activeLayer||(this.visible?(this.displayOrder=t.incDisplayOrder(),this.worldAlpha<=0||!this.renderable||(this.children!==this._sortedChildren&&this._tempChildren!==this.children&&(this._tempChildren=this.children),this._boundsID++,this.children=this._sortedChildren,this._tempLayerParent=t._activeLayer,t._activeLayer=this,0)):(this.displayOrder=0,1)))}postrender(t){this.children=this._tempChildren,t._activeLayer=this._tempLayerParent,this._tempLayerParent=null}}Jl.prototype.renderCanvas=Jl.prototype.layerRenderCanvas;class $l extends Jl{constructor(){super(...arguments),this.isStage=!0,this._tempGroups=[],this._activeLayers=[],this._activeParentStage=null}clear(){this._activeLayers.length=0,this._tempGroups.length=0}destroy(t){this.clear(),super.destroy(t)}updateStage(){this._activeParentStage=null,Zl._layerUpdateId++,this._updateStageInner()}updateAsChildStage(t){this._activeParentStage=t,$l._updateOrderCounter=0,this._updateStageInner()}_updateStageInner(){this.clear(),this._addRecursive(this);const t=this._activeLayers;for(let e=0;e<t.length;e++){const i=t[e];if(i.group.sortPriority){i._onEndLayerSubtreeTraversal();const t=i._sortedChildren;for(let e=0;e<t.length;e++)this._addRecursiveChildren(t[e])}}for(let e=0;e<t.length;e++){const i=t[e];i.group.sortPriority||i._onEndLayerSubtreeTraversal()}}_addRecursive(t){if(!t.visible)return;if(t.isLayer){const e=t;this._activeLayers.push(e),e._onBeginLayerSubtreeTraversal(this)}if(t!==this&&t.isStage)return void t.updateAsChildStage(this);t._activeParentLayer=null;let e=t.parentGroup;e&&e._resolveChildDisplayObject(this,t);const i=t.parentLayer;if(i&&(e=i.group,e._resolveChildDisplayObject(this,t)),t.updateOrder=++$l._updateOrderCounter,t.alpha<=0||!t.renderable||!t.layerableChildren||e&&e.sortPriority)return;const r=t.children;if(r&&r.length)for(let t=0;t<r.length;t++)this._addRecursive(r[t])}_addRecursiveChildren(t){if(t.alpha<=0||!t.renderable||!t.layerableChildren)return;const e=t.children;if(e&&e.length)for(let t=0;t<e.length;t++)this._addRecursive(e[t])}}$l._updateOrderCounter=0,function(){if(void 0!==oi.prototype.displayOrder)return;Object.assign(oi.prototype,{parentLayer:null,_activeParentLayer:null,parentGroup:null,zOrder:0,zIndex:0,updateOrder:0,displayOrder:0,layerableChildren:!0,isLayer:!1});const t=pi.prototype;t.containerRenderWebGL=t.render,t.render=ql}(),function(t){const e=t.prototype;var i;e._oldRender||(Object.assign(e,{_lastDisplayOrder:0,_activeLayer:null,incDisplayOrder(){return++this._lastDisplayOrder},_oldRender:vn.prototype.render}),e._oldRender=e.render,e.render=(i=e.render,function(t,e,r,n,o){e&&(e.renderTexture||e.baseTexture)||(this._lastDisplayOrder=0),this._activeLayer=null,t.isStage&&t.updateStage(),this.plugins.interaction&&!this.plugins.interaction.search.worksWithLayers&&(this.plugins.interaction.search=new Kl),i.call(this,t,e,r,n,o)}))}(vn);var tm=i(431),em=i.n(tm),im=function(){function t(t){this._rgb=t}return Object.defineProperty(t.prototype,"hex",{get:function(){return this.rgb255.map((function(t){return("00"+t.toString(16)).slice(-2)})).join("")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"i32",{get:function(){var t=this.rgb255;return t[0]<<16|t[1]<<8|t[2]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rgb01",{get:function(){return this._rgb.slice()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rgb255",{get:function(){return this._rgb.map((function(t){return Math.max(0,Math.min(255,Math.round(255*t)))}))},enumerable:!1,configurable:!0}),t.fromRgb01=function(e){return console.assert(3==e.length),new t(e.slice())},t.fromRgb255=function(e){return console.assert(3==e.length),t.fromRgb01(e.map((function(t){return Math.max(0,Math.min(1,t/255))})))},t.fromHex=function(e){return e instanceof String&&(e=Yt(e)),t.fromRgb01(Array.from(Wt(e)))},t.BLACK=t.fromHex(0),t.WHITE=t.fromHex(16777215),t}(),rm=function(){function t(t){this._func=t}return t.prototype.apply=function(t){return this._func(t)},t.prototype.interpolate=function(t,e,i){var r=this,n=t,o=e;return i=Math.max(0,Math.min(1,i)),n instanceof im?im.fromRgb01(this.interpolate(n.rgb01,o.rgb01,i)):Array.isArray(n)?(console.assert(n.length==o.length),n.map((function(t,e){return r.interpolate(t,o[e],i)}))):n+(o-n)*this._func(i)},t.cubicBezier=function(e,i,r,n){return new t(em()(e,i,r,n))},t.LINEAR=new t((function(t){return t})),t.EASE_IN_SINE=t.cubicBezier(.12,0,.39,0),t.EASE_OUT_SINE=t.cubicBezier(.61,1,.88,1),t.EASE_IN_OUT_SINE=t.cubicBezier(.37,0,.63,1),t.EASE_IN_QUAD=t.cubicBezier(.11,0,.5,0),t.EASE_OUT_QUAD=t.cubicBezier(.5,1,.89,1),t.EASE_IN_OUT_QUAD=t.cubicBezier(.45,0,.55,1),t.EASE_IN_CUBIC=t.cubicBezier(.32,0,.67,0),t.EASE_OUT_CUBIC=t.cubicBezier(.33,1,.68,1),t.EASE_IN_OUT_CUBIC=t.cubicBezier(.65,0,.35,1),t.EASE_IN_QUART=t.cubicBezier(.5,0,.75,0),t.EASE_OUT_QUART=t.cubicBezier(.25,1,.5,1),t.EASE_IN_OUT_QUART=t.cubicBezier(.76,0,.24,1),t.EASE_IN_QUINT=t.cubicBezier(.64,0,.78,0),t.EASE_OUT_QUINT=t.cubicBezier(.22,1,.36,1),t.EASE_IN_OUT_QUINT=t.cubicBezier(.83,0,.17,1),t.EASE_IN_EXPO=t.cubicBezier(.7,0,.84,0),t.EASE_OUT_EXPO=t.cubicBezier(.16,1,.3,1),t.EASE_IN_OUT_EXPO=t.cubicBezier(.87,0,.13,1),t.EASE_IN_CIRC=t.cubicBezier(.55,0,1,.45),t.EASE_OUT_CIRC=t.cubicBezier(0,.55,.45,1),t.EASE_IN_OUT_CIRC=t.cubicBezier(.85,0,.15,1),t.EASE_IN_BACK=t.cubicBezier(.36,0,.66,-.56),t.EASE_OUT_BACK=t.cubicBezier(.34,1.56,.64,1),t.EASE_IN_OUT_BACK=t.cubicBezier(.68,-.6,.32,1.6),t}(),nm=function(){function t(t){this.value=t,this.mUpdateFunc=function(){},this.mEaseSec=0,this.mEaseFunc=rm.LINEAR,this.mEaseState={cancel:!1}}return t.prototype.onUpdate=function(t){return this.mUpdateFunc=t,this},t.prototype.onEase=function(t,e){return void 0===e&&(e=rm.LINEAR),this.mEaseSec=t,this.mEaseFunc=e,this},t.prototype.update=function(t){var e,i=this;this.mEaseState.cancel=!0,this.mEaseState={cancel:!1};var r=new Promise((function(t){e=t})),n=null,o=this,a=o.mEaseSec,s=o.mEaseFunc,p=o.mUpdateFunc,l=o.mEaseState,m=o.value,y=function(r){var o=function(){return e()};l.cancel||(null==n&&(n=r),r=(r-n)/(1e3*a),isNaN(r)?i.value=t:r>=1?i.value=s.interpolate(m,t,1):(i.value=s.interpolate(m,t,r),o=y)),p(i.value),window.requestAnimationFrame(o)};return y(window.performance.now()),r},t.of=function(e){return new t(e)},t}(),om=function(){function t(){this.zLayers=new Map,this.root=new pi,this.root.sortableChildren=!0}return t.prototype.get=function(t){var e=this.zLayers.get(t);return null==e&&((e=new Jl).zIndex=1,this.root.addChild(e),this.zLayers.set(t,e)),e},t}(),am=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),sm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return am(e,t),e.from=function(t,i){i||(i={}),Object.assign(i,{iTime:0});var r=new e("attribute vec2 aVertexPosition;\r\n\r\nuniform mat3 projectionMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\nvarying vec2 vVertexPosition;\r\n\r\nuniform vec4 inputSize;\r\nuniform vec4 outputFrame;\r\n\r\nvec4 filterVertexPosition( void )\r\n{\r\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\r\n\r\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\r\n}\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = filterVertexPosition();\r\n    vTextureCoord = aVertexPosition * (outputFrame.zw * inputSize.zw);\r\n    vVertexPosition = aVertexPosition;\r\n}","precision highp float;\r\n\r\nvarying vec2 vTextureCoord;\r\nvarying vec2 vVertexPosition;\r\n\r\nuniform sampler2D uSampler;\r\n\r\nuniform vec4 outputFrame;\r\nuniform vec4 inputSize;\r\nuniform float resolution;\r\nuniform vec4 inputPixel;\r\n\r\nuniform float iTime;\r\n\r\nmat2 rotate2D(float deg) {\r\n  float r = radians(deg);\r\n  return mat2(cos(r), -sin(r), sin(r), cos(r));\r\n}\r\n\r\nvec2 getScreenPixelPos() {\r\n  return vVertexPosition * outputFrame.zw + outputFrame.xy;\r\n}\r\n\r\n"+t,i);return e.INSTANCES.push(r),r},e.INSTANCES=[],e.BLACK=e.from("\n    void main() {\n      float a = texture2D(uSampler, vTextureCoord).a;\n      gl_FragColor = vec4(vec3(0.0), a);\n    }\n  "),function(){var t=null,i=function(r){null==t&&(t=r),r=(r-t)/1e3,e.INSTANCES.forEach((function(t){t.uniforms.iTime=r})),window.requestAnimationFrame(i)};window.requestAnimationFrame(i)}(),e}(Xr),pm=function(){function t(t){var e=this;this.state={cancel:!1},t instanceof Function&&(t={keyframe:t}),this.opts=Object.assign({},{time:0,keyframe:function(){}},t),setTimeout((function(){return e.opts.keyframe(0)}),0)}return t.prototype.play=function(t){var e;this.state.cancel=!0,this.state={cancel:!1};var i=new Promise((function(t){e=t})),r=null,n=this.state,o=this.opts,a=o.time,s=o.keyframe;null!=t&&(a=t);var p=function(t){var i=e;n.cancel||(null==r&&(r=t),t=(t-r)/(1e3*a),isNaN(t)||t>=1?s(1):(s(t),i=p)),window.requestAnimationFrame(i)};return p(window.performance.now()),i},t}();function lm(t,e){return t==e||!!Array.isArray(t)&&Array.isArray(e)&&t.length==e.length&&t.every((function(t,i){return lm(t,e[i])}))}var mm=function(){function t(t){void 0===t&&(t={}),this.anchor=new Re(this.onUpdateAnchor,this),this.ui=new pi,this.orig=new pi,this.ui1=new pi,this.ui2=new pi,this.pipes=new Map,this.props={},this.ui.addChild(this.ui1),this.ui1.addChild(this.ui2);var e=function(e){var r=nm.of(t[e]);i.props[e]=r,setTimeout((function(){return r.mUpdateFunc(r.value)}),0)},i=this;for(var r in t)e(r)}return t.prototype.update=function(t){var e=[];for(var i in t){var r=this.props[i];if(null!=r){var n=t[i];lm(r.value,n)||e.push(r.update(n))}}return Promise.all(e)},t.prototype.addShader=function(t,e){return sm.from(t,e)},t.prototype.addAnimation=function(t){return new pm(t||{})},t.prototype.addChild=function(e){e instanceof t?(this.ui2.addChild(e.ui),this.orig.addChild(e.orig)):this.ui2.addChild(e)},t.prototype.addLayers=function(){var t=new om;return this.addChild(t.root),t},t.prototype.addContainer=function(t){var e=new pi;return this.doAddDisplayObject(e,t),e},t.prototype.addGraphics=function(t){var e=new va;return this.doAddDisplayObject(e,t),e},t.prototype.addSprite=function(t){var e=new xa;return this.doAddSprite(e,t),e},t.prototype.addText=function(t){var e=new wa,i=t||{},r=i.text,n=i.style;return null!=n&&(e.style=n),null!=r&&(e.text=r),this.doAddSprite(e,t),e},t.prototype.addComponent=function(t,e){var i=e||{},r=i.parent,n=i.x,o=i.y,a=i.scale,s=i.anchor;return t.position.set(n||0,o||0),null!=a&&t.scaleToFit(a.width,a.height),null!=s&&("number"==typeof s?t.anchor.set(s):t.anchor.set(s.x,s.y)),(r||this.ui2).addChild(t.ui),this.orig.addChild(t.orig),t},t.prototype.castShadow=function(e,i){var r=this.addLayers();e instanceof t&&(e=e.ui);var n=r.get(0);n.useRenderTexture=!0,e.parentLayer=n;var o=n.getRenderTexture(),a=r.get(1),s=i||{},p=s.x,l=s.y,m=s.alpha,y=new xa(o);y.parentLayer=a,y.x=p,y.y=l,y.filters=[sm.BLACK],y.alpha=m,this.orig.addChild(y);var h=new xa(o);h.parentLayer=a,this.orig.addChild(h)},t.prototype.doAddSprite=function(t,e){var i=e||{},r=i.width,n=i.height,o=i.texture,a=i.anchor,s=i.tint,p=i.scale,l=i.alpha;null!=r&&(t.width=r),null!=n&&(t.height=n),null!=p&&("number"==typeof p?t.scale.set(p):t.scale.set(p.x,p.y)),null!=a&&("number"==typeof a?t.anchor.set(a):t.anchor.set(a.x,a.y)),null!=o&&(t.texture=o),null!=l&&(t.alpha=l),null!=s&&(t.tint=s.i32),this.doAddDisplayObject(t,e)},t.prototype.doAddDisplayObject=function(t,e){var i=e||{},r=i.parent,n=i.x,o=i.y,a=i.angle,s=i.filters,p=i.layer,l=i.zIndex;t.position.set(n||0,o||0),null!=a&&(t.angle=a),null!=s&&(t.filters=s.slice()),null!=p&&(t.parentLayer=p),null!=l&&(t.zIndex=l),(r||this.ui2).addChild(t)},t.prototype.scaleToFit=function(t,e){e=e||t;var i=Math.min(t/this.layout.width,e/this.layout.height);this.ui1.scale.set(i)},Object.defineProperty(t.prototype,"position",{get:function(){return this.ui.position},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this.ui.scale},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this.ui.angle},set:function(t){this.ui.angle=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return this.ui.visible},set:function(t){this.ui.visible=t},enumerable:!1,configurable:!0}),t.prototype.onUpdateAnchor=function(){this.ui2.position.set(-this.anchor.x*this.layout.width,-this.anchor.y*this.layout.height)},t.prototype.receive=function(t){var e,i,r=new Promise((function(t,r){e=t,i=r})),n={promise:r,resolve:e,reject:i};return this.pipes.has(t)?this.pipes.get(t).push(n):this.pipes.set(t,[n]),r},t.prototype.send=function(t,e){return!!this.pipes.has(t)&&(this.pipes.get(t).forEach((function(t){return(0,t.resolve)(e)})),this.pipes.delete(t),!0)},t}(),ym=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),hm=function(t){function e(e,i,r,n){var o=t.call(this)||this;o.parent=e,o.layout={width:i,height:r},n=Object.assign({},{width:i,height:r,antialias:!0,autoDensity:!0,resolution:window.devicePixelRatio||1},n),o.app=new Bl(n),o.app.stage=new $l,o.app.stage.addChild(o.ui),o.app.stage.addChild(o.orig),o.app.resizeTo=e;var a=function(){o.app.resize(),o.scaleToFit(e.clientWidth,e.clientHeight)};return new ResizeObserver(a).observe(e),setTimeout(a,0),e.appendChild(o.app.view),o}return ym(e,t),e}(mm),um=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Em=function(t){function e(e,i){return t.call(this,e,720*i,720,{backgroundAlpha:0})||this}return um(e,t),e}(hm),cm=function(){function t(t,e,i){this.scenes=new Set;var r=document.createElement("div");r.classList.add("compositor-scene"),r.style.zIndex=i.toString(),t.appendChild(r),this.parent=r,this.canvas=new Em(r,e)}return t.prototype.toggle=function(t){this.scenes.has(t)||(t.mount(this),this.scenes.add(t)),this.currScene=t,this.scenes.forEach((function(e){return e.toggleVisibility(e===t)}))},t}(),dm=function(){function t(t,e){void 0===e&&(e=1280/720);var i=this;this.parent=t,this.aspectRatio=e,this.root=document.createElement("div"),this.root.classList.add("compositor-root"),this.root.addEventListener("wheel",this.onScroll.bind(this)),t.appendChild(this.root),this.bg=new cm(this.root,this.aspectRatio,0),window.bgCanvas=this.bg.canvas,this.fg=new cm(this.root,this.aspectRatio,0),window.fgCanvas=this.fg.canvas,this.fg.parent.classList.add("overlay");var r=function(){var r=t.clientWidth,n=t.clientHeight;r/n>e&&(r=n*e),r/n<e&&(n=r/e),i.root.style.margin="-".concat(n/2,"px 0 0 -").concat(r/2,"px"),i.root.style.width="".concat(r,"px"),i.root.style.height="".concat(n,"px")};window.addEventListener("resize",r),r(),window.compositor=this}return t.prototype.run=function(t){this.bg.toggle(t),t.run()},t.prototype.wait=function(t,e){return i=this,r=void 0,o=function(){var i;return function(t,e){var i,r,n,o,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,r&&(n=2&o[0]?r.return:o[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,o[1])).done)return n;switch(r=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((n=(n=a.trys).length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){a.label=o[1];break}if(6===o[0]&&a.label<n[1]){a.label=n[1],n=o;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(o);break}n[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{i=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(r){switch(r.label){case 0:return this.fg.parent.classList.remove("overlay"),this.fg.toggle(t),[4,t.play(e)];case 1:return i=r.sent(),t.toggleVisibility(!1),this.fg.parent.classList.add("overlay"),[2,i]}}))},new((n=void 0)||(n=Promise))((function(t,e){function a(t){try{p(o.next(t))}catch(t){e(t)}}function s(t){try{p(o.throw(t))}catch(t){e(t)}}function p(e){var i;e.done?t(e.value):(i=e.value,i instanceof n?i:new n((function(t){t(i)}))).then(a,s)}p((o=o.apply(i,r||[])).next())}));var i,r,n,o},t.prototype.onScroll=function(t){null!=this.bg.currScene&&this.bg.currScene.onScroll(t)},t}(),fm=function(){function t(){}return t.parse=function(t){for(var e=0,i=-1,r=0,n=[],o=0;o<t.length;++o)switch(t.charAt(o)){case"@":n.push(99);break;case".":n.push(0);break;case"#":n.push(3);break;case"a":n.push(1);break;case"A":n.push(2);break;case"b":n.push(-1);break;case"B":n.push(-2);break;case"\n":var a=n.length-e;e=n.length,a>0&&(r+=1,i<0?i=a:console.assert(i==a,i+"="+a))}return{width:i,height:r,spaces:n}},t.print=function(t){for(var e=t.width,i=t.height,r=t.spaces,n="",o=0;o<i;++o){for(var a=0;a<e;++a)switch(r[a+o*e]){case 0:n+=".";break;case 99:n+="@";break;case 3:n+="#";break;case 1:n+="a";break;case 2:n+="A";break;case-1:n+="b";break;case-2:n+="B"}n+="\n"}return n},t}();const _m=[{id:0,name:"BoxSeats",spaces:"\n    ..........\n    ..........\n    .......B..\n    ..........\n    ..........\n    ..........\n    ..........\n    ..A.......\n    ..........\n    ..........\n    "},{id:1,name:"DoubleGemini",spaces:"\n    @@@@@@@@.@@@@@@@@\n    @@@@@@@...@@@@@@@\n    @@@@@@.....@@@@@@\n    @@@@@.......@@@@@\n    @@@@.........@@@@\n    @@@.....B.....@@@\n    @@.............@@\n    @...............@\n    .................\n    @...............@\n    @@.............@@\n    @@@...........@@@\n    @@@@.........@@@@\n    @@@...........@@@\n    @@.............@@\n    @...............@\n    .................\n    @...............@\n    @@.............@@\n    @@@.....A.....@@@\n    @@@@.........@@@@\n    @@@@@.......@@@@@\n    @@@@@@.....@@@@@@\n    @@@@@@@...@@@@@@@\n    @@@@@@@@.@@@@@@@@\n    "},{id:2,name:"LakefrontProperty",spaces:"\n    ................\n    ................\n    ................\n    ............B...\n    ................\n    ................\n    ......@@@@......\n    ......@@@@......\n    ......@@@@......\n    ......@@@@......\n    ................\n    ................\n    ...A............\n    ................\n    ................\n    ................\n    "},{id:3,name:"MainStreet",spaces:"\n    .........\n    .........\n    .........\n    ....B....\n    .........\n    .........\n    .........\n    .........\n    .........\n    .........\n    .........\n    .........\n    .........\n    .........\n    .........\n    .........\n    .........\n    .........\n    .........\n    .........\n    .........\n    .........\n    ....A....\n    .........\n    .........\n    .........\n    "},{id:4,name:"RiverDrift",spaces:"\n    @@@@@............\n    @@@@@............\n    @@@@@............\n    @@@@@........B...\n    @@@@@............\n    @@@@@............\n    @@@@@............\n    @@@@@.......@@@@@\n    @@@@@.......@@@@@\n    @@@@@.......@@@@@\n    @@@@@.......@@@@@\n    @@@@@.......@@@@@\n    @@@@@.......@@@@@\n    @@@@@.......@@@@@\n    @@@@@.......@@@@@\n    @@@@@.......@@@@@\n    @@@@@.......@@@@@\n    @@@@@.......@@@@@\n    ............@@@@@\n    ............@@@@@\n    ............@@@@@\n    ...A........@@@@@\n    ............@@@@@\n    ............@@@@@\n    ............@@@@@\n    "},{id:5,name:"SquareSquared",spaces:"\n    ...............\n    ...............\n    ...............\n    ...........B...\n    ...............\n    ...............\n    ...............\n    ...............\n    ...............\n    ...............\n    ...............\n    ...A...........\n    ...............\n    ...............\n    ...............\n    "},{id:6,name:"ThunderPoint",spaces:"\n    @@@@@@@@........\n    @@@@@@@@........\n    @@@@@@@@........\n    @@@@@@@@....B...\n    @@@@@@@@........\n    @@@@@@@@........\n    @@@@@@@@........\n    ................\n    ................\n    ................\n    ................\n    ................\n    ................\n    ................\n    ................\n    ........@@@@@@@@\n    ........@@@@@@@@\n    ........@@@@@@@@\n    ...A....@@@@@@@@\n    ........@@@@@@@@\n    ........@@@@@@@@\n    ........@@@@@@@@\n    "},{id:7,name:"XMarksTheGarden",spaces:"\n    @@@@@@.......@@@@@@\n    @@@@@@.......@@@@@@\n    @@@@@@.......@@@@@@\n    @@@@@@...B...@@@@@@\n    @@@@@@.......@@@@@@\n    @@@@@@.......@@@@@@\n    @@@@@@.......@@@@@@\n    @@@@@@.......@@@@@@\n    ...................\n    ...................\n    ...................\n    ...................\n    ...................\n    ...................\n    ...................\n    @@@@@@.......@@@@@@\n    @@@@@@.......@@@@@@\n    @@@@@@.......@@@@@@\n    @@@@@@.......@@@@@@\n    @@@@@@...A...@@@@@@\n    @@@@@@.......@@@@@@\n    @@@@@@.......@@@@@@\n    @@@@@@.......@@@@@@\n    "}];var vm=function(){function t(t,e,i,r){this.width=t,this.height=e,this.spaces=i,this.meta=r,this.specialPoints1=0,this.specialPoints2=0,this.spaceCount1=0,this.spaceCount2=0,console.assert(t*e==i.length);for(var n=0;n<e;++n)for(var o=0;o<t;++o){var a=this.get({x:o,y:n}),s=Math.abs(a);1!=s&&2!=s||(a>0?this.spaceCount1+=1:this.spaceCount2+=1),2==s&&this.isCharged({x:o,y:n})&&(a>0?this.specialPoints1+=1:this.specialPoints2+=1)}}return t.prototype.move=function(e){console.assert(e.length<=2),2==e.length&&console.assert(e[0].turn==-e[1].turn);var i=new Set,r=new t(this.width,this.height,this.spaces.slice());return e.forEach((function(t){t.card.rotate(t.rotation).forEach((function(e,n,o){var a={x:e+t.position.x,y:n+t.position.y},s=a.x.toString()+":"+a.y.toString(),p=t.turn*o;i.has(s)?o==Math.abs(r.get(a))&&(p=3):i.add(s),r.update(a,p)}))})),new t(r.width,r.height,r.spaces,this.meta)},t.prototype.isCharged=function(e){var i=this.get(e);if(2!=Math.abs(i))return!1;for(var r=0,n=t.EIGHT_NEIGHBOURS;r<n.length;r++){var o=n[r],a=o[0],s=o[1],p={x:e.x+a,y:e.y+s};if(this.isValidPosition(p)){var l=this.get(p);if(0==Math.abs(l))return!1}}return!0},t.prototype.isValidPosition=function(t){return!(t.x<0||t.x>=this.width||t.y<0||t.y>=this.height||99==this.get(t))},t.prototype.isValidMovement=function(e,i){var r=this,n=i.card.rotate(i.rotation),o=!0,a=!1;return n.forEach((function(n,s,p){if(o){var l={x:n+i.position.x,y:s+i.position.y};if(r.isValidPosition(l)){if(o=e?Math.abs(r.get(l))<=1:0==r.get(l),!a)for(var m=0,y=t.EIGHT_NEIGHBOURS;m<y.length;m++){var h=y[m],u=h[0],E=h[1],c={x:l.x+u,y:l.y+E};if(r.isValidPosition(c)){var d=r.get(c)*i.turn;if(2==d||!e&&1==d){a=!0;break}}}}else o=!1}})),o&&a},t.prototype.get=function(t){return this.spaces[t.x+t.y*this.width]},t.prototype.forEach=function(t){for(var e=0;e<this.height;++e)for(var i=0;i<this.width;++i){var r=this.get({x:i,y:e});99!=r&&t(i,e,r)}},t.prototype.toString=function(){return fm.print({width:this.width,height:this.height,spaces:this.spaces})},t.prototype.update=function(t,e){if(this.isValidPosition(t)){var i=t.x+t.y*this.width;Math.abs(e)>=Math.abs(this.spaces[i])&&(this.spaces[i]=e)}},t.fromId=function(e){return t.ID_LOOKUP.get(e)},t.fromName=function(e){return t.NAME_LOOKUP.get(e)},t.EIGHT_NEIGHBOURS=[[-1,-1],[0,-1],[1,-1],[1,0],[1,1],[0,1],[-1,1],[-1,0]],t.ID_LOOKUP=new Map,t.NAME_LOOKUP=new Map,function(){for(var e=0,i=_m;e<i.length;e++){var r=i[e],n=r.id,o=r.name,a=r.spaces,s=fm.parse(a),p=s.width,l=s.height,m=s.spaces,y=m.filter((function(t){return 99!=t})).length,h=new t(p,l,m,{id:n,name:o,spaceCount:y});t.ID_LOOKUP.set(n,h),t.NAME_LOOKUP.set(o,h)}}(),t}();const gm=JSON.parse('[{"Category":"Brand_B15","Name":"Anaaki","NameHash":2148310052,"Number":115,"Rarity":"Rare","Season":1,"SpecialCost":5,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Fill","Special","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Anaaki"},{"Category":"Npc_Aori","Name":"Aori","NameHash":670544705,"Number":96,"Rarity":"Fresh","Season":1,"SpecialCost":5,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Fill","Fill","Special","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Aori"},{"Category":"Brand_B10","Name":"Arome","NameHash":708276,"Number":113,"Rarity":"Rare","Season":1,"SpecialCost":1,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Special","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Arome"},{"Category":"Npc_Atarime","Name":"Atarime","NameHash":3204290234,"Number":94,"Rarity":"Fresh","Season":1,"SpecialCost":5,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Special","Empty","Fill","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Atarime"},{"Category":"MissionEnemy","Name":"BaiTakoTrooper","NameHash":1887800334,"Number":122,"Rarity":"Common","Season":1,"SpecialCost":4,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Special","Fill","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_BaiTakoTrooper"},{"Category":"CoopEnemy","Name":"Bakudan","NameHash":3732157410,"Number":144,"Rarity":"Common","Season":1,"SpecialCost":5,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Special","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Bakudan"},{"Category":"Brand_B18","Name":"Barazushi","NameHash":637680561,"Number":118,"Rarity":"Rare","Season":1,"SpecialCost":4,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Special","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Barazushi"},{"Category":"MissionEnemy","Name":"BarrierTakopter","NameHash":3196361945,"Number":126,"Rarity":"Common","Season":1,"SpecialCost":5,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Special","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_BarrierTakopter"},{"Category":"Brand_B00","Name":"Batoroika","NameHash":1877652234,"Number":103,"Rarity":"Rare","Season":1,"SpecialCost":4,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Special","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Batoroika"},{"Category":"WeaponSub","Name":"Beacon","NameHash":2901779477,"Number":64,"Rarity":"Common","Season":1,"SpecialCost":4,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Special","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Beacon"},{"Category":"WeaponMain","Name":"BlasterLight00","NameHash":2631530616,"Number":16,"Rarity":"Common","Season":1,"SpecialCost":3,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Special","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_BlasterLight00"},{"Category":"WeaponMain","Name":"BlasterLightLong00","NameHash":3570574318,"Number":17,"Rarity":"Common","Season":1,"SpecialCost":4,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Special","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_BlasterLightLong00"},{"Category":"WeaponMain","Name":"BlasterLightShort00","NameHash":4291438217,"Number":15,"Rarity":"Common","Season":1,"SpecialCost":3,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Special","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_BlasterLightShort00"},{"Category":"WeaponMain","Name":"BlasterLong00","NameHash":3977205769,"Number":14,"Rarity":"Common","Season":1,"SpecialCost":4,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Fill","Empty","Empty","Fill","Empty","Empty","Empty","Fill","Special","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_BlasterLong00"},{"Category":"WeaponMain","Name":"BlasterMiddle00","NameHash":3575274680,"Number":13,"Rarity":"Common","Season":1,"SpecialCost":3,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Fill","Empty","Empty","Fill","Special","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_BlasterMiddle00"},{"Category":"WeaponMain","Name":"BlasterShort00","NameHash":1195875971,"Number":12,"Rarity":"Common","Season":1,"SpecialCost":3,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Special","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_BlasterShort00"},{"Category":"WeaponSub","Name":"BombCurling","NameHash":1942475521,"Number":62,"Rarity":"Common","Season":1,"SpecialCost":2,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Special","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_BombCurling"},{"Category":"WeaponSub","Name":"BombFizzy","NameHash":1154522627,"Number":61,"Rarity":"Common","Season":1,"SpecialCost":1,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Special","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_BombFizzy"},{"Category":"WeaponSub","Name":"BombQuick","NameHash":4158434508,"Number":58,"Rarity":"Common","Season":1,"SpecialCost":1,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Special","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_BombQuick"},{"Category":"WeaponSub","Name":"BombRobot","NameHash":729860056,"Number":63,"Rarity":"Common","Season":1,"SpecialCost":3,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Special","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_BombRobot"},{"Category":"WeaponSub","Name":"BombSplash","NameHash":1120010778,"Number":56,"Rarity":"Common","Season":1,"SpecialCost":1,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Special","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_BombSplash"},{"Category":"WeaponSub","Name":"BombSuction","NameHash":2229243287,"Number":57,"Rarity":"Common","Season":1,"SpecialCost":1,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Special","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_BombSuction"},{"Category":"WeaponSub","Name":"BombTako","NameHash":531655033,"Number":69,"Rarity":"Common","Season":1,"SpecialCost":2,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Special","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_BombTako"},{"Category":"MissionEnemy","Name":"BombTakopter","NameHash":3485992742,"Number":125,"Rarity":"Common","Season":1,"SpecialCost":5,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Special","Empty","Empty","Fill","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_BombTakopter"},{"Category":"WeaponMain","Name":"BrushMini00","NameHash":1809145515,"Number":25,"Rarity":"Common","Season":1,"SpecialCost":3,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Special","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_BrushMini00"},{"Category":"WeaponMain","Name":"BrushNormal00","NameHash":1683567277,"Number":26,"Rarity":"Common","Season":1,"SpecialCost":4,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Special","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_BrushNormal00"},{"Category":"Npc_Bukichi","Name":"Bukichi","NameHash":2414301895,"Number":85,"Rarity":"Rare","Season":1,"SpecialCost":5,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Special","Empty","Fill","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Bukichi"},{"Category":"CoopEnemy","Name":"Buranko","NameHash":3605302213,"Number":151,"Rarity":"Common","Season":1,"SpecialCost":4,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Special","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Buranko"},{"Category":"WeaponMain","Name":"ChargerKeeper00","NameHash":1315825438,"Number":33,"Rarity":"Common","Season":1,"SpecialCost":4,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Fill","Fill","Special","Empty","Fill","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_ChargerKeeper00"},{"Category":"WeaponMain","Name":"ChargerLight00","NameHash":1219944396,"Number":32,"Rarity":"Common","Season":1,"SpecialCost":3,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Special","Fill","Fill","Fill","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_ChargerLight00"},{"Category":"WeaponMain","Name":"ChargerLong00","NameHash":3285000527,"Number":30,"Rarity":"Common","Season":1,"SpecialCost":4,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Special","Empty","Empty","Fill","Fill","Fill","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_ChargerLong00"},{"Category":"WeaponMain","Name":"ChargerLongScope00","NameHash":1403585745,"Number":31,"Rarity":"Common","Season":1,"SpecialCost":5,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Fill","Empty","Empty","Fill","Fill","Fill","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Fill","Special","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_ChargerLongScope00"},{"Category":"WeaponMain","Name":"ChargerNormal00","NameHash":4285694157,"Number":28,"Rarity":"Common","Season":1,"SpecialCost":3,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Special","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_ChargerNormal00"},{"Category":"WeaponMain","Name":"ChargerNormalScope00","NameHash":1357437189,"Number":29,"Rarity":"Common","Season":1,"SpecialCost":4,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Fill","Special","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_ChargerNormalScope00"},{"Category":"WeaponMain","Name":"ChargerQuick00","NameHash":2831074410,"Number":27,"Rarity":"Common","Season":1,"SpecialCost":3,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Special","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_ChargerQuick00"},{"Category":"WeaponSpecial","Name":"Chidori","NameHash":2562594322,"Number":82,"Rarity":"Rare","Season":1,"SpecialCost":3,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Chidori"},{"Category":"Object","Name":"Denchinamazu","NameHash":4185382473,"Number":159,"Rarity":"Common","Season":1,"SpecialCost":4,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Special","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Denchinamazu"},{"Category":"CoopEnemy","Name":"Dosukoi","NameHash":1873569248,"Number":142,"Rarity":"Common","Season":1,"SpecialCost":4,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Special","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Dosukoi"},{"Category":"WeaponSpecial","Name":"EnergyStand","NameHash":408081468,"Number":84,"Rarity":"Rare","Season":1,"SpecialCost":3,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_EnergyStand"},{"Category":"Brand_B16","Name":"Enperii","NameHash":7326373,"Number":116,"Rarity":"Rare","Season":1,"SpecialCost":5,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Fill","Empty","Special","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Enperii"},{"Category":"Brand_B04","Name":"Ezokko","NameHash":3723257146,"Number":107,"Rarity":"Rare","Season":1,"SpecialCost":5,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Fill","Fill","Special","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Ezokko"},{"Category":"Brand_B05","Name":"Forima","NameHash":797874815,"Number":108,"Rarity":"Rare","Season":1,"SpecialCost":4,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Special","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Forima"},{"Category":"Npc_Fuka","Name":"Fuka","NameHash":4207570929,"Number":98,"Rarity":"Fresh","Season":1,"SpecialCost":6,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Fill","Fill","Empty","Empty","Empty","Special","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Fuka"},{"Category":"Object","Name":"GachiAsari","NameHash":429271507,"Number":162,"Rarity":"Rare","Season":1,"SpecialCost":4,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Special","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_GachiAsari"},{"Category":"Object","Name":"GachiHoko","NameHash":2924571449,"Number":161,"Rarity":"Rare","Season":1,"SpecialCost":5,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Special","Fill","Fill","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_GachiHoko"},{"Category":"Object","Name":"GachiYagura","NameHash":39573334,"Number":160,"Rarity":"Rare","Season":1,"SpecialCost":5,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Fill","Fill","Special","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_GachiYagura"},{"Category":"CoopEnemy","Name":"Grill","NameHash":4213326310,"Number":156,"Rarity":"Rare","Season":1,"SpecialCost":5,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Special","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Grill"},{"Category":"CoopEnemy","Name":"Hakobiya","NameHash":1852150771,"Number":157,"Rarity":"Rare","Season":1,"SpecialCost":5,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Special","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Hakobiya"},{"Category":"Npc_Hanagasa","Name":"Hanagasa","NameHash":2484171567,"Number":87,"Rarity":"Rare","Season":1,"SpecialCost":5,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Fill","Empty","Special","Empty","Fill","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Hanagasa"},{"Category":"CoopEnemy","Name":"Hebi","NameHash":1859944532,"Number":145,"Rarity":"Common","Season":1,"SpecialCost":4,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Fill","Fill","Empty","Fill","Special","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Hebi"},{"Category":"WeaponMain","Name":"HeroShooter","NameHash":3134251294,"Number":1,"Rarity":"Fresh","Season":1,"SpecialCost":5,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Special","Fill","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_HeroShooter"},{"Category":"Brand_B06","Name":"Hokkorii","NameHash":2989051718,"Number":109,"Rarity":"Rare","Season":1,"SpecialCost":4,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Special","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Hokkorii"},{"Category":"Brand_B07","Name":"Hotakkusu","NameHash":2233025264,"Number":110,"Rarity":"Rare","Season":1,"SpecialCost":5,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Special","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Hotakkusu"},{"Category":"Npc_Hotaru","Name":"Hotaru","NameHash":637914098,"Number":97,"Rarity":"Fresh","Season":1,"SpecialCost":5,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Special","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Hotaru"},{"Category":"MissionEnemy","Name":"Incleaner","NameHash":3467260471,"Number":134,"Rarity":"Common","Season":1,"SpecialCost":3,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Special","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Incleaner"},{"Category":"Brand_B01","Name":"Ironic","NameHash":2904265152,"Number":104,"Rarity":"Rare","Season":1,"SpecialCost":5,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Special","Empty","Fill","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Ironic"},{"Category":"CoopEnemy","Name":"Iruka","NameHash":3578066154,"Number":152,"Rarity":"Common","Season":1,"SpecialCost":5,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Special","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Iruka"},{"Category":"WeaponSpecial","Name":"Jetpack","NameHash":1845797866,"Number":79,"Rarity":"Rare","Season":1,"SpecialCost":3,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Fill","Empty","Fill","Empty","Empty","Fill","Fill","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Jetpack"},{"Category":"Brand_B08","Name":"Jimon","NameHash":3107138377,"Number":111,"Rarity":"Rare","Season":1,"SpecialCost":4,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Fill","Fill","Fill","Empty","Empty","Fill","Fill","Special","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Jimon"},{"Category":"Npc_Judgekun","Name":"Judgekun","NameHash":899811004,"Number":101,"Rarity":"Fresh","Season":1,"SpecialCost":5,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Special","Fill","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Judgekun"},{"Category":"WeaponSpecial","Name":"Kanitank","NameHash":1078974941,"Number":81,"Rarity":"Rare","Season":1,"SpecialCost":3,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Fill","Fill","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Fill","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Kanitank"},{"Category":"CoopEnemy","Name":"Katapaddo","NameHash":799003727,"Number":150,"Rarity":"Common","Season":1,"SpecialCost":5,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Fill","Fill","Empty","Empty","Empty","Fill","Fill","Special","Fill","Fill","Empty","Empty","Empty","Fill","Fill","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Katapaddo"},{"Category":"CoopEnemy","Name":"Kinshake","NameHash":1236710400,"Number":155,"Rarity":"Rare","Season":1,"SpecialCost":5,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Fill","Fill","Special","Empty","Fill","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Kinshake"},{"Category":"Npc_KoJudgekun","Name":"KoJudgekun","NameHash":29882622,"Number":102,"Rarity":"Fresh","Season":1,"SpecialCost":3,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Special","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_KoJudgekun"},{"Category":"Npc_Kojake","Name":"Kojake","NameHash":2502117721,"Number":93,"Rarity":"Fresh","Season":1,"SpecialCost":1,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Special","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Kojake"},{"Category":"CoopEnemy","Name":"Koumori","NameHash":123605259,"Number":149,"Rarity":"Common","Season":1,"SpecialCost":5,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Special","Empty","Fill","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Koumori"},{"Category":"Npc_Kumasan","Name":"Kumasan","NameHash":480993461,"Number":91,"Rarity":"Rare","Season":1,"SpecialCost":5,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Special","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Kumasan"},{"Category":"Brand_B02","Name":"Kuraagesu","NameHash":3325387368,"Number":105,"Rarity":"Rare","Season":1,"SpecialCost":5,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Special","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Kuraagesu"},{"Category":"WeaponSpecial","Name":"Kyuinki","NameHash":1313963633,"Number":77,"Rarity":"Rare","Season":1,"SpecialCost":3,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Fill","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Fill","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Kyuinki"},{"Category":"WeaponSub","Name":"LineMarker","NameHash":2847378495,"Number":68,"Rarity":"Common","Season":1,"SpecialCost":2,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Special","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_LineMarker"},{"Category":"WeaponMain","Name":"ManeuverDual00","NameHash":3957742942,"Number":47,"Rarity":"Common","Season":1,"SpecialCost":4,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Special","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_ManeuverDual00"},{"Category":"WeaponMain","Name":"ManeuverGallon00","NameHash":877150039,"Number":46,"Rarity":"Common","Season":1,"SpecialCost":4,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Special","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_ManeuverGallon00"},{"Category":"WeaponMain","Name":"ManeuverNormal00","NameHash":2259170750,"Number":45,"Rarity":"Common","Season":1,"SpecialCost":3,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Special","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_ManeuverNormal00"},{"Category":"WeaponMain","Name":"ManeuverShort00","NameHash":3823444644,"Number":44,"Rarity":"Common","Season":1,"SpecialCost":3,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Special","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_ManeuverShort00"},{"Category":"WeaponMain","Name":"ManeuverStepper00","NameHash":3925540957,"Number":48,"Rarity":"Common","Season":1,"SpecialCost":3,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Special","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_ManeuverStepper00"},{"Category":"Npc_Mantaro","Name":"Mantaro","NameHash":2648616236,"Number":100,"Rarity":"Fresh","Season":1,"SpecialCost":6,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Special","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Fill","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Mantaro"},{"Category":"CoopEnemy","Name":"Mogura","NameHash":2323405766,"Number":148,"Rarity":"Common","Season":1,"SpecialCost":5,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Special","Fill","Empty","Empty","Fill","Fill","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Fill","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Mogura"},{"Category":"Npc_Mother","Name":"Mother","NameHash":1068154643,"Number":92,"Rarity":"Rare","Season":1,"SpecialCost":5,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Fill","Fill","Special","Fill","Fill","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Mother"},{"Category":"CoopEnemy","Name":"Nabebuta","NameHash":163539215,"Number":153,"Rarity":"Common","Season":1,"SpecialCost":3,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Special","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Nabebuta"},{"Category":"Npc_Omura","Name":"Omura","NameHash":3379117525,"Number":86,"Rarity":"Rare","Season":1,"SpecialCost":5,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Fill","Fill","Special","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Omura"},{"Category":"Npc_Paruko","Name":"Paruko","NameHash":3361432276,"Number":89,"Rarity":"Rare","Season":1,"SpecialCost":5,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Fill","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Special","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Paruko"},{"Category":"WeaponSub","Name":"PointSensor","NameHash":507070064,"Number":65,"Rarity":"Common","Season":1,"SpecialCost":2,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Special","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_PointSensor"},{"Category":"WeaponSub","Name":"PoisonMist","NameHash":3989683017,"Number":67,"Rarity":"Common","Season":1,"SpecialCost":2,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Special","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_PoisonMist"},{"Category":"Brand_B03","Name":"Rokkenberugu","NameHash":1348088281,"Number":106,"Rarity":"Rare","Season":1,"SpecialCost":4,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Special","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Rokkenberugu"},{"Category":"WeaponMain","Name":"RollerCompact00","NameHash":454502338,"Number":21,"Rarity":"Common","Season":1,"SpecialCost":3,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Special","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_RollerCompact00"},{"Category":"WeaponMain","Name":"RollerHeavy00","NameHash":166364289,"Number":23,"Rarity":"Common","Season":1,"SpecialCost":5,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Special","Fill","Fill","Fill","Empty","Fill","Fill","Fill","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_RollerHeavy00"},{"Category":"WeaponMain","Name":"RollerHunter00","NameHash":2593613822,"Number":24,"Rarity":"Common","Season":1,"SpecialCost":4,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Fill","Fill","Special","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_RollerHunter00"},{"Category":"WeaponMain","Name":"RollerNormal00","NameHash":199956818,"Number":22,"Rarity":"Common","Season":1,"SpecialCost":4,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Fill","Fill","Special","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_RollerNormal00"},{"Category":"WeaponMain","Name":"SaberLight00","NameHash":1170508569,"Number":55,"Rarity":"Common","Season":1,"SpecialCost":2,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Special","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_SaberLight00"},{"Category":"WeaponMain","Name":"SaberNormal00","NameHash":986581074,"Number":54,"Rarity":"Common","Season":1,"SpecialCost":3,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Special","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_SaberNormal00"},{"Category":"CoopEnemy","Name":"Shake","NameHash":2680322625,"Number":141,"Rarity":"Common","Season":1,"SpecialCost":2,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Special","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Shake"},{"Category":"WeaponMain","Name":"ShelterCompact00","NameHash":3462956656,"Number":51,"Rarity":"Common","Season":1,"SpecialCost":3,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Special","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_ShelterCompact00"},{"Category":"WeaponMain","Name":"ShelterNormal00","NameHash":3854064270,"Number":49,"Rarity":"Common","Season":1,"SpecialCost":4,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Special","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_ShelterNormal00"},{"Category":"WeaponMain","Name":"ShelterWide00","NameHash":568445947,"Number":50,"Rarity":"Common","Season":1,"SpecialCost":5,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Special","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_ShelterWide00"},{"Category":"Brand_B19","Name":"Shichirin","NameHash":3841245452,"Number":119,"Rarity":"Rare","Season":1,"SpecialCost":4,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Special","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Shichirin"},{"Category":"WeaponSub","Name":"Shield","NameHash":3520794636,"Number":60,"Rarity":"Common","Season":1,"SpecialCost":2,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Special","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Shield"},{"Category":"Brand_B09","Name":"Shigureni","NameHash":1107262059,"Number":112,"Rarity":"Rare","Season":1,"SpecialCost":4,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Fill","Fill","Empty","Fill","Fill","Empty","Empty","Empty","Fill","Fill","Special","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Shigureni"},{"Category":"Npc_Shirei","Name":"Shirei","NameHash":1042152162,"Number":95,"Rarity":"Fresh","Season":1,"SpecialCost":6,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Fill","Empty","Fill","Fill","Special","Fill","Empty","Fill","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Shirei"},{"Category":"WeaponSpecial","Name":"ShockSonar","NameHash":381452474,"Number":76,"Rarity":"Rare","Season":1,"SpecialCost":3,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_ShockSonar"},{"Category":"WeaponMain","Name":"ShooterBlaze00","NameHash":1584923047,"Number":5,"Rarity":"Common","Season":1,"SpecialCost":3,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Fill","Special","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_ShooterBlaze00"},{"Category":"WeaponMain","Name":"ShooterExpert00","NameHash":2397979965,"Number":9,"Rarity":"Common","Season":1,"SpecialCost":4,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Special","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_ShooterExpert00"},{"Category":"WeaponMain","Name":"ShooterFirst00","NameHash":1587918377,"Number":3,"Rarity":"Common","Season":1,"SpecialCost":2,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Special","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_ShooterFirst00"},{"Category":"WeaponMain","Name":"ShooterFlash00","NameHash":2535329572,"Number":20,"Rarity":"Common","Season":1,"SpecialCost":3,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Special","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_ShooterFlash00"},{"Category":"WeaponMain","Name":"ShooterGravity00","NameHash":2535351307,"Number":7,"Rarity":"Common","Season":1,"SpecialCost":3,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Special","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_ShooterGravity00"},{"Category":"WeaponMain","Name":"ShooterHeavy00","NameHash":2959507155,"Number":10,"Rarity":"Common","Season":1,"SpecialCost":4,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Fill","Special","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_ShooterHeavy00"},{"Category":"WeaponMain","Name":"ShooterLong00","NameHash":3198162002,"Number":11,"Rarity":"Common","Season":1,"SpecialCost":4,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Special","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_ShooterLong00"},{"Category":"WeaponMain","Name":"ShooterNormal00","NameHash":4283967559,"Number":6,"Rarity":"Common","Season":1,"SpecialCost":3,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Fill","Fill","Special","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_ShooterNormal00"},{"Category":"WeaponMain","Name":"ShooterPrecision00","NameHash":1648503198,"Number":4,"Rarity":"Common","Season":1,"SpecialCost":3,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Special","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_ShooterPrecision00"},{"Category":"WeaponMain","Name":"ShooterQuickMiddle00","NameHash":1388740635,"Number":8,"Rarity":"Common","Season":1,"SpecialCost":2,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Special","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_ShooterQuickMiddle00"},{"Category":"WeaponMain","Name":"ShooterShort00","NameHash":3258243310,"Number":2,"Rarity":"Common","Season":1,"SpecialCost":4,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Fill","Special","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_ShooterShort00"},{"Category":"WeaponMain","Name":"ShooterTripleMiddle00","NameHash":2765942981,"Number":19,"Rarity":"Common","Season":1,"SpecialCost":3,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Special","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_ShooterTripleMiddle00"},{"Category":"WeaponMain","Name":"ShooterTripleQuick00","NameHash":2810229420,"Number":18,"Rarity":"Common","Season":1,"SpecialCost":3,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Special","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_ShooterTripleQuick00"},{"Category":"WeaponMain","Name":"SlosherBathtub00","NameHash":3541102791,"Number":37,"Rarity":"Common","Season":1,"SpecialCost":4,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Special","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_SlosherBathtub00"},{"Category":"WeaponMain","Name":"SlosherDiffusion00","NameHash":1146439088,"Number":35,"Rarity":"Common","Season":1,"SpecialCost":2,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Special","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_SlosherDiffusion00"},{"Category":"WeaponMain","Name":"SlosherLauncher00","NameHash":3629537620,"Number":36,"Rarity":"Common","Season":1,"SpecialCost":3,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Special","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_SlosherLauncher00"},{"Category":"WeaponMain","Name":"SlosherStrong00","NameHash":3190806576,"Number":34,"Rarity":"Common","Season":1,"SpecialCost":3,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Special","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_SlosherStrong00"},{"Category":"WeaponMain","Name":"SlosherWashtub00","NameHash":3040510780,"Number":38,"Rarity":"Common","Season":1,"SpecialCost":4,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Special","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_SlosherWashtub00"},{"Category":"WeaponSpecial","Name":"SpGreatBarrier","NameHash":2252976373,"Number":71,"Rarity":"Rare","Season":1,"SpecialCost":3,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Fill","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Fill","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_SpGreatBarrier"},{"Category":"WeaponSpecial","Name":"SpInkStorm","NameHash":1740685241,"Number":74,"Rarity":"Rare","Season":1,"SpecialCost":3,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_SpInkStorm"},{"Category":"WeaponSpecial","Name":"SpMegaphoneLaser51","NameHash":2594963753,"Number":78,"Rarity":"Rare","Season":1,"SpecialCost":3,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_SpMegaphoneLaser51"},{"Category":"WeaponSpecial","Name":"SpMultiMissile","NameHash":3714821026,"Number":73,"Rarity":"Rare","Season":1,"SpecialCost":3,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Fill","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Fill","Fill","Empty","Empty","Fill","Fill","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_SpMultiMissile"},{"Category":"WeaponSpecial","Name":"SpNiceBall","NameHash":428822538,"Number":75,"Rarity":"Rare","Season":1,"SpecialCost":3,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_SpNiceBall"},{"Category":"WeaponSpecial","Name":"SpSuperHook","NameHash":2677497974,"Number":72,"Rarity":"Rare","Season":1,"SpecialCost":3,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_SpSuperHook"},{"Category":"WeaponSpecial","Name":"SpUltraShot","NameHash":740789930,"Number":70,"Rarity":"Rare","Season":1,"SpecialCost":3,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_SpUltraShot"},{"Category":"WeaponSpecial","Name":"SpUltraStamp","NameHash":2476918201,"Number":80,"Rarity":"Rare","Season":1,"SpecialCost":3,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Empty","Empty","Fill","Fill","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_SpUltraStamp"},{"Category":"Npc_Spiky","Name":"Spiky","NameHash":2905631910,"Number":90,"Rarity":"Rare","Season":1,"SpecialCost":5,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Fill","Empty","Special","Empty","Fill","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Spiky"},{"Category":"WeaponMain","Name":"SpinnerDownpour00","NameHash":2748918357,"Number":42,"Rarity":"Common","Season":1,"SpecialCost":4,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Special","Fill","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_SpinnerDownpour00"},{"Category":"WeaponMain","Name":"SpinnerHyper00","NameHash":49644779,"Number":41,"Rarity":"Common","Season":1,"SpecialCost":5,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Fill","Special","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_SpinnerHyper00"},{"Category":"WeaponMain","Name":"SpinnerQuick00","NameHash":2474757775,"Number":39,"Rarity":"Common","Season":1,"SpecialCost":3,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Special","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_SpinnerQuick00"},{"Category":"WeaponMain","Name":"SpinnerSerein00","NameHash":925276840,"Number":43,"Rarity":"Common","Season":1,"SpecialCost":4,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Special","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_SpinnerSerein00"},{"Category":"WeaponMain","Name":"SpinnerStandard00","NameHash":2728776232,"Number":40,"Rarity":"Common","Season":1,"SpecialCost":5,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Special","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_SpinnerStandard00"},{"Category":"WeaponSub","Name":"Sprinkler","NameHash":3030497624,"Number":59,"Rarity":"Common","Season":1,"SpecialCost":1,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Special","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Sprinkler"},{"Category":"MissionEnemy","Name":"StampWave","NameHash":3199195783,"Number":136,"Rarity":"Rare","Season":1,"SpecialCost":4,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Fill","Empty","Special","Empty","Fill","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_StampWave"},{"Category":"WeaponMain","Name":"StringerNormal00","NameHash":31455876,"Number":52,"Rarity":"Common","Season":1,"SpecialCost":4,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Special","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_StringerNormal00"},{"Category":"WeaponMain","Name":"StringerShort00","NameHash":3763219590,"Number":53,"Rarity":"Common","Season":1,"SpecialCost":4,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Special","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_StringerShort00"},{"Category":"MissionEnemy","Name":"Sutakoraa","NameHash":870638126,"Number":129,"Rarity":"Common","Season":1,"SpecialCost":3,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Special","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Sutakoraa"},{"Category":"CoopEnemy","Name":"Taihou","NameHash":4171777125,"Number":154,"Rarity":"Common","Season":1,"SpecialCost":5,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Fill","Fill","Fill","Empty","Empty","Special","Fill","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Taihou"},{"Category":"MissionEnemy","Name":"TakoCommander","NameHash":2166253797,"Number":131,"Rarity":"Rare","Season":1,"SpecialCost":5,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Special","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_TakoCommander"},{"Category":"MissionEnemy","Name":"TakoDozer","NameHash":4103353193,"Number":137,"Rarity":"Common","Season":1,"SpecialCost":5,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Fill","Special","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_TakoDozer"},{"Category":"MissionEnemy","Name":"TakoHopper","NameHash":3600837310,"Number":123,"Rarity":"Common","Season":1,"SpecialCost":4,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Special","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_TakoHopper"},{"Category":"MissionEnemy","Name":"TakoMissile","NameHash":2174759459,"Number":132,"Rarity":"Common","Season":1,"SpecialCost":2,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Special","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_TakoMissile"},{"Category":"MissionEnemy","Name":"TakoPod","NameHash":3112240358,"Number":127,"Rarity":"Common","Season":1,"SpecialCost":1,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Special","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_TakoPod"},{"Category":"MissionEnemy","Name":"TakoSniper","NameHash":2069350547,"Number":130,"Rarity":"Rare","Season":1,"SpecialCost":4,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Special","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_TakoSniper"},{"Category":"MissionEnemy","Name":"TakoStamp","NameHash":97753630,"Number":135,"Rarity":"Common","Season":1,"SpecialCost":2,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Special","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_TakoStamp"},{"Category":"MissionEnemy","Name":"TakoStrike","NameHash":3182497038,"Number":138,"Rarity":"Common","Season":1,"SpecialCost":5,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Special","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_TakoStrike"},{"Category":"MissionEnemy","Name":"TakoTrooper","NameHash":3299235441,"Number":120,"Rarity":"Common","Season":1,"SpecialCost":3,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Special","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_TakoTrooper"},{"Category":"MissionEnemy","Name":"TakoZonesu","NameHash":4188389885,"Number":139,"Rarity":"Rare","Season":1,"SpecialCost":4,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Fill","Special","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_TakoZonesu"},{"Category":"MissionEnemy","Name":"TakopodDEV","NameHash":3624226182,"Number":128,"Rarity":"Rare","Season":1,"SpecialCost":4,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Special","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_TakopodDEV"},{"Category":"MissionEnemy","Name":"TakopperinGo","NameHash":1644955793,"Number":133,"Rarity":"Rare","Season":1,"SpecialCost":4,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Special","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_TakopperinGo"},{"Category":"MissionEnemy","Name":"Takopter","NameHash":1611696174,"Number":124,"Rarity":"Common","Season":1,"SpecialCost":2,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Special","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Takopter"},{"Category":"MissionEnemy","Name":"TakowasaShogun","NameHash":13812913,"Number":140,"Rarity":"Fresh","Season":1,"SpecialCost":6,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Fill","Fill","Special","Fill","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Fill","Empty","Empty","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_TakowasaShogun"},{"Category":"CoopEnemy","Name":"Tamahiroi","NameHash":1409189433,"Number":143,"Rarity":"Common","Season":1,"SpecialCost":3,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Special","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Tamahiroi"},{"Category":"CoopEnemy","Name":"Tamaire","NameHash":2885897738,"Number":158,"Rarity":"Rare","Season":1,"SpecialCost":5,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Special","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Tamaire"},{"Category":"Brand_B17","Name":"Tatakikensaki","NameHash":611018734,"Number":117,"Rarity":"Rare","Season":1,"SpecialCost":3,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Special","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Tatakikensaki"},{"Category":"MissionEnemy","Name":"TateTakoTrooper","NameHash":2035891014,"Number":121,"Rarity":"Common","Season":1,"SpecialCost":4,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Fill","Empty","Special","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_TateTakoTrooper"},{"Category":"CoopEnemy","Name":"Teppan","NameHash":392871566,"Number":146,"Rarity":"Common","Season":1,"SpecialCost":4,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Fill","Empty","Fill","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Fill","Special","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Teppan"},{"Category":"CoopEnemy","Name":"Tower","NameHash":2931820234,"Number":147,"Rarity":"Common","Season":1,"SpecialCost":3,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Special","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Tower"},{"Category":"WeaponSub","Name":"Trap","NameHash":1035874875,"Number":66,"Rarity":"Common","Season":1,"SpecialCost":2,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Special","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Trap"},{"Category":"WeaponSpecial","Name":"TripleTornado","NameHash":2697762001,"Number":83,"Rarity":"Rare","Season":1,"SpecialCost":3,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Fill","Fill","Empty","Empty","Fill","Fill","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_TripleTornado"},{"Category":"Npc_Utsuho","Name":"Utsuho","NameHash":2440432514,"Number":99,"Rarity":"Fresh","Season":1,"SpecialCost":6,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Fill","Fill","Empty","Fill","Fill","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Special","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Fill","Empty","Empty","Empty"],"__RowId":"MiniGame_Utsuho"},{"Category":"Brand_B11","Name":"Yako","NameHash":494522593,"Number":114,"Rarity":"Rare","Season":1,"SpecialCost":5,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Fill","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Fill","Empty","Empty","Fill","Fill","Special","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Yako"},{"Category":"Npc_Yashiganisan","Name":"Yashiganisan","NameHash":511229519,"Number":88,"Rarity":"Rare","Season":1,"SpecialCost":5,"Square":["Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Special","Empty","Fill","Empty","Fill","Empty","Empty","Empty","Fill","Fill","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Fill","Fill","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Fill","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty","Empty"],"__RowId":"MiniGame_Yashiganisan"}]');var Tm=function(){function t(t,e){this.spaces=t,this.meta=e,console.assert(64==t.length),console.assert(0==t.filter((function(t){return t<0})).length),null!=e&&console.assert(t.filter((function(t){return t>0})).length==e.spaceCount)}return t.prototype.get=function(t){return this.spaces[t.x+8*t.y]},t.prototype.rotate=function(e){for(var i=t.ROTATION_MATRICES[e],r=i[0],n=i[1],o=i[2],a=i[3],s=i[4],p=i[5],l=[],m=0;m<8;++m)for(var y=0;y<8;++y){var h={x:r*y+n*m+o,y:a*y+s*m+p};l.push(this.get(h))}return new t(l)},t.prototype.forEach=function(t){for(var e=0;e<8;++e)for(var i=0;i<8;++i){var r=this.get({x:i,y:e});r>0&&t(i,e,r)}},t.fromId=function(e){return t.ID_LOOKUP.get(e)},t.fromName=function(e){return t.NAME_LOOKUP.get(e)},t.ID_LOOKUP=new Map,t.NAME_LOOKUP=new Map,t.ROTATION_MATRICES=[[1,0,0,0,1,0],[0,1,0,-1,0,7],[-1,0,7,0,-1,7],[0,-1,7,1,0,0]],function(){for(var e=0,i=gm;e<i.length;e++){for(var r=i[e],n=r.Number,o=r.Name,a=[],s=0;s<8;++s)for(var p=0;p<8;++p){var l=r.Square[p+8*(7-s)],m=0;"Fill"==l?m=1:"Special"==l&&(m=2),a.push(m)}var y=new t(a,{id:n,name:o,rarity:r.Rarity,specialCost:r.SpecialCost,spaceCount:a.filter((function(t){return t>0})).length});t.ID_LOOKUP.set(n,y),t.NAME_LOOKUP.set(o,y)}}(),t}();const bm=JSON.parse('[{"Card":["Work/Gyml/MiniGame_Aori.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Hotaru.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_TakowasaShogun.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_RollerCompact00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_RollerNormal00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_RollerHeavy00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_RollerHunter00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_BombCurling.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_BombSuction.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_SpGreatBarrier.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Takopter.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_TakopodDEV.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Sutakoraa.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_TakopperinGo.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_TakoStamp.spl__MiniGameCardInfo.gyml"],"__RowId":"MiniGame_Aori"},{"Card":["Work/Gyml/MiniGame_Atarime.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Shirei.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_TakowasaShogun.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Kojake.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_HeroShooter.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_ChargerLight00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Denchinamazu.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_TakoTrooper.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_TateTakoTrooper.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_BaiTakoTrooper.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Takopter.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_TakoPod.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Incleaner.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Kyuinki.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_TakoZonesu.spl__MiniGameCardInfo.gyml"],"__RowId":"MiniGame_Atarime"},{"Card":["Work/Gyml/MiniGame_Fuka.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Utsuho.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Mantaro.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_StringerNormal00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_StringerShort00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Iruka.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Mogura.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Chidori.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_TakoMissile.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_TakopperinGo.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Tower.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_BombTako.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Sprinkler.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_TakoPod.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_LineMarker.spl__MiniGameCardInfo.gyml"],"__RowId":"MiniGame_Fuka"},{"Card":["Work/Gyml/MiniGame_Hanagasa.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_SpMultiMissile.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Tatakikensaki.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Rokkenberugu.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Anaaki.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Kuraagesu.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Beacon.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Forima.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Shichirin.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_TakopodDEV.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Jimon.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Shigureni.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Arome.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Yako.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Barazushi.spl__MiniGameCardInfo.gyml"],"__RowId":"MiniGame_GearShopClothes"},{"Card":["Work/Gyml/MiniGame_Omura.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Hokkorii.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Arome.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Kuraagesu.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Barazushi.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Hotakkusu.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_ManeuverShort00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_StringerShort00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_BlasterShort00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_ShooterFlash00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_BombTako.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_BombTakopter.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Tamahiroi.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_SpNiceBall.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_GachiHoko.spl__MiniGameCardInfo.gyml"],"__RowId":"MiniGame_GearShopHead"},{"Card":["Work/Gyml/MiniGame_Yashiganisan.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Kanitank.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_ChargerLongScope00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_RollerHeavy00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_SpinnerHyper00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_SpinnerStandard00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_ShooterHeavy00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_SlosherWashtub00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_BombCurling.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Arome.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Taihou.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_TakoStamp.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Yako.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Kuraagesu.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_TakoCommander.spl__MiniGameCardInfo.gyml"],"__RowId":"MiniGame_GearShopShoes"},{"Card":["Work/Gyml/MiniGame_Paruko.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Kinshake.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Sutakoraa.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_PoisonMist.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_LineMarker.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_ShooterFlash00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_ChargerLong00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_SpinnerStandard00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_SpUltraStamp.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Enperii.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Yako.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Shichirin.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_TakoStrike.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Tower.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Teppan.spl__MiniGameCardInfo.gyml"],"__RowId":"MiniGame_GoodsShop"},{"Card":["Work/Gyml/MiniGame_Hotaru.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Aori.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Bukichi.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_ChargerQuick00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_ChargerNormal00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_ChargerNormalScope00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_ChargerLong00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_ChargerLongScope00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_ChargerLight00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_ChargerKeeper00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_ShelterCompact00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_BombSplash.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Shield.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Trap.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_SpMegaphoneLaser51.spl__MiniGameCardInfo.gyml"],"__RowId":"MiniGame_Hotaru"},{"Card":["Work/Gyml/MiniGame_Judgekun.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_KoJudgekun.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_GachiYagura.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_GachiHoko.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_GachiAsari.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_ShooterNormal00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_SpinnerSerein00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_RollerHeavy00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_BlasterLight00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_SlosherDiffusion00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_BrushMini00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_ChargerNormalScope00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Sprinkler.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_BombRobot.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_SpUltraShot.spl__MiniGameCardInfo.gyml"],"__RowId":"MiniGame_Judge"},{"Card":["Work/Gyml/MiniGame_KoJudgekun.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Kumasan.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Kojake.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Shake.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Hakobiya.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Bakudan.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Hebi.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Tower.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Teppan.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Mogura.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Katapaddo.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Kinshake.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Koumori.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Dosukoi.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Jetpack.spl__MiniGameCardInfo.gyml"],"__RowId":"MiniGame_JudgeJr"},{"Card":["Work/Gyml/MiniGame_ShooterNormal00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_BlasterMiddle00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_RollerNormal00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_ChargerNormal00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_SpinnerStandard00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_SlosherStrong00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_ManeuverNormal00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_StringerNormal00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_SaberLight00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_BombSplash.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Denchinamazu.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_TakoDozer.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Shake.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Batoroika.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Mother.spl__MiniGameCardInfo.gyml"],"__RowId":"MiniGame_Kurage0"},{"Card":["Work/Gyml/MiniGame_ShooterFirst00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_ShooterBlaze00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_ShooterQuickMiddle00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_ChargerQuick00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_SlosherBathtub00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_ShelterNormal00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_BombSuction.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Ezokko.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Yako.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Tatakikensaki.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_TakoTrooper.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_TakoHopper.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_TakoSniper.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Dosukoi.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Grill.spl__MiniGameCardInfo.gyml"],"__RowId":"MiniGame_Kurage1"},{"Card":["Work/Gyml/MiniGame_ShooterHeavy00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_ShooterExpert00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_RollerHunter00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_SpinnerHyper00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_ManeuverDual00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_BrushNormal00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_SaberNormal00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Buranko.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Jimon.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_BlasterLightShort00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_SpinnerSerein00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_BarrierTakopter.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_TakoMissile.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_SlosherLauncher00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_BlasterLightLong00.spl__MiniGameCardInfo.gyml"],"__RowId":"MiniGame_Kurage2"},{"Card":["Work/Gyml/MiniGame_ShooterNormal00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_StringerNormal00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_RollerNormal00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_ChargerNormal00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_BlasterMiddle00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_SpinnerQuick00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_BombSplash.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Sprinkler.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Yako.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Enperii.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Hotakkusu.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Bakudan.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_TakoTrooper.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_BombTakopter.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_TakoDozer.spl__MiniGameCardInfo.gyml"],"__RowId":"MiniGame_Kurage3"},{"Card":["Work/Gyml/MiniGame_Mantaro.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Fuka.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Utsuho.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_BombSplash.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_BombTako.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_TripleTornado.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_TakoPod.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_TakopodDEV.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_StringerNormal00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Trap.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Kinshake.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Beacon.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_BombQuick.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_PoisonMist.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_BombTakopter.spl__MiniGameCardInfo.gyml"],"__RowId":"MiniGame_Mantaro"},{"Card":["Work/Gyml/MiniGame_Mother.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_BombSplash.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_BombSuction.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_BombQuick.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_TateTakoTrooper.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_ShooterFirst00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_BombFizzy.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_BombCurling.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_BombRobot.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Beacon.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_ShooterTripleQuick00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_SpinnerQuick00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_PoisonMist.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_SpInkStorm.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_BombTako.spl__MiniGameCardInfo.gyml"],"__RowId":"MiniGame_Mother"},{"Card":["Work/Gyml/MiniGame_ShooterNormal00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_BlasterMiddle00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_RollerNormal00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_ChargerNormal00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_SpinnerStandard00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_SlosherStrong00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_ManeuverNormal00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_StringerNormal00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_SaberLight00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_BombSplash.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Denchinamazu.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_TakoDozer.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Shake.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Batoroika.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Mother.spl__MiniGameCardInfo.gyml"],"__RowId":"MiniGame_Starter"},{"Card":["Work/Gyml/MiniGame_Utsuho.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Mantaro.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Fuka.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_SaberNormal00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_SaberLight00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_BombSuction.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_BombFizzy.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_SpSuperHook.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_BaiTakoTrooper.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_TakoStamp.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Takopter.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_TakoDozer.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Buranko.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Hebi.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Denchinamazu.spl__MiniGameCardInfo.gyml"],"__RowId":"MiniGame_Utsuho"},{"Card":["Work/Gyml/MiniGame_Spiky.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_StampWave.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_LineMarker.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_ShockSonar.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_PointSensor.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Trap.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Sprinkler.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_BrushNormal00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_ShelterCompact00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_ChargerKeeper00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_ShelterWide00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Ironic.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Forima.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Shichirin.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Batoroika.spl__MiniGameCardInfo.gyml"],"__RowId":"MiniGame_Vendor"},{"Card":["Work/Gyml/MiniGame_Bukichi.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_ShooterHeavy00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_BlasterLong00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_RollerHunter00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_BrushMini00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_ChargerLongScope00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_SlosherBathtub00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_SpinnerDownpour00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_ManeuverStepper00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_ShelterWide00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_StringerShort00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_SaberNormal00.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_EnergyStand.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_BombFizzy.spl__MiniGameCardInfo.gyml","Work/Gyml/MiniGame_Sprinkler.spl__MiniGameCardInfo.gyml"],"__RowId":"MiniGame_WeaponShop"}]');var xm=function(){function t(t){this.cards=t,console.assert(15==t.length),t.forEach((function(t){console.assert(null!=t)}))}return t.prototype.shuffle=function(){for(var e=this.cards.slice(),i=e.length-1;i>0;i--){var r=Math.floor(Math.random()*(i+1)),n=e[i];e[i]=e[r],e[r]=n}return new t(e)},t.fromCardIds=function(e){return new t(e.map((function(t){return Tm.fromId(t)})))},t.fromPreset=function(e){return t.NAME_LOOKUP.get(e)},t.NAME_LOOKUP=new Map,function(){for(var e=0,i=bm;e<i.length;e++){for(var r=i[e],n=[],o=0,a=r.Card;o<a.length;o++){var s=a[o].match(/MiniGame_(\w+)\.spl/)[1];n.push(Tm.fromName(s))}var p=r.__RowId.match(/MiniGame_(\w+)/)[1];t.NAME_LOOKUP.set(p,new t(n))}}(),t}(),Sm=function(){function t(t,e,i,r,n){void 0===i&&(i=0),this.deck=t,this.hand=e,this.specialPoints=i,this.card=r,this.movement=n,console.assert(4==e.length),console.assert(i>=0),null!=r&&console.assert(null!=r.meta)}return t.prototype.move=function(e){var i=this.deck.slice(),r=this.hand.slice();console.assert(0<=e.handId&&e.handId<4);var n=r[e.handId];null==n&&(console.assert(null!=e.cardId),n=Tm.fromId(e.cardId)),r[e.handId]=i.pop();var o=this.specialPoints;return"special"==e.type&&(o-=n.meta.specialCost),new t(i,r,o,n,e)},t.from=function(e){for(var i=e.cards.slice().reverse(),r=[],n=0;n<4;++n)r.push(i.pop());return new t(i,r)},t}(),Rm=function(){function t(t,e,i,r,n){this.id=t,this.board=e,this.player1=i,this.player2=r,this.cardPlacements=n,console.assert(t>=0)}return t.prototype.move=function(e,i){var r,n,o=this.board,a=o.specialPoints1,s=o.specialPoints2,p=0,l=0,m=this.board,y=this.player1.move(e),h=this.player2.move(i),u=[];if("discard"!=e.type?r={turn:1,card:y.card,rotation:e.params.rotation,position:e.params.position}:p+=1,"discard"!=i.type?n={turn:-1,card:h.card,rotation:i.params.rotation,position:i.params.position}:l+=1,r&&n){var E=!1,c=new Set;[r,n].forEach((function(t){t.card.rotate(t.rotation).forEach((function(e,i){var r={x:e+t.position.x,y:i+t.position.y},n=r.x.toString()+":"+r.y.toString();c.has(n)&&(E=!0),c.add(n)}))}));var d=y.card.meta.spaceCount-h.card.meta.spaceCount;u=E&&0!=d?d<0?[[n],[r]]:[[r],[n]]:[[r,n]]}else r&&(u=[[r]]),n&&(u=[[n]]);for(var f=0,_=u;f<_.length;f++){var v=_[f];m=m.move(v)}return p+=m.specialPoints1-a,l+=m.specialPoints2-s,y=new Sm(y.deck,y.hand,y.specialPoints+p,y.card,y.movement),h=new Sm(h.deck,h.hand,h.specialPoints+l,h.card,h.movement),new t(this.id+1,m,y,h,u)},t.prototype.isValidMovement=function(t,e){if(e.handId<0||e.handId>=4)return!1;if("discard"==e.type)return!0;var i=t>0?this.player1:this.player2;return i=i.move(e),this.board.isValidMovement("special"==e.type,{turn:t,card:i.card,rotation:e.params.rotation,position:e.params.position})},t.initial=function(e,i,r){return new t(0,e,Sm.from(i),Sm.from(r))},t}(),Im=function(){function t(t,e){void 0===e&&(e=0),this.states=t,this.stateId=e,console.assert(e<t.length),this.onNewState()}return t.prototype.forward=function(){console.assert(this.stateId<this.states.length);var t=this.states[this.stateId],e=this.states[++this.stateId];return this.onNewStateCallback(t,e),this.state},t.prototype.backward=function(){console.assert(this.stateId>0);var t=this.states[this.stateId],e=this.states[--this.stateId];return this.onNewStateCallback(t,e),this.state},t.prototype.move=function(t,e){var i=this.states[this.stateId],r=i.move(t,e);return this.states.splice(++this.stateId),this.states.push(r),this.onNewStateCallback(i,r),this.state},t.prototype.onNewState=function(t){this.onNewStateCallback=t||function(){}},Object.defineProperty(t.prototype,"state",{get:function(){return this.states[this.stateId]},enumerable:!1,configurable:!0}),t.fromGameRecord=function(e){for(var i=vm.fromId(e.board),r=e.decks.map(xm.fromCardIds),n=r[0],o=r[1],a=Rm.initial(i,n,o),s=[a],p=0,l=e.moves||[];p<l.length;p++){var m=l[p],y=m[0],h=m[1];console.assert(a.isValidMovement(1,y)),console.assert(a.isValidMovement(-1,h)),a=a.move(y,h),s.push(a)}return new t(s)},t}();class Am{__init(){this.tileAnim=[0,0]}__init2(){this.dontUseTransform=!1}constructor(t){Am.prototype.__init.call(this),Am.prototype.__init2.call(this),this.renderer=t,this.tileAnim=[0,0]}static getInstance(t){return t.plugins.tilemap||(t.plugins.tilemap=new Am(t)),t.plugins.tilemap}}const Mm={TEXTURES_PER_TILEMAP:16,TEXTILE_DIMEN:1024,TEXTILE_UNITS:1,TEXTILE_SCALE_MODE:st.LINEAR,use32bitIndex:!1,DO_CLEAR:!0,get maxTextures(){return this.MAX_TEXTURES},set maxTextures(t){this.MAX_TEXTURES=t},get boundSize(){return this.TEXTURE_TILE_DIMEN},set boundSize(t){this.TILE_TEXTURE_DIMEN=t},get boundCountPerBuffer(){return this.TEXTILE_UNITS},set boundCountPerBuffer(t){this.TEXTILE_UNITS=t}};function Cm(t,e){return null!=t?t:e()}var Fm;!function(t){t[t.U=0]="U",t[t.V=1]="V",t[t.X=2]="X",t[t.Y=3]="Y",t[t.TILE_WIDTH=4]="TILE_WIDTH",t[t.TILE_HEIGHT=5]="TILE_HEIGHT",t[t.ROTATE=6]="ROTATE",t[t.ANIM_X=7]="ANIM_X",t[t.ANIM_Y=8]="ANIM_Y",t[t.TEXTURE_INDEX=9]="TEXTURE_INDEX",t[t.ANIM_COUNT_X=10]="ANIM_COUNT_X",t[t.ANIM_COUNT_Y=11]="ANIM_COUNT_Y",t[t.ANIM_DIVISOR=12]="ANIM_DIVISOR",t[t.ALPHA=13]="ALPHA"}(Fm||(Fm={}));const Nm=Object.keys(Fm).length/2;class Om extends pi{__init(){this.shadowColor=new Float32Array([0,0,0,.5])}__init2(){this._globalMat=null}__init3(){this.tileAnim=null}__init4(){this.modificationMarker=0}__init5(){this.offsetX=0}__init6(){this.offsetY=0}__init7(){this.compositeParent=!1}__init8(){this.tilemapBounds=new De}__init9(){this.hasAnimatedTile=!1}__init10(){this.pointsBuf=[]}constructor(t){super(),Om.prototype.__init.call(this),Om.prototype.__init2.call(this),Om.prototype.__init3.call(this),Om.prototype.__init4.call(this),Om.prototype.__init5.call(this),Om.prototype.__init6.call(this),Om.prototype.__init7.call(this),Om.prototype.__init8.call(this),Om.prototype.__init9.call(this),Om.prototype.__init10.call(this),Om.prototype.__init11.call(this),Om.prototype.__init12.call(this),Om.prototype.__init13.call(this),Om.prototype.__init14.call(this),Om.prototype.__init15.call(this),Om.prototype.__init16.call(this),this.setTileset(t)}getTileset(){return this.tileset}setTileset(t=[]){Array.isArray(t)||(t=[t]);for(let e=0;e<t.length;e++)t[e].baseTexture&&(t[e]=t[e].baseTexture);return this.tileset=t,this}clear(){return this.pointsBuf.length=0,this.modificationMarker=0,this.tilemapBounds.clear(),this.hasAnimatedTile=!1,this}tile(t,e,i,r={}){let n,o=-1;if("number"==typeof t)o=t,n=this.tileset[o];else{let e;e="string"==typeof t?ji.from(t):t;const i=this.tileset;for(let t=0;t<i.length;t++)if(i[t]===e.castToBaseTexture()){o=t;break}"baseTexture"in e&&(r.u=Cm(r.u,(()=>e.frame.x)),r.v=Cm(r.v,(()=>e.frame.y)),r.tileWidth=Cm(r.tileWidth,(()=>e.orig.width)),r.tileHeight=Cm(r.tileHeight,(()=>e.orig.height))),n=e.castToBaseTexture()}if(!n||o<0)return console.error("The tile texture was not found in the tilemap tileset."),this;const{u:a=0,v:s=0,tileWidth:p=n.realWidth,tileHeight:l=n.realHeight,animX:m=0,animY:y=0,rotate:h=0,animCountX:u=1024,animCountY:E=1024,animDivisor:c=1,alpha:d=1}=r,f=this.pointsBuf;return this.hasAnimatedTile=this.hasAnimatedTile||m>0||y>0,f.push(a),f.push(s),f.push(e),f.push(i),f.push(p),f.push(l),f.push(h),f.push(0|m),f.push(0|y),f.push(o),f.push(u),f.push(E),f.push(c),f.push(d),this.tilemapBounds.addFramePad(e,i,e+p,i+l,0,0),this}tileRotate(t){const e=this.pointsBuf;e[e.length-(Nm-Fm.TEXTURE_INDEX)]=t}tileAnimX(t,e){const i=this.pointsBuf;i[i.length-(Nm-Fm.ANIM_X)]=t,i[i.length-(Nm-Fm.ANIM_COUNT_X)]=e}tileAnimY(t,e){const i=this.pointsBuf;i[i.length-(Nm-Fm.ANIM_Y)]=t,i[i.length-(Nm-Fm.ANIM_COUNT_Y)]=e}tileAnimDivisor(t){const e=this.pointsBuf;e[e.length-(Nm-Fm.ANIM_DIVISOR)]=t}tileAlpha(t){const e=this.pointsBuf;e[e.length-(Nm-Fm.ALPHA)]=t}__init11(){this.renderCanvas=t=>{const e=Am.getInstance(t);if(e&&!e.dontUseTransform){const e=this.worldTransform;t.context.setTransform(e.a,e.b,e.c,e.d,e.tx*t.resolution,e.ty*t.resolution)}this.renderCanvasCore(t)}}renderCanvasCore(t){if(0===this.tileset.length)return;const e=this.pointsBuf,i=this.tileAnim||t.plugins.tilemap&&t.plugins.tilemap.tileAnim;t.context.fillStyle="#000000";for(let r=0,n=e.length;r<n;r+=Nm){let n=e[r+Fm.U],o=e[r+Fm.V];const a=e[r+Fm.X],s=e[r+Fm.Y],p=e[r+Fm.TILE_WIDTH],l=e[r+Fm.TILE_HEIGHT];n+=e[r+Fm.ANIM_X]*i[0],o+=e[r+Fm.ANIM_Y]*i[1];const m=e[r+Fm.TEXTURE_INDEX],y=e[r+Fm.ALPHA];m>=0&&this.tileset[m]?(t.context.globalAlpha=y,t.context.drawImage(this.tileset[m].getDrawableSource(),n,o,p,l,a,s,p,l)):(t.context.globalAlpha=.5,t.context.fillRect(a,s,p,l)),t.context.globalAlpha=1}}__init12(){this.vbId=0}__init13(){this.vb=null}__init14(){this.vbBuffer=null}__init15(){this.vbArray=null}__init16(){this.vbInts=null}destroyVb(){this.vb&&(this.vb.destroy(),this.vb=null)}render(t){const e=t.plugins.tilemap,i=e.getShader();t.batch.setObjectRenderer(e),this._globalMat=i.uniforms.projTransMatrix,t.globalUniforms.uniforms.projectionMatrix.copyTo(this._globalMat).append(this.worldTransform),i.uniforms.shadowColor=this.shadowColor,i.uniforms.animationFrame=this.tileAnim||e.tileAnim,this.renderWebGLCore(t,e)}renderWebGLCore(t,e){const i=this.pointsBuf;if(0===i.length)return;const r=i.length/Nm,n=e.getShader(),o=this.tileset;if(0===o.length)return;e.bindTileTextures(t,o),t.shader.bind(n,!1);let a=this.vb;a||(a=e.createVb(),this.vb=a,this.vbId=a.id,this.vbBuffer=null,this.modificationMarker=0),e.checkIndexBuffer(r,a);const s=Mm.TEXTILE_UNITS,p=a.getBuffer("aVertexPosition"),l=r*a.vertPerQuad;if(0!==l){if(this.modificationMarker!==l){this.modificationMarker=l;const t=a.stride*l;if(!this.vbBuffer||this.vbBuffer.byteLength<t){let e=a.stride;for(;e<t;)e*=2;this.vbBuffer=new ArrayBuffer(e),this.vbArray=new Float32Array(this.vbBuffer),this.vbInts=new Uint32Array(this.vbBuffer),p.update(this.vbBuffer)}const e=this.vbArray;let r=0,n=0,o=this.offsetX,m=this.offsetY;for(let t=0;t<i.length;t+=Nm){const a=.5;if(this.compositeParent){const e=i[t+Fm.TEXTURE_INDEX];s>1?(n=e>>2,o=this.offsetX*(1&e),m=this.offsetY*(e>>1&1)):(n=e,o=0,m=0)}const p=i[t+Fm.X],l=i[t+Fm.Y],y=i[t+Fm.TILE_WIDTH],h=i[t+Fm.TILE_HEIGHT],u=i[t+Fm.U]+o,E=i[t+Fm.V]+m;let c=i[t+Fm.ROTATE];const d=i[t+Fm.ANIM_X],f=i[t+Fm.ANIM_Y],_=d+2048*(i[t+Fm.ANIM_COUNT_X]||1024),v=f+2048*(i[t+Fm.ANIM_COUNT_Y]||1024),g=i[t+Fm.ANIM_DIVISOR],T=i[t+Fm.ALPHA];let b,x,S,R,I,A,M,C;if(0===c)b=u,x=E,S=u+y,R=E,I=u+y,A=E+h,M=u,C=E+h;else{let t=y/2,e=h/2;c%4!=0&&(t=h/2,e=y/2);const i=u+t,r=E+e;c=Pe.add(c,Pe.NW),b=i+t*Pe.uX(c),x=r+e*Pe.uY(c),c=Pe.add(c,2),S=i+t*Pe.uX(c),R=r+e*Pe.uY(c),c=Pe.add(c,2),I=i+t*Pe.uX(c),A=r+e*Pe.uY(c),c=Pe.add(c,2),M=i+t*Pe.uX(c),C=r+e*Pe.uY(c)}e[r++]=p,e[r++]=l,e[r++]=b,e[r++]=x,e[r++]=u+a,e[r++]=E+a,e[r++]=u+y-a,e[r++]=E+h-a,e[r++]=_,e[r++]=v,e[r++]=n,e[r++]=g,e[r++]=T,e[r++]=p+y,e[r++]=l,e[r++]=S,e[r++]=R,e[r++]=u+a,e[r++]=E+a,e[r++]=u+y-a,e[r++]=E+h-a,e[r++]=_,e[r++]=v,e[r++]=n,e[r++]=g,e[r++]=T,e[r++]=p+y,e[r++]=l+h,e[r++]=I,e[r++]=A,e[r++]=u+a,e[r++]=E+a,e[r++]=u+y-a,e[r++]=E+h-a,e[r++]=_,e[r++]=v,e[r++]=n,e[r++]=g,e[r++]=T,e[r++]=p,e[r++]=l+h,e[r++]=M,e[r++]=C,e[r++]=u+a,e[r++]=E+a,e[r++]=u+y-a,e[r++]=E+h-a,e[r++]=_,e[r++]=v,e[r++]=n,e[r++]=g,e[r++]=T}p.update(e)}t.geometry.bind(a,n),t.geometry.draw(it.TRIANGLES,6*r,0)}}isModified(t){return!!(this.modificationMarker!==this.pointsBuf.length||t&&this.hasAnimatedTile)}clearModify(){this.modificationMarker=this.pointsBuf.length}_calculateBounds(){const{minX:t,minY:e,maxX:i,maxY:r}=this.tilemapBounds;this._bounds.addFrame(this.transform,t,e,i,r)}getLocalBounds(t){return 0===this.children.length?this.tilemapBounds.getRectangle(t):super.getLocalBounds.call(this,t)}destroy(t){super.destroy(t),this.destroyVb()}addFrame(t,e,i,r,n){return this.tile(t,e,i,{animX:r,animY:n}),!0}addRect(t,e,i,r,n,o,a,s=0,p=0,l=0,m=1024,y=1024,h=1,u=1){return this.tile(t,r,n,{u:e,v:i,tileWidth:o,tileHeight:a,animX:s,animY:p,rotate:l,animCountX:m,animCountY:y,animDivisor:h,alpha:u})}}class wm extends pi{__init(){this.tileAnim=null}__init2(){this.lastModifiedTilemap=null}__init3(){this.modificationMarker=0}__init4(){this.shadowColor=new Float32Array([0,0,0,.5])}__init5(){this._globalMat=null}constructor(t){super(),wm.prototype.__init.call(this),wm.prototype.__init2.call(this),wm.prototype.__init3.call(this),wm.prototype.__init4.call(this),wm.prototype.__init5.call(this),wm.prototype.__init6.call(this),this.tileset(t),this.texturesPerTilemap=Mm.TEXTURES_PER_TILEMAP}tileset(t){t||(t=[]);const e=this.texturesPerTilemap,i=this.children.length,r=Math.ceil(t.length/e);for(let n=0;n<Math.min(i,r);n++)this.children[n].setTileset(t.slice(n*e,(n+1)*e));for(let n=i;n<r;n++){const i=new Om(t.slice(n*e,(n+1)*e));i.compositeParent=!0,i.offsetX=Mm.TEXTILE_DIMEN,i.offsetY=Mm.TEXTILE_DIMEN,this.addChild(i)}return this}clear(){for(let t=0;t<this.children.length;t++)this.children[t].clear();return this.modificationMarker=0,this}tileRotate(t){return this.lastModifiedTilemap&&this.lastModifiedTilemap.tileRotate(t),this}tileAnimX(t,e){return this.lastModifiedTilemap&&this.lastModifiedTilemap.tileAnimX(t,e),this}tileAnimY(t,e){return this.lastModifiedTilemap&&this.lastModifiedTilemap.tileAnimY(t,e),this}tileAnimDivisor(t){return this.lastModifiedTilemap&&this.lastModifiedTilemap.tileAnimDivisor(t),this}tile(t,e,i,r={}){let n=null;const o=this.children;if(this.lastModifiedTilemap=null,"number"==typeof t){let a=0;if(n=o[t/this.texturesPerTilemap>>0],n)a=t%this.texturesPerTilemap;else{if(n=o[0],!n)return this;a=0}n.tile(a,e,i,r)}else{"string"==typeof t&&(t=ji.from(t));for(let e=0;e<o.length;e++){const i=o[e],r=i.getTileset();for(let e=0;e<r.length;e++)if(r[e]===t.baseTexture){n=i;break}if(n)break}if(!n){for(let e=o.length-1;e>=0;e--){const i=o[e];if(i.getTileset().length<this.texturesPerTilemap){n=i,i.getTileset().push(t.baseTexture);break}}n||(n=new Om(t.baseTexture),n.compositeParent=!0,n.offsetX=Mm.TEXTILE_DIMEN,n.offsetY=Mm.TEXTILE_DIMEN,this.addChild(n))}n.tile(t,e,i,r)}return this.lastModifiedTilemap=n,this}renderCanvas(t){if(!this.visible||this.worldAlpha<=0||!this.renderable)return;const e=Am.getInstance(t);if(e&&!e.dontUseTransform){const e=this.worldTransform;t.context.setTransform(e.a,e.b,e.c,e.d,e.tx*t.resolution,e.ty*t.resolution)}const i=this.children;for(let e=0;e<i.length;e++){const r=i[e];r.tileAnim=this.tileAnim,r.renderCanvasCore(t)}}render(t){if(!this.visible||this.worldAlpha<=0||!this.renderable)return;const e=t.plugins.tilemap,i=e.getShader();t.batch.setObjectRenderer(e),this._globalMat=i.uniforms.projTransMatrix,t.globalUniforms.uniforms.projectionMatrix.copyTo(this._globalMat).append(this.worldTransform),i.uniforms.shadowColor=this.shadowColor,i.uniforms.animationFrame=this.tileAnim||e.tileAnim,t.shader.bind(i,!1);const r=this.children;for(let i=0;i<r.length;i++)r[i].renderWebGLCore(t,e)}isModified(t){const e=this.children;if(this.modificationMarker!==e.length)return!0;for(let i=0;i<e.length;i++)if(e[i].isModified(t))return!0;return!1}clearModify(){const t=this.children;this.modificationMarker=t.length;for(let e=0;e<t.length;e++)t[e].clearModify()}addFrame(t,e,i,r,n,o,a,s,p){return this.tile(t,e,i,{animX:r,animY:n,animCountX:o,animCountY:a,animDivisor:s,alpha:p})}addRect(t,e,i,r,n,o,a,s,p,l,m,y){const h=t/this.texturesPerTilemap>>0,u=t%this.texturesPerTilemap;return this.children[h]&&this.children[h].getTileset()?(this.lastModifiedTilemap=this.children[h],this.lastModifiedTilemap.addRect(u,e,i,r,n,o,a,s,p,l,m,y)):this.lastModifiedTilemap=null,this}__init6(){this.setBitmaps=this.tileset}get texPerChild(){return this.texturesPerTilemap}}class Pm extends xi{__init(){this.baseTexture=null}__init2(){this._clearBuffer=null}constructor(t=Mm){super(2*t.TEXTILE_DIMEN,t.TEXTILE_DIMEN*Math.ceil(t.TEXTILE_UNITS/2)),Pm.prototype.__init.call(this),Pm.prototype.__init2.call(this);const e=this.tiles=new Array(t.TEXTILE_UNITS);this.doClear=!!t.DO_CLEAR,this.tileDimen=t.TEXTILE_DIMEN;for(let i=0;i<t.TEXTILE_UNITS;i++)e[i]={dirtyId:0,x:t.TEXTILE_DIMEN*(1&i),y:t.TEXTILE_DIMEN*(i>>1),baseTexture:ji.WHITE.baseTexture}}tile(t,e){const i=this.tiles[t];i.baseTexture!==e&&(i.baseTexture=e,this.baseTexture.update(),this.tiles[t].dirtyId=this.baseTexture.dirtyId)}bind(t){if(this.baseTexture)throw new Error("Only one baseTexture is allowed for this resource!");this.baseTexture=t,super.bind(t)}upload(t,e,i){const{gl:r}=t,{width:n,height:o}=this;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,void 0===e.alphaMode||e.alphaMode===mt.UNPACK),i.dirtyId<0&&(i.width=n,i.height=o,r.texImage2D(e.target,0,e.format,n,o,0,e.format,e.type,null));const a=this.doClear,s=this.tiles;a&&!this._clearBuffer&&(this._clearBuffer=new Uint8Array(Mm.TEXTILE_DIMEN*Mm.TEXTILE_DIMEN*4));for(let t=0;t<s.length;t++){const n=s[t],o=n.baseTexture;if(i.dirtyId>=this.tiles[t].dirtyId)continue;const p=o.resource;o.valid&&p&&p.source&&(a&&(o.width<this.tileDimen||o.height<this.tileDimen)&&r.texSubImage2D(e.target,0,n.x,n.y,this.tileDimen,this.tileDimen,e.format,e.type,this._clearBuffer),r.texSubImage2D(e.target,0,n.x,n.y,e.format,e.type,p.source))}return!0}}class Gm extends kr{__init(){this.maxTextures=0}constructor(t){super(new Br("#version 100\nprecision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aFrame;\nattribute vec2 aAnim;\nattribute float aAnimDivisor;\nattribute float aTextureId;\nattribute float aAlpha;\n\nuniform mat3 projTransMatrix;\nuniform vec2 animationFrame;\n\nvarying vec2 vTextureCoord;\nvarying float vTextureId;\nvarying vec4 vFrame;\nvarying float vAlpha;\n\nvoid main(void)\n{\n   gl_Position = vec4((projTransMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vec2 animCount = floor((aAnim + 0.5) / 2048.0);\n   vec2 animFrameOffset = aAnim - animCount * 2048.0;\n   vec2 currentFrame = floor(animationFrame / aAnimDivisor);\n   vec2 animOffset = animFrameOffset * floor(mod(currentFrame + 0.5, animCount));\n\n   vTextureCoord = aTextureCoord + animOffset;\n   vFrame = aFrame + vec4(animOffset, animOffset);\n   vTextureId = aTextureId;\n   vAlpha = aAlpha;\n}\n",function(t,e){return"#version 100\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\nvarying vec4 vFrame;\nvarying float vTextureId;\nvarying float vAlpha;\nuniform vec4 shadowColor;\nuniform sampler2D uSamplers[%count%];\nuniform vec2 uSamplerSize[%count%];\n\nvoid main(void)\n{\n   vec2 textureCoord = clamp(vTextureCoord, vFrame.xy, vFrame.zw);\n   float textureId = floor(vTextureId + 0.5);\n\n   vec4 color;\n   %forloop%\n   gl_FragColor = color * vAlpha;\n}\n".replace(/%count%/gi,`${t}`).replace(/%forloop%/gi,function(t){let e="";e+="\n",e+="\n",e+="if(vTextureId <= -1.0) {",e+="\n\tcolor = shadowColor;",e+="\n}";for(let i=0;i<t;i++)e+="\nelse ",i<t-1&&(e+=`if(textureId == ${i}.0)`),e+="\n{",e+=`\n\tcolor = texture2D(uSamplers[${i}], textureCoord * uSamplerSize[${i}]);`,e+="\n}";return e+="\n",e+="\n",e}(t))}(t)),{animationFrame:new Float32Array(2),uSamplers:[],uSamplerSize:[],projTransMatrix:new Ie}),Gm.prototype.__init.call(this),this.maxTextures=t,function(t,e){const i=[];for(let t=0;t<e;t++)i[t]=t;t.uniforms.uSamplers=i;const r=[];for(let t=0;t<e;t++)r.push(1/2048),r.push(1/2048);t.uniforms.uSamplerSize=r}(this,this.maxTextures)}}class Dm extends $i{__init2(){this.vertSize=13}__init3(){this.vertPerQuad=4}__init4(){this.stride=4*this.vertSize}__init5(){this.lastTimeAccess=0}constructor(){super(),Dm.prototype.__init2.call(this),Dm.prototype.__init3.call(this),Dm.prototype.__init4.call(this),Dm.prototype.__init5.call(this);const t=this.buf=new qi(new Float32Array(2),!0,!1);this.addAttribute("aVertexPosition",t,0,!1,0,this.stride,0).addAttribute("aTextureCoord",t,0,!1,0,this.stride,8).addAttribute("aFrame",t,0,!1,0,this.stride,16).addAttribute("aAnim",t,0,!1,0,this.stride,32).addAttribute("aTextureId",t,0,!1,0,this.stride,40).addAttribute("aAnimDivisor",t,0,!1,0,this.stride,44).addAttribute("aAlpha",t,0,!1,0,this.stride,48)}}class Lm extends pr{__init(){this.tileAnim=[0,0]}__init2(){this.ibLen=0}__init3(){this.indexBuffer=null}__init4(){this.textiles=[]}constructor(t){super(t),Lm.prototype.__init.call(this),Lm.prototype.__init2.call(this),Lm.prototype.__init3.call(this),Lm.prototype.__init4.call(this),this.shader=new Gm(Mm.TEXTURES_PER_TILEMAP),this.indexBuffer=new qi(void 0,!0,!0),this.checkIndexBuffer(2e3),this.makeTextiles()}bindTileTextures(t,e){const i=e.length,r=this.shader,n=Mm.TEXTURES_PER_TILEMAP,o=r.uniforms.uSamplerSize;if(!(i>Mm.TEXTILE_UNITS*n)){if(Mm.TEXTILE_UNITS<=1)for(let i=0;i<e.length;i++){const r=e[i];if(!r||!r.valid)return;t.texture.bind(e[i],i),o[2*i]=1/e[i].realWidth,o[2*i+1]=1/e[i].realHeight}else{this.makeTextiles();const r=Math.ceil(i/Mm.TEXTILE_UNITS);for(let t=0;t<i;t++){const i=e[t];if(i&&i.valid){const e=Math.floor(t/Mm.TEXTILE_UNITS),r=t%Mm.TEXTILE_UNITS;this.textiles[e].tile(r,i)}}for(let e=0;e<r;e++)t.texture.bind(this.textiles[e].baseTexture,e),o[2*e]=1/this.textiles[e].width,o[2*e+1]=1/this.textiles[e].baseTexture.height}r.uniforms.uSamplerSize=o}}start(){}createVb(){const t=new Dm;return t.addIndex(this.indexBuffer),t.lastTimeAccess=Date.now(),t}getShader(){return this.shader}destroy(){super.destroy(),this.shader=null}checkIndexBuffer(t,e=null){const i=6*t;i<=this.ibLen||(this.ibLen=i,this.indexBuffer.update(Qt(t,Mm.use32bitIndex?new Uint32Array(6*t):void 0)))}makeTextiles(){if(!(Mm.TEXTILE_UNITS<=1))for(let t=0;t<Mm.TEXTILE_UNITS;t++){if(this.textiles[t])continue;const e=new Pm,i=new Ii(e);i.scaleMode=Mm.TEXTILE_SCALE_MODE,i.wrapMode=pt.CLAMP,this.textiles[t]=e}}}vn.registerPlugin("tilemap",Lm);var Um,Bm,km=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Hm=function(t){function e(){var e=t.call(this,{tileset:new Map,matrix:{width:0,height:0,spaces:[]},transform:{}})||this;e.layout={width:0,height:0};var i=e.addContainer(),r=new wm;i.addChild(r);var n=function(){var t,n,o=e.props.matrix.value,a=e.props.transform.value,s=e.props.tileset.value;if(r.clear(),null!=o&&0!=s.size){var p=s.values().next().value,l=p.width,m=p.height,y=o.spaces,h=o.width,u=o.height,E=a.dx,c=void 0===E?l:E,d=a.dy,f=void 0===d?m:d,_=a.anchor,v=void 0===_?0:_,g=a.scale,T=void 0===g?1:g,b=a.alpha,x=void 0===b?1:b,S="number"==typeof T?[T,T]:[T.x,T.y],R=S[0],I=S[1];i.scale.set(R,I);var A="number"==typeof v?[v,v]:[v.x,v.y],M=A[0],C=A[1];M=(t=[l*M,m*C])[0],C=t[1],c=(n=[c/R,f/I])[0],f=n[1];for(var F=0;F<u;++F)for(var N=0;N<h;++N){var O=y[N+F*h],w=s.get(O);null!=w&&r.tile(w,N*c-M,F*f-C,{tileWidth:l,tileHeight:m,alpha:x})}}};return e.props.matrix.onUpdate(n),e.props.transform.onUpdate(n),e.props.tileset.onUpdate(n),e}return km(e,t),e}(mm),Xm=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),jm=function(t){function e(e,i){void 0===i&&(i=!0);var r=t.call(this,e)||this;return r.animate=i,r}return Xm(e,t),Object.defineProperty(e.prototype,"texture",{get:function(){var t=this;if(null!=this.mTexture)return this.mTexture;var e=Wi.create({width:this.layout.width,height:this.layout.height}),i=window.bgCanvas.app.renderer,r=function(){i.render(t.ui,{renderTexture:e}),t.animate&&window.requestAnimationFrame(r)};return window.requestAnimationFrame(r),this.mTexture=e,this.mTexture},enumerable:!1,configurable:!0}),e}(mm),Wm=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Vm=function(t){function e(){var e=t.call(this,{},!1)||this;e.layout={width:40,height:40,border:1.5};var i=e.layout,r=i.width,n=i.height,o=i.border,a=r-2*o;return e.addGraphics().beginFill(4933723).drawRect(0,0,r,n).beginFill(657930).drawRect(o,o,a,a),e}return Wm(e,t),Object.defineProperty(e,"V",{get:function(){return this.v||(this.v=(new e).texture)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"V52",{get:function(){if(null==this.v52){var t=new e;t.ui.alpha=.52,this.v52=t.texture}return this.v52},enumerable:!1,configurable:!0}),e}(jm),Ym=function(){function t(){}return t.Space={overlay:{normal:im.fromRgb01([.81,.89,.15]),special:im.fromRgb01([.86,.59,.15]),invalid:im.fromRgb01([.78,.78,.78])},flash:{primary:im.WHITE,secondary:im.fromRgb01([1,1,.6])}},t.GamePlay={bg:{primary:im.fromRgb255([74,43,207]),secondary:im.fromRgb255([69,72,58])}},t.Player1={primary:im.fromHex(15661312),secondary:im.fromHex(16754948),fire:{center:im.fromHex(16711173),primary:im.fromRgb01([1,.9,0]),secondary:im.fromRgb01([.97,.72,.02])},spCutIn:{fg:{primary:im.fromHex(11922991),secondary:im.fromHex(15400762)},bg:im.fromHex(9951308),ink:im.fromHex(15269834),img:im.fromHex(15335218)},szMeter:{bg:im.fromHex(9871176),fg:im.fromHex(15138410)}},t.Player2={primary:im.fromHex(4741887),secondary:im.fromHex(650495),fire:{center:im.fromHex(16579836),primary:im.fromRgb255([240,255,252]),secondary:im.fromRgb255([170,251,255])},spCutIn:{fg:{primary:im.fromHex(4666054),secondary:im.fromHex(6241023)},bg:im.fromHex(5777315),ink:im.fromHex(11897085),img:im.fromHex(5247487)},szMeter:{bg:im.fromHex(2955395),fg:im.fromHex(8541693)}},t}(),zm=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),qm=function(t){function e(e){var i=t.call(this,e)||this;i.layout={width:104,height:104,center:{x:52,y:68,r:15}};var r=i.addShader("uniform sampler2D uAlphaSampler;\r\nuniform sampler2D uFlameSampler;\r\nuniform sampler2D uDistortionSampler;\r\n\r\nuniform vec3 uColorPrimary;\r\nuniform vec3 uColorSecondary;\r\n\r\nfloat clamp01(float x) {\r\n    return clamp(x, 0.0, 1.0);\r\n}\r\n\r\nvoid main() {\r\n  const float b1 = 0.1;\r\n  const float b2 = 0.5;\r\n\r\n  const float speed = 0.1;\r\n\r\n  vec2 t2 = vVertexPosition + iTime * speed * vec2(0.07, 1.0);\r\n  vec2 t1 = vVertexPosition;\r\n  vec2 t0 = vVertexPosition + 7.0 * iTime * speed * vec2(0.0, 1.0);\r\n\r\n  vec4 v2 = texture2D(uDistortionSampler, t2);\r\n  vec2 pos = v2.xy * 0.1;\r\n  vec4 v1 = texture2D(uFlameSampler, pos + t1);\r\n  vec4 v0 = texture2D(uAlphaSampler, pos + t0);\r\n\r\n  float e1 = clamp01(v0.w + v1.w - 1.0);\r\n  float e2 = clamp01(v1.x + e1);\r\n  float e3 = clamp01(e2 - 0.4);\r\n  float a = clamp01(b1 * 10.0 * e3);\r\n\r\n  vec3 color = mix(uColorSecondary, uColorPrimary, a);\r\n  float alpha = clamp01(6.0 * e3 * b2);\r\n\r\n  gl_FragColor = vec4(color * alpha, alpha);\r\n}",{uColorPrimary:im.BLACK.rgb01,uColorSecondary:im.BLACK.rgb01,uAlphaSampler:ji.from("assets/SpFire_00.png",{wrapMode:pt.REPEAT}),uFlameSampler:ji.from("assets/SpFire_01.png",{wrapMode:pt.REPEAT}),uDistortionSampler:ji.from("assets/SpFire_02.png",{wrapMode:pt.REPEAT})}),n=i.layout,o=n.width,a=n.height,s=n.center,p=s.x,l=s.y,m=s.r;i.addSprite({width:o,height:a,filters:[r]});var y=i.addSprite({anchor:.5,x:p,y:l,width:2*m,height:2*m,texture:ji.from("assets/circle.png")});return i.props.primary.onUpdate((function(t){return r.uniforms.uColorPrimary=t.rgb01})),i.props.secondary.onUpdate((function(t){return r.uniforms.uColorSecondary=t.rgb01})),i.props.center.onUpdate((function(t){return y.tint=t.i32})),i}return zm(e,t),Object.defineProperty(e,"P1",{get:function(){return this.p1||(this.p1=new e(Ym.Player1.fire).texture)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"P2",{get:function(){return this.p2||(this.p2=new e(Ym.Player2.fire).texture)},enumerable:!1,configurable:!0}),e}(jm),Km=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Zm=function(t){function e(e){var i=t.call(this,e)||this;i.layout={width:40,height:40};var r=i.addShader("uniform sampler2D uPatternSampler;\r\n\r\nuniform vec3 uColorPrimary;\r\nuniform vec3 uColorSecondary;\r\n\r\nuniform float uValue;\r\nuniform float uScale;\r\nuniform float uAngle;\r\nuniform float uAngleV;\r\n\r\nvoid main() {\r\n  float speed = 0.2;\r\n  vec2 dir = vec2(1.0, 0) * rotate2D(uAngleV);\r\n  vec2 xy = (vVertexPosition.xy + dir * iTime * speed) * \r\n            rotate2D(uAngle) * \r\n            inversesqrt(2.0) * uScale;\r\n  vec4 guide = texture2D(uPatternSampler, xy);\r\n  vec3 color = mix(uColorSecondary, uColorPrimary, uValue);\r\n  gl_FragColor = vec4(color * guide.x, guide.a);\r\n}",{uValue:0,uScale:0,uAngle:0,uAngleV:0,uColorPrimary:im.BLACK.rgb01,uColorSecondary:im.BLACK.rgb01,uPatternSampler:ji.WHITE}),n=i.layout,o=n.width,a=n.height;return i.addSprite({width:o,height:a,filters:[r]}),i.props.value.onUpdate((function(t){return r.uniforms.uValue=t})),i.props.scale.onUpdate((function(t){return r.uniforms.uScale=t})),i.props.angle.onUpdate((function(t){return r.uniforms.uAngle=t})),i.props.angleV.onUpdate((function(t){return r.uniforms.uAngleV=t})),i.props.primary.onUpdate((function(t){return r.uniforms.uColorPrimary=t.rgb01})),i.props.secondary.onUpdate((function(t){return r.uniforms.uColorSecondary=t.rgb01})),i.props.file.onUpdate((function(t){return r.uniforms.uPatternSampler=ji.from(t,{wrapMode:pt.REPEAT})})),i}return Km(e,t),e.normal=function(){return new e({value:1,scale:.8,angle:45,angleV:-90,primary:Ym.Space.overlay.normal,secondary:Ym.Space.overlay.invalid,file:"assets/guide_stride.png"})},e.special=function(){return new e({value:1,scale:5,angle:-75,angleV:-150,primary:Ym.Space.overlay.special,secondary:Ym.Space.overlay.invalid,file:"assets/guide_dot.png"})},e}(jm),Qm=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Jm=function(t,e,i,r){return new(i||(i=Promise))((function(n,o){function a(t){try{p(r.next(t))}catch(t){o(t)}}function s(t){try{p(r.throw(t))}catch(t){o(t)}}function p(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}p((r=r.apply(t,e||[])).next())}))},$m=function(t,e){var i,r,n,o,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,r&&(n=2&o[0]?r.return:o[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,o[1])).done)return n;switch(r=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((n=(n=a.trys).length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){a.label=o[1];break}if(6===o[0]&&a.label<n[1]){a.label=n[1],n=o;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(o);break}n[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{i=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},ty=function(t){function e(){var e=t.call(this,{input:null})||this;e.nrmOverlay=Zm.normal(),e.spOverlay=Zm.special(),e.lock=!1,e.onPlayerInputFn=function(){},e.layout={width:20,height:27,w1:40};var i=e.layout.w1;return e.root=e.addContainer(),e.root.scale.set(1/i),e.hitbox=e.addSprite({parent:e.root}),e.hitbox.interactive=!0,e.bg=e.addComponent(new Hm,{parent:e.root}),e.bg.update({tileset:new Map([[0,Vm.V],[1,ji.from("assets/player1_trivial_space.png")],[2,ji.from("assets/player1_special_space.png")],[-1,ji.from("assets/player2_trivial_space.png")],[-2,ji.from("assets/player2_special_space.png")],[3,ji.from("assets/neutral_space.png")]]),transform:{anchor:.5}}),e.spFire=e.addComponent(new Hm,{parent:e.root,y:-16}),e.spFire.update({tileset:new Map([[2,qm.P1],[-2,qm.P2]]),transform:{anchor:.5,dx:i,dy:i}}),e.overlay=e.addComponent(new Hm,{parent:e.root}),e.overlay.update({tileset:new Map([[1,e.nrmOverlay.texture],[2,e.spOverlay.texture]]),transform:{anchor:.5}}),e.flash=e.addComponent(new Hm,{parent:e.root}),e.flash.update({tileset:new Map([[!0,ji.from("assets/Decide.png")]]),transform:{anchor:.5,dx:i,dy:i}}),e.flashAnimation=e.addAnimation({time:.2,keyframe:function(t){var i=rm.LINEAR.interpolate(1,1.5,t),r=.5*rm.EASE_IN_OUT_SINE.apply(1-Math.abs(2*t-1));e.flash.update({transform:Object.assign({},e.flash.props.transform.value,{scale:i,alpha:r})})}}),e.onSpaceEvent("pointermove",(function(t){e.lock||null==e.props.input.value||e.update({input:Object.assign({},e.props.input.value,{pointer:t})})})),e.onSpaceEvent("pointertap",(function(t){return Jm(e,void 0,void 0,(function(){var e;return $m(this,(function(i){switch(i.label){case 0:return null==this.props.input.value||null==(e=this.uiUpdateInput(Object.assign({},this.props.input.value,{pointer:t})))?[2]:(this.send("player.input",e),this.lock=!0,this.flash.update({matrix:{spaces:this.selection.map((function(t){return 0!=t})),width:this.board.width,height:this.board.height}}),[4,this.flashAnimation.play()]);case 1:return i.sent(),this.lock=!1,this.send("player.input",e),[2]}}))}))})),e.props.input.onUpdate((function(t){return e.uiUpdateInput(t)})),e}return Qm(e,t),e.prototype.onSpaceEvent=function(t,e){var i=this;this.hitbox.on(t,(function(t){var r;if(null!=t.target){var n=i.hitbox.vertexData,o=t.data.global,a=o.x,s=o.y;a=(r=[a-n[0],s-n[1]])[0],s=r[1];var p=[n[2]-n[0],n[3]-n[1]],l=p[0],m=p[1],y=[n[6]-n[0],n[7]-n[1]],h=y[0],u=y[1],E=h*m-l*u,c=(h*s-a*u)/E,d=(a*m-l*s)/E;c=Math.min(1,Math.max(0,c)),d=Math.min(1,Math.max(0,d));var f=i.board,_=f.width,v=f.height;a=Math.floor(c*_),s=Math.floor(d*v),e({x:a,y:s},t)}}))},e.prototype.uiReset=function(t){this.board=t;var e=this.board,i=e.width,r=e.height,n=(this.layout.width-i)/2,o=(this.layout.height-r)/2;this.root.position.set(n+.5,o+.5);var a=this.layout.w1;this.hitbox.width=a*i,this.hitbox.height=a*r,this.bg.update({matrix:t}),this.uiUpdateFire()},e.prototype.uiUpdateFire=function(){for(var t=[],e=this.board,i=e.width,r=e.height,n=0;n<r;++n)for(var o=0;o<i;++o){var a={x:o,y:n};t.push(this.board.isCharged(a)?this.board.get(a):0)}this.spFire.update({matrix:{spaces:t,width:i,height:r}})},e.prototype.uiPlaceCards=function(t){return Jm(this,void 0,void 0,(function(){var e,i,r,n,o,a,s,p;return $m(this,(function(l){switch(l.label){case 0:for(console.assert(t.length<=2),2==t.length&&console.assert(t[0].turn==-t[1].turn),this.board=this.board.move(t),this.bg.update({matrix:this.board}),e=this.board,i=e.width,r=e.height,n=[],o=function(t){t.card.rotate(t.rotation).forEach((function(e,r){e+=t.position.x,r+=t.position.y,n[e+r*i]=!0}))},a=0,s=t;a<s.length;a++)p=s[a],o(p);return this.flash.update({matrix:{spaces:n,width:i,height:r}}),[4,this.flashAnimation.play()];case 1:return l.sent(),[2]}}))}))},e.prototype.onPlayerInput=function(t){this.onPlayerInputFn=t},e.prototype.uiUpdateInput=function(t){var e=this;if(null==this.board)return null;this.selection=[];var i=this.board,r=i.width,n=i.height;if(this.overlay.update({matrix:{spaces:this.selection.slice(),width:r,height:n}}),null==t)return null;var o=t.card,a=t.rotation,s=t.pointer,p=t.isSpecialAttack;if(null==o||null==a||null==s||null==p)return null;var l=this.getAdjustedCardPosition(o,a,s),m={turn:1,card:o,rotation:a,position:l},y=this.board.isValidMovement(p,m),h=y?1:0;return this.nrmOverlay.update({value:h}),this.spOverlay.update({value:h}),o.rotate(a).forEach((function(t,i,n){t+=l.x,i+=l.y,e.selection[t+r*i]=n})),this.overlay.update({matrix:{spaces:this.selection.slice(),width:r,height:n}}),this.onPlayerInputFn(m,y),m},e.prototype.getAdjustedCardPosition=function(t,e,i){var r=i.x-3,n=i.y-3;1!=e&&2!=e||(r-=1),2!=e&&3!=e||(n-=1);var o=t.rotate(e),a=[],s=[];o.forEach((function(t,e,i){a.push(r+t),s.push(n+e)}));var p=Math.min.apply(Math,a),l=Math.max.apply(Math,a),m=Math.min.apply(Math,s),y=Math.max.apply(Math,s);return p<0&&(r+=-p),m<0&&(n+=-m),l>=this.board.width&&(r-=l-this.board.width+1),y>=this.board.height&&(n-=y-this.board.height+1),{x:r,y:n}},e}(mm),ey=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),iy=function(t){function e(){var e=t.call(this,{card:Tm.fromId(1),turn:1,flat:!1})||this;e.layout={width:8,height:8};var i=e.addContainer();i.scale.set(1/40);var r=new Map([[0,Vm.V52],[1,ji.from("assets/player1_trivial_space.png")],[2,ji.from("assets/player1_special_space.png")],[-1,ji.from("assets/player2_trivial_space.png")],[-2,ji.from("assets/player2_special_space.png")]]),n=e.addComponent(new Hm,{parent:i});n.update({tileset:r});var o=function(){var t=e.props.card.value,i=e.props.turn.value,r=t.spaces.map((function(t){return t*i}));n.update({matrix:{spaces:r,width:8,height:8}})};return e.props.card.onUpdate(o),e.props.turn.onUpdate(o),e}return ey(e,t),e}(mm),ry=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ny=function(t){function e(){var e=t.call(this,{card:Tm.fromId(1),spFire:!1})||this;e.bg=new va,e.layout={width:153,height:196,radius:7,padding:9,boardScale:.934,bgColor:5197909,szMeter:{margin:6,radius:11,width:48,height:44},spMeter:{x:58,y:153,width:13,padding:1.5}},e.states={angle:nm.of(0),overlayAlpha:nm.of(0)};var i=e.layout,r=i.width,n=i.height,o=i.radius,a=i.padding,s=i.boardScale,p=i.bgColor,l=i.spMeter,m=i.szMeter;e.bg=e.addGraphics().beginFill(p).drawRoundedRect(0,0,r,n,o),e.bg.interactive=!0,e.castShadow(e.bg,{x:1,y:1,alpha:.3});var y=e.addSprite({x:0,y:a,width:r,height:n,tint:im.fromHex(11513775)}),h=e.addGraphics().beginFill(im.WHITE.i32).drawRoundedRect(0,0,r,n,o);h.alpha=0;var u=e.addComponent(new iy,{x:a,y:a,scale:{width:r-2*a,height:r-2*a}});u.update({flat:!0}),u.scale.y=s,e.addGraphics().beginFill(im.BLACK.i32).drawRoundedRect(m.margin,n-m.margin-m.height,m.width,m.height,m.radius);var E=e.addText({anchor:.5,x:m.margin+m.width/2,y:n-m.margin-m.height/2,style:{fill:15658734,fontFamily:"Splatoon"}}),c=e.addContainer({x:l.x,y:l.y}),d=l.width/40;c.scale.set(d);var f=40+l.padding/d,_=e.addComponent(new Hm,{parent:c});_.update({tileset:new Map([[!0,ji.from("assets/player1_special_space.png")]]),transform:{dx:f,dy:f}}),e.states.angle.onEase(.2,rm.LINEAR).onUpdate((function(t){e.angle=t})),e.states.overlayAlpha.onEase(.2,rm.LINEAR).onUpdate((function(t){h.alpha=t})),e.on("pointerover",(function(){e.states.angle.update(-2),e.states.overlayAlpha.update(.35)})),e.on("pointerout",(function(){e.states.angle.update(0),e.states.overlayAlpha.update(0)}));var v=function(){var t=e.props.card.value;e.props.spFire.value,y.texture=ji.from("assets/cards/".concat(t.meta.name,".png")),u.update({card:t}),E.text="".concat(t.meta.spaceCount),_.update({matrix:{spaces:Array(t.meta.specialCost).fill(!0),width:5,height:2}})};return e.props.card.onUpdate(v),e.props.spFire.onUpdate(v),e}return ry(e,t),e.prototype.on=function(t,e){this.bg.on(t,e)},e}(mm),oy=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ay=function(t,e,i,r){return new(i||(i=Promise))((function(n,o){function a(t){try{p(r.next(t))}catch(t){o(t)}}function s(t){try{p(r.throw(t))}catch(t){o(t)}}function p(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}p((r=r.apply(t,e||[])).next())}))},sy=function(t,e){var i,r,n,o,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,r&&(n=2&o[0]?r.return:o[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,o[1])).done)return n;switch(r=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((n=(n=a.trys).length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){a.label=o[1];break}if(6===o[0]&&a.label<n[1]){a.label=n[1],n=o;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(o);break}n[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{i=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},py=function(t){function e(){var e=t.call(this,{cards:null})||this;e.hoverCardId=-1,e.selectCardId=-1,e.layout={width:358,height:436,radius:10,card:{width:153,height:196}},e.addGraphics().beginFill(im.BLACK.i32).drawRoundedRect(0,0,e.layout.width,e.layout.height,e.layout.radius).alpha=.18;for(var i=(e.layout.width-2*e.layout.card.width)/3,r=(e.layout.height-2*e.layout.card.height)/3,n=[],o=0;o<2;++o)for(var a=function(t){var a=t+2*o,p=s.addContainer({x:(t+.5)*s.layout.card.width+(t+1)*i,y:(o+.5)*s.layout.card.height+(o+1)*r}),l=s.addComponent(new ny,{parent:p,anchor:.5,scale:{width:s.layout.card.width,height:s.layout.card.height}});l.on("pointerover",(function(t){e.onPointerOver(a)})),l.on("pointerout",(function(t){e.onPointerOut(a)})),l.on("pointertap",(function(t){e.onPointerTap(a)})),n.push(l)},s=this,p=0;p<2;++p)a(p);return e.onSelectCard(),e.props.cards.onUpdate((function(t){null!=t&&(console.assert(4==t.length),t.forEach((function(t,e){return n[e].update({card:t})})))})),e.drawCardFn=function(t,i){return ay(e,void 0,void 0,(function(){var e,r,o,a,s;return sy(this,(function(p){switch(p.label){case 0:return console.assert(0<=i&&i<4),(e=this.props.cards.value.slice())[i]=t,r=n[i],o=this.addAnimation((function(t){var e=rm.EASE_IN_CUBIC.apply(t);r.ui.alpha=1-e,r.ui.scale.set(rm.LINEAR.interpolate(1,.9,e)),r.position.y=0})),a=this.addAnimation((function(t){var e=rm.EASE_OUT_CUBIC.apply(t);r.ui.alpha=e,r.ui.scale.set(1),r.position.y=rm.LINEAR.interpolate(10,0,e)})),s=.3,[4,o.play(s)];case 1:return p.sent(),this.update({cards:e}),[4,a.play(s)];case 2:return p.sent(),[2]}}))}))},e}return oy(e,t),e.prototype.uiDrawCard=function(t,e){return ay(this,void 0,void 0,(function(){return sy(this,(function(i){switch(i.label){case 0:return[4,this.drawCardFn(t,e)];case 1:return i.sent(),[2]}}))}))},e.prototype.uiResetSelection=function(){this.uiUpdateHoverCardId(-1),this.uiUpdateSelectCardId(-1)},e.prototype.onSelectCard=function(t){this.selectCardCallBack=t||function(){}},e.prototype.onPointerOver=function(t){this.uiUpdateHoverCardId(t)},e.prototype.onPointerOut=function(t){this.uiUpdateHoverCardId(-1)},e.prototype.onPointerTap=function(t){this.uiUpdateSelectCardId(t),this.selectCardCallBack(t)},e.prototype.uiUpdateHoverCardId=function(t){this.hoverCardId!=t&&(this.hoverCardId=t)},e.prototype.uiUpdateSelectCardId=function(t){this.selectCardId!=t&&(this.selectCardId=t)},e}(mm),ly=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),my=function(t){function e(){var e=t.call(this,{card1:null,card2:null})||this;e.layout={width:1920,height:1080,cutin:{width:400,height:700,dx:28,dy:20,img:{width:365,height:512,dx:10,dy:8},p1:{x:880,y:700,ink1:{x:-4,y:-210,width:400,height:400,angle:60,img:"assets/Ink_02.png"},ink2:{x:110,y:194,width:200,height:200,angle:0,img:"assets/InkNormal_00.png"},img:{y0:100,y1:-50}},p2:{x:1320,y:260,ink1:{x:53,y:-211,width:200,height:200,angle:-120,img:"assets/InkNormal_00.png"},ink2:{x:17,y:228,width:400,height:400,angle:-120,img:"assets/Ink_02.png"},img:{y0:-100,y1:50}}}},e.anims=[];for(var i=e.layout.cutin,r=i.width,n=i.height,o=i.dx,a=i.dy,s=i.p1,p=i.p2,l=e.addContainer({y:18}),m=function(t,i,s){var p=y.addShader("uniform vec3 uColorFgPrimary;\r\nuniform vec3 uColorFgSecondary;\r\nuniform vec3 uColorBg;\r\n\r\nuniform sampler2D uPatternSampler;\r\n\r\nvoid main() {\r\n  float speed = 1.5;\r\n  vec2 du = normalize(vec2(-1.0, 0.3));\r\n\r\n  vec2 p1 = vVertexPosition * vec2(outputFrame.z / outputFrame.w, 1.0);\r\n  vec2 pos = (p1 + iTime * du * speed) * rotate2D(-20.0);\r\n  float a1 = sin(iTime * 8.0) * 0.5 + 0.5;\r\n  float a2 = texture2D(uPatternSampler, pos).x * 0.3;\r\n  vec3 fg = mix(uColorFgPrimary, uColorFgSecondary, a1);\r\n  vec3 color = mix(fg, uColorBg, a2);\r\n\r\n  float alpha = texture2D(uSampler, vTextureCoord).a;\r\n  gl_FragColor = vec4(color * alpha, alpha);\r\n}",{uColorFgPrimary:i.fg.primary.rgb01,uColorFgSecondary:i.fg.secondary.rgb01,uColorBg:i.bg.rgb01,uPatternSampler:ji.from("assets/thunder_pattern.png",{wrapMode:pt.REPEAT})}),m=y.addShader("uniform vec3 uColor;\r\n\r\nvoid main() {\r\n  float alpha = texture2D(uSampler, vTextureCoord).a;\r\n  gl_FragColor = vec4(vec3(uColor * alpha), alpha);\r\n}\r\n",{uColor:i.img.rgb01}),h=y.addContainer({parent:l,x:t.x,y:t.y}),u=y.addSprite({parent:h,x:-r/2+o,y:-n/2+a,width:r,height:n,texture:ji.from("assets/CutIn.png")});u.tint=2039583,u.alpha=.7,y.addSprite({parent:h,x:-r/2,y:-n/2,width:r,height:n,texture:ji.from("assets/CutIn.png"),filters:[p]});var E=function(t){var r=e.addContainer({parent:h,x:t.x,y:t.y}),n=e.addContainer({parent:r,angle:t.angle});return e.addSprite({parent:n,x:-t.width/2,y:-t.height/2,width:t.width,height:t.height,texture:ji.from(t.img)}).tint=i.ink.i32,r},c=E(t.ink1),d=E(t.ink2),f=y.layout.cutin.img,_=y.addContainer({parent:h}),v=y.addContainer({parent:_});v.scale.set(1.2);var g=y.addSprite({parent:v,x:-f.width/2+f.dx,y:-f.height/2+f.dy,width:f.width,height:f.height,filters:[m]}),T=y.addSprite({parent:v,x:-f.width/2,y:-f.height/2,width:f.width,height:f.height});s.onUpdate((function(t){null!=t?(h.visible=!0,g.texture=T.texture=ji.from("assets/cards/".concat(t.meta.name,".png"))):h.visible=!1}));var b=y.addAnimation((function(e){var r=rm.EASE_OUT_BACK.apply(e);h.scale.x=r,r=rm.LINEAR.apply(e),_.alpha=r,_.y=rm.LINEAR.interpolate(t.img.y0,0,r),T.tint=rm.LINEAR.interpolate(i.img,im.WHITE,r).i32})),x=y.addAnimation((function(t){c.scale.set(rm.EASE_OUT_BACK.apply(t))})),S=y.addAnimation((function(t){d.scale.set(rm.EASE_OUT_BACK.apply(t))})),R=y.addAnimation((function(e){var r=rm.EASE_IN_CUBIC.apply(e);h.scale.x=1-r,h.alpha=1-r,r=rm.LINEAR.apply(e),_.alpha=1-r,_.y=rm.LINEAR.interpolate(0,t.img.y1,r),T.tint=rm.LINEAR.interpolate(im.WHITE,i.img,r).i32})),I=function(t){return e.addAnimation({time:t}).play()};y.anims.push((function(){return t=e,i=void 0,n=function(){return function(t,e){var i,r,n,o,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,r&&(n=2&o[0]?r.return:o[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,o[1])).done)return n;switch(r=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((n=(n=a.trys).length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){a.label=o[1];break}if(6===o[0]&&a.label<n[1]){a.label=n[1],n=o;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(o);break}n[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{i=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(t){switch(t.label){case 0:return h.scale.x=0,h.alpha=1,c.scale.set(0),d.scale.set(0),_.alpha=0,[4,Promise.all([b.play(.2),I(.1).then((function(){return Promise.all([x.play(.1),I(.05).then((function(){return S.play(.1)}))])}))])];case 1:return t.sent(),[4,I(1)];case 2:return t.sent(),[4,R.play(.2)];case 3:return t.sent(),[2]}}))},new((r=void 0)||(r=Promise))((function(e,o){function a(t){try{p(n.next(t))}catch(t){o(t)}}function s(t){try{p(n.throw(t))}catch(t){o(t)}}function p(t){var i;t.done?e(t.value):(i=t.value,i instanceof r?i:new r((function(t){t(i)}))).then(a,s)}p((n=n.apply(t,i||[])).next())}));var t,i,r,n}))},y=this,h=0,u=[{p:s,c:Ym.Player1.spCutIn,card:e.props.card1},{p,c:Ym.Player2.spCutIn,card:e.props.card2}];h<u.length;h++){var E=u[h];m(E.p,E.c,E.card)}return e}return ly(e,t),e.prototype.uiPlay=function(t,e){return this.update({card1:t,card2:e}),Promise.all(this.anims.map((function(t){return t()})))},e}(mm),yy=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),hy=function(t,e,i,r){return new(i||(i=Promise))((function(n,o){function a(t){try{p(r.next(t))}catch(t){o(t)}}function s(t){try{p(r.throw(t))}catch(t){o(t)}}function p(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}p((r=r.apply(t,e||[])).next())}))},uy=function(t,e){var i,r,n,o,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,r&&(n=2&o[0]?r.return:o[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,o[1])).done)return n;switch(r=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((n=(n=a.trys).length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){a.label=o[1];break}if(6===o[0]&&a.label<n[1]){a.label=n[1],n=o;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(o);break}n[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{i=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Ey=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,Object.assign({},{bgTint:im.fromHex(16777215),bgAlpha:1},e))||this;return i.bg=i.addSprite({texture:ji.WHITE,zIndex:-1e5}),setTimeout((function(){i.bg.width=i.layout.width,i.bg.height=i.layout.height}),0),i.props.bgTint.onUpdate((function(t){return i.bg.tint=t.i32})),i.props.bgAlpha.onUpdate((function(t){return i.bg.alpha=t})),i}return yy(e,t),e.prototype.mount=function(t){var e=t.canvas;this.position.set(0),this.scaleToFit(e.layout.width,e.layout.height),e.addChild(this)},e.prototype.toggleVisibility=function(t){this.ui.visible=t},e.prototype.onScroll=function(t){},e.prototype.run=function(){return hy(this,void 0,void 0,(function(){return uy(this,(function(t){return[2]}))}))},e}(mm),cy=(function(){function t(){this.root=document.createElement("div"),this.root.classList.add("fill-parent")}t.prototype.mount=function(t){t.parent.appendChild(this.root)},t.prototype.toggleVisibility=function(t){t?this.root.classList.add("hidden"):this.root.classList.remove("hidden")},t.prototype.onScroll=function(t){},t.prototype.run=function(){return hy(this,void 0,void 0,(function(){return uy(this,(function(t){return[2]}))}))}}(),function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}()),dy=function(t,e,i,r){return new(i||(i=Promise))((function(n,o){function a(t){try{p(r.next(t))}catch(t){o(t)}}function s(t){try{p(r.throw(t))}catch(t){o(t)}}function p(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}p((r=r.apply(t,e||[])).next())}))},fy=function(t,e){var i,r,n,o,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,r&&(n=2&o[0]?r.return:o[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,o[1])).done)return n;switch(r=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((n=(n=a.trys).length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){a.label=o[1];break}if(6===o[0]&&a.label<n[1]){a.label=n[1],n=o;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(o);break}n[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{i=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},_y=function(t){function e(){var e=t.call(this,{color:im.WHITE,angle:0,value:0})||this;e.layout={width:0,height:0,inkbeat:{width:140,height:140}};var i=e.addSprite({anchor:.5,width:e.layout.inkbeat.width,height:e.layout.inkbeat.height,texture:ji.from("assets/InkBeatS_00.png")});e.castShadow(i,{x:2,y:2,alpha:.3});var r=e.addText({anchor:.5,style:{fontFamily:"Splatoon",fontSize:36}});e.castShadow(r,{x:1,y:1,alpha:.8});var n=function(){var t=e.props.color.value,n=e.props.value.value;n>=0?(i.tint=t.i32,r.style.fill=im.WHITE.i32,r.text="+".concat(n)):(i.tint=im.fromHex(13158600).i32,r.style.fill=im.fromHex(5000268).i32,r.text="".concat(n))};return e.props.value.onUpdate(n),e.props.angle.onUpdate(n),e.props.angle.onUpdate((function(t){return i.angle=t})),e.ui.alpha=0,e}return cy(e,t),e}(mm),vy=function(t){function e(){var e=t.call(this,{value1:0,value2:0,preview:!1,preview1:0,preview2:0})||this;e.layout={width:0,height:0,p1:{text:{x:10,y:94},inkbeat:{x:64,y:37,angle:-45},ink:{x:-18,y:80,width:360,scale:1,angle:-25,alpha:.8,img:"assets/Ink_04.png"}},p2:{text:{x:34,y:-94},inkbeat:{x:88,y:-151,angle:0},ink:{x:42,y:-120,width:360,scale:-1,angle:0,alpha:.8,img:"assets/Ink_02.png"}}};var i=-15*Math.PI/180,r=[{p:e.layout.p1,c:Ym.Player1},{p:e.layout.p2,c:Ym.Player2}].map((function(t){var r=t.p,n=t.c,o=r.ink,a=o.x,s=o.y,p=o.img,l=o.width,m=o.scale,y=o.angle,h=o.alpha;e.addSprite({anchor:.5,x:a,y:s,width:l,height:l,angle:y,scale:{x:m,y:1},tint:n.szMeter.bg,alpha:h,texture:ji.from(p)});var u=e.addContainer({x:r.text.x,y:r.text.y}),E=e.addText({parent:u,anchor:.5,style:{fill:n.szMeter.fg.i32,fontFamily:"Splatoon",fontSize:120}});return E.skew.set(i,0),e.castShadow(E,{x:4,y:3,alpha:.3}),E})),n=r[0],o=r[1],a=e.addContainer(),s=[{p:e.layout.p1,c:Ym.Player1},{p:e.layout.p2,c:Ym.Player2}].map((function(t){var r=t.p,n=t.c,o=e.addContainer({parent:a,x:r.text.x-25,y:r.text.y+85}),s={x:3,y:2,alpha:.5},p=e.addSprite({parent:o,anchor:.5,x:0,y:0,width:50,height:50,angle:180,tint:n.szMeter.fg,texture:ji.from("assets/MngArrow.png")});e.castShadow(p,s);var l=e.addText({parent:o,anchor:{x:0,y:.5},x:50,style:{fill:n.szMeter.fg.i32,fontFamily:"Splatoon",fontSize:50}});return l.skew.set(i,0),e.castShadow(l,s),l})),p=s[0],l=s[1],m=[{p:e.layout.p1,c:Ym.Player1},{p:e.layout.p2,c:Ym.Player2}].map((function(t){var i=t.p,r=t.c,n=i.inkbeat,o=n.x,a=n.y,s=n.angle,p=e.addComponent(new _y,{x:o,y:a});return p.update({color:r.primary,angle:s}),p})),y=m[0],h=m[1];return e.props.value1.onUpdate((function(t){return n.text="".concat(t)})),e.props.value2.onUpdate((function(t){return o.text="".concat(t)})),e.props.preview.onUpdate((function(t){return a.visible=t})),e.props.preview1.onUpdate((function(t){return p.text="".concat(t)})),e.props.preview2.onUpdate((function(t){return l.text="".concat(t)})),e.playFn=function(t,i){return dy(e,void 0,void 0,(function(){var e,r,a=this;return fy(this,(function(s){switch(s.label){case 0:return t=null!=t?t:this.props.value1.value,i=null!=i?i:this.props.value2.value,e=t-this.props.value1.value,r=i-this.props.value2.value,y.update({value:e}),h.update({value:r}),[4,Promise.all([y,h].map((function(t){return a.addAnimation((function(e){var i=rm.EASE_OUT_BACK.apply(e);t.scale.set(i),t.ui.alpha=1}))})).map((function(t){return t.play(.2)})))];case 1:return s.sent(),[4,this.addAnimation().play(.5)];case 2:return s.sent(),[4,Promise.all([y,h].map((function(t){return a.addAnimation((function(e){var i=1-rm.EASE_IN_CUBIC.apply(e);t.scale.set(i),t.ui.alpha=i}))})).map((function(t){return t.play(.2)})))];case 3:return s.sent(),this.update({value1:t,value2:i}),[4,Promise.all([n,o].map((function(t){return a.addAnimation((function(e){var i=rm.EASE_OUT_BACK.apply(e);t.scale.set(i)}))})).map((function(t){return t.play(.2)})))];case 4:return s.sent(),[2]}}))}))},e}return cy(e,t),e.prototype.uiUpdate=function(t,e){return dy(this,void 0,void 0,(function(){return fy(this,(function(i){switch(i.label){case 0:return[4,this.playFn(t,e)];case 1:return i.sent(),[2]}}))}))},e}(mm),gy=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ty=function(t){function e(){var e=t.call(this,{card:Tm.fromId(1),turn:1})||this;e.layout={width:344,height:480,bg:{width:330,height:462},frame:{width:308,height:445,radius:15,dxy:10},ink:{width:344,height:480},cardName:{x:0,y:-166},szMeter:{x:-124,y:192},spMeter:{x:-71,y:205,dx:48,dy:-55,width:42},grid:{x:88,y:155,width:320,height:320}};var i=e.layout,r=i.width,n=i.height,o=e.addContainer({x:r/2,y:n/2}),a=e.addSprite({parent:o}),s=e.addSprite({parent:a,anchor:.5,width:e.layout.bg.width,height:e.layout.bg.height});e.addSprite({parent:a,anchor:.5,width:e.layout.ink.width,height:e.layout.ink.height,tint:im.fromHex(14211288),texture:ji.from("assets/Ink_03.png")}),e.addSprite({parent:a,anchor:.5,width:r,height:n,texture:ji.from("assets/CardFrame_00.png")});var p=e.addSprite({parent:a,anchor:.5,width:r,height:n}),l=e.addText({parent:a,anchor:.5,x:e.layout.cardName.x,y:e.layout.cardName.y,style:{fill:im.BLACK.i32,fontFamily:"Splatoon",fontSize:32,strokeThickness:8}}),m=e.addText({parent:a,anchor:.5,x:e.layout.cardName.x,y:e.layout.cardName.y,style:{fill:im.WHITE.i32,fontFamily:"Splatoon",fontSize:32}}),y=e.addContainer({parent:a,x:e.layout.szMeter.x,y:e.layout.szMeter.y}),h=e.addSprite({parent:y,anchor:.5,width:64,height:64,angle:45}),u=e.addText({parent:y,anchor:.5,x:1,y:-2,style:{fill:im.BLACK.i32,fontFamily:"Splatoon",fontSize:28,strokeThickness:5}}),E=e.addText({parent:y,anchor:.5,x:1,y:-2,style:{fill:im.WHITE.i32,fontFamily:"Splatoon",fontSize:28}}),c=e.addContainer({parent:a,x:e.layout.spMeter.x,y:e.layout.spMeter.y});c.scale.set(.4);var d=e.addComponent(new Hm,{parent:c});d.update({tileset:new Map([[1,ji.from("assets/player1_special_space.png")],[-1,ji.from("assets/player2_special_space.png")]]),transform:{anchor:.5,dx:e.layout.spMeter.dx,dy:e.layout.spMeter.dy}});var f=e.addComponent(new iy,{parent:a,anchor:.5,x:e.layout.grid.x,y:e.layout.grid.y,scale:{width:.38*e.layout.grid.width,height:.38*e.layout.grid.width}});f.angle=7,f.update({flat:!1});var _=function(){var t=e.props.turn.value,i=e.props.card.value,r=i.meta,n=r.name,o=r.rarity,a=r.spaceCount,y=r.specialCost;l.text=m.text=n,p.texture=ji.from("assets/cards/".concat(n,".png")),f.update({card:i,turn:t});var c={Common:"Cmn",Rare:"Rre",Fresh:"Frh"}[o];s.texture=ji.from("assets/MngCardBG_".concat(c,"_00.png"));var _=["Common","Rare","Fresh"].indexOf(o);h.texture=ji.from("assets/CardCost_0".concat(_,".png")),d.update({matrix:{width:5,height:2,spaces:Array(y).fill(t)}}),u.text=E.text="".concat(a)};return e.props.card.onUpdate(_),e.props.turn.onUpdate(_),e}return gy(e,t),e}(mm);class by extends $i{constructor(t=!1){super(),this._buffer=new qi(null,t,!1),this._indexBuffer=new qi(null,t,!0),this.addAttribute("aVertexPosition",this._buffer,3,!1,ot.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,ot.FLOAT).addAttribute("aColor",this._buffer,4,!0,ot.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,ot.FLOAT).addIndex(this._indexBuffer)}}class xy{constructor(t,e=!0){xy.prototype.__init.call(this),this.legacy=t,e&&(this.enabled=!0),this.legacy.proj=this}__init(){this._enabled=!1}get enabled(){return this._enabled}set enabled(t){this._enabled=t}clear(){}}function Sy(t){const e=this.proj,i=this,r=t._worldID,n=i.localTransform,o=e.scaleAfterAffine&&e.affine>=2;i._localID!==i._currentLocalID&&(o?(n.a=i._cx,n.b=i._sx,n.c=i._cy,n.d=i._sy,n.tx=i.position._x,n.ty=i.position._y):(n.a=i._cx*i.scale._x,n.b=i._sx*i.scale._x,n.c=i._cy*i.scale._y,n.d=i._sy*i.scale._y,n.tx=i.position._x-(i.pivot._x*n.a+i.pivot._y*n.c),n.ty=i.position._y-(i.pivot._x*n.b+i.pivot._y*n.d)),i._currentLocalID=i._localID,e._currentProjID=-1);const a=e._projID;if(e._currentProjID!==a&&(e._currentProjID=a,e.updateLocalTransform(n),i._parentID=-1),i._parentID!==r){const n=t.proj;n&&!n._affine?e.world.setToMult(n.world,e.local):e.world.setToMultLegacy(t.worldTransform,e.local);const a=i.worldTransform;e.world.copyTo(a,e._affine,e.affinePreserveOrientation),o&&(a.a*=i.scale._x,a.b*=i.scale._x,a.c*=i.scale._y,a.d*=i.scale._y,a.tx-=i.pivot._x*a.a+i.pivot._y*a.c,a.ty-=i.pivot._x*a.b+i.pivot._y*a.d),i._parentID=r,i._worldID++}}!function(t){t[t.NONE=0]="NONE",t[t.BEFORE_PROJ=4]="BEFORE_PROJ",t[t.PROJ=5]="PROJ",t[t.ALL=9]="ALL"}(Um||(Um={})),function(t){t[t.NONE=0]="NONE",t[t.FREE=1]="FREE",t[t.AXIS_X=2]="AXIS_X",t[t.AXIS_Y=3]="AXIS_Y",t[t.POINT=4]="POINT",t[t.AXIS_XR=5]="AXIS_XR"}(Bm||(Bm={}));class Ry extends xy{constructor(...t){super(...t),Ry.prototype.__init.call(this),Ry.prototype.__init2.call(this),Ry.prototype.__init3.call(this),Ry.prototype.__init4.call(this),Ry.prototype.__init5.call(this)}updateLocalTransform(t){}__init(){this._projID=0}__init2(){this._currentProjID=-1}__init3(){this._affine=Bm.NONE}__init4(){this.affinePreserveOrientation=!1}__init5(){this.scaleAfterAffine=!0}set affine(t){this._affine!==t&&(this._affine=t,this._currentProjID=-1,this.legacy._currentLocalID=-1)}get affine(){return this._affine}set enabled(t){t!==this._enabled&&(this._enabled=t,t?(this.legacy.updateTransform=Sy,this.legacy._parentID=-1):(this.legacy.updateTransform=Ge.prototype.updateTransform,this.legacy._parentID=-1))}clear(){this._currentProjID=-1,this._projID=0}}class Iy extends Sn{constructor(...t){super(...t),Iy.prototype.__init.call(this),Iy.prototype.__init2.call(this)}__init(){this.forceMaxTextures=0}getUniforms(t){return this.defUniforms}syncUniforms(t){if(!t)return;const e=this._shader;for(const i in t)e.uniforms[i]=t[i]}__init2(){this.defUniforms={}}buildDrawCalls(t,e,i){const r=this,{_bufferedElements:n,_attributeBuffer:o,_indexBuffer:a,vertexSize:s}=this,p=Sn._drawCallPool;let l=this._dcIndex,m=this._aIndex,y=this._iIndex,h=p[l];h.start=this._iIndex,h.texArray=t;for(let r=e;r<i;++r){const i=n[r],u=i._texture.baseTexture,E=zt[u.alphaMode?1:0][i.blendMode],c=this.getUniforms(i);n[r]=null,e<r&&(h.blend!==E||h.uniforms!==c)&&(h.size=y-h.start,e=r,h=p[++l],h.texArray=t,h.start=y),this.packInterleavedGeometry(i,o,a,m,y),m+=i.vertexData.length/2*s,y+=i.indices.length,h.blend=E,h.uniforms=c}e<i&&(h.size=y-h.start,++l),r._dcIndex=l,r._aIndex=m,r._iIndex=y}drawBatches(){const t=this._dcIndex,{gl:e,state:i,shader:r}=this.renderer,n=Sn._drawCallPool;let o=null,a=null;for(let s=0;s<t;s++){const{texArray:t,type:p,size:l,start:m,blend:y,uniforms:h}=n[s];a!==t&&(a=t,this.bindAndClearTexArray(t)),o!==h&&(o=h,this.syncUniforms(h),r.syncUniformGroup(this._shader.uniformGroup)),this.state.blendMode=y,i.set(this.state),e.drawElements(p,l,e.UNSIGNED_SHORT,2*m)}}contextChange(){if(!this.forceMaxTextures)return super.contextChange(),void this.syncUniforms(this.defUniforms);const t=this;t.MAX_TEXTURES=this.forceMaxTextures,this._shader=t.shaderGenerator.generateShader(this.MAX_TEXTURES),this.syncUniforms(this.defUniforms);for(let e=0;e<t._packedGeometryPoolSize;e++)t._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()}}vn.registerPlugin("batch2d",class{static create(t){const{vertex:e,fragment:i,vertexSize:r,geometryClass:n}=Object.assign({vertex:"precision highp float;\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\ngl_Position.xyw = projectionMatrix * aVertexPosition;\ngl_Position.z = 0.0;\n\nvTextureCoord = aTextureCoord;\nvTextureId = aTextureId;\nvColor = aColor;\n}\n",fragment:"\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\nvec4 color;\n%forloop%\ngl_FragColor = color * vColor;\n}",geometryClass:by,vertexSize:7},t);return class extends Sn{constructor(t){super(t),this.shaderGenerator=new Rn(e,i),this.geometryClass=n,this.vertexSize=r}packInterleavedGeometry(t,e,i,r,n){const{uint32View:o,float32View:a}=e,s=r/this.vertexSize,p=t.uvs,l=t.indices,m=t.vertexData,y=t.vertexData2d,h=t._texture.baseTexture._batchLocation,u=Math.min(t.worldAlpha,1),E=u<1&&t._texture.baseTexture.alphaMode?Kt(t._tintRGB,u):t._tintRGB+(255*u<<24);if(y){let t=0;for(let e=0;e<y.length;e+=3,t+=2)a[r++]=y[e],a[r++]=y[e+1],a[r++]=y[e+2],a[r++]=p[t],a[r++]=p[t+1],o[r++]=E,a[r++]=h}else for(let t=0;t<m.length;t+=2)a[r++]=m[t],a[r++]=m[t+1],a[r++]=1,a[r++]=p[t],a[r++]=p[t+1],o[r++]=E,a[r++]=h;for(let t=0;t<l.length;t++)i[n++]=s+l[t]}}}}.create({}));const Ay=[1,0,0,0,1,0,0,0,1];class My{static __initStatic(){this.IDENTITY=new My}static __initStatic2(){this.TEMP_MATRIX=new My}__init(){this.floatArray=null}constructor(t){My.prototype.__init.call(this),this.mat3=new Float64Array(t||Ay)}get a(){return this.mat3[0]/this.mat3[8]}set a(t){this.mat3[0]=t*this.mat3[8]}get b(){return this.mat3[1]/this.mat3[8]}set b(t){this.mat3[1]=t*this.mat3[8]}get c(){return this.mat3[3]/this.mat3[8]}set c(t){this.mat3[3]=t*this.mat3[8]}get d(){return this.mat3[4]/this.mat3[8]}set d(t){this.mat3[4]=t*this.mat3[8]}get tx(){return this.mat3[6]/this.mat3[8]}set tx(t){this.mat3[6]=t*this.mat3[8]}get ty(){return this.mat3[7]/this.mat3[8]}set ty(t){this.mat3[7]=t*this.mat3[8]}set(t,e,i,r,n,o){const a=this.mat3;return a[0]=t,a[1]=e,a[2]=0,a[3]=i,a[4]=r,a[5]=0,a[6]=n,a[7]=o,a[8]=1,this}toArray(t,e){this.floatArray||(this.floatArray=new Float32Array(9));const i=e||this.floatArray,r=this.mat3;return t?(i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],i[4]=r[4],i[5]=r[5],i[6]=r[6],i[7]=r[7],i[8]=r[8]):(i[0]=r[0],i[1]=r[3],i[2]=r[6],i[3]=r[1],i[4]=r[4],i[5]=r[7],i[6]=r[2],i[7]=r[5],i[8]=r[8]),i}apply(t,e){e=e||new _e;const i=this.mat3,r=t.x,n=t.y,o=1/(i[2]*r+i[5]*n+i[8]);return e.x=o*(i[0]*r+i[3]*n+i[6]),e.y=o*(i[1]*r+i[4]*n+i[7]),e}translate(t,e){const i=this.mat3;return i[0]+=t*i[2],i[1]+=e*i[2],i[3]+=t*i[5],i[4]+=e*i[5],i[6]+=t*i[8],i[7]+=e*i[8],this}scale(t,e){const i=this.mat3;return i[0]*=t,i[1]*=e,i[3]*=t,i[4]*=e,i[6]*=t,i[7]*=e,this}scaleAndTranslate(t,e,i,r){const n=this.mat3;n[0]=t*n[0]+i*n[2],n[1]=e*n[1]+r*n[2],n[3]=t*n[3]+i*n[5],n[4]=e*n[4]+r*n[5],n[6]=t*n[6]+i*n[8],n[7]=e*n[7]+r*n[8]}applyInverse(t,e){e=e||new _e;const i=this.mat3,r=t.x,n=t.y,o=i[0],a=i[3],s=i[6],p=i[1],l=i[4],m=i[7],y=i[2],h=i[5],u=i[8],E=(u*l-m*h)*r+(-u*a+s*h)*n+(m*a-s*l),c=(-u*p+m*y)*r+(u*o-s*y)*n+(-m*o+s*p),d=(h*p-l*y)*r+(-h*o+a*y)*n+(l*o-a*p);return e.x=E/d,e.y=c/d,e}invert(){const t=this.mat3,e=t[0],i=t[1],r=t[2],n=t[3],o=t[4],a=t[5],s=t[6],p=t[7],l=t[8],m=l*o-a*p,y=-l*n+a*s,h=p*n-o*s;let u=e*m+i*y+r*h;return u?(u=1/u,t[0]=m*u,t[1]=(-l*i+r*p)*u,t[2]=(a*i-r*o)*u,t[3]=y*u,t[4]=(l*e-r*s)*u,t[5]=(-a*e+r*n)*u,t[6]=h*u,t[7]=(-p*e+i*s)*u,t[8]=(o*e-i*n)*u,this):this}identity(){const t=this.mat3;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,this}clone(){return new My(this.mat3)}copyTo2dOr3d(t){const e=this.mat3,i=t.mat3;return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[4]=e[4],i[5]=e[5],i[6]=e[6],i[7]=e[7],i[8]=e[8],t}copyTo(t,e,i){const r=this.mat3,n=1/r[8],o=r[6]*n,a=r[7]*n;if(t.a=(r[0]-r[2]*o)*n,t.b=(r[1]-r[2]*a)*n,t.c=(r[3]-r[5]*o)*n,t.d=(r[4]-r[5]*a)*n,t.tx=o,t.ty=a,e>=2){let r=t.a*t.d-t.b*t.c;i||(r=Math.abs(r)),e===Bm.POINT?(r=r>0?1:-1,t.a=r,t.b=0,t.c=0,t.d=r):e===Bm.AXIS_X?(r/=Math.sqrt(t.b*t.b+t.d*t.d),t.c=0,t.d=r):e===Bm.AXIS_Y?(r/=Math.sqrt(t.a*t.a+t.c*t.c),t.a=r,t.c=0):e===Bm.AXIS_XR&&(t.a=t.d*r,t.c=-t.b*r)}return t}copyFrom(t){const e=this.mat3;return e[0]=t.a,e[1]=t.b,e[2]=0,e[3]=t.c,e[4]=t.d,e[5]=0,e[6]=t.tx,e[7]=t.ty,e[8]=1,this}setToMultLegacy(t,e){const i=this.mat3,r=e.mat3,n=t.a,o=t.b,a=t.c,s=t.d,p=t.tx,l=t.ty,m=r[0],y=r[1],h=r[2],u=r[3],E=r[4],c=r[5],d=r[6],f=r[7],_=r[8];return i[0]=m*n+y*a+h*p,i[1]=m*o+y*s+h*l,i[2]=h,i[3]=u*n+E*a+c*p,i[4]=u*o+E*s+c*l,i[5]=c,i[6]=d*n+f*a+_*p,i[7]=d*o+f*s+_*l,i[8]=_,this}setToMultLegacy2(t,e){const i=this.mat3,r=t.mat3,n=r[0],o=r[1],a=r[2],s=r[3],p=r[4],l=r[5],m=r[6],y=r[7],h=r[8],u=e.a,E=e.b,c=e.c,d=e.d,f=e.tx,_=e.ty;return i[0]=u*n+E*s,i[1]=u*o+E*p,i[2]=u*a+E*l,i[3]=c*n+d*s,i[4]=c*o+d*p,i[5]=c*a+d*l,i[6]=f*n+_*s+m,i[7]=f*o+_*p+y,i[8]=f*a+_*l+h,this}setToMult(t,e){const i=this.mat3,r=t.mat3,n=e.mat3,o=r[0],a=r[1],s=r[2],p=r[3],l=r[4],m=r[5],y=r[6],h=r[7],u=r[8],E=n[0],c=n[1],d=n[2],f=n[3],_=n[4],v=n[5],g=n[6],T=n[7],b=n[8];return i[0]=E*o+c*p+d*y,i[1]=E*a+c*l+d*h,i[2]=E*s+c*m+d*u,i[3]=f*o+_*p+v*y,i[4]=f*a+_*l+v*h,i[5]=f*s+_*m+v*u,i[6]=g*o+T*p+b*y,i[7]=g*a+T*l+b*h,i[8]=g*s+T*m+b*u,this}prepend(t){return t.mat3?this.setToMult(t,this):this.setToMultLegacy(t,this)}}My.__initStatic(),My.__initStatic2();const Cy="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec3 vTextureCoord;\n\nvoid main(void)\n{\ngl_Position.xyw = projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0);\n\nvTextureCoord = uTransform * vec3(aTextureCoord, 1.0);\n}\n",Fy=new My;class Ny extends pr{constructor(t){super(t),Ny.prototype.__init.call(this);const e={globals:this.renderer.globalUniforms};this.shader=kr.from(Cy,"\nvarying vec3 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\nvec2 coord = mod(vTextureCoord.xy / vTextureCoord.z - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\ncoord = (uMapCoord * vec3(coord, 1.0)).xy;\ncoord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\nvec4 sample = texture2D(uSampler, coord);\ngl_FragColor = sample * uColor;\n}\n",e),this.simpleShader=kr.from(Cy,"\nvarying vec3 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\nvec4 sample = texture2D(uSampler, vTextureCoord.xy / vTextureCoord.z);\ngl_FragColor = sample * uColor;\n}\n",e)}__init(){this.quad=new er}render(t){const e=this.renderer,i=this.quad;let r=i.vertices;r[0]=r[6]=t._width*-t.anchor.x,r[1]=r[3]=t._height*-t.anchor.y,r[2]=r[4]=t._width*(1-t.anchor.x),r[5]=r[7]=t._height*(1-t.anchor.y),t.uvRespectAnchor&&(r=i.uvs,r[0]=r[6]=-t.anchor.x,r[1]=r[3]=-t.anchor.y,r[2]=r[4]=1-t.anchor.x,r[5]=r[7]=1-t.anchor.y),i.invalidate();const n=t._texture,o=n.baseTexture,a=t.tileProj.world,s=t.uvMatrix;let p=o.isPowerOfTwo&&n.frame.width===o.width&&n.frame.height===o.height;p&&(o._glTextures[e.CONTEXT_UID]?p=o.wrapMode!==pt.CLAMP:o.wrapMode===pt.CLAMP&&(o.wrapMode=pt.REPEAT));const l=p?this.simpleShader:this.shader;Fy.identity(),Fy.scale(n.width,n.height),Fy.prepend(a),Fy.scale(1/t._width,1/t._height),Fy.invert(),p?Fy.prepend(s.mapCoord):(l.uniforms.uMapCoord=s.mapCoord.toArray(!0),l.uniforms.uClampFrame=s.uClampFrame,l.uniforms.uClampOffset=s.uClampOffset),l.uniforms.uTransform=Fy.toArray(!0),l.uniforms.uColor=Zt(t.tint,t.worldAlpha,l.uniforms.uColor,o.premultiplyAlpha),l.uniforms.translationMatrix=t.worldTransform.toArray(!0),l.uniforms.uSampler=n,e.shader.bind(l,!1),e.geometry.bind(i,void 0),e.state.setBlendMode(qt(t.blendMode,o.premultiplyAlpha)),e.geometry.draw(it.TRIANGLES,6,0)}}const Oy=new _e,wy=[new _e,new _e,new _e,new _e],Py=new ge,Gy=new My;class Dy extends Ry{constructor(t,e){super(t,e),Dy.prototype.__init.call(this),Dy.prototype.__init2.call(this),Dy.prototype.__init3.call(this),this.local=new My,this.world=new My}__init(){this.matrix=new My}__init2(){this.pivot=new Re(this.onChange,this,0,0)}__init3(){this.reverseLocalOrder=!1}onChange(){const t=this.pivot,e=this.matrix.mat3;e[6]=-(t._x*e[0]+t._y*e[3]),e[7]=-(t._x*e[1]+t._y*e[4]),this._projID++}setAxisX(t,e=1){const i=t.x,r=t.y,n=Math.sqrt(i*i+r*r),o=this.matrix.mat3;o[0]=i/n,o[1]=r/n,o[2]=e/n,this.onChange()}setAxisY(t,e=1){const i=t.x,r=t.y,n=Math.sqrt(i*i+r*r),o=this.matrix.mat3;o[3]=i/n,o[4]=r/n,o[5]=e/n,this.onChange()}mapSprite(t,e){const i=t.texture;Py.x=-t.anchor.x*i.orig.width,Py.y=-t.anchor.y*i.orig.height,Py.width=i.orig.width,Py.height=i.orig.height,this.mapQuad(Py,e)}mapQuad(t,e){wy[0].set(t.x,t.y),wy[1].set(t.x+t.width,t.y),wy[2].set(t.x+t.width,t.y+t.height),wy[3].set(t.x,t.y+t.height);let i=1,r=2,n=3;if(0===function(t,e,i,r,n){const o=e.x-t.x,a=i.x-r.x,s=i.x-t.x,p=e.y-t.y,l=i.y-r.y,m=i.y-t.y,y=o*l-p*a;if(Math.abs(y)<1e-7)return n.x=o,n.y=p,0;const h=(s*l-m*a)/y,u=(o*m-p*s)/y;return u<1e-6||u-1>-1e-6?-1:(n.x=t.x+h*(e.x-t.x),n.y=t.y+h*(e.y-t.y),1)}(e[0],e[2],e[1],e[3],Oy))return;i=1,r=3,n=2;const o=Math.sqrt((e[0].x-Oy.x)*(e[0].x-Oy.x)+(e[0].y-Oy.y)*(e[0].y-Oy.y)),a=Math.sqrt((e[1].x-Oy.x)*(e[1].x-Oy.x)+(e[1].y-Oy.y)*(e[1].y-Oy.y)),s=Math.sqrt((e[3].x-Oy.x)*(e[3].x-Oy.x)+(e[3].y-Oy.y)*(e[3].y-Oy.y)),p=Math.sqrt((e[2].x-Oy.x)*(e[2].x-Oy.x)+(e[2].y-Oy.y)*(e[2].y-Oy.y)),l=(o+p)/p,m=(a+s)/s,y=(a+s)/a;let h=this.matrix.mat3;h[0]=wy[0].x*l,h[1]=wy[0].y*l,h[2]=l,h[3]=wy[1].x*m,h[4]=wy[1].y*m,h[5]=m,h[6]=wy[3].x*y,h[7]=wy[3].y*y,h[8]=y,this.matrix.invert(),h=Gy.mat3,h[0]=e[0].x,h[1]=e[0].y,h[2]=1,h[3]=e[1].x,h[4]=e[1].y,h[5]=1,h[6]=e[3].x,h[7]=e[3].y,h[8]=1,this.matrix.setToMult(Gy,this.matrix),this._projID++}updateLocalTransform(t){0!==this._projID?this.reverseLocalOrder?this.local.setToMultLegacy2(this.matrix,t):this.local.setToMultLegacy(t,this.matrix):this.local.copyFrom(t)}clear(){super.clear(),this.matrix.identity(),this.pivot.set(0,0)}}function Ly(){return this.proj.affine?this.transform.worldTransform:this.proj.world}class Uy extends pi{constructor(){super(),this.proj=new Dy(this.transform)}toLocal(t,e,i,r,n=Um.ALL){return e&&(t=e.toGlobal(t,i,r)),r||this._recursivePostUpdateTransform(),n>=Um.PROJ?(r||this.displayObjectUpdateTransform(),this.proj.affine?this.transform.worldTransform.applyInverse(t,i):this.proj.world.applyInverse(t,i)):(this.parent?i=this.parent.worldTransform.applyInverse(t,i):(i.x=t.x,i.y=t.y),n===Um.NONE?i:this.transform.localTransform.applyInverse(i,i))}get worldTransform(){return this.proj.affine?this.transform.worldTransform:this.proj.world}}const By=Uy.prototype.toLocal;class ky extends ps{static __initStatic(){this.defaultVertexShader="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\ngl_Position.xyw = projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0);\ngl_Position.z = 0.0;\n\nvTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n"}static __initStatic2(){this.defaultFragmentShader="\nvarying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\ngl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}"}constructor(t,e,i,r){super(t,e,i,r),ky.prototype.__init.call(this),this.proj=new Dy(this.transform)}__init(){this.vertexData2d=null}calculateVertices(){if(this.proj._affine)return this.vertexData2d=null,void super.calculateVertices();const t=this.geometry,e=t.buffers[0].data,i=this;if(t.vertexDirtyId===i.vertexDirty&&i._transformID===i.transform._worldID)return;i._transformID=i.transform._worldID,i.vertexData.length!==e.length&&(i.vertexData=new Float32Array(e.length)),this.vertexData2d&&this.vertexData2d.length===3*e.length/2||(this.vertexData2d=new Float32Array(3*e.length));const r=this.proj.world.mat3,n=this.vertexData2d,o=i.vertexData;for(let t=0;t<o.length/2;t++){const i=e[2*t],a=e[2*t+1],s=r[0]*i+r[3]*a+r[6],p=r[1]*i+r[4]*a+r[7],l=r[2]*i+r[5]*a+r[8];n[3*t]=s,n[3*t+1]=p,n[3*t+2]=l,o[2*t]=s/l,o[2*t+1]=p/l}i.vertexDirty=t.vertexDirtyId}_renderDefault(t){const e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),function(t){let e,i=t[0],r=1;for(;r<t.length;){const n=t[r],o=t[r+1];if(r+=2,("optionalAccess"===n||"optionalCall"===n)&&null==i)return;"access"===n||"optionalAccess"===n?(e=i,i=o(i)):"call"!==n&&"optionalCall"!==n||(i=o(((...t)=>i.call(e,...t))),e=void 0)}return i}([e,"access",t=>t.program,"access",t=>t.uniformData,"optionalAccess",t=>t.translationMatrix])&&(e.uniforms.translationMatrix=this.worldTransform.toArray(!0)),t.shader.bind(e,!1),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}toLocal(t,e,i,r,n=Um.ALL){return By.call(this,t,e,i,r,n)}get worldTransform(){return this.proj.affine?this.transform.worldTransform:this.proj.world}}ky.__initStatic(),ky.__initStatic2();class Hy extends xa{constructor(t){super(t),Hy.prototype.__init.call(this),this.proj=new Dy(this.transform),this.pluginName="batch2d"}__init(){this.vertexData2d=null}_calculateBounds(){this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData)}calculateVertices(){const t=this._texture;if(this.proj._affine)return this.vertexData2d=null,void super.calculateVertices();this.vertexData2d||(this.vertexData2d=new Float32Array(12));const e=this.transform._worldID,i=t._updateID;if(this._transformID===e&&this._textureID===i)return;this._textureID!==i&&(this.uvs=t._uvs.uvsFloat32),this._transformID=e,this._textureID=i;const r=this.proj.world.mat3,n=this.vertexData2d,o=this.vertexData,a=t.trim,s=t.orig,p=this._anchor;let l,m,y,h;a?(m=a.x-p._x*s.width,l=m+a.width,h=a.y-p._y*s.height,y=h+a.height):(m=-p._x*s.width,l=m+s.width,h=-p._y*s.height,y=h+s.height),n[0]=r[0]*m+r[3]*h+r[6],n[1]=r[1]*m+r[4]*h+r[7],n[2]=r[2]*m+r[5]*h+r[8],n[3]=r[0]*l+r[3]*h+r[6],n[4]=r[1]*l+r[4]*h+r[7],n[5]=r[2]*l+r[5]*h+r[8],n[6]=r[0]*l+r[3]*y+r[6],n[7]=r[1]*l+r[4]*y+r[7],n[8]=r[2]*l+r[5]*y+r[8],n[9]=r[0]*m+r[3]*y+r[6],n[10]=r[1]*m+r[4]*y+r[7],n[11]=r[2]*m+r[5]*y+r[8],o[0]=n[0]/n[2],o[1]=n[1]/n[2],o[2]=n[3]/n[5],o[3]=n[4]/n[5],o[4]=n[6]/n[8],o[5]=n[7]/n[8],o[6]=n[9]/n[11],o[7]=n[10]/n[11]}calculateTrimmedVertices(){if(this.proj._affine)return void super.calculateTrimmedVertices();const t=this.transform._worldID,e=this._texture._updateID,i=this;if(i.vertexTrimmedData){if(i._transformTrimmedID===t&&this._textureTrimmedID===e)return}else i.vertexTrimmedData=new Float32Array(8);i._transformTrimmedID=t,this._textureTrimmedID=e;const r=this._texture,n=i.vertexTrimmedData,o=r.orig,a=this.tileProj?this._width:o.width,s=this.tileProj?this._height:o.height,p=this._anchor,l=this.proj.world.mat3,m=-p._x*a,y=m+a,h=-p._y*s,u=h+s;let E=1/(l[2]*m+l[5]*h+l[8]);n[0]=E*(l[0]*m+l[3]*h+l[6]),n[1]=E*(l[1]*m+l[4]*h+l[7]),E=1/(l[2]*y+l[5]*h+l[8]),n[2]=E*(l[0]*y+l[3]*h+l[6]),n[3]=E*(l[1]*y+l[4]*h+l[7]),E=1/(l[2]*y+l[5]*u+l[8]),n[4]=E*(l[0]*y+l[3]*u+l[6]),n[5]=E*(l[1]*y+l[4]*u+l[7]),E=1/(l[2]*m+l[5]*u+l[8]),n[6]=E*(l[0]*m+l[3]*u+l[6]),n[7]=E*(l[1]*m+l[4]*u+l[7])}toLocal(t,e,i,r,n=Um.ALL){return By.call(this,t,e,i,r,n)}get worldTransform(){return this.proj.affine?this.transform.worldTransform:this.proj.world}}const Xy=new Ge;class jy extends $a{constructor(t,e,i){super(t,e,i),this.tileProj=new Dy(this.tileTransform),this.tileProj.reverseLocalOrder=!0,this.proj=new Dy(this.transform),this.pluginName="tilingSprite2d",this.uvRespectAnchor=!0}get worldTransform(){return this.proj.affine?this.transform.worldTransform:this.proj.world}toLocal(t,e,i,r,n=Um.ALL){return By.call(this,t,e,i,r,n)}_render(t){const e=this._texture;e&&e.valid&&(this.tileTransform.updateTransform(Xy),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))}}function Wy(){this.proj||(this.proj=new Dy(this.transform),this.toLocal=Uy.prototype.toLocal,Object.defineProperty(this,"worldTransform",{get:Ly,enumerable:!0,configurable:!0}))}pi.prototype.convertTo2d=Wy,xa.prototype.convertTo2d=function(){this.proj||(this.calculateVertices=Hy.prototype.calculateVertices,this.calculateTrimmedVertices=Hy.prototype.calculateTrimmedVertices,this._calculateBounds=Hy.prototype._calculateBounds,this.pluginName="batch2d",Wy.call(this))},pi.prototype.convertSubtreeTo2d=function(){this.convertTo2d();for(let t=0;t<this.children.length;t++)this.children[t].convertSubtreeTo2d()},Yl.prototype.convertTo2d=Wl.prototype.convertTo2d=function(){this.proj||(this.calculateVertices=ky.prototype.calculateVertices,this._renderDefault=ky.prototype._renderDefault,"batch2d"!==this.material.pluginName&&(this.material=new ls(this.material.texture,{program:Br.from(ky.defaultVertexShader,ky.defaultFragmentShader),pluginName:"batch2d"})),Wy.call(this))},$a.prototype.convertTo2d=function(){this.proj||(this.tileProj=new Dy(this.tileTransform),this.tileProj.reverseLocalOrder=!0,this.uvRespectAnchor=!0,this.calculateTrimmedVertices=Hy.prototype.calculateTrimmedVertices,this._calculateBounds=Hy.prototype._calculateBounds,this._render=jy.prototype._render,this.pluginName="tilingSprite2d",Wy.call(this))};class Vy extends wa{constructor(t,e,i){super(t,e,i),Vy.prototype.__init.call(this),this.proj=new Dy(this.transform),this.pluginName="batch2d"}__init(){this.vertexData2d=null}get worldTransform(){return this.proj.affine?this.transform.worldTransform:this.proj.world}}Vy.prototype.calculateVertices=Hy.prototype.calculateVertices,Vy.prototype.calculateTrimmedVertices=Hy.prototype.calculateTrimmedVertices,Vy.prototype._calculateBounds=Hy.prototype._calculateBounds;const Yy=new My;class zy extends Xr{constructor(t){super("\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec3 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\ngl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\nvTextureCoord = aTextureCoord;\nvMaskCoord = otherMatrix * vec3( aTextureCoord, 1.0);\n}\n","\nvarying vec3 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\nvec2 uv = vMaskCoord.xy / vMaskCoord.z;\n\nfloat clip = step(3.5,\n    step(maskClamp.x, uv.x) +\n    step(maskClamp.y, uv.y) +\n    step(uv.x, maskClamp.z) +\n    step(uv.y, maskClamp.w));\n\nvec4 original = texture2D(uSampler, vTextureCoord);\nvec4 masky = texture2D(mask, uv);\n\noriginal *= (masky.r * masky.a * alpha * clip);\n\ngl_FragColor = original;\n}\n"),zy.prototype.__init.call(this),t.renderable=!1,this.maskSprite=t}__init(){this.maskMatrix=new My}apply(t,e,i,r){const n=this.maskSprite,o=this.maskSprite.texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new Wr(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=n.texture,this.uniforms.otherMatrix=zy.calculateSpriteMatrix(e,this.maskMatrix,n).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,t.applyFilter(this,e,i,r))}static calculateSpriteMatrix(t,e,i){const r=i.proj,n=t.filterFrame,o=r&&!r._affine?r.world.copyTo2dOr3d(Yy):Yy.copyFrom(i.transform.worldTransform),a=i.texture.orig;return e.set(t.width,0,0,t.height,n.x,n.y),o.invert(),e.setToMult(o,e),e.scaleAndTranslate(1/a.width,1/a.height,i.anchor.x,i.anchor.y),e}}Yr.prototype.pushSpriteMask=function(t){const{maskObject:e}=t,i=t._target;let r=this.alphaMaskPool[this.alphaMaskIndex];r||(r=this.alphaMaskPool[this.alphaMaskIndex]=[new zy(e)]),r[0].resolution=this.renderer.resolution,r[0].maskSprite=e;const n=i.filterArea;i.filterArea=e.getBounds(!0),this.renderer.filter.push(i,r),i.filterArea=n,this.alphaMaskIndex++},vn.registerPlugin("tilingSprite2d",Ny);class qy extends _e{constructor(t,e,i){super(t,e),this.z=i}set(t,e,i){return this.x=t||0,this.y=void 0===e?this.x:e||0,this.z=void 0===e?this.x:i||0,this}copyFrom(t){return this.set(t.x,t.y,t.z||0),this}copyTo(t){return t.set(this.x,this.y,this.z),t}}class Ky extends Re{constructor(...t){super(...t),Ky.prototype.__init.call(this)}__init(){this._z=0}get z(){return this._z}set z(t){this._z!==t&&(this._z=t,this.cb.call(this.scope))}set(t,e,i){const r=t||0,n=void 0===e?r:e||0,o=void 0===e?r:i||0;return this._x===r&&this._y===n&&this._z===o||(this._x=r,this._y=n,this._z=o,this.cb.call(this.scope)),this}copyFrom(t){return this.set(t.x,t.y,t.z||0),this}copyTo(t){return t.set(this._x,this._y,this._z),t}}class Zy{constructor(t,e,i){Zy.prototype.__init.call(this),Zy.prototype.__init2.call(this),Zy.prototype.__init3.call(this),this._x=t||0,this._y=e||0,this._z=i||0,this.quaternion=new Float64Array(4),this.quaternion[3]=1,this.update()}__init(){this._quatUpdateId=-1}__init2(){this._quatDirtyId=0}__init3(){this._sign=1}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this._quatDirtyId++)}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this._quatDirtyId++)}get z(){return this._z}set z(t){this._z!==t&&(this._z=t,this._quatDirtyId++)}get pitch(){return this._x}set pitch(t){this._x!==t&&(this._x=t,this._quatDirtyId++)}get yaw(){return this._y}set yaw(t){this._y!==t&&(this._y=t,this._quatDirtyId++)}get roll(){return this._z}set roll(t){this._z!==t&&(this._z=t,this._quatDirtyId++)}set(t,e,i){const r=t||0,n=e||0,o=i||0;this._x===r&&this._y===n&&this._z===o||(this._x=r,this._y=n,this._z=o,this._quatDirtyId++)}copyFrom(t){const e=t.x,i=t.y,r=t.z;return this._x===e&&this._y===i&&this._z===r||(this._x=e,this._y=i,this._z=r,this._quatDirtyId++),this}copyTo(t){return t.set(this._x,this._y,this._z),t}equals(t){return this._x===t.x&&this._y===t.y&&this._z===t.z}clone(){return new Zy(this._x,this._y,this._z)}update(){if(this._quatUpdateId===this._quatDirtyId)return!1;this._quatUpdateId=this._quatDirtyId;const t=Math.cos(this._x/2),e=Math.cos(this._y/2),i=Math.cos(this._z/2),r=this._sign,n=r*Math.sin(this._x/2),o=r*Math.sin(this._y/2),a=r*Math.sin(this._z/2),s=this.quaternion;return s[0]=n*e*i+t*o*a,s[1]=t*o*i-n*e*a,s[2]=t*e*a+n*o*i,s[3]=t*e*i-n*o*a,!0}}class Qy{constructor(t,e,i,r,n){this.cb=t,this.scope=e,Qy.prototype.__init.call(this),Qy.prototype.__init2.call(this),Qy.prototype.__init3.call(this),this._x=i||0,this._y=r||0,this._z=n||0,this.quaternion=new Float64Array(4),this.quaternion[3]=1,this.update()}__init(){this._quatUpdateId=-1}__init2(){this._quatDirtyId=0}__init3(){this._sign=1}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this._quatDirtyId++,this.cb.call(this.scope))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this._quatDirtyId++,this.cb.call(this.scope))}get z(){return this._z}set z(t){this._z!==t&&(this._z=t,this._quatDirtyId++,this.cb.call(this.scope))}get pitch(){return this._x}set pitch(t){this._x!==t&&(this._x=t,this._quatDirtyId++,this.cb.call(this.scope))}get yaw(){return this._y}set yaw(t){this._y!==t&&(this._y=t,this._quatDirtyId++,this.cb.call(this.scope))}get roll(){return this._z}set roll(t){this._z!==t&&(this._z=t,this._quatDirtyId++,this.cb.call(this.scope))}set(t,e,i){const r=t||0,n=e||0,o=i||0;return this._x===r&&this._y===n&&this._z===o||(this._x=r,this._y=n,this._z=o,this._quatDirtyId++,this.cb.call(this.scope)),this}copyFrom(t){const e=t.x,i=t.y,r=t.z;return this._x===e&&this._y===i&&this._z===r||(this._x=e,this._y=i,this._z=r,this._quatDirtyId++,this.cb.call(this.scope)),this}copyTo(t){return t.set(this._x,this._y,this._z),t}equals(t){return this._x===t.x&&this._y===t.y&&this._z===t.z}clone(){return new Zy(this._x,this._y,this._z)}update(){if(this._quatUpdateId===this._quatDirtyId)return!1;this._quatUpdateId=this._quatDirtyId;const t=Math.cos(this._x/2),e=Math.cos(this._y/2),i=Math.cos(this._z/2),r=this._sign,n=r*Math.sin(this._x/2),o=r*Math.sin(this._y/2),a=r*Math.sin(this._z/2),s=this.quaternion;return s[0]=n*e*i+t*o*a,s[1]=t*o*i-n*e*a,s[2]=t*e*a+n*o*i,s[3]=t*e*i-n*o*a,!0}}const Jy=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];class $y{static __initStatic(){this.IDENTITY=new $y}static __initStatic2(){this.TEMP_MATRIX=new $y}__init(){this.floatArray=null}__init2(){this._dirtyId=0}__init3(){this._updateId=-1}__init4(){this._mat4inv=null}__init5(){this.cacheInverse=!1}constructor(t){$y.prototype.__init.call(this),$y.prototype.__init2.call(this),$y.prototype.__init3.call(this),$y.prototype.__init4.call(this),$y.prototype.__init5.call(this),this.mat4=new Float64Array(t||Jy)}get a(){return this.mat4[0]/this.mat4[15]}set a(t){this.mat4[0]=t*this.mat4[15]}get b(){return this.mat4[1]/this.mat4[15]}set b(t){this.mat4[1]=t*this.mat4[15]}get c(){return this.mat4[4]/this.mat4[15]}set c(t){this.mat4[4]=t*this.mat4[15]}get d(){return this.mat4[5]/this.mat4[15]}set d(t){this.mat4[5]=t*this.mat4[15]}get tx(){return this.mat4[12]/this.mat4[15]}set tx(t){this.mat4[12]=t*this.mat4[15]}get ty(){return this.mat4[13]/this.mat4[15]}set ty(t){this.mat4[13]=t*this.mat4[15]}set(t,e,i,r,n,o){const a=this.mat4;return a[0]=t,a[1]=e,a[2]=0,a[3]=0,a[4]=i,a[5]=r,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=n,a[13]=o,a[14]=0,a[15]=1,this}toArray(t,e){this.floatArray||(this.floatArray=new Float32Array(9));const i=e||this.floatArray,r=this.mat4;return t?(i[0]=r[0],i[1]=r[1],i[2]=r[3],i[3]=r[4],i[4]=r[5],i[5]=r[7],i[6]=r[12],i[7]=r[13],i[8]=r[15]):(i[0]=r[0],i[1]=r[4],i[2]=r[12],i[3]=r[2],i[4]=r[6],i[5]=r[13],i[6]=r[3],i[7]=r[7],i[8]=r[15]),i}setToTranslation(t,e,i){const r=this.mat4;r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=t,r[13]=e,r[14]=i,r[15]=1}setToRotationTranslationScale(t,e,i,r,n,o,a){const s=this.mat4,p=t[0],l=t[1],m=t[2],y=t[3],h=p+p,u=l+l,E=m+m,c=p*h,d=p*u,f=p*E,_=l*u,v=l*E,g=m*E,T=y*h,b=y*u,x=y*E;return s[0]=(1-(_+g))*n,s[1]=(d+x)*n,s[2]=(f-b)*n,s[3]=0,s[4]=(d-x)*o,s[5]=(1-(c+g))*o,s[6]=(v+T)*o,s[7]=0,s[8]=(f+b)*a,s[9]=(v-T)*a,s[10]=(1-(c+_))*a,s[11]=0,s[12]=e,s[13]=i,s[14]=r,s[15]=1,s}apply(t,e){e=e||new qy;const i=this.mat4,r=t.x,n=t.y,o=t.z||0,a=1/(i[3]*r+i[7]*n+i[11]*o+i[15]);return e.x=a*(i[0]*r+i[4]*n+i[8]*o+i[12]),e.y=a*(i[1]*r+i[5]*n+i[9]*o+i[13]),e.z=a*(i[2]*r+i[6]*n+i[10]*o+i[14]),e}translate(t,e,i){const r=this.mat4;return r[12]=r[0]*t+r[4]*e+r[8]*i+r[12],r[13]=r[1]*t+r[5]*e+r[9]*i+r[13],r[14]=r[2]*t+r[6]*e+r[10]*i+r[14],r[15]=r[3]*t+r[7]*e+r[11]*i+r[15],this}scale(t,e,i){const r=this.mat4;return r[0]*=t,r[1]*=t,r[2]*=t,r[3]*=t,r[4]*=e,r[5]*=e,r[6]*=e,r[7]*=e,void 0!==i&&(r[8]*=i,r[9]*=i,r[10]*=i,r[11]*=i),this}scaleAndTranslate(t,e,i,r,n,o){const a=this.mat4;a[0]=t*a[0]+r*a[3],a[1]=e*a[1]+n*a[3],a[2]=i*a[2]+o*a[3],a[4]=t*a[4]+r*a[7],a[5]=e*a[5]+n*a[7],a[6]=i*a[6]+o*a[7],a[8]=t*a[8]+r*a[11],a[9]=e*a[9]+n*a[11],a[10]=i*a[10]+o*a[11],a[12]=t*a[12]+r*a[15],a[13]=e*a[13]+n*a[15],a[14]=i*a[14]+o*a[15]}applyInverse(t,e){e=e||new qy,this._mat4inv||(this._mat4inv=new Float64Array(16));const i=this._mat4inv,r=this.mat4,n=t.x,o=t.y;let a=t.z||0;this.cacheInverse&&this._updateId===this._dirtyId||(this._updateId=this._dirtyId,$y.glMatrixMat4Invert(i,r));const s=1/(i[3]*n+i[7]*o+i[11]*a+i[15]),p=s*(i[0]*n+i[4]*o+i[8]*a+i[12]),l=s*(i[1]*n+i[5]*o+i[9]*a+i[13]),m=s*(i[2]*n+i[6]*o+i[10]*a+i[14]);a+=1;const y=1/(i[3]*n+i[7]*o+i[11]*a+i[15]),h=y*(i[0]*n+i[4]*o+i[8]*a+i[12]),u=y*(i[1]*n+i[5]*o+i[9]*a+i[13]),E=y*(i[2]*n+i[6]*o+i[10]*a+i[14]);Math.abs(m-E)<1e-10&&e.set(NaN,NaN,0);const c=(0-m)/(E-m);return e.set((h-p)*c+p,(u-l)*c+l,0),e}invert(){return $y.glMatrixMat4Invert(this.mat4,this.mat4),this}invertCopyTo(t){this._mat4inv||(this._mat4inv=new Float64Array(16));const e=this._mat4inv,i=this.mat4;this.cacheInverse&&this._updateId===this._dirtyId||(this._updateId=this._dirtyId,$y.glMatrixMat4Invert(e,i)),t.mat4.set(e)}identity(){const t=this.mat4;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}clone(){return new $y(this.mat4)}copyTo3d(t){const e=this.mat4,i=t.mat4;return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[4]=e[4],i[5]=e[5],i[6]=e[6],i[7]=e[7],i[8]=e[8],t}copyTo2d(t){const e=this.mat4,i=t.mat3;return i[0]=e[0],i[1]=e[1],i[2]=e[3],i[3]=e[4],i[4]=e[5],i[5]=e[7],i[6]=e[12],i[7]=e[13],i[8]=e[15],t}copyTo2dOr3d(t){return t instanceof My?this.copyTo2d(t):this.copyTo3d(t)}copyTo(t,e,i){const r=this.mat4,n=1/r[15],o=r[12]*n,a=r[13]*n;if(t.a=(r[0]-r[3]*o)*n,t.b=(r[1]-r[3]*a)*n,t.c=(r[4]-r[7]*o)*n,t.d=(r[5]-r[7]*a)*n,t.tx=o,t.ty=a,e>=2){let r=t.a*t.d-t.b*t.c;i||(r=Math.abs(r)),e===Bm.POINT?(r=r>0?1:-1,t.a=r,t.b=0,t.c=0,t.d=r):e===Bm.AXIS_X?(r/=Math.sqrt(t.b*t.b+t.d*t.d),t.c=0,t.d=r):e===Bm.AXIS_Y&&(r/=Math.sqrt(t.a*t.a+t.c*t.c),t.a=r,t.c=0)}return t}copyFrom(t){const e=this.mat4;return e[0]=t.a,e[1]=t.b,e[2]=0,e[3]=0,e[4]=t.c,e[5]=t.d,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t.tx,e[13]=t.ty,e[14]=0,e[15]=1,this._dirtyId++,this}setToMultLegacy(t,e){const i=this.mat4,r=e.mat4,n=t.a,o=t.b,a=t.c,s=t.d,p=t.tx,l=t.ty;let m=r[0],y=r[1],h=r[2],u=r[3];return i[0]=m*n+y*a+u*p,i[1]=m*o+y*s+u*l,i[2]=h,i[3]=u,m=r[4],y=r[5],h=r[6],u=r[7],i[4]=m*n+y*a+u*p,i[5]=m*o+y*s+u*l,i[6]=h,i[7]=u,m=r[8],y=r[9],h=r[10],u=r[11],i[8]=m*n+y*a+u*p,i[9]=m*o+y*s+u*l,i[10]=h,i[11]=u,m=r[12],y=r[13],h=r[14],u=r[15],i[12]=m*n+y*a+u*p,i[13]=m*o+y*s+u*l,i[14]=h,i[15]=u,this._dirtyId++,this}setToMultLegacy2(t,e){const i=this.mat4,r=t.mat4,n=r[0],o=r[1],a=r[2],s=r[3],p=r[4],l=r[5],m=r[6],y=r[7],h=e.a,u=e.b,E=e.c,c=e.d,d=e.tx,f=e.ty;return i[0]=h*n+u*p,i[1]=h*o+u*l,i[2]=h*a+u*m,i[3]=h*s+u*y,i[4]=E*n+c*p,i[5]=E*o+c*l,i[6]=E*a+c*m,i[7]=E*s+c*y,i[8]=r[8],i[9]=r[9],i[10]=r[10],i[11]=r[11],i[12]=d*n+f*p+r[12],i[13]=d*o+f*l+r[13],i[14]=d*a+f*m+r[14],i[15]=d*s+f*y+r[15],this._dirtyId++,this}setToMult(t,e){return $y.glMatrixMat4Multiply(this.mat4,t.mat4,e.mat4),this._dirtyId++,this}prepend(t){t.mat4?this.setToMult(t,this):this.setToMultLegacy(t,this)}static glMatrixMat4Invert(t,e){const i=e[0],r=e[1],n=e[2],o=e[3],a=e[4],s=e[5],p=e[6],l=e[7],m=e[8],y=e[9],h=e[10],u=e[11],E=e[12],c=e[13],d=e[14],f=e[15],_=i*s-r*a,v=i*p-n*a,g=i*l-o*a,T=r*p-n*s,b=r*l-o*s,x=n*l-o*p,S=m*c-y*E,R=m*d-h*E,I=m*f-u*E,A=y*d-h*c,M=y*f-u*c,C=h*f-u*d;let F=_*C-v*M+g*A+T*I-b*R+x*S;return F?(F=1/F,t[0]=(s*C-p*M+l*A)*F,t[1]=(n*M-r*C-o*A)*F,t[2]=(c*x-d*b+f*T)*F,t[3]=(h*b-y*x-u*T)*F,t[4]=(p*I-a*C-l*R)*F,t[5]=(i*C-n*I+o*R)*F,t[6]=(d*g-E*x-f*v)*F,t[7]=(m*x-h*g+u*v)*F,t[8]=(a*M-s*I+l*S)*F,t[9]=(r*I-i*M-o*S)*F,t[10]=(E*b-c*g+f*_)*F,t[11]=(y*g-m*b-u*_)*F,t[12]=(s*R-a*A-p*S)*F,t[13]=(i*A-r*R+n*S)*F,t[14]=(c*v-E*T-d*_)*F,t[15]=(m*T-y*v+h*_)*F,t):null}static glMatrixMat4Multiply(t,e,i){const r=e[0],n=e[1],o=e[2],a=e[3],s=e[4],p=e[5],l=e[6],m=e[7],y=e[8],h=e[9],u=e[10],E=e[11],c=e[12],d=e[13],f=e[14],_=e[15];let v=i[0],g=i[1],T=i[2],b=i[3];return t[0]=v*r+g*s+T*y+b*c,t[1]=v*n+g*p+T*h+b*d,t[2]=v*o+g*l+T*u+b*f,t[3]=v*a+g*m+T*E+b*_,v=i[4],g=i[5],T=i[6],b=i[7],t[4]=v*r+g*s+T*y+b*c,t[5]=v*n+g*p+T*h+b*d,t[6]=v*o+g*l+T*u+b*f,t[7]=v*a+g*m+T*E+b*_,v=i[8],g=i[9],T=i[10],b=i[11],t[8]=v*r+g*s+T*y+b*c,t[9]=v*n+g*p+T*h+b*d,t[10]=v*o+g*l+T*u+b*f,t[11]=v*a+g*m+T*E+b*_,v=i[12],g=i[13],T=i[14],b=i[15],t[12]=v*r+g*s+T*y+b*c,t[13]=v*n+g*p+T*h+b*d,t[14]=v*o+g*l+T*u+b*f,t[15]=v*a+g*m+T*E+b*_,t}}$y.__initStatic(),$y.__initStatic2();const th=new $y;class eh extends Ry{constructor(t,e){super(t,e),eh.prototype.__init.call(this),eh.prototype.__init2.call(this),eh.prototype.__init3.call(this),eh.prototype.__init4.call(this),eh.prototype.__init5.call(this),eh.prototype.__init6.call(this),this.local=new $y,this.world=new $y,this.local.cacheInverse=!0,this.world.cacheInverse=!0,this.position._z=0,this.scale._z=1,this.pivot._z=0}__init(){this.cameraMatrix=null}__init2(){this._cameraMode=!1}get cameraMode(){return this._cameraMode}set cameraMode(t){this._cameraMode!==t&&(this._cameraMode=t,this.euler._sign=this._cameraMode?-1:1,this.euler._quatDirtyId++,t&&(this.cameraMatrix=new $y))}__init3(){this.position=new Ky(this.onChange,this,0,0)}__init4(){this.scale=new Ky(this.onChange,this,1,1)}__init5(){this.euler=new Qy(this.onChange,this,0,0,0)}__init6(){this.pivot=new Ky(this.onChange,this,0,0)}onChange(){this._projID++}clear(){this.cameraMatrix&&this.cameraMatrix.identity(),this.position.set(0,0,0),this.scale.set(1,1,1),this.euler.set(0,0,0),this.pivot.set(0,0,0),super.clear()}updateLocalTransform(t){if(0===this._projID)return void this.local.copyFrom(t);const e=this.local,i=this.euler,r=this.position,n=this.scale,o=this.pivot;if(i.update(),!this.cameraMode)return e.setToRotationTranslationScale(i.quaternion,r._x,r._y,r._z,n._x,n._y,n._z),e.translate(-o._x,-o._y,-o._z),void e.setToMultLegacy(t,e);e.setToMultLegacy(t,this.cameraMatrix),e.translate(o._x,o._y,o._z),e.scale(1/n._x,1/n._y,1/n._z),th.setToRotationTranslationScale(i.quaternion,0,0,0,1,1,1),e.setToMult(e,th),e.translate(-r._x,-r._y,-r._z),this.local._dirtyId++}}class ih extends pi{constructor(){super(),this.proj=new eh(this.transform)}isFrontFace(t=!1){t&&(this._recursivePostUpdateTransform(),this.displayObjectUpdateTransform());const e=this.proj.world.mat4,i=e[0]*e[15]-e[3]*e[12],r=e[1]*e[15]-e[3]*e[13],n=e[4]*e[15]-e[7]*e[12];return i*(e[5]*e[15]-e[7]*e[13])-n*r>0}getDepth(t=!1){t&&(this._recursivePostUpdateTransform(),this.displayObjectUpdateTransform());const e=this.proj.world.mat4;return e[14]/e[15]}toLocal(t,e,i,r,n=Um.ALL){return e&&(t=e.toGlobal(t,i,r)),r||this._recursivePostUpdateTransform(),n===Um.ALL?(r||this.displayObjectUpdateTransform(),this.proj.affine?this.transform.worldTransform.applyInverse(t,i):this.proj.world.applyInverse(t,i)):(this.parent?i=this.parent.worldTransform.applyInverse(t,i):(i.x=t.x,i.y=t.y,i.z=t.z),n===Um.NONE||(i=this.transform.localTransform.applyInverse(i,i),n===Um.PROJ&&this.proj.cameraMode&&(i=this.proj.cameraMatrix.applyInverse(i,i))),i)}get worldTransform(){return this.proj.affine?this.transform.worldTransform:this.proj.world}get position3d(){return this.proj.position}set position3d(t){this.proj.position.copyFrom(t)}get scale3d(){return this.proj.scale}set scale3d(t){this.proj.scale.copyFrom(t)}get euler(){return this.proj.euler}set euler(t){this.proj.euler.copyFrom(t)}get pivot3d(){return this.proj.pivot}set pivot3d(t){this.proj.pivot.copyFrom(t)}}const rh=ih.prototype.toLocal,nh=ih.prototype.getDepth,oh=ih.prototype.isFrontFace;class ah extends ih{constructor(){super(),ah.prototype.__init.call(this),ah.prototype.__init2.call(this),ah.prototype.__init3.call(this),ah.prototype.__init4.call(this),this.proj.cameraMode=!0,this.setPlanes(400,10,1e4,!1)}__init(){this._far=0}__init2(){this._near=0}__init3(){this._focus=0}__init4(){this._orthographic=!1}get far(){return this._far}get near(){return this._near}get focus(){return this._focus}get ortographic(){return this._orthographic}setPlanes(t,e=10,i=1e4,r=!1){this._focus=t,this._near=e,this._far=i,this._orthographic=r;const n=this.proj,o=n.cameraMatrix.mat4;n._projID++,o[10]=1/(i-e),o[14]=(t-e)/(i-e),this._orthographic?o[11]=0:o[11]=1/t}}class sh extends ps{constructor(t,e,i,r){super(t,e,i,r),sh.prototype.__init.call(this),this.proj=new eh(this.transform)}__init(){this.vertexData2d=null}calculateVertices(){if(this.proj._affine)return this.vertexData2d=null,void super.calculateVertices();const t=this.geometry,e=t.buffers[0].data,i=this;if(t.vertexDirtyId===i.vertexDirty&&i._transformID===i.transform._worldID)return;i._transformID=i.transform._worldID,i.vertexData.length!==e.length&&(i.vertexData=new Float32Array(e.length)),this.vertexData2d&&this.vertexData2d.length===3*e.length/2||(this.vertexData2d=new Float32Array(3*e.length));const r=this.proj.world.mat4,n=this.vertexData2d,o=i.vertexData;for(let t=0;t<o.length/2;t++){const i=e[2*t],a=e[2*t+1],s=r[0]*i+r[4]*a+r[12],p=r[1]*i+r[5]*a+r[13],l=r[3]*i+r[7]*a+r[15];n[3*t]=s,n[3*t+1]=p,n[3*t+2]=l,o[2*t]=s/l,o[2*t+1]=p/l}i.vertexDirty=t.vertexDirtyId}get worldTransform(){return this.proj.affine?this.transform.worldTransform:this.proj.world}toLocal(t,e,i,r,n=Um.ALL){return rh.call(this,t,e,i,r,n)}isFrontFace(t){return oh.call(this,t)}getDepth(t){return nh.call(this,t)}get position3d(){return this.proj.position}set position3d(t){this.proj.position.copyFrom(t)}get scale3d(){return this.proj.scale}set scale3d(t){this.proj.scale.copyFrom(t)}get euler(){return this.proj.euler}set euler(t){this.proj.euler.copyFrom(t)}get pivot3d(){return this.proj.pivot}set pivot3d(t){this.proj.pivot.copyFrom(t)}}sh.prototype._renderDefault=ky.prototype._renderDefault;class ph extends xa{constructor(t){super(t),ph.prototype.__init.call(this),ph.prototype.__init2.call(this),ph.prototype.__init3.call(this),this.proj=new eh(this.transform),this.pluginName="batch2d"}__init(){this.vertexData2d=null}__init2(){this.culledByFrustrum=!1}__init3(){this.trimmedCulledByFrustrum=!1}calculateVertices(){const t=this._texture;if(this.proj._affine)return this.vertexData2d=null,void super.calculateVertices();this.vertexData2d||(this.vertexData2d=new Float32Array(12));const e=this.transform._worldID,i=t._updateID;if(this._transformID===e&&this._textureID===i)return;this._textureID!==i&&(this.uvs=t._uvs.uvsFloat32),this._transformID=e,this._textureID=i;const r=this.proj.world.mat4,n=this.vertexData2d,o=this.vertexData,a=t.trim,s=t.orig,p=this._anchor;let l,m,y,h;a?(m=a.x-p._x*s.width,l=m+a.width,h=a.y-p._y*s.height,y=h+a.height):(m=-p._x*s.width,l=m+s.width,h=-p._y*s.height,y=h+s.height);let u,E=!1;n[0]=r[0]*m+r[4]*h+r[12],n[1]=r[1]*m+r[5]*h+r[13],u=r[2]*m+r[6]*h+r[14],n[2]=r[3]*m+r[7]*h+r[15],E=E||u<0,n[3]=r[0]*l+r[4]*h+r[12],n[4]=r[1]*l+r[5]*h+r[13],u=r[2]*l+r[6]*h+r[14],n[5]=r[3]*l+r[7]*h+r[15],E=E||u<0,n[6]=r[0]*l+r[4]*y+r[12],n[7]=r[1]*l+r[5]*y+r[13],u=r[2]*l+r[6]*y+r[14],n[8]=r[3]*l+r[7]*y+r[15],E=E||u<0,n[9]=r[0]*m+r[4]*y+r[12],n[10]=r[1]*m+r[5]*y+r[13],u=r[2]*m+r[6]*y+r[14],n[11]=r[3]*m+r[7]*y+r[15],E=E||u<0,this.culledByFrustrum=E,o[0]=n[0]/n[2],o[1]=n[1]/n[2],o[2]=n[3]/n[5],o[3]=n[4]/n[5],o[4]=n[6]/n[8],o[5]=n[7]/n[8],o[6]=n[9]/n[11],o[7]=n[10]/n[11]}calculateTrimmedVertices(){if(this.proj._affine)return void super.calculateTrimmedVertices();const t=this.transform._worldID,e=this._texture._updateID,i=this;if(i.vertexTrimmedData){if(i._transformTrimmedID===t&&this._textureTrimmedID===e)return}else i.vertexTrimmedData=new Float32Array(8);i._transformTrimmedID=t,this._textureTrimmedID=e;const r=this._texture,n=i.vertexTrimmedData,o=r.orig,a=this._anchor,s=this.proj.world.mat4,p=-a._x*o.width,l=p+o.width,m=-a._y*o.height,y=m+o.height;let h,u=!1,E=1/(s[3]*p+s[7]*m+s[15]);n[0]=E*(s[0]*p+s[4]*m+s[12]),n[1]=E*(s[1]*p+s[5]*m+s[13]),h=s[2]*p+s[6]*m+s[14],u=u||h<0,E=1/(s[3]*l+s[7]*m+s[15]),n[2]=E*(s[0]*l+s[4]*m+s[12]),n[3]=E*(s[1]*l+s[5]*m+s[13]),h=s[2]*l+s[6]*m+s[14],u=u||h<0,E=1/(s[3]*l+s[7]*y+s[15]),n[4]=E*(s[0]*l+s[4]*y+s[12]),n[5]=E*(s[1]*l+s[5]*y+s[13]),h=s[2]*l+s[6]*y+s[14],u=u||h<0,E=1/(s[3]*p+s[7]*y+s[15]),n[6]=E*(s[0]*p+s[4]*y+s[12]),n[7]=E*(s[1]*p+s[5]*y+s[13]),h=s[2]*p+s[6]*y+s[14],u=u||h<0,this.culledByFrustrum=u}_calculateBounds(){if(this.calculateVertices(),this.culledByFrustrum)return;const t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?this._bounds.addQuad(this.vertexData):(this.calculateTrimmedVertices(),this.trimmedCulledByFrustrum||this._bounds.addQuad(this.vertexTrimmedData))}_render(t){this.calculateVertices(),this.culledByFrustrum||(t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))}containsPoint(t){return!this.culledByFrustrum&&super.containsPoint(t)}get worldTransform(){return this.proj.affine?this.transform.worldTransform:this.proj.world}toLocal(t,e,i,r,n=Um.ALL){return rh.call(this,t,e,i,r,n)}isFrontFace(t){return oh.call(this,t)}getDepth(t){return nh.call(this,t)}get position3d(){return this.proj.position}set position3d(t){this.proj.position.copyFrom(t)}get scale3d(){return this.proj.scale}set scale3d(t){this.proj.scale.copyFrom(t)}get euler(){return this.proj.euler}set euler(t){this.proj.euler.copyFrom(t)}get pivot3d(){return this.proj.pivot}set pivot3d(t){this.proj.pivot.copyFrom(t)}}const lh={worldTransform:{get:function(){return this.proj.affine?this.transform.worldTransform:this.proj.world},enumerable:!0,configurable:!0},position3d:{get(){return this.proj.position},set(t){this.proj.position.copy(t)}},scale3d:{get(){return this.proj.scale},set(t){this.proj.scale.copy(t)}},pivot3d:{get(){return this.proj.pivot},set(t){this.proj.pivot.copy(t)}},euler:{get(){return this.proj.euler},set(t){this.proj.euler.copy(t)}}};function mh(){this.proj||(this.proj=new eh(this.transform),this.toLocal=ih.prototype.toLocal,this.isFrontFace=ih.prototype.isFrontFace,this.getDepth=ih.prototype.getDepth,Object.defineProperties(this,lh))}pi.prototype.convertTo3d=mh,xa.prototype.convertTo3d=function(){this.proj||(this.calculateVertices=ph.prototype.calculateVertices,this.calculateTrimmedVertices=ph.prototype.calculateTrimmedVertices,this._calculateBounds=ph.prototype._calculateBounds,this.containsPoint=ph.prototype.containsPoint,this.pluginName="batch2d",mh.call(this))},pi.prototype.convertSubtreeTo3d=function(){this.convertTo3d();for(let t=0;t<this.children.length;t++)this.children[t].convertSubtreeTo3d()},Yl.prototype.convertTo3d=Wl.prototype.convertTo3d=function(){this.proj||(this.calculateVertices=sh.prototype.calculateVertices,this._renderDefault=sh.prototype._renderDefault,"batch2d"!==this.material.pluginName&&(this.material=new ls(this.material.texture,{program:Br.from(ky.defaultVertexShader,ky.defaultFragmentShader),pluginName:"batch2d"})),mh.call(this))};class yh extends wa{constructor(t,e,i){super(t,e,i),yh.prototype.__init.call(this),this.proj=new eh(this.transform),this.pluginName="batch2d"}__init(){this.vertexData2d=null}get worldTransform(){return this.proj.affine?this.transform.worldTransform:this.proj.world}toLocal(t,e,i,r,n=Um.ALL){return rh.call(this,t,e,i,r,n)}isFrontFace(t){return oh.call(this,t)}getDepth(t){return nh.call(this,t)}get position3d(){return this.proj.position}set position3d(t){this.proj.position.copyFrom(t)}get scale3d(){return this.proj.scale}set scale3d(t){this.proj.scale.copyFrom(t)}get euler(){return this.proj.euler}set euler(t){this.proj.euler.copyFrom(t)}get pivot3d(){return this.proj.pivot}set pivot3d(t){this.proj.pivot.copyFrom(t)}}var hh;yh.prototype.calculateVertices=ph.prototype.calculateVertices,yh.prototype.calculateTrimmedVertices=ph.prototype.calculateTrimmedVertices,yh.prototype._calculateBounds=ph.prototype._calculateBounds,yh.prototype.containsPoint=ph.prototype.containsPoint,yh.prototype._render=ph.prototype._render;class uh extends $i{constructor(t=!1){super(),this._buffer=new qi(null,t,!1),this._indexBuffer=new qi(null,t,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,ot.FLOAT).addAttribute("aTrans1",this._buffer,3,!1,ot.FLOAT).addAttribute("aTrans2",this._buffer,3,!1,ot.FLOAT).addAttribute("aSamplerSize",this._buffer,2,!1,ot.FLOAT).addAttribute("aFrame",this._buffer,4,!1,ot.FLOAT).addAttribute("aColor",this._buffer,4,!0,ot.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,ot.FLOAT).addIndex(this._indexBuffer)}}const Eh=[new _e,new _e,new _e,new _e],ch=[0,0,0,0];class dh{constructor(){dh.prototype.__init.call(this),dh.prototype.__init2.call(this),dh.prototype.__init3.call(this),dh.prototype.__init4.call(this)}__init(){this.surfaceID="default"}__init2(){this._updateID=0}__init3(){this.vertexSrc=""}__init4(){this.fragmentSrc=""}fillUniforms(t){}clear(){}boundsQuad(t,e,i){let r=e[0],n=e[1],o=e[0],a=e[1];for(let t=2;t<8;t+=2)r>e[t]&&(r=e[t]),o<e[t]&&(o=e[t]),n>e[t+1]&&(n=e[t+1]),a<e[t+1]&&(a=e[t+1]);if(Eh[0].set(r,n),this.apply(Eh[0],Eh[0]),Eh[1].set(o,n),this.apply(Eh[1],Eh[1]),Eh[2].set(o,a),this.apply(Eh[2],Eh[2]),Eh[3].set(r,a),this.apply(Eh[3],Eh[3]),i)i.apply(Eh[0],Eh[0]),i.apply(Eh[1],Eh[1]),i.apply(Eh[2],Eh[2]),i.apply(Eh[3],Eh[3]),e[0]=Eh[0].x,e[1]=Eh[0].y,e[2]=Eh[1].x,e[3]=Eh[1].y,e[4]=Eh[2].x,e[5]=Eh[2].y,e[6]=Eh[3].x,e[7]=Eh[3].y;else{for(let t=1;t<=3;t++)if(Eh[t].y<Eh[0].y||Eh[t].y===Eh[0].y&&Eh[t].x<Eh[0].x){const e=Eh[0];Eh[0]=Eh[t],Eh[t]=e}for(let t=1;t<=3;t++)ch[t]=Math.atan2(Eh[t].y-Eh[0].y,Eh[t].x-Eh[0].x);for(let t=1;t<=3;t++)for(let e=t+1;e<=3;e++)if(ch[t]>ch[e]){const i=Eh[t];Eh[t]=Eh[e],Eh[e]=i;const r=ch[t];ch[t]=ch[e],ch[e]=r}if(e[0]=Eh[0].x,e[1]=Eh[0].y,e[2]=Eh[1].x,e[3]=Eh[1].y,e[4]=Eh[2].x,e[5]=Eh[2].y,e[6]=Eh[3].x,e[7]=Eh[3].y,(Eh[3].x-Eh[2].x)*(Eh[1].y-Eh[2].y)-(Eh[1].x-Eh[2].x)*(Eh[3].y-Eh[2].y)<0)return e[4]=Eh[3].x,void(e[5]=Eh[3].y)}}}const fh=new Ie,_h=new ge,vh=new _e;class gh extends dh{constructor(...t){super(...t),gh.prototype.__init.call(this)}__init(){this.distortion=new _e}clear(){this.distortion.set(0,0)}apply(t,e){e=e||new _e;const i=this.distortion,r=t.x*t.y;return e.x=t.x+i.x*r,e.y=t.y+i.y*r,e}applyInverse(t,e){e=e||new _e;const i=t.x,r=t.y,n=this.distortion.x,o=this.distortion.y;if(0===n)e.x=i,e.y=r/(1+o*i);else if(0===o)e.y=r,e.x=i/(1+n*r);else{const t=.5*(r*n-i*o+1)/o,a=t*t+i/o;if(a<=1e-5)return e.set(NaN,NaN),e;e.x=o>0?-t+Math.sqrt(a):-t-Math.sqrt(a),e.y=(i/e.x-1)/n}return e}mapSprite(t,e,i){const r=t.texture;return _h.x=-t.anchor.x*r.orig.width,_h.y=-t.anchor.y*r.orig.height,_h.width=r.orig.width,_h.height=r.orig.height,this.mapQuad(_h,e,i||t.transform)}mapQuad(t,e,i){const r=-t.x/t.width,n=-t.y/t.height,o=(1-t.x)/t.width,a=(1-t.y)/t.height,s=e[0].x*(1-r)+e[1].x*r,p=e[0].y*(1-r)+e[1].y*r,l=e[0].x*(1-o)+e[1].x*o,m=e[0].y*(1-o)+e[1].y*o,y=e[3].x*(1-r)+e[2].x*r,h=e[3].y*(1-r)+e[2].y*r,u=e[3].x*(1-o)+e[2].x*o,E=e[3].y*(1-o)+e[2].y*o,c=s*(1-n)+y*n,d=p*(1-n)+h*n,f=l*(1-n)+u*n,_=m*(1-n)+E*n,v=s*(1-a)+y*a,g=p*(1-a)+h*a,T=l*(1-a)+u*a,b=m*(1-a)+E*a,x=fh;return x.tx=c,x.ty=d,x.a=f-c,x.b=_-d,x.c=v-c,x.d=g-d,vh.set(T,b),x.applyInverse(vh,vh),this.distortion.set(vh.x-1,vh.y-1),i.setFromMatrix(x),this}fillUniforms(t){t.distortion=t.distortion||new Float32Array([0,0,0,0]);const e=Math.abs(this.distortion.x),i=Math.abs(this.distortion.y);t.distortion[0]=1e4*e<=i?0:this.distortion.x,t.distortion[1]=1e4*i<=e?0:this.distortion.y,t.distortion[2]=1/t.distortion[0],t.distortion[3]=1/t.distortion[1]}}const Th=Ge.prototype.updateTransform;function bh(t){const e=this.proj,i=t.proj;return i?i._surface?(e._activeProjection=i,this.updateLocalTransform(),this.localTransform.copyTo(this.worldTransform),void(this._parentID<0&&++this._worldID)):(Th.call(this,t),void(e._activeProjection=i._activeProjection)):(Th.call(this,t),void(e._activeProjection=null))}class xh extends xy{constructor(...t){super(...t),xh.prototype.__init.call(this),xh.prototype.__init2.call(this),xh.prototype.__init3.call(this),xh.prototype.__init4.call(this),xh.prototype.__init5.call(this)}__init(){this._surface=null}__init2(){this._activeProjection=null}set enabled(t){t!==this._enabled&&(this._enabled=t,t?(this.legacy.updateTransform=bh,this.legacy._parentID=-1):(this.legacy.updateTransform=Ge.prototype.updateTransform,this.legacy._parentID=-1))}get surface(){return this._surface}set surface(t){this._surface!==t&&(this._surface=t||null,this.legacy._parentID=-1)}applyPartial(t,e){return null!==this._activeProjection?(e=this.legacy.worldTransform.apply(t,e),this._activeProjection.surface.apply(e,e)):null!==this._surface?this.surface.apply(t,e):this.legacy.worldTransform.apply(t,e)}apply(t,e){return null!==this._activeProjection?(e=this.legacy.worldTransform.apply(t,e),this._activeProjection.surface.apply(e,e),this._activeProjection.legacy.worldTransform.apply(e,e)):null!==this._surface?(e=this.surface.apply(t,e),this.legacy.worldTransform.apply(e,e)):this.legacy.worldTransform.apply(t,e)}applyInverse(t,e){return null!==this._activeProjection?(e=this._activeProjection.legacy.worldTransform.applyInverse(t,e),this._activeProjection._surface.applyInverse(e,e),this.legacy.worldTransform.applyInverse(e,e)):null!==this._surface?(e=this.legacy.worldTransform.applyInverse(t,e),this._surface.applyInverse(e,e)):this.legacy.worldTransform.applyInverse(t,e)}mapBilinearSprite(t,e){this._surface instanceof gh||(this.surface=new gh),this.surface.mapSprite(t,e,this.legacy)}__init3(){this._currentSurfaceID=-1}__init4(){this._currentLegacyID=-1}__init5(){this._lastUniforms=null}clear(){this.surface&&this.surface.clear()}get uniforms(){return this._currentLegacyID===this.legacy._worldID&&this._currentSurfaceID===this.surface._updateID||(this._lastUniforms=this._lastUniforms||{},this._lastUniforms.translationMatrix=this.legacy.worldTransform,this._surface.fillUniforms(this._lastUniforms)),this._lastUniforms}}class Sh extends xa{constructor(t){super(t),Sh.prototype.__init.call(this),this.proj=new xh(this.transform),this.pluginName="batch_bilinear"}__init(){this.aTrans=new Ie}_calculateBounds(){this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData)}calculateVertices(){const t=this.transform._worldID,e=this._texture._updateID;if(this._transformID===t&&this._textureID===e)return;this._transformID=t,this._textureID=e;const i=this._texture,r=this.vertexData,n=i.trim,o=i.orig,a=this._anchor;let s,p,l,m;if(n?(p=n.x-a._x*o.width,s=p+n.width,m=n.y-a._y*o.height,l=m+n.height):(p=-a._x*o.width,s=p+o.width,m=-a._y*o.height,l=m+o.height),this.proj._surface)r[0]=p,r[1]=m,r[2]=s,r[3]=m,r[4]=s,r[5]=l,r[6]=p,r[7]=l,this.proj._surface.boundsQuad(r,r);else{const t=this.transform.worldTransform,e=t.a,i=t.b,n=t.c,o=t.d,a=t.tx,y=t.ty;r[0]=e*p+n*m+a,r[1]=o*m+i*p+y,r[2]=e*s+n*m+a,r[3]=o*m+i*s+y,r[4]=e*s+n*l+a,r[5]=o*l+i*s+y,r[6]=e*p+n*l+a,r[7]=o*l+i*p+y,this.proj._activeProjection&&this.proj._activeProjection.surface.boundsQuad(r,r)}i.uvMatrix||(i.uvMatrix=new Wr(i)),i.uvMatrix.update();const y=this.aTrans;y.set(o.width,0,0,o.height,p,m),null===this.proj._surface&&y.prepend(this.transform.worldTransform),y.invert(),y.prepend(i.uvMatrix.mapCoord)}calculateTrimmedVertices(){const t=this.transform._worldID,e=this._texture._updateID,i=this;if(i.vertexTrimmedData){if(i._transformTrimmedID===t&&this._textureTrimmedID===e)return}else i.vertexTrimmedData=new Float32Array(8);i._transformTrimmedID=t,this._textureTrimmedID=e;const r=this._texture,n=i.vertexTrimmedData,o=r.orig,a=this._anchor,s=-a._x*o.width,p=s+o.width,l=-a._y*o.height,m=l+o.height;if(this.proj._surface)n[0]=s,n[1]=l,n[2]=p,n[3]=l,n[4]=p,n[5]=m,n[6]=s,n[7]=m,this.proj._surface.boundsQuad(n,n,this.transform.worldTransform);else{const t=this.transform.worldTransform,e=t.a,i=t.b,r=t.c,o=t.d,a=t.tx,y=t.ty;n[0]=e*s+r*l+a,n[1]=o*l+i*s+y,n[2]=e*p+r*l+a,n[3]=o*l+i*p+y,n[4]=e*p+r*m+a,n[5]=o*m+i*p+y,n[6]=e*s+r*m+a,n[7]=o*m+i*s+y,this.proj._activeProjection&&this.proj._activeProjection.surface.boundsQuad(n,n,this.proj._activeProjection.legacy.worldTransform)}}get worldTransform(){return this.proj}}xa.prototype.convertTo2s=function(){this.proj||(this.pluginName="sprite_bilinear",this.aTrans=new Ie,this.calculateVertices=Sh.prototype.calculateVertices,this.calculateTrimmedVertices=Sh.prototype.calculateTrimmedVertices,this._calculateBounds=Sh.prototype._calculateBounds,pi.prototype.convertTo2s.call(this))},pi.prototype.convertTo2s=function(){this.proj||(this.proj=new xh(this.transform),Object.defineProperty(this,"worldTransform",{get(){return this.proj},enumerable:!0,configurable:!0}))},pi.prototype.convertSubtreeTo2s=function(){this.convertTo2s();for(let t=0;t<this.children.length;t++)this.children[t].convertSubtreeTo2s()};class Rh extends wa{constructor(t,e,i){super(t,e,i),Rh.prototype.__init.call(this),this.proj=new xh(this.transform),this.pluginName="batch_bilinear"}__init(){this.aTrans=new Ie}get worldTransform(){return this.proj}}Rh.prototype.calculateVertices=Sh.prototype.calculateVertices,Rh.prototype.calculateTrimmedVertices=Sh.prototype.calculateTrimmedVertices,Rh.prototype._calculateBounds=Sh.prototype._calculateBounds,vn.registerPlugin("batch_bilinear",class{static create(t){const{vertex:e,fragment:i,vertexSize:r,geometryClass:n}=Object.assign({vertex:"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec3 aTrans1;\nattribute vec3 aTrans2;\nattribute vec2 aSamplerSize;\nattribute vec4 aFrame;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\n\nvarying vec2 vertexPosition;\nvarying vec3 vTrans1;\nvarying vec3 vTrans2;\nvarying vec2 vSamplerSize;\nvarying vec4 vFrame;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\ngl_Position.xyw = projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0);\ngl_Position.z = 0.0;\n\nvertexPosition = aVertexPosition;\nvTrans1 = aTrans1;\nvTrans2 = aTrans2;\nvTextureId = aTextureId;\nvColor = aColor;\nvSamplerSize = aSamplerSize;\nvFrame = aFrame;\n}\n",fragment:"precision highp float;\nvarying vec2 vertexPosition;\nvarying vec3 vTrans1;\nvarying vec3 vTrans2;\nvarying vec2 vSamplerSize;\nvarying vec4 vFrame;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nuniform sampler2D uSamplers[%count%];\nuniform vec4 distortion;\n\nvoid main(void){\nvec2 surface;\nvec2 surface2;\n\nfloat vx = vertexPosition.x;\nfloat vy = vertexPosition.y;\nfloat dx = distortion.x;\nfloat dy = distortion.y;\nfloat revx = distortion.z;\nfloat revy = distortion.w;\n\nif (distortion.x == 0.0) {\nsurface.x = vx;\nsurface.y = vy / (1.0 + dy * vx);\nsurface2 = surface;\n} else\nif (distortion.y == 0.0) {\nsurface.y = vy;\nsurface.x = vx / (1.0 + dx * vy);\nsurface2 = surface;\n} else {\nfloat c = vy * dx - vx * dy;\nfloat b = (c + 1.0) * 0.5;\nfloat b2 = (-c + 1.0) * 0.5;\nfloat d = b * b + vx * dy;\nif (d < -0.00001) {\n    discard;\n}\nd = sqrt(max(d, 0.0));\nsurface.x = (- b + d) * revy;\nsurface2.x = (- b - d) * revy;\nsurface.y = (- b2 + d) * revx;\nsurface2.y = (- b2 - d) * revx;\n}\n\nvec2 uv;\nuv.x = vTrans1.x * surface.x + vTrans1.y * surface.y + vTrans1.z;\nuv.y = vTrans2.x * surface.x + vTrans2.y * surface.y + vTrans2.z;\n\nvec2 pixels = uv * vSamplerSize;\n\nif (pixels.x < vFrame.x || pixels.x > vFrame.z ||\npixels.y < vFrame.y || pixels.y > vFrame.w) {\nuv.x = vTrans1.x * surface2.x + vTrans1.y * surface2.y + vTrans1.z;\nuv.y = vTrans2.x * surface2.x + vTrans2.y * surface2.y + vTrans2.z;\npixels = uv * vSamplerSize;\n\nif (pixels.x < vFrame.x || pixels.x > vFrame.z ||\n   pixels.y < vFrame.y || pixels.y > vFrame.w) {\n   discard;\n}\n}\n\nvec4 edge;\nedge.xy = clamp(pixels - vFrame.xy + 0.5, vec2(0.0, 0.0), vec2(1.0, 1.0));\nedge.zw = clamp(vFrame.zw - pixels + 0.5, vec2(0.0, 0.0), vec2(1.0, 1.0));\n\nfloat alpha = 1.0; //edge.x * edge.y * edge.z * edge.w;\nvec4 rColor = vColor * alpha;\n\nfloat textureId = floor(vTextureId+0.5);\nvec2 vTextureCoord = uv;\nvec4 color;\n%forloop%\ngl_FragColor = color * rColor;\n}",geometryClass:uh,vertexSize:16},t);return hh=class extends Iy{constructor(t){super(t),hh.prototype.__init.call(this),hh.prototype.__init2.call(this),hh.prototype.__init3.call(this),this.shaderGenerator=new Rn(e,i),this.geometryClass=n,this.vertexSize=r}__init(){this.defUniforms={translationMatrix:new Ie,distortion:new Float32Array([0,0,1/0,1/0])}}__init2(){this.size=1e3}__init3(){this.forceMaxTextures=1}getUniforms(t){const{proj:e}=t;return null!==e.surface?e.uniforms:null!==e._activeProjection?e._activeProjection.uniforms:this.defUniforms}packInterleavedGeometry(t,e,i,r,n){const{uint32View:o,float32View:a}=e,s=r/this.vertexSize,p=t.indices,l=t.vertexData,m=t._texture._frame,y=t.aTrans,{_batchLocation:h,realWidth:u,realHeight:E,resolution:c}=t._texture.baseTexture,d=Math.min(t.worldAlpha,1),f=d<1&&t._texture.baseTexture.alphaMode?Kt(t._tintRGB,d):t._tintRGB+(255*d<<24);for(let t=0;t<l.length;t+=2)a[r]=l[t],a[r+1]=l[t+1],a[r+2]=y.a,a[r+3]=y.c,a[r+4]=y.tx,a[r+5]=y.b,a[r+6]=y.d,a[r+7]=y.ty,a[r+8]=u,a[r+9]=E,a[r+10]=m.x*c,a[r+11]=m.y*c,a[r+12]=(m.x+m.width)*c,a[r+13]=(m.y+m.height)*c,o[r+14]=f,a[r+15]=h,r+=16;for(let t=0;t<p.length;t++)i[n++]=s+p[t]}},hh}}.create({}));var Ih=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ah=function(t,e,i,r){return new(i||(i=Promise))((function(n,o){function a(t){try{p(r.next(t))}catch(t){o(t)}}function s(t){try{p(r.throw(t))}catch(t){o(t)}}function p(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}p((r=r.apply(t,e||[])).next())}))},Mh=function(t,e){var i,r,n,o,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,r&&(n=2&o[0]?r.return:o[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,o[1])).done)return n;switch(r=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((n=(n=a.trys).length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){a.label=o[1];break}if(6===o[0]&&a.label<n[1]){a.label=n[1],n=o;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(o);break}n[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{i=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Ch=function(t){function e(){var e=t.call(this,{card:null,turn:1})||this;e.layout={width:0,height:0,card:{width:344,height:480,radius:32,dxy:3}};var i=e.layout.card,r=i.width,n=i.height,o=i.radius,a=i.dxy,s=r-2*a,p=n-2*a,l=o-a;e.addGraphics().beginFill(8947848).drawRoundedRect(-r/2,-n/2,r,n,o).beginHole().drawRoundedRect(-s/2,-p/2,s,p,l),e.addGraphics().beginFill(im.BLACK.i32).drawRoundedRect(-s/2,-p/2,s,p,l).alpha=.7;var m=e.addSprite({anchor:.5,tint:im.fromHex(3355477),texture:ji.from("assets/IconUp_00.png")}),y=new ah;y.setPlanes(1e3,10,1e4),e.addChild(y),e.cardRoot=new ih,y.addChild(e.cardRoot);var h=e.addSprite({parent:e.cardRoot,anchor:.5,width:e.layout.card.width,height:e.layout.card.height,scale:0,texture:ji.from("assets/MngCardSleeve_Default.png")});h.convertSubtreeTo3d();var u=e.addComponent(new Ty,{parent:e.cardRoot,anchor:.5});u.ui.convertSubtreeTo3d(),e.toggleSleeve=function(t){u.scale.set(t?0:1),h.scale.set(t?1:0)};var E=function(){var t=e.props.card.value,i=e.props.turn.value;null!=t?(u.visible=!0,u.update({card:t,turn:i})):u.visible=!1};e.props.card.onUpdate(E),e.props.turn.onUpdate(E);var c=0,d=function(t){var e=t-c;c=t,m.angle+=180*e/1e3,window.requestAnimationFrame(d)};return window.requestAnimationFrame(d),e}return Ih(e,t),e.prototype.uiSelectCard=function(t){return Ah(this,void 0,void 0,(function(){var e=this;return Mh(this,(function(i){switch(i.label){case 0:return this.toggleSleeve(!0),this.update({card:t}),[4,this.addAnimation((function(t){var i=rm.EASE_OUT_BACK.apply(t);e.cardRoot.x=0,e.cardRoot.y=rm.LINEAR.interpolate(100,0,i),e.cardRoot.alpha=rm.LINEAR.interpolate(0,1,t)})).play(.25)];case 1:return i.sent(),[2]}}))}))},e.prototype.uiShowCard=function(t){return Ah(this,void 0,void 0,(function(){var e,i,r,n=this;return Mh(this,(function(o){switch(o.label){case 0:return null!=t&&this.update({card:t}),e=this.addAnimation((function(t){n.cardRoot.euler.y=Math.PI/2*t})),i=this.addAnimation((function(t){n.cardRoot.euler.y=-Math.PI/2*(1-t)})),r=.05,this.cardRoot.position.set(0),this.cardRoot.alpha=1,this.toggleSleeve(!0),[4,e.play(r)];case 1:return o.sent(),this.toggleSleeve(!1),[4,i.play(r)];case 2:return o.sent(),[2]}}))}))},e.prototype.uiHideCard=function(){return Ah(this,void 0,void 0,(function(){var t=this;return Mh(this,(function(e){switch(e.label){case 0:return this.toggleSleeve(!1),[4,this.addAnimation((function(e){var i=e;t.cardRoot.x=rm.LINEAR.interpolate(0,50,i),t.cardRoot.y=0,t.cardRoot.alpha=rm.LINEAR.interpolate(1,0,e)})).play(.25)];case 1:return e.sent(),[2]}}))}))},e}(mm),Fh=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Nh=function(t,e,i,r){return new(i||(i=Promise))((function(n,o){function a(t){try{p(r.next(t))}catch(t){o(t)}}function s(t){try{p(r.throw(t))}catch(t){o(t)}}function p(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}p((r=r.apply(t,e||[])).next())}))},Oh=function(t,e){var i,r,n,o,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,r&&(n=2&o[0]?r.return:o[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,o[1])).done)return n;switch(r=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((n=(n=a.trys).length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){a.label=o[1];break}if(6===o[0]&&a.label<n[1]){a.label=n[1],n=o;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(o);break}n[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{i=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},wh=function(t){function e(){var e=t.call(this,{value:0})||this;e.layout={width:0,height:0};var i=e.addShader("uniform vec3 uColorPrimary;\r\nuniform vec3 uColorSecondary;\r\n\r\nvoid main() {\r\n  vec4 v = texture2D(uSampler, vTextureCoord);\r\n  vec3 color = mix(uColorSecondary, uColorPrimary, v.x);\r\n  gl_FragColor = vec4(color, 1.0) * v.a;\r\n}",{uColorPrimary:im.fromHex(8618630).rgb01,uColorSecondary:im.fromHex(7565683).rgb01}),r=e.addContainer();e.addGraphics({parent:r,x:4,y:4}).beginFill(im.BLACK.i32).drawCircle(0,0,90).alpha=.2;var n=e.addContainer({parent:r,filters:[i]});e.addGraphics({parent:n}).beginFill(im.WHITE.i32).drawCircle(0,0,90),e.addSprite({parent:n,anchor:.5,x:-5.8,y:20,width:170,height:57,angle:-6,texture:ji.from("assets/GftImage_44.png")}),e.addSprite({parent:n,anchor:.5,x:-18,y:41.6,width:120,height:288*.3,tint:im.fromHex(526344),texture:ji.from("assets/GftVsResult_02.png")}),e.addSprite({parent:n,anchor:.5,x:19,y:-34,angle:-165.5,width:181.8,height:57.6,texture:ji.from("assets/GftImage_32.png")});var o=e.addText({parent:r,anchor:.5,x:0,y:-54,text:"Turns Left",style:{fill:im.fromHex(13684944).i32,fontFamily:"Splatoon",fontSize:28}});e.castShadow(o,{x:1,y:1,alpha:.2});var a=e.addText({parent:r,anchor:.5,x:0,y:0,text:"0",style:{fontFamily:"Splatoon",fontSize:76}});return e.castShadow(a,{x:5,y:5,alpha:.2}),e.props.value.onUpdate((function(t){a.style.fill=t<=3?im.fromHex(15747123).i32:im.WHITE.i32,a.text="".concat(t)})),e.updateFn=function(t){return Nh(e,void 0,void 0,(function(){var e,i,n,o,s,p,l,m,y=this;return Oh(this,(function(h){switch(h.label){case 0:return e=.05,i=.2,n=.4,o=this.addAnimation((function(t){a.y=0,r.scale.set(rm.LINEAR.interpolate(1,1.2,t))})),s=this.addAnimation((function(t){var e=rm.EASE_OUT_CUBIC.apply(t);a.y=rm.LINEAR.interpolate(0,-20,e)})),p=this.addAnimation((function(t){var e=rm.EASE_IN_CUBIC.apply(t);a.y=rm.LINEAR.interpolate(-20,0,e)})),l=this.addAnimation((function(t){a.y=0,r.scale.set(rm.LINEAR.interpolate(1.2,1,t))})),m=function(t){return Nh(y,void 0,void 0,(function(){return Oh(this,(function(e){switch(e.label){case 0:return[4,this.addAnimation().play(t)];case 1:return[2,e.sent()]}}))}))},[4,o.play(i)];case 1:case 4:return h.sent(),[4,m(n)];case 2:return h.sent(),[4,s.play(e)];case 3:return h.sent(),this.update({value:t}),[4,p.play(e)];case 5:return h.sent(),[4,l.play(i)];case 6:return h.sent(),[2]}}))}))},e}return Fh(e,t),e.prototype.uiUpdate=function(t){return Nh(this,void 0,void 0,(function(){return Oh(this,(function(e){switch(e.label){case 0:return[4,this.updateFn(t)];case 1:return e.sent(),[2]}}))}))},e}(mm),Ph=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Gh=function(t,e,i,r){return new(i||(i=Promise))((function(n,o){function a(t){try{p(r.next(t))}catch(t){o(t)}}function s(t){try{p(r.throw(t))}catch(t){o(t)}}function p(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}p((r=r.apply(t,e||[])).next())}))},Dh=function(t,e){var i,r,n,o,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,r&&(n=2&o[0]?r.return:o[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,o[1])).done)return n;switch(r=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((n=(n=a.trys).length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){a.label=o[1];break}if(6===o[0]&&a.label<n[1]){a.label=n[1],n=o;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(o);break}n[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{i=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Lh=function(t){function e(){var e,i=t.call(this,{bgTint:im.fromHex(4733091)})||this;i.layout={width:1920,height:1080,board:{x:194,y:-16,width:768,height:1040},szMeter:{x:-320,y:-5,inks:[{x:-18,y:80,width:360,scale:1,angle:-25,alpha:.8,tint:Ym.Player1.primary,img:"assets/Ink_04.png"},{x:42,y:-120,width:360,scale:-1,alpha:.8,tint:Ym.Player2.primary,img:"assets/Ink_02.png"}]},turnMeter:{x:-300,y:-350},hand:{x:-683,y:-52,width:600,height:660},card:{x:772,y:-27,p1:{x:0,y:300},p2:{x:0,y:-300}}};var r=i.addContainer({x:i.layout.width/2,y:i.layout.height/2});i.board=i.addComponent(new ty,{parent:r,anchor:.5,x:i.layout.board.x,y:i.layout.board.y,scale:{width:i.layout.board.width,height:i.layout.board.height}}),i.board.onPlayerInput((function(t,e){if(e){var r=i.controller.state.board.move([t]),n=r.spaceCount1,o=r.spaceCount2;i.szMeter.update({preview:!0,preview1:n,preview2:o})}else i.szMeter.update({preview:!1})})),i.szMeter=i.addComponent(new vy,{parent:r,x:i.layout.szMeter.x,y:i.layout.szMeter.y}),i.hand=i.addComponent(new py,{parent:r,anchor:.5,x:i.layout.hand.x,y:i.layout.hand.y,scale:{width:i.layout.hand.width,height:i.layout.hand.height}}),i.hand.onSelectCard(i.onSelectCard.bind(i));var n=i.addContainer({parent:r,x:i.layout.card.x,y:i.layout.card.y});return n.scale.set(.85),e=[i.layout.card.p1,i.layout.card.p2].map((function(t){return i.addComponent(new Ch,{parent:n,x:t.x,y:t.y})})),i.card1=e[0],i.card2=e[1],i.card2.update({turn:-1}),i.overlay=i.addSprite({parent:r,anchor:.5,width:i.layout.width,height:i.layout.height,tint:im.BLACK,texture:ji.WHITE,alpha:0}),i.turnMeter=i.addComponent(new wh,{parent:r,anchor:.5,x:i.layout.turnMeter.x,y:i.layout.turnMeter.y}),i.spCutInAnim=new my,i.spCutInAnim.scaleToFit(i.layout.width,i.layout.height),i.addChild(i.spCutInAnim),i}return Ph(e,t),e.prototype.reset=function(t){this.controller=Im.fromGameRecord(t);var e=this.controller.state;this.board.uiReset(e.board),this.szMeter.update({value1:e.board.spaceCount1,value2:e.board.spaceCount2})},e.prototype.run=function(){return Gh(this,void 0,void 0,(function(){var t,e,i,r,n=this;return Dh(this,(function(o){switch(o.label){case 0:return t=this.controller.state,this.hand.update({cards:t.player1.hand.slice()}),this.overlay.visible=!1,[4,this.turnMeter.update({value:12})];case 1:o.sent(),e=function(t){var e,r,o,a,s,p,l,m,y,h,u,E;return Dh(this,(function(c){switch(c.label){case 0:return[4,i.getInputs()];case 1:return e=c.sent(),r=e[0],o=e[1],a=i.controller.state,s=i.controller.move(r,o),p=function(t){return Gh(n,void 0,void 0,(function(){return Dh(this,(function(e){return[2,this.addAnimation().play(t)]}))}))},l=.75,i.szMeter.update({preview:!1}),[4,i.spCutInAnim.uiPlay(s.player1.card,s.player2.card)];case 2:return c.sent(),i.hand.uiResetSelection(),[4,Promise.all([i.card1.uiShowCard(s.player1.card),i.card2.uiShowCard(s.player2.card)])];case 3:c.sent(),m=0,y=s.cardPlacements,c.label=4;case 4:return m<y.length?(h=y[m],[4,p(l)]):[3,8];case 5:return c.sent(),[4,i.board.uiPlaceCards(h)];case 6:c.sent(),c.label=7;case 7:return m++,[3,4];case 8:return s.board.specialPoints1==a.board.specialPoints1&&s.board.specialPoints2==a.board.specialPoints2?[3,10]:[4,p(l)];case 9:c.sent(),i.board.uiUpdateFire(),c.label=10;case 10:return[4,p(l)];case 11:return c.sent(),[4,i.szMeter.uiUpdate(s.board.spaceCount1,s.board.spaceCount2)];case 12:return c.sent(),[4,Promise.all([i.hand.uiDrawCard(s.player1.hand[r.handId],r.handId),i.card1.uiHideCard(),i.card2.uiHideCard()])];case 13:return c.sent(),u=i.addAnimation((function(t){n.overlay.alpha=rm.LINEAR.interpolate(0,.5,t)})),E=i.addAnimation((function(t){n.overlay.alpha=rm.LINEAR.interpolate(.5,0,t)})),i.overlay.visible=!0,[4,Promise.all([u.play(.2).then((function(){return n.addAnimation().play(1)})).then((function(){return E.play(.2)})),i.turnMeter.uiUpdate(t-1)])];case 14:return c.sent(),i.overlay.visible=!1,[2]}}))},i=this,r=12,o.label=2;case 2:return r>0?[5,e(r)]:[3,5];case 3:o.sent(),o.label=4;case 4:return--r,[3,2];case 5:return[2]}}))}))},e.prototype.getInputs=function(){var t=this.getValidPlayerInput(),e=this.getRivalInput();return Promise.all([t,e])},e.prototype.getRivalInput=function(){return Gh(this,void 0,void 0,(function(){var t,e;return Dh(this,(function(i){switch(i.label){case 0:return[4,this.addAnimation().play(.5)];case 1:return i.sent(),t={type:"discard",handId:0},e=this.controller.state,[4,this.card2.uiSelectCard(e.player2.hand[t.handId])];case 2:return i.sent(),[2,t]}}))}))},e.prototype.getValidPlayerInput=function(){return Gh(this,void 0,void 0,(function(){var t,e,i;return Dh(this,(function(r){switch(r.label){case 0:this.board.update({input:{card:null,rotation:0,pointer:null,isSpecialAttack:!1}}),e=this.controller.state,r.label=1;case 1:return[4,this.getPlayerInput()];case 2:if(t=r.sent(),e.isValidMovement(1,t))return[3,4];console.log("invalid movement:",t),r.label=3;case 3:return[3,1];case 4:return console.log(t),i=e.player1.hand[t.handId],this.board.update({input:null}),[4,this.card1.uiSelectCard(i)];case 5:return r.sent(),[2,t]}}))}))},e.prototype.getPlayerInput=function(){return Gh(this,void 0,void 0,(function(){var t,e,i,r,n,o;return Dh(this,(function(a){switch(a.label){case 0:return[4,this.board.receive("player.input")];case 1:return t=a.sent(),e=this.board.props.input.value,i=e.handId,r=e.isSpecialAttack,n=t.rotation,o=t.position,[2,{type:r?"special":"trivial",handId:i,params:{rotation:n,position:o}}]}}))}))},e.prototype.onSelectCard=function(t){var e=this.board.props.input.value;if(null!=e){var i=this.controller.state.player1.hand[t];this.board.update({input:Object.assign({},e,{handId:t,card:i})}),this.card1.update({card:i})}},e.prototype.onScroll=function(t){var e=this.board.props.input.value;if(null!=e){var i=((e.rotation+t.deltaY/100)%4+4)%4;this.board.update({input:Object.assign({},e,{rotation:i})})}},e}(Ey),Uh=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Bh=function(t){function e(){var e=t.call(this)||this;return e.velocity=3.5,e.wavelength=.2,e.amplitude=e.wavelength/(2*Math.PI),e.layout={width:1280,height:720},e.shader=e.addShader("uniform float uVelocity;\r\nuniform float uWavelength;\r\nuniform float uAmplitude;\r\nuniform float uPhase;\r\nuniform float uTime;\r\nuniform vec3 uColorPrimary;\r\nuniform vec3 uColorSecondary;\r\nuniform sampler2D uThunderPattern;\r\n\r\nconst float PI = 3.141592654;\r\n\r\nfloat wavey() {\r\n  float x = vVertexPosition.x * 2.0 * PI / uWavelength;\r\n  float y = uAmplitude * (sin(x) - 1.0) + uTime * uVelocity;\r\n  return y;\r\n}\r\n\r\nvec3 thunder() {\r\n  float ratio = inputSize.x / inputSize.y;\r\n  vec2 scale = vec2(ratio, 1.0) * 2.0;\r\n  vec3 v = texture2D(uThunderPattern, vVertexPosition * scale).rgb;\r\n  v = mix(uColorSecondary, uColorPrimary, v);\r\n  return v;\r\n}\r\n\r\nvec4 phase0() {\r\n  if (vVertexPosition.y > wavey()) {\r\n    return vec4(0.0);\r\n  } else {\r\n    return vec4(thunder(), 1.0);\r\n  }\r\n}\r\n\r\nvec4 phase1() {\r\n  return vec4(thunder(), 1.0);\r\n}\r\n\r\nvec4 phase2() {\r\n  if (vVertexPosition.y < wavey()) {\r\n    return vec4(0.0);\r\n  } else {\r\n    return vec4(thunder(), 1.0);\r\n  }\r\n}\r\n\r\nvoid main() {\r\n  if (uPhase < 0.5) {\r\n    gl_FragColor = phase0();\r\n  }\r\n  else if (uPhase < 1.5) {\r\n    gl_FragColor = phase1();\r\n  }\r\n  else {\r\n    gl_FragColor = phase2();\r\n  }\r\n}\r\n",{uVelocity:e.velocity,uWavelength:e.wavelength,uAmplitude:e.amplitude,uPhase:0,uTime:0,uColorPrimary:[.21,.14,.45],uColorSecondary:[.22,.15,.46],uThunderPattern:ji.from("assets/thunder_pattern.png",{wrapMode:pt.REPEAT})}),e.bg.filters=[e.shader],e}return Uh(e,t),e.prototype.play=function(t){var e,i=this,r=new Promise((function(t){e=t})),n=!1,o=null,a=null,s=function(e){i.shader.uniforms.uPhase=0,null==a&&(a=e),e=(e-a)/1e3,i.shader.uniforms.uTime=e,e*i.velocity>1.1+2*i.amplitude?window.requestAnimationFrame((function(e){t().then((function(t){n=!0,o=t})),p(e)})):window.requestAnimationFrame(s)},p=function(t){i.shader.uniforms.uPhase=1,n?(a=null,window.requestAnimationFrame(l)):window.requestAnimationFrame(p)},l=function(t){i.shader.uniforms.uPhase=2,null==a&&(a=t),t=(t-a)/1e3,i.shader.uniforms.uTime=t,t*i.velocity>1.1+2*i.amplitude?window.requestAnimationFrame((function(){e(o)})):window.requestAnimationFrame(l)};return window.requestAnimationFrame(s),r},e}(Ey);function kh(t){const e=/\s*([a-z\-]+)\s*:\s*((?:[^;]*url\(.*?\)[^;]*|[^;]*)*)\s*(?:;|$)/gi,i={};let r;for(;r=e.exec(t);)i[r[1].toLowerCase()]=r[2];return i}function Hh(t){let e="";const i=Object.keys(t).sort();for(let r=0;r<i.length;r++)e+=` ${i[r]}: ${t[i[r]]};`;return e.substring(1)}function Xh(t,e){return null!=t?t:e()}function jh(t){let e,i=t[0],r=1;for(;r<t.length;){const n=t[r],o=t[r+1];if(r+=2,("optionalAccess"===n||"optionalCall"===n)&&null==i)return;"access"===n||"optionalAccess"===n?(e=i,i=o(i)):"call"!==n&&"optionalCall"!==n||(i=o(((...t)=>i.call(e,...t))),e=void 0)}return i}class Wh{static __initStatic(){this.supportedFontExtensions=["ttf","otf","woff","woff2"]}static add(...t){if(!document.fonts||!FontFace||!Promise)throw new Error("WebfontLoaderPlugin relies heavily on Promises and the FontFace API and your browser doesn't support them.");io.setExtensionLoadType("css",io.LOAD_TYPE.XHR),io.setExtensionXhrType("css",io.XHR_RESPONSE_TYPE.TEXT),io.setExtensionLoadType("ttf",io.LOAD_TYPE.XHR),io.setExtensionXhrType("ttf",io.XHR_RESPONSE_TYPE.BUFFER);for(const t of Wh.supportedFontExtensions)io.setExtensionLoadType(t,io.LOAD_TYPE.XHR),io.setExtensionXhrType(t,io.XHR_RESPONSE_TYPE.BUFFER)}static use(t,e){t.extension.endsWith("css")||t.extension.endsWith("css2")?Wh.loadFromCSS(t).finally((()=>e())):Wh.supportedFontExtensions.some((e=>t.extension.endsWith(e)))?Wh.loadFromBuffer(t).finally((()=>e())):e()}static __initStatic2(){this.waitFont=async(t,e,i)=>{const r=Xh(t["font-style"],(()=>"")),n=Xh(t["font-weight"],(()=>"")),o=Xh(t["font-stretch"],(()=>"")),a=t["font-family"];i=i||1/0;let s=(new Date).getTime();const p=s,l=[r,n,o,"100px",a].join(" ");let m=0;do{if(m=(await document.fonts.load(l,e)).length,m>0)return;await new Promise((t=>setTimeout(t,16))),s=(new Date).getTime()}while(s-p<i);console.warn(`Error loading font! Your font ${t["font-family"]} timed out after ${i}ms`)}}static loadFromCSS(t){const e=document.createElement("link");e.rel="stylesheet",e.type="text/css",e.href=t.url,document.head.appendChild(e);const i=function(t){const e=/([\s\S]+?)\{([\s\S]*?)\}/gi,i=[];let r,n;for(t=t.replace(/\/\*[\s\S]*?\*\//g,"");n=e.exec(t);){const t=kh(n[2].trim());t.cssText=Hh(t),r={selectorText:n[1].trim().replace(/\s*\,\s*/,", "),style:t,cssText:""},r.cssText=`${r.selectorText} { ${r.style.cssText} }`,i.push(r)}return i}(t.data),r=[],n=[],o=jh([t,"access",t=>t.metadata,"optionalAccess",t=>t.font,"optionalAccess",t=>t.testString]),a=Xh(jh([t,"access",t=>t.metadata,"optionalAccess",t=>t.font,"optionalAccess",t=>t.timeout]),(()=>t.timeout));for(const t of i)"string"==typeof t.style["font-family"]&&(r.push(Wh.waitFont(t.style,o,a)),n.push({fontFamily:t.style["font-family"].replace(/['|"]/gi,""),fontStyle:t.style["font-style"],fontWeight:t.style["font-weight"]}));return t.styles=n,Promise.all(r)}static loadFromBuffer(t){const e=Xh(jh([t,"access",t=>t.metadata,"optionalAccess",t=>t.font,"optionalAccess",t=>t.family]),(()=>t.name));return document.fonts.add(new FontFace(e,t.data,jh([t,"access",t=>t.metadata,"optionalAccess",t=>t.font]))),t.styles=[{fontFamily:e.replace(/['|"]/gi,""),fontStyle:jh([t,"access",t=>t.metadata,"optionalAccess",t=>t.font,"optionalAccess",t=>t.style]),fontWeight:jh([t,"access",t=>t.metadata,"optionalAccess",t=>t.font,"optionalAccess",t=>t.weight])}],Wh.waitFont({"font-family":e,"font-stretch":jh([t,"access",t=>t.metadata,"optionalAccess",t=>t.font,"optionalAccess",t=>t.stretch]),"font-style":jh([t,"access",t=>t.metadata,"optionalAccess",t=>t.font,"optionalAccess",t=>t.style]),"font-weight":jh([t,"access",t=>t.metadata,"optionalAccess",t=>t.font,"optionalAccess",t=>t.weight])},jh([t,"access",t=>t.metadata,"optionalAccess",t=>t.font,"optionalAccess",t=>t.testString]),Xh(jh([t,"access",t=>t.metadata,"optionalAccess",t=>t.font,"optionalAccess",t=>t.timeout]),(()=>t.timeout)))}}Wh.__initStatic(),Wh.__initStatic2();po.registerPlugin(Wh),po.shared.add({name:"Splatoon",url:"assets/fonts/Splatoon1.otf"});var Vh=new dm(document.body),Yh=new Bh,zh=new Lh;po.shared.onComplete.once((function(){Vh.wait(Yh,(function(){return t=void 0,e=void 0,r=function(){return function(t,e){var i,r,n,o,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,r&&(n=2&o[0]?r.return:o[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,o[1])).done)return n;switch(r=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((n=(n=a.trys).length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){a.label=o[1];break}if(6===o[0]&&a.label<n[1]){a.label=n[1],n=o;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(o);break}n[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{i=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(t){return zh.reset({board:6,decks:[[33,159,92,25,30,52,65,50,66,64,53,58,28,74,69],[86,110,105,161,53,118,125,69,109,20,143,44,12,113,75]]}),Vh.run(zh),[2]}))},new((i=void 0)||(i=Promise))((function(n,o){function a(t){try{p(r.next(t))}catch(t){o(t)}}function s(t){try{p(r.throw(t))}catch(t){o(t)}}function p(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}p((r=r.apply(t,e||[])).next())}));var t,e,i,r}))})),po.shared.load()})()})();
//# sourceMappingURL=iframe.js.map